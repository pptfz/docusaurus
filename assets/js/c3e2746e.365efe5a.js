"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7258],{37268:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>o,frontMatter:()=>i,metadata:()=>d,toc:()=>x});var r=s(74848),c=s(28453);const i={},l="expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f",d={id:"linux/shell/expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f",title:"expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f",description:"[toc]",source:"@site/docs/linux/shell/expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f.md",sourceDirName:"linux/shell",slug:"/linux/shell/expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f",permalink:"/docs/linux/shell/expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u589e\u52a0\u4e00\u4e2aflat\u7f51\u7edc",permalink:"/docs/linux/openstack/rocky/\u589e\u52a0\u4e00\u4e2aflat\u7f51\u7edc"},next:{title:"shell\u4ea7\u751f\u968f\u673a\u6570\u65b9\u6cd5",permalink:"/docs/linux/shell/shell\u4ea7\u751f\u968f\u673a\u6570\u65b9\u6cd5"}},t={},x=[{value:"1.expect\u7b80\u4ecb",id:"1expect\u7b80\u4ecb",level:2},{value:"2.expect\u7b80\u5355\u4f7f\u7528\u793a\u4f8b",id:"2expect\u7b80\u5355\u4f7f\u7528\u793a\u4f8b",level:2},{value:"3.expect\u7a0b\u5e8f\u81ea\u52a8\u4ea4\u4e92\u7684\u91cd\u8981\u547d\u4ee4",id:"3expect\u7a0b\u5e8f\u81ea\u52a8\u4ea4\u4e92\u7684\u91cd\u8981\u547d\u4ee4",level:2},{value:"3.1 spawn\u547d\u4ee4",id:"31-spawn\u547d\u4ee4",level:3},{value:"3.2 expect\u547d\u4ee4",id:"32-expect\u547d\u4ee4",level:3},{value:"3.2.1 expect\u547d\u4ee4\u8bf4\u660e",id:"321-expect\u547d\u4ee4\u8bf4\u660e",level:4},{value:"3.2.2 expect\u547d\u4ee4\u5b9e\u8df5",id:"322-expect\u547d\u4ee4\u5b9e\u8df5",level:3},{value:"3.2.2.1 \u5b9e\u8df5\u793a\u4f8b1",id:"3221-\u5b9e\u8df5\u793a\u4f8b1",level:5},{value:"3.2.2.2 \u5b9e\u8df5\u793a\u4f8b2",id:"3222-\u5b9e\u8df5\u793a\u4f8b2",level:5},{value:"3.3 send\u547d\u4ee4",id:"33-send\u547d\u4ee4",level:3},{value:"3.4 exp_continue\u547d\u4ee4",id:"34-exp_continue\u547d\u4ee4",level:3},{value:"3.5 send_user\u547d\u4ee4",id:"35-send_user\u547d\u4ee4",level:3},{value:"3.6 exit\u547d\u4ee4",id:"36-exit\u547d\u4ee4",level:3},{value:"3.7 expect\u5e38\u7528\u547d\u4ee4\u603b\u7ed3",id:"37-expect\u5e38\u7528\u547d\u4ee4\u603b\u7ed3",level:3},{value:"4.expect\u7a0b\u5e8f\u53d8\u91cf",id:"4expect\u7a0b\u5e8f\u53d8\u91cf",level:2},{value:"4.1 \u666e\u901a\u53d8\u91cf",id:"41-\u666e\u901a\u53d8\u91cf",level:3},{value:"4.2 \u7279\u6b8a\u53c2\u6570\u53d8\u91cf",id:"42-\u7279\u6b8a\u53c2\u6570\u53d8\u91cf",level:3},{value:"5.expect\u7a0b\u5e8f\u4e2d\u7684if\u6761\u4ef6\u8bed\u53e5",id:"5expect\u7a0b\u5e8f\u4e2d\u7684if\u6761\u4ef6\u8bed\u53e5",level:2},{value:"6.expect\u4e2d\u7684\u5173\u952e\u5b57",id:"6expect\u4e2d\u7684\u5173\u952e\u5b57",level:2},{value:"6.1 eof\u5173\u952e\u5b57",id:"61-eof\u5173\u952e\u5b57",level:3},{value:"6.2 timeout\u5173\u952e\u5b57",id:"62-timeout\u5173\u952e\u5b57",level:3},{value:"7.expect\u7efc\u5408\u793a\u4f8b",id:"7expect\u7efc\u5408\u793a\u4f8b",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"[toc]"}),"\n",(0,r.jsx)(n.h1,{id:"expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f",children:"expect\u81ea\u52a8\u5316\u4ea4\u4e92\u5f0f\u7a0b\u5e8f"}),"\n",(0,r.jsx)(n.h2,{id:"1expect\u7b80\u4ecb",children:"1.expect\u7b80\u4ecb"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ec0\u4e48\u662fexpect"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"expect\u662f\u4e00\u4e2a\u7528\u6765\u5b9e\u73b0\u81ea\u52a8\u4ea4\u4e92\u529f\u80fd\u7684\u8f6f\u4ef6\u5957\u4ef6(expect is a software suite for automating interactive tools)\uff0c\u662f\u57fa\u4e8eTCL\u7684\u811a\u672c\u7f16\u7a0b\u5de5\u5177\u8bed\u8a00\uff0c\u65b9\u4fbf\u5b66\u4e60\uff0c\u529f\u80fd\u5f3a\u5927"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528expect"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"linux\u4e2d\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u6216\u7a0b\u5e8f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4ee5\u4ea4\u4e92\u5f0f\u7684\u5f62\u5f0f\u8981\u6c42\u8f93\u5165\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u4e4b\u540e\u624d\u80fd\u7ee7\u7eed\u6267\u884c\u547d\u4ee4\uff0c\u5982\u679c\u5728shell\u811a\u672c\u4e2d\uff0c\u8fd9\u6837\u5c31\u4e0d\u80fd\u5b9e\u73b0\u811a\u672c\u5b8c\u5168\u81ea\u52a8\u5316\u6267\u884c\uff0c\u56e0\u6b64\u9700\u8981\u7528\u5230expect\u81ea\u52a8\u5316\u4ea4\u4e92"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"linux\u4ea4\u4e92\u5f0f\u64cd\u4f5c\u7684\u573a\u666f"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"#\u4fee\u6539\u7528\u6237\u5bc6\u7801\n$ passwd \nChanging password for user root.\nNew password: \n\n#ssh\u8fde\u63a5\u670d\u52a1\u5668\n$ ssh root@10.0.0.10\nroot@10.0.0.10's password:\n\n#\u751f\u6210ssh\u5bc6\u94a5\nssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa):\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"expect\u81ea\u52a8\u4ea4\u4e92\u5de5\u4f5c\u6d41\u7a0b"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"spawn\u542f\u52a8\u6307\u5b9a\u8fdb\u7a0b---\x3eexpect\u83b7\u53d6\u671f\u5f85\u7684\u5173\u952e\u5b57---\x3esend\u5411\u6307\u5b9a\u8fdb\u7a0b\u53d1\u9001\u6307\u5b9a\u5b57\u7b26---\x3e\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\uff0c\u9000\u51fa\u7ed3\u675f"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"2expect\u7b80\u5355\u4f7f\u7528\u793a\u4f8b",children:"2.expect\u7b80\u5355\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a\u514d\u4ea4\u4e92ssh\u8fde\u63a5\u670d\u52a1\u5668"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5148\u624b\u52a8\u4ea4\u4e92ssh\u8fde\u63a5\u4e00\u53f0\u670d\u52a1\u5668"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ ssh root@10.0.0.33\nThe authenticity of host '10.0.0.33 (10.0.0.33)' can't be established.\nECDSA key fingerprint is SHA256:wrYIb1Ou6Yjp70e/3Tz9LSkjNBkW9flmmZjN80wwufU.\nECDSA key fingerprint is MD5:34:61:48:e5:71:3c:11:a0:53:ea:73:e9:4c:cd:e0:ea.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '10.0.0.33' (ECDSA) to the list of known hosts.\nroot@10.0.0.33's password: \n\nLast login: Sun May 16 23:13:49 2021 from 10.0.0.2\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5b89\u88c5expect"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"yum -y install expect\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91expect\u811a\u672c"})}),"\n",(0,r.jsxs)(n.p,{children:["\u811a\u672c\u5f00\u5934\u7684",(0,r.jsx)(n.code,{children:"#!/usr/bin/expect"}),"\u662f\u811a\u672c\u5f00\u5934\u89e3\u6790\u5668\uff0c\u548cshell\u7c7b\u4f3c\uff0c\u8868\u793a \u7a0b\u5e8f\u4f7f\u7528expect\u89e3\u6790"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'#\u6269\u5c55\u540d\u4f7f\u7528.exp\u4ee3\u8868\u662fexpect\u811a\u672c\ncat >test.exp <<\'EOF\'\n#!/usr/bin/expect\n\n#\u6267\u884cssh\u547d\u4ee4 \u6ce8\u610f\u5f00\u5934\u5fc5\u987b\u8981\u6709spawn\uff0c\u5426\u5219\u65e0\u6cd5\u5b9e\u73b0\u4ea4\u4e92\nspawn ssh root@10.0.0.31 uptime\n\n#\u5229\u7528expect\u83b7\u53d6\u6267\u884c\u4e0a\u8ff0ssh\u547d\u4ee4\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u662f\u5426\u4e3a\u671f\u5f85\u7684\u5b57\u7b26\u4e32*password\uff0c\u8fd9\u91cc\u7684*\u662f\u901a\u914d\u7b26\nexpect "*password"\n\n#\u5f53\u83b7\u53d6\u5230\u671f\u5f85\u7684\u5b57\u7b26\u4e32 *password \u65f6\uff0c\u5219\u53d1\u9001\u5bc6\u7801 1 \u7ed9\u7cfb\u7edf\uff0c\\n\u662f\u6362\u884c\nsend "1\\n"\n\n#\u5904\u7406\u5b8c\u6bd5\u540e\u7ed3\u675fexpect\nexpect eof\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u4f7f\u7528",(0,r.jsx)(n.code,{children:"expect"}),"\u547d\u4ee4\u6267\u884c\u811a\u672c\uff0c\u56e0\u4e3a\u4e4b\u524d\u5df2\u7ecfssh\u8fde\u63a5\u8fc7\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u5c31\u80fd\u4e0d\u9700\u8981\u8f93\u5165yes\u8fde\u63a5\u4e86"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect test.exp\nspawn ssh root@10.0.0.31 uptime\nroot@10.0.0.31's password:\n 10:29:02 up 44 min,  1 user,  load average: 0.00, 0.01, 0.03\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd9\u91cc\u4ec5\u4ec5\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4e0d\u9700\u8981\u8f93\u5165\u5bc6\u7801\u7684\u793a\u4f8b\uff0c\u4f46\u662f\u5982\u679c\u6ca1\u6709ssh\u8fde\u63a5\u8fc7\u7684\u8bdd\u8fd8\u662f\u9700\u8981\u624b\u52a8\u8f93\u5165\u7b2c\u4e00\u6b21\u8fde\u63a5\u9700\u8981\u7684yes"})}),"\n",(0,r.jsx)(n.h2,{id:"3expect\u7a0b\u5e8f\u81ea\u52a8\u4ea4\u4e92\u7684\u91cd\u8981\u547d\u4ee4",children:"3.expect\u7a0b\u5e8f\u81ea\u52a8\u4ea4\u4e92\u7684\u91cd\u8981\u547d\u4ee4"}),"\n",(0,r.jsx)(n.h3,{id:"31-spawn\u547d\u4ee4",children:"3.1 spawn\u547d\u4ee4"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u5728expect\u81ea\u52a8\u4ea4\u4e92\u7a0b\u5e8f\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c",(0,r.jsx)(n.code,{children:"spawn"}),"\u547d\u4ee4\u662f\u4e00\u4e2a\u5f00\u59cb\u5c31\u9700\u8981\u4f7f\u7528\u7684\u547d\u4ee4\uff0c\u901a\u8fc7",(0,r.jsx)(n.code,{children:"spawn"}),"\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u6216\u7a0b\u5e8f\uff0c\u4e4b\u540e\u6240\u6709\u7684expect\u64cd\u4f5c\u90fd\u4f1a\u5728\u8fd9\u4e2a\u6267\u884c\u8fc7\u7684\u547d\u4ee4\u6216\u7a0b\u5e8f\u8fdb\u7a0b\u4e2d\u8fdb\u884c\uff0c\u5305\u62ec\u81ea\u52a8\u4ea4\u4e92\u529f\u80fd\uff0c\u56e0\u6b64\u5982\u679c\u6ca1\u6709",(0,r.jsx)(n.code,{children:"spawn"}),"\u547d\u4ee4\uff0cexpect\u7a0b\u5e8f\u5c06\u4f1a\u65e0\u6cd5\u5b9e\u73b0\u81ea\u52a8\u4ea4\u4e92"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8bed\u6cd5"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"spawn [\u9009\u9879] [\u9700\u8981\u81ea\u52a8\u4ea4\u4e92\u7684\u547d\u4ee4\u6216\u7a0b\u5e8f]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u793a\u4f8b"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728",(0,r.jsx)(n.code,{children:"spawn"}),"\u547d\u4ee4\u7684\u540e\u9762\uff0c\u76f4\u63a5\u6324\u4e0a\u8981\u6267\u884c\u7684\u547d\u4ee4\u6216\u7a0b\u5e8f"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"spawn ssh root@10.0.0.100 uptime\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u4f7f\u7528",(0,r.jsx)(n.code,{children:"spawn"}),"\u547d\u4ee4\u662fexpect\u7a0b\u5e8f\u5b9e\u73b0\u81ea\u52a8\u4ea4\u4e92\u5de5\u4f5c\u6d41\u7a0b\u4e2d\u7684\u7b2c\u4e00\u6b65\uff0c\u4e5f\u662f\u6700\u5173\u952e\u7684\u4e00\u6b65"]})}),"\n",(0,r.jsx)(n.h3,{id:"32-expect\u547d\u4ee4",children:"3.2 expect\u547d\u4ee4"}),"\n",(0,r.jsx)(n.h4,{id:"321-expect\u547d\u4ee4\u8bf4\u660e",children:"3.2.1 expect\u547d\u4ee4\u8bf4\u660e"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u5728expect\u81ea\u52a8\u4ea4\u4e92\u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u4f7f\u7528",(0,r.jsx)(n.code,{children:"spawn"}),"\u547d\u4ee4\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u6216\u8005\u7a0b\u5e8f\u4e4b\u540e\uff0c\u4f1a\u63d0\u793a\u67d0\u4e9b\u4ea4\u4e92\u5f0f\u4fe1\u606f\uff0c",(0,r.jsx)(n.code,{children:"expect"}),"\u547d\u4ee4\u7684\u4f5c\u7528\u5c31\u662f\u83b7\u53d6",(0,r.jsx)(n.code,{children:"spawn"}),"\u547d\u4ee4\u6267\u884c\u540e\u7684\u4fe1\u606f\uff0c\u67e5\u770b\u662f\u5426\u548c\u5176\u4e8b\u5148\u81ea\u5b9a\u7684\u76f8\u5339\u914d\uff0c\u4e00\u65e6\u5339\u914d\u4e0a\u6307\u5b9a\u7684\u5185\u5bb9\u5c31\u6267\u884cexpect\u540e\u9762\u7684\u52a8\u4f5c\uff0cexpect\u547d\u4ee4\u4e5f\u6709\u4e00\u4e9b\u9009\u9879\uff0c\u76f8\u5bf9\u7528\u7684\u591a\u7684\u662f",(0,r.jsx)(n.code,{children:"-re"}),"\uff0c\u8868\u793a\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u65b9\u5f0f\u6765\u5339\u914d"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8bed\u6cd5"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"expect \u8868\u8fbe\u5f0f [\u52a8\u4f5c]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u26a0\ufe0f",(0,r.jsx)("span",{style:{color:"red"},children:"\u4ee5\u4e0b\u547d\u4ee4\u4e0d\u80fd\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c\uff0c\u9700\u8981\u653e\u5165expect\u811a\u672c\u4e2d\u6267\u884c"})]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'spawn ssh root@10.0.0.100 uptime\nexpect "*password" (send 1\\r)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"322-expect\u547d\u4ee4\u5b9e\u8df5",children:"3.2.2 expect\u547d\u4ee4\u5b9e\u8df5"}),"\n",(0,r.jsx)(n.h5,{id:"3221-\u5b9e\u8df5\u793a\u4f8b1",children:"3.2.2.1 \u5b9e\u8df5\u793a\u4f8b1"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u6267\u884cssh\u547d\u4ee4\u8fdc\u7a0b\u83b7\u53d6\u670d\u52a1\u5668\u8d1f\u8f7d\u503c\u548ceth0\u7f51\u5361\uff0c\u5e76\u81ea\u52a8\u8f93\u5165",(0,r.jsx)(n.code,{children:"yes"}),"\u53ca\u7528\u6237\u540d\u5bc6\u7801"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91expect\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat >test.exp << \'EOF\'\n#!/usr/bin/expect\nspawn ssh root@10.0.0.100 uptime && ip a s eth0\n\n#\u8d77\u59cb\u5927\u62ec\u53f7\u524d\u8981\u6709\u7a7a\u683c\nexpect {\n  "yes/no" {exp_send "yes\\r";exp_continue}\n  "*password" {exp_send "1\\r"}\n}\nexpect eof\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8bf4\u660e"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"exp_send"}),"\u548c",(0,r.jsx)(n.code,{children:"send"}),"\u7c7b\u4f3c\uff0c\u540e\u9762\u7684",(0,r.jsx)(n.code,{children:"\\r(\u56de\u8f66)"}),"\uff0c\u548c\u524d\u6587\u7684",(0,r.jsx)(n.code,{children:"\\n(\u6362\u884c)"}),"\u7c7b\u4f3c"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"expect {}"}),"\uff0c\u7c7b\u4f3c\u591a\u884c",(0,r.jsx)(n.code,{children:"expect"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5339\u914d\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u5728\u6bcf\u6b21\u5339\u914d\u5e76\u6267\u884c\u52a8\u4f5c\u540e\uff0c\u52a0\u4e0a",(0,r.jsx)(n.code,{children:"exp_continue"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect test.exp\nspawn ssh root@10.0.0.31 uptime && ip a s eth0\nThe authenticity of host '10.0.0.31 (10.0.0.31)' can't be established.\nECDSA key fingerprint is SHA256:o9tdhhhgM3KPZytcz16k/Wt6gfEkDp1FCD3Q7VmLnoE.\nECDSA key fingerprint is MD5:0e:a2:0c:a6:42:e4:95:b4:77:44:14:36:ba:11:2b:d8.\n\n#\u53ef\u4ee5\u770b\u5230\u8fd9\u91ccexpect\u4f1a\u81ea\u52a8\u8f93\u5165yes\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '10.0.0.31' (ECDSA) to the list of known hosts.\n\n#expect\u81ea\u52a8\u8f93\u5165\u5bc6\u7801\nroot@10.0.0.31's password:\n 10:32:18 up  8:45,  1 user,  load average: 0.08, 0.03, 0.05\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n    link/ether 00:1c:42:1b:e4:d7 brd ff:ff:ff:ff:ff:ff\n    inet 10.0.0.31/24 brd 10.0.0.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::21c:42ff:fe1b:e4d7/64 scope link\n       valid_lft forever preferred_lft forever\n"})}),"\n",(0,r.jsx)(n.h5,{id:"3222-\u5b9e\u8df5\u793a\u4f8b2",children:"3.2.2.2 \u5b9e\u8df5\u793a\u4f8b2"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5229\u7528expect\u76f8\u5e94shell\u811a\u672c\u4e2d\u7684\u591a\u4e2aread\u8bfb\u5165"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91shell\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > read.sh <<\'EOF\'\n#!/usr/bin/env bash\nread -p "please input your username:" name\nread -p "please input your password:" pwd\nread -p "please input your email:" mail\necho -n "your name is $name,"\necho -n "your password is $pwd,"\necho "your email is $mail."\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91expect\u811a\u672c"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u26a0\ufe0f",(0,r.jsxs)("span",{style:{color:"red"},children:["expect\u811a\u672c\u4e2d\u7684",(0,r.jsx)(n.code,{children:"exp_send"}),"\u4e5f\u53ef\u4ee5\u6539\u6210",(0,r.jsx)(n.code,{children:"send"})]})]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > read.exp <<\'EOF\'\n#!/usr/bin/expect\n\n#\u8fd9\u91cc\u6267\u884c\u4e4b\u524d\u5199\u597d\u7684\u9700\u8981\u591a\u4e2aread\u8f93\u5165\u7684shell\u811a\u672c\nspawn /bin/sh /root/read.sh\n\nexpect {\n  #\u82e5\u83b7\u53d6\u5230\u7684\u662fusername\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u7528\u6237\u540dxiaoming\n  "username" {exp_send "xiaoming\\r";exp_continue}\n  \n  #\u82e5\u83b7\u53d6\u5230\u7684\u662f*pass*\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u5bc6\u78011\n  "*pass" {exp_send "1\\r";exp_continue}\n  \n  #\u82e5\u83b7\u53d6\u5230\u7684\u662f*mail\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u90ae\u4ef6\u5730\u5740\n  "*mail" {exp_send "1@qq.com\\r"}\n}\n#\u5904\u7406\u5b8c\u6bd5\u540e\u7ed3\u675fexpect\nexpect eof\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect read.exp\nspawn /bin/sh /root/read.sh\nplease input your username:xiaoming\nplease input your password:1\nplease input your email:1@qq.com\nyour name is xiaoming,your password is 1,your email is 1@qq.com.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"33-send\u547d\u4ee4",children:"3.3 send\u547d\u4ee4"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"send"}),"\u547d\u4ee4\u548c",(0,r.jsx)(n.code,{children:"exp_send"}),"\u547d\u4ee4\u7528\u6cd5\u7c7b\u4f3c\uff0c\u5373\u5728expect\u547d\u4ee4\u540e\u5339\u914d\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u540e\uff0c\u53d1\u9001\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u7ed9\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u547d\u4ee4\u53ef\u4ee5\u652f\u6301\u4e00\u4e9b\u7279\u6b8a\u8f6c\u4e49\u7b26\u53f7\uff0c\u4f8b\u5982",(0,r.jsx)(n.code,{children:"\\r(\u56de\u8f66)"}),"\u3001",(0,r.jsx)(n.code,{children:"\\n(\u6362\u884c)"}),"\u3001",(0,r.jsx)(n.code,{children:"\\t(\u5236\u8868\u7b26)"})]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"send\u547d\u4ee4\u4f7f\u7528\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u26a0\ufe0f",(0,r.jsxs)("span",{style:{color:"red"},children:["expect\u811a\u672c\u4e2d\u7684",(0,r.jsx)(n.code,{children:"send"}),"\u4e5f\u53ef\u4ee5\u6539\u6210",(0,r.jsx)(n.code,{children:"exp_send"})]})]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > read.exp <<\'EOF\'\n#!/usr/bin/expect\n\n#\u8fd9\u91cc\u6267\u884c\u4e4b\u524d\u5199\u597d\u7684\u9700\u8981\u591a\u4e2aread\u8f93\u5165\u7684shell\u811a\u672c\nspawn /bin/sh /root/read.sh\n\nexpect {\n  #\u82e5\u83b7\u53d6\u5230\u7684\u662fusername\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u7528\u6237\u540dxiaoming\n  "username" {send "xiaoming\\r";exp_continue}\n  \n  #\u82e5\u83b7\u53d6\u5230\u7684\u662f*pass*\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u5bc6\u78011\n  "*pass" {send "1\\r";exp_continue}\n  \n  #\u82e5\u83b7\u53d6\u5230\u7684\u662f*mail\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u90ae\u4ef6\u5730\u5740\n  "*mail" {send "1@qq.com\\r"}\n}\n#\u5904\u7406\u5b8c\u6bd5\u540e\u7ed3\u675fexpect\nexpect eof\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"send\u547d\u4ee4\u53c2\u6570"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"-i\t\u6307\u5b9aspawn_id\uff0c\u7528\u6765\u5411\u4e0d\u540c\u7684spawn_id\u8fdb\u7a0b\u53d1\u9001\u547d\u4ee4\uff0c\u662f\u8fdb\u884c\u591a\u7a0b\u5e8f\u63a7\u5236\u7684\u53c2\u6570"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"-s    s\u4ee3\u8868slpwly\uff0c\u5373\u63a7\u5236\u53d1\u9001\u7684\u901f\u5ea6\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u8981\u4e0eexpect\u4e2d\u7684\u53d8\u91cfsend_slow\u76f8\u5173\u8054"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"34-exp_continue\u547d\u4ee4",children:"3.4 exp_continue\u547d\u4ee4"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"exp_continue"}),"\u547d\u4ee4\u4e00\u822c\u5904\u4e8e",(0,r.jsx)(n.code,{children:"expect"}),"\u547d\u4ee4\u4e2d\uff0c\u5c5e\u4e8e\u4e00\u79cd\u52a8\u4f5c\u547d\u4ee4\uff0c\u4e00\u822c\u7528\u5728\u5339\u914d\u591a\u6b21\u5b57\u7b26\u4e32\u7684\u52a8\u4f5c\u4e2d\uff0c\u4ece\u547d\u4ee4\u7684\u62fc\u5199\u5c31\u53ef\u4ee5\u770b\u51fa\u547d\u4ee4\u7684\u4f5c\u7528\uff0c\u5373\u8ba9expect\u7a0b\u5e8f\u7ee7\u7eed\u5339\u914d\u7684\u610f\u601d"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"exp_continue"}),"\u547d\u4ee4\u4f7f\u7528\u793a\u4f8b"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > read.exp <<\'EOF\'\n#!/usr/bin/expect\n\n#\u8fd9\u91cc\u6267\u884c\u4e4b\u524d\u5199\u597d\u7684\u9700\u8981\u591a\u4e2aread\u8f93\u5165\u7684shell\u811a\u672c\nspawn /bin/sh /root/read.sh\n\nexpect {\n  #\u82e5\u83b7\u53d6\u5230\u7684\u662fusername\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u7528\u6237\u540dxiaoming\n  "username" {send "xiaoming\\r";exp_continue}\n  \n  #\u82e5\u83b7\u53d6\u5230\u7684\u662f*pass*\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u5bc6\u78011\n  "*pass" {send "1\\r";exp_continue}\n  \n  #\u82e5\u83b7\u53d6\u5230\u7684\u662f*mail\u4fe1\u606f\uff0c\u5219\u81ea\u52a8\u8f93\u5165\u90ae\u4ef6\u5730\u5740\n  "*mail" {send "1@qq.com\\r"}\n}\n#\u5904\u7406\u5b8c\u6bd5\u540e\u7ed3\u675fexpect\nexpect eof\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u5982\u679c\u9700\u8981\u4e00\u6b21\u6027\u5339\u914d\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u4e0d\u540c\u7684\u5339\u914d\u4e4b\u95f4\u5c31\u8981\u52a0\u4e0a",(0,r.jsx)(n.code,{children:"exp_continue"}),"\uff0c\u5426\u5219expect\u5c06\u4e0d\u4f1a\u81ea\u52a8\u8f93\u5165\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u6700\u540e\u4e00\u4e2a\u7ed3\u5c3e\u5c31\u4e0d\u9700\u8981\u52a0\u4e0a",(0,r.jsx)(n.code,{children:"exp_continue"}),"\u4e86\uff0c\u56e0\u4e3a\u5339\u914d\u5168\u90e8\u5b8c\u6210\u4e86"]})}),"\n",(0,r.jsx)(n.h3,{id:"35-send_user\u547d\u4ee4",children:"3.5 send_user\u547d\u4ee4"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"send_user"}),"\u547d\u4ee4\u53ef\u4ee5\u7528\u6765\u6253\u5370expect\u811a\u672c\u4fe1\u606f\uff0c\u7c7b\u4f3cshell\u91cc\u7684",(0,r.jsx)(n.code,{children:"echo"}),"\u547d\u4ee4\uff0c\u5e76\u4e14\u6709",(0,r.jsx)(n.code,{children:"echo -e"}),"\u7684\u529f\u80fd\uff0c\u800c\u9ed8\u8ba4\u7684",(0,r.jsx)(n.code,{children:"send"}),"\u3001",(0,r.jsx)(n.code,{children:"exp_send"}),"\u547d\u4ee4\u90fd\u662f\u5c06\u5b57\u7b26\u4e32\u8f93\u51fa\u5230expect\u7a0b\u5e8f\u4e2d\u53bb"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"send_user"}),"\u547d\u4ee4\u4f7f\u7528\u793a\u4f8b"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91expect\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat >send_user.exp <<\'EOF\'\n#!/usr/bin/expect\nsend_user "i am boy.\\n"\nsend_user "i like play basketbal.\\n"\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect send_user.exp\ni am boy.\ni like play basketbal.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"36-exit\u547d\u4ee4",children:"3.6 exit\u547d\u4ee4"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"exit"}),"\u547d\u4ee4\u7684\u529f\u80fd\u7c7b\u4f3c\u4e8eshell\u4e2d\u7684exit\uff0c\u5373\u76f4\u63a5\u9000\u51faexpect\u811a\u672c\uff0c\u9664\u4e86\u6700\u57fa\u672c\u7684\u9000\u51fa\u811a\u672c\u529f\u80fd\u5916\uff0c\u8fd8\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u547d\u4ee4\u5bf9\u811a\u672c\u505a\u4e00\u4e9b\u5173\u95ed\u524d\u7684\u6e05\u7406\u548c\u63d0\u793a\u7b49\u5de5\u4f5c"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"exit"}),"\u547d\u4ee4\u4f7f\u7528\u793a\u4f8b"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > exit.exp <<\'EOF\'\n#!/usr/bin/expect\nsend_user "i am boy.\\n"\nsend_user "i like play basketbal.\\n"\nexit -onexit {\n  send_user "goog bye.\\n"\n}\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect exit.exp\ni am boy.\ni like play basketbal.\ngoog bye.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"37-expect\u5e38\u7528\u547d\u4ee4\u603b\u7ed3",children:"3.7 expect\u5e38\u7528\u547d\u4ee4\u603b\u7ed3"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"expect\u547d\u4ee4"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u4f5c\u7528"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"spawn"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"spawn\u547d\u4ee4\u662f\u4e00\u4e2a\u5728expect\u81ea\u52a8\u4ea4\u4e92\u7a0b\u5e8f\u7684\u5f00\u59cb\u5c31\u9700\u8981\u4f7f\u7528\u7684\u547d\u4ee4\uff0c\u901a\u8fc7spawn\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u6216\u7a0b\u5e8f\uff0c\u4e4b\u540e\u6240\u6709\u7684expect\u64cd\u4f5c\u90fd\u5728\u8fd9\u4e2a\u6267\u884c\u8fc7\u7684\u547d\u4ee4\u6216\u7a0b\u5e8f\u8fdb\u7a0b\u4e2d\u8fdb\u884c\uff0c\u5305\u62ec\u81ea\u52a8\u4ea4\u4e92\u529f\u80fd"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"expect"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u5728expect\u81ea\u52a8\u4ea4\u4e92\u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5728\u4f7f\u7528spawn\u547d\u4ee4\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\u6216\u7a0b\u5e8f\u4e4b\u540e\uff0c\u4f1a\u63d0\u793a\u67d0\u4e9b\u4ea4\u4e92\u5f0f\u4fe1\u606f\uff0cexpect\u547d\u4ee4\u7684\u4f5c\u7528\u5c31\u662f\u83b7\u53d6\u8fd9\u4e9b\u4fe1\u606f\uff0c\u67e5\u770b\u662f\u5426\u548c\u5176\u4e8b\u5148\u6307\u5b9a\u7684\u4fe1\u606f\u76f8\u5339\u914d\uff0c\u4e00\u65e6\u5339\u914d\u4e0a\u6307\u5b9a\u7684\u5185\u5bb9\uff0c\u5c31\u6267\u884cexpect\u540e\u9762\u7684\u52a8\u4f5c"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"send"})}),(0,r.jsx)(n.td,{children:(0,r.jsxs)(n.strong,{children:["expect\u4e2d\u7684\u52a8\u4f5c\u547d\u4ee4\uff0c\u5f53expect\u5339\u914d\u4e86\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u540e\uff0c\u53d1\u9001\u6307\u5b9a\u7684\u7684\u5b57\u7b26\u4e32\u7ed9\u7cfb\u7edf\uff0c\u8fd9\u4e9b\u547d\u4ee4\u53ef\u4ee5\u652f\u6301\u4e00\u4e9b\u7279\u6b8a\u7684\u8f6c\u4e49\u7b26\u53f7\uff0c\u4f8b\u5982",(0,r.jsx)(n.code,{children:"\\r\u8868\u793a\u56de\u8f66"}),"\u3001",(0,r.jsx)(n.code,{children:"\\n\u8868\u793a\u6362\u884c"}),"\u3001",(0,r.jsx)(n.code,{children:"\\t\u8868\u793a\u5236\u8868\u7b26"}),"\u7b49\uff0c\u8fd8\u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684exp_send\u547d\u4ee4"]})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"exp_continue"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u5c5e\u4e8e\u4e00\u79cd\u52a8\u4f5c\u547d\u4ee4\uff0c\u5728\u4e00\u4e2aexpect\u547d\u4ee4\u4e2d\uff0c\u7528\u4e8e\u591a\u6b21\u5339\u914d\u5b57\u7b26\u4e32\u5e76\u6267\u884c\u4e0d\u540c\u7684\u52a8\u4f5c\u4e2d\uff0c\u4ece\u547d\u4ee4\u7684\u62fc\u5199\u683c\u5f0f\u5c31\u53ef\u4ee5\u770b\u51fa\u8be5\u547d\u4ee4\u7684\u4f5c\u7528\uff0c\u5373\u8ba9expect\u7a0b\u5e8f\u7ee7\u7eed\u5339\u914d"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"send_user"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u7528\u6765\u6253\u5370expect\u811a\u672c\u4fe1\u606f\uff0c\u7c7b\u4f3cshell\u91cc\u7684echo\u547d\u4ee4\uff0c\u5e76\u4e14\u5e26-e(\u652f\u6301\u8f6c\u4e49)\u529f\u80fd"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"exit"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u9000\u51faexpect\u811a\u672c\uff0c\u4ee5\u53ca\u5728\u9000\u51fa\u811a\u672c\u524d\u505a\u4e00\u4e9b\u5173\u95ed\u524d\u7684\u6e05\u7406\u548c\u63d0\u793a\u7b49\u5de5\u4f5c"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"4expect\u7a0b\u5e8f\u53d8\u91cf",children:"4.expect\u7a0b\u5e8f\u53d8\u91cf"}),"\n",(0,r.jsx)(n.h3,{id:"41-\u666e\u901a\u53d8\u91cf",children:"4.1 \u666e\u901a\u53d8\u91cf"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5b9a\u4e49\u8bed\u6cd5"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"set \u53d8\u91cf\u540d \u53d8\u91cf\u503c\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5b9a\u4e49\u666e\u901a\u53d8\u91cf\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"set pwd 123\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6253\u5370\u53d8\u91cf"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"puts $\u53d8\u91cf\u540d\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:"\u7f16\u8f91expect\u811a\u672c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cat > var.exp <<'EOF'\nset pwd 123\nputs $pwd\nsend_user \"password is $pwd\\n\"\nEOF\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect var.exp\n123\npassword is 123\n"})}),"\n",(0,r.jsx)(n.h3,{id:"42-\u7279\u6b8a\u53c2\u6570\u53d8\u91cf",children:"4.2 \u7279\u6b8a\u53c2\u6570\u53d8\u91cf"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u5728expect\u91cc\u4e5f\u6709\u4e0eshell\u811a\u672c\u91cc\u7684",(0,r.jsx)(n.code,{children:"$0"}),"\u3001",(0,r.jsx)(n.code,{children:"$1"}),"\u3001",(0,r.jsx)(n.code,{children:"$#"}),"\u7b49\u7c7b\u4f3c\u7684\u7279\u6b8a\u53c2\u6570\u53d8\u91cf\uff0c\u7528\u4e8e\u63a5\u6536\u53ca\u63a7\u5236expect\u811a\u672c\u4f20\u53c2"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u5728expect\u4e2d",(0,r.jsx)(n.code,{children:"$argv"}),"\u8868\u793a\u53c2\u6570\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,r.jsx)(n.code,{children:"[lindex $argv n]"}),"\u63a5\u6536expect\u811a\u672c\u4f20\u9012\u53c2\uff0cn\u4ece0\u5f00\u59cb\uff0c\u5206\u522b\u8868\u793a\u7b2c\u4e00\u4e2a",(0,r.jsx)(n.code,{children:"[lindex $argv 0]"}),"\u53c2\u6570\u3001\u7b2c\u4e8c\u4e2a",(0,r.jsx)(n.code,{children:"[lindex $argv 1]"}),"\u53c2\u6570\u3001\u7b2c\u4e09\u4e2a",(0,r.jsx)(n.code,{children:"[lindex $argv 2]"}),"\u53c2\u6570\u3002\u3002\u3002"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5b9a\u4e49\u53ca\u8f93\u51fa\u7279\u6b8a\u53c2\u6570\u53d8\u91cf"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat >special-var.exp <<\'EOF\'\n#!/usr/bin/expect\n#\u5b9a\u4e49\u53d8\u91cf\n#\u76f8\u5f53\u4e8eshell\u811a\u672c\u4e2d\u4f20\u53c2\u7684$1\nset file [lindex $argv 0]\nset ip [lindex $argv 1]\nset dir [lindex $argv 2]\nsend_user "$file\\t$ip\\t$dir\\n"\nputs "\u6587\u4ef6\u662f: $file\\t \u4e3b\u673aIP\u662f: $ip\\t \u76ee\u5f55\u662f: $dir\\n"\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect special-var.exp access.log 10.0.0.100 /tmp\naccess.log\t10.0.0.100\t/tmp\n\u6587\u4ef6\u662f: access.log\t \u4e3b\u673aIP\u662f: 10.0.0.100\t \u76ee\u5f55\u662f: /tmp\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"expect\u63a5\u6536\u53c2\u6570\u7684\u65b9\u5f0f\u548cbash\u811a\u672c\u7684\u65b9\u5f0f\u533a\u522b"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u7c7b\u578b"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"\u63a5\u6536\u4f20\u53c2\u65b9\u5f0f"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"bash"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"$0...$n"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"expect"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"set \u53d8\u91cf\u540d [lindex $argv 0...n]"})})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u9664\u4e86\u57fa\u672c\u7684\u4f4d\u7f6e\u53c2\u6570\u5916\uff0cexpect\u4e5f\u652f\u6301\u5176\u4ed6\u7684\u7279\u6b8a\u53c2\u6570\uff0c\u4f8b\u5982",(0,r.jsx)(n.code,{children:"$argc"}),"\u8868\u793a\u4f20\u53c2\u7684\u4e2a\u6570\uff0c",(0,r.jsx)(n.code,{children:"$argv0"}),"\u8868\u793a\u811a\u672c\u7684\u540d\u5b57"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91expect\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > special-other.exp <<\'EOF\'\n#!/usr/bin/expect\nset file [lindex $argv 0]\nset ip [lindex $argv 1]\nset dir [lindex $argv 2]\nputs "\u6587\u4ef6\u662f: $file\\t \u4e3b\u673aIP\u662f: $ip\\t \u76ee\u5f55\u662f: $dir\\n"\nputs "\u4f20\u53c2\u4e2a\u6570\u662f: $argc"\nputs "\u811a\u672c\u540d\u662f: $argv0"\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect special-other.exp access.log 10.0.0.100 /tmp\n\u6587\u4ef6\u662f: access.log\t \u4e3b\u673aIP\u662f: 10.0.0.100\t \u76ee\u5f55\u662f: /tmp\n\n\u4f20\u53c2\u4e2a\u6570\u662f: 3\n\u811a\u672c\u540d\u662f: special-other.exp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"5expect\u7a0b\u5e8f\u4e2d\u7684if\u6761\u4ef6\u8bed\u53e5",children:"5.expect\u7a0b\u5e8f\u4e2d\u7684if\u6761\u4ef6\u8bed\u53e5"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8bed\u6cd5"})}),"\n",(0,r.jsx)(n.admonition,{title:"\u8bed\u6cd5",type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"if"})," \u5173\u952e\u5b57\u540e\u9762\u8981\u6709\u7a7a\u683c\uff0c",(0,r.jsx)(n.code,{children:"else"})," \u5173\u952e\u5b57\u524d\u540e\u90fd\u8981\u6709\u7a7a\u683c\uff0c",(0,r.jsx)(n.code,{children:"{\u6761\u4ef6\u8868\u8fbe\u5f0f}"})," \u5927\u62ec\u53f7\u91cc\u8fb9\u9760\u8fd1\u5927\u62ec\u53f7\u5904\u53ef\u4ee5\u6ca1\u6709\u7a7a\u683c\uff0c\u5c06\u6307\u4ee4\u62ec\u8d77\u6765\u7684\u8d77\u59cb\u5927\u62ec\u53f7  ",(0,r.jsx)(n.code,{children:"{"})," \u524d\u8981\u6709\u7a7a\u683c"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"if {\u6761\u4ef6\u8868\u8fbe\u5f0f} {\n  \u547d\u4ee4\n}\n\u6216\nif {\u6761\u4ef6\u8868\u8fbe\u5f0f} {\n  \u547d\u4ee4\n} else {\n  \u547d\u4ee4\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528if\u8bed\u53e5\u5224\u65ad\u811a\u672c\u4f20\u53c2\u7684\u4e2a\u6570\uff0c\u5982\u679c\u4e0d\u7b26\u5408\u5219\u7ed9\u4e88\u63d0\u793a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat > if.exp <<\'EOF\'\n#!/usr/bin/expect\nif { $argc !=3 } {\n  send_user "usage: expect $argv0 file ip dir\\n"\n  exit\n}\n\nset file [lindex $argv 0]\nset ip [lindex $argv 1]\nset dir [lindex $argv 2]\nputs "\u6587\u4ef6\u662f: $file\\t \u4e3b\u673aIP\u662f: $ip\\t \u76ee\u5f55\u662f: $dir\\n"\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.p,{children:"\u672a\u7ed9\u811a\u672c\u4f20\u53c2\u6570"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect if.exp\nusage: expect if.exp file ip dir\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7ed9\u811a\u672c\u4f20\u53c2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect if.exp access.log 10.0.0.100 tmp\n\u6587\u4ef6\u662f: access.log\t \u4e3b\u673aIP\u662f: 10.0.0.100\t \u76ee\u5f55\u662f: tmp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"6expect\u4e2d\u7684\u5173\u952e\u5b57",children:"6.expect\u4e2d\u7684\u5173\u952e\u5b57"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["expect\u4e2d\u7684\u7279\u6b8a\u5173\u952e\u5b57\u7528\u4e8e\u5339\u914d\u8fc7\u7a0b\uff0c\u4ee3\u8868\u67d0\u4e9b\u7279\u6b8a\u7684\u542b\u4e49\u6216\u72b6\u6001\uff0c\u4e00\u822c\u53ea\u7528\u4e8e",(0,r.jsx)(n.code,{children:"expect"}),"\u547d\u4ee4\u4e2d\u800c\u4e0d\u80fd\u5728",(0,r.jsx)(n.code,{children:"expect"}),"\u547d\u4ee4\u5916\u9762\u5355\u72ec\u4f7f\u7528"]})}),"\n",(0,r.jsx)(n.h3,{id:"61-eof\u5173\u952e\u5b57",children:"6.1 eof\u5173\u952e\u5b57"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"eof(end-of-line)"}),"\u5173\u952e\u5b57\u7528\u4e8e\u5339\u914d\u7ed3\u675f\u7b26\uff0c\u5373\u5728expect\u811a\u672c\u4e2d\u7684\u6700\u540e\u58f0\u660e"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'#!/usr/bin/expect\nspawn ssh root@10.0.0.100 uptime\nexpect "*password" {send "1\\n"}\n\n#eof\u5173\u952e\u5b57\u7528\u4e8e\u7ed3\u675fexpect\u811a\u672c\nexpect eof\n'})}),"\n",(0,r.jsx)(n.h3,{id:"62-timeout\u5173\u952e\u5b57",children:"6.2 timeout\u5173\u952e\u5b57"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"timeout"}),"\u662fexpect\u4e2d\u7684\u4e00\u4e2a\u63a7\u5236\u65f6\u95f4\u7684\u5173\u952e\u5b57\u53d8\u91cf\uff0c\u5b83\u662f\u4e00\u4e2a\u5168\u5c40\u6027\u7684\u65f6\u95f4\u63a7\u5236\u5f00\u5173\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e3a\u8fd9\u4e2a\u53d8\u91cf\u8d4b\u503c\u6765\u89c4\u5b9a\u6574\u4e2aexpect\u64cd\u4f5c\u7684\u65f6\u95f4\uff0c\u6ce8\u610f\u8fd9\u4e2a\u53d8\u91cf\u662f\u670d\u52a1\u4e8eexpect\u5168\u5c40\u7684\uff0c\u800c\u4e0d\u662f\u67d0\u4e00\u6761\u547d\u4ee4\uff0c\u5373\u4f7f\u547d\u4ee4\u6ca1\u6709\u4efb\u4f55\u9519\u8bef\uff0c\u5230\u4e86\u65f6\u95f4\u4ecd\u7136\u4f1a\u6fc0\u6d3b\u8fd9\u4e2a\u53d8\u91cf\uff0c\u6b64\u5916\uff0c\u5230\u65f6\u95f4\u540e\u8fd8\u4f1a\u6fc0\u6d3b\u4e00\u4e2a\u5904\u7406\u53ca\u63d0\u793a\u4fe1\u606f\u5f00\u5173"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"timeout\u8d85\u65f6\u529f\u80fd\u4f7f\u7528\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'#timeout\u8bed\u6cd51\ncat >timeout.exp <<\'EOF\'\n#!/usr/bin/expect\nspawn ssh root@10.0.0.31 uptime\n\n#\u8bbe\u7f6e5\u79d2\u8d85\u65f6\nset timeout 5\n\n#\u5f53\u5230\u8fbe5\u79d2\u4e4b\u540e\u5c31\u8d85\u65f6\uff0c\u6253\u5370\u6307\u5b9a\u5185\u5bb9\u5e76\u9000\u51fa\nexpect "yes/no" {exp_send "yes\\r";exp_continue}\nexpect timeout {puts "request timeout";return}\nEOF\n\n\n\n#timeout\u8bed\u6cd52\ncat >timeout.exp <<\'EOF\'\n#!/usr/bin/expect\nspawn ssh root@10.0.0.31 uptime\nexpect {\n  -timeout 5\n  "yes/no" {exp_send "yes\\r";exp_continue}\n  timeout {puts "request timeout";return}\n}\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.p,{children:"\u6267\u884c\u811a\u672c\u540e\u63d0\u793a\u9700\u8981\u8f93\u5165\u5bc6\u7801\uff0c\u8fd9\u91cc\u7b49\u5f855\u79d2\u540e\u5982\u679c\u6ca1\u6709\u8f93\u5165\u5bc6\u7801\u5219\u63d0\u793a\u8bf7\u6c42\u8d85\u65f6\uff0c\u5e76\u9000\u51fa\u811a\u672c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect timeout.exp\nspawn ssh root@10.0.0.31 uptime\nroot@10.0.0.31's password: request timeout\n"})}),"\n",(0,r.jsx)(n.h2,{id:"7expect\u7efc\u5408\u793a\u4f8b",children:"7.expect\u7efc\u5408\u793a\u4f8b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6279\u91cf\u5206\u53d1ssh\u5bc6\u94a5\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u672c\u5730\u751f\u6210\u5bc6\u94a5\u5bf9"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa &>/dev/null\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u8f91expect\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'cat >ssh.exp <<\'EOF\'\n#!/usr/bin/expect\nif { $argc !=2 } {\n  send_user "usage: expect ssh.exp file ip\\n"\n  exit\n}\n\nset file [lindex $argv 0]\nset ip [lindex $argv 1]\nset password "1"\n\nspawn ssh-copy-id -f $file -p 22 root@$ip\nexpect {\n  "yes/no" {send "yes\\r";exp_continue}\n  "*password" {send "$password\\r"}\n}\nexpect eof\nEOF\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5206\u53d1\u5355\u4e2a\u4e3b\u673a\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ expect ssh.exp ~/.ssh/id_rsa.pub 10.0.0.31\nspawn ssh-copy-id -i /root/.ssh/id_rsa.pub -p 22 root@10.0.0.31\n/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/root/.ssh/id_rsa.pub\"\nThe authenticity of host '10.0.0.31 (10.0.0.31)' can't be established.\nECDSA key fingerprint is SHA256:o9tdhhhgM3KPZytcz16k/Wt6gfEkDp1FCD3Q7VmLnoE.\nECDSA key fingerprint is MD5:0e:a2:0c:a6:42:e4:95:b4:77:44:14:36:ba:11:2b:d8.\nAre you sure you want to continue connecting (yes/no)? yes\n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\nroot@10.0.0.31's password:\n\nNumber of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh -p '22' 'root@10.0.0.31'\"\nand check to make sure that only the key(s) you wanted were added.\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5206\u53d1\u591a\u4e2a\u4e3b\u673a\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:"\u7f16\u8f91shell\u811a\u672c\u5faa\u73af\u6267\u884cexpect\u811a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cat > ssh.sh <<'EOF'\n#!/bin/bash\nfor i in 31 52\ndo\n  expect ~/ssh.exp ~/.ssh/id_rsa.pub 10.0.0.$i\ndone\nEOF\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u811a\u672c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"$ sh ssh.sh\nspawn ssh-copy-id -i /root/.ssh/id_rsa.pub -p 22 root@10.0.0.31\n/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/root/.ssh/id_rsa.pub\"\nThe authenticity of host '10.0.0.31 (10.0.0.31)' can't be established.\nECDSA key fingerprint is SHA256:o9tdhhhgM3KPZytcz16k/Wt6gfEkDp1FCD3Q7VmLnoE.\nECDSA key fingerprint is MD5:0e:a2:0c:a6:42:e4:95:b4:77:44:14:36:ba:11:2b:d8.\nAre you sure you want to continue connecting (yes/no)? yes\n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\nroot@10.0.0.31's password:\n\nNumber of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh -p '22' 'root@10.0.0.31'\"\nand check to make sure that only the key(s) you wanted were added.\n\nspawn ssh-copy-id -i /root/.ssh/id_rsa.pub -p 22 root@10.0.0.52\n/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/root/.ssh/id_rsa.pub\"\nThe authenticity of host '10.0.0.52 (10.0.0.52)' can't be established.\nECDSA key fingerprint is SHA256:o9tdhhhgM3KPZytcz16k/Wt6gfEkDp1FCD3Q7VmLnoE.\nECDSA key fingerprint is MD5:0e:a2:0c:a6:42:e4:95:b4:77:44:14:36:ba:11:2b:d8.\nAre you sure you want to continue connecting (yes/no)? yes\n/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\nroot@10.0.0.52's password:\n\nNumber of key(s) added: 1\n\nNow try logging into the machine, with:   \"ssh -p '22' 'root@10.0.0.52'\"\nand check to make sure that only the key(s) you wanted were added.\n"})})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(96540);const c={},i=r.createContext(c);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);