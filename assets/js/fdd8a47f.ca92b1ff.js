"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3181],{12976:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var s=t(74848),l=t(28453);const r={},i="shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f",c={id:"linux/shell/\u5404\u79cd\u811a\u672c/\u5b9e\u9645\u5e94\u7528\u811a\u672c/shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f",title:"shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f",description:"yq github\u5730\u5740",source:"@site/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u5b9e\u9645\u5e94\u7528\u811a\u672c/shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f.md",sourceDirName:"linux/shell/\u5404\u79cd\u811a\u672c/\u5b9e\u9645\u5e94\u7528\u811a\u672c",slug:"/linux/shell/\u5404\u79cd\u811a\u672c/\u5b9e\u9645\u5e94\u7528\u811a\u672c/shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f",permalink:"/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u5b9e\u9645\u5e94\u7528\u811a\u672c/shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"shell\u811a\u672c\u6279\u91cf\u514d\u5bc6",permalink:"/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u5b9e\u9645\u5e94\u7528\u811a\u672c/shell\u811a\u672c\u6279\u91cf\u514d\u5bc6"},next:{title:"\u5faa\u73af\u63a7\u5236\u53ca\u72b6\u6001\u8fd4\u56de\u503c",permalink:"/docs/linux/shell/\u5faa\u73af\u63a7\u5236\u53ca\u72b6\u6001\u8fd4\u56de\u503c"}},o={},a=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f",children:"shell\u811a\u672c\u83b7\u53d6k8s\u96c6\u7fa4\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f"}),"\n",(0,s.jsxs)(n.admonition,{title:"\u8bf4\u660e",type:"tip",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/mikefarah/yq",children:"yq github\u5730\u5740"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://mikefarah.gitbook.io/yq",children:"yq\u5b98\u65b9\u7f51\u7ad9"})}),(0,s.jsxs)(n.p,{children:["yq\u662f\u4e00\u4e2a\u53ef\u4ee5\u5904\u7406 ",(0,s.jsx)(n.code,{children:"yaml"})," \u3001 ",(0,s.jsx)(n.code,{children:"json"})," \u3001  ",(0,s.jsx)(n.code,{children:"xml"})," \u3001  ",(0,s.jsx)(n.code,{children:"csv"})," \u3001   ",(0,s.jsx)(n.code,{children:"toml"})," \u7684\u547d\u4ee4\u884c\u5de5\u5177"]})]}),"\n",(0,s.jsx)(n.p,{children:"\u811a\u672c\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'#!/bin/bash\n\n# \u6253\u5370\u8868\u5934\necho -e "ServiceName\\tRequestCPU\\tRequestMemory\\tLimitCPU\\tLimitMemory"\n\n# \u83b7\u53d6\u6240\u6709 cd \u8d44\u6e90\u7684\u540d\u79f0\nfor cd in $(kubectl get cd -o custom-columns=NAME:.metadata.name --no-headers); do\n    # \u83b7\u53d6\u5f53\u524d cd \u8d44\u6e90\u7684 YAML \u5e76\u63d0\u53d6\u76f8\u5173\u4fe1\u606f\n    kubectl get cd $cd -o yaml | yq eval -o=json - | jq -r \'\n    .spec.template.spec.containers[] | \n    [\n        "\'$cd\'",\n        .resources.requests.cpu // "N/A",\n        .resources.requests.memory // "N/A",\n        .resources.limits.cpu // "N/A",\n        .resources.limits.memory // "N/A"\n    ] | @tsv\'\ndone\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u8f93\u51fa\u6548\u679c\u5982\u4e0b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ServiceName\tRequestCPU\tRequestMemory\tLimitCPU\tLimitMemory\nactivity-manager.pre.ali.ratel-pod-deploy\t250m\t2Gi\t2\t2Gi\nactivity-server.pre.ali.ratel-pod-deploy\t250m\t2Gi\t2\t2Gi\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var s=t(96540);const l={},r=s.createContext(l);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);