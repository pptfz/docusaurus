"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7923],{37938:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var o=t(74848),a=t(28453);const s={},r="centos7.8\u642d\u5efaopenstack Mitaka\u7248",i={id:"linux/openstack/mitaka/centos7.8\u642d\u5efaopenstack Mitaka\u7248",title:"centos7.8\u642d\u5efaopenstack Mitaka\u7248",description:"[toc]",source:"@site/docs/linux/openstack/mitaka/1.centos7.8\u642d\u5efaopenstack Mitaka\u7248.md",sourceDirName:"linux/openstack/mitaka",slug:"/linux/openstack/mitaka/centos7.8\u642d\u5efaopenstack Mitaka\u7248",permalink:"/docs/linux/openstack/mitaka/centos7.8\u642d\u5efaopenstack Mitaka\u7248",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"zabbix\u6570\u636e\u5e93\u8fc1\u79fb\u7684\u4e00\u4e2a\u5c0f\u95ee\u9898",permalink:"/docs/linux/monitor/zabbix/zabbix\u95ee\u9898\u8bb0\u5f55/zabbix\u6570\u636e\u5e93\u8fc1\u79fb\u7684\u4e00\u4e2a\u5c0f\u95ee\u9898"},next:{title:"Mitaka\u7248\u4f7f\u7528\u547d\u4ee4\u542f\u52a8\u4e00\u4e2a\u5b9e\u4f8b",permalink:"/docs/linux/openstack/mitaka/Mitaka\u7248\u4f7f\u7528\u547d\u4ee4\u542f\u52a8\u4e00\u4e2a\u5b9e\u4f8b"}},c={},l=[{value:"1.\u57fa\u7840\u73af\u5883\u914d\u7f6e",id:"1\u57fa\u7840\u73af\u5883\u914d\u7f6e",level:2},{value:"1.1 \u5173\u95ed\u9632\u706b\u5899\u548cselinux",id:"11-\u5173\u95ed\u9632\u706b\u5899\u548cselinux",level:3},{value:"1.2 \u914d\u7f6ehosts\u89e3\u6790",id:"12-\u914d\u7f6ehosts\u89e3\u6790",level:3},{value:"1.3 \u914d\u7f6eNTP\u670d\u52a1\uff0c\u8981\u4fdd\u8bc1\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u65f6\u95f4\u4e00\u81f4",id:"13-\u914d\u7f6entp\u670d\u52a1\u8981\u4fdd\u8bc1\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u65f6\u95f4\u4e00\u81f4",level:3},{value:"1.4 \u4e0b\u8f7dopenstack\u5b98\u65b9yum\u6e90\u5b89\u88c5openstack\u5ba2\u6237\u7aef",id:"14-\u4e0b\u8f7dopenstack\u5b98\u65b9yum\u6e90\u5b89\u88c5openstack\u5ba2\u6237\u7aef",level:3},{value:"2.\u63a7\u5236\u8282\u70b9\u73af\u5883\u5b89\u88c5",id:"2\u63a7\u5236\u8282\u70b9\u73af\u5883\u5b89\u88c5",level:2},{value:"2.1 \u5b89\u88c5mariadb\u6570\u636e\u5e93",id:"21-\u5b89\u88c5mariadb\u6570\u636e\u5e93",level:3},{value:"2.2 \u5b89\u88c5MongoDB\u6570\u636e\u5e93",id:"22-\u5b89\u88c5mongodb\u6570\u636e\u5e93",level:3},{value:"2.3 \u5b89\u88c5\u6d88\u606f\u961f\u5217rabbitmq",id:"23-\u5b89\u88c5\u6d88\u606f\u961f\u5217rabbitmq",level:3},{value:"2.4 \u5b89\u88c5memcached",id:"24-\u5b89\u88c5memcached",level:3},{value:"3.\u63a7\u5236\u8282\u70b9\u8ba4\u8bc1\u670d\u52a1keystone\u5b89\u88c5",id:"3\u63a7\u5236\u8282\u70b9\u8ba4\u8bc1\u670d\u52a1keystone\u5b89\u88c5",level:2},{value:"3.1 \u521b\u5efakeystone\u6570\u636e\u5e93\u5e76\u6388\u6743",id:"31-\u521b\u5efakeystone\u6570\u636e\u5e93\u5e76\u6388\u6743",level:3},{value:"3.2 \u914d\u7f6ekeystron",id:"32-\u914d\u7f6ekeystron",level:3},{value:"3.2.1 \u5b89\u88c5\u548c\u914d\u7f6ekeystron",id:"321-\u5b89\u88c5\u548c\u914d\u7f6ekeystron",level:4},{value:"3.2.2 \u521b\u5efa\u670d\u52a1\u5b9e\u4f53\u548cAPI\u7aef\u70b9",id:"322-\u521b\u5efa\u670d\u52a1\u5b9e\u4f53\u548capi\u7aef\u70b9",level:4},{value:"3.3 \u521b\u5efa\u57df\u3001\u9879\u76ee\u3001\u7528\u6237\u548c\u89d2\u8272",id:"33-\u521b\u5efa\u57df\u9879\u76ee\u7528\u6237\u548c\u89d2\u8272",level:3},{value:"3.3.1 \u521b\u5efa\u9ed8\u8ba4\u57df",id:"331-\u521b\u5efa\u9ed8\u8ba4\u57df",level:4},{value:"3.3.2 \u4e3a\u73af\u5883\u4e2d\u7684\u7ba1\u7406\u64cd\u4f5c\u521b\u5efa\u7ba1\u7406\u9879\u76ee\uff0c\u7528\u6237\u548c\u89d2\u8272",id:"332-\u4e3a\u73af\u5883\u4e2d\u7684\u7ba1\u7406\u64cd\u4f5c\u521b\u5efa\u7ba1\u7406\u9879\u76ee\u7528\u6237\u548c\u89d2\u8272",level:4},{value:"3.3.3 \u672c\u6307\u5357\u4f7f\u7528\u7684\u670d\u52a1\u9879\u76ee\u5305\u542b\u60a8\u6dfb\u52a0\u5230\u73af\u5883\u4e2d\u7684\u6bcf\u9879\u670d\u52a1\u7684\u552f\u4e00\u7528\u6237",id:"333-\u672c\u6307\u5357\u4f7f\u7528\u7684\u670d\u52a1\u9879\u76ee\u5305\u542b\u60a8\u6dfb\u52a0\u5230\u73af\u5883\u4e2d\u7684\u6bcf\u9879\u670d\u52a1\u7684\u552f\u4e00\u7528\u6237",level:4},{value:"3.3.4 \u5e38\u89c4\uff08\u975e\u7ba1\u7406\u5458\uff09\u4efb\u52a1\u5e94\u8be5\u4f7f\u7528\u975e\u7279\u6743\u9879\u76ee\u548c\u7528\u6237\u3002\u4f8b\u5982\uff0c\u672c\u6307\u5357\u521b\u5efa\u4e86\u6f14\u793a\u9879\u76ee\u548c\u7528\u6237",id:"334-\u5e38\u89c4\u975e\u7ba1\u7406\u5458\u4efb\u52a1\u5e94\u8be5\u4f7f\u7528\u975e\u7279\u6743\u9879\u76ee\u548c\u7528\u6237\u4f8b\u5982\u672c\u6307\u5357\u521b\u5efa\u4e86\u6f14\u793a\u9879\u76ee\u548c\u7528\u6237",level:4},{value:"3.4 \u9a8c\u8bc1\u64cd\u4f5c",id:"34-\u9a8c\u8bc1\u64cd\u4f5c",level:3},{value:"3.4.1 \u51fa\u4e8e\u5b89\u5168\u539f\u56e0\uff0c\u8bf7\u7981\u7528\u4e34\u65f6\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u673a\u5236\uff1a",id:"341-\u51fa\u4e8e\u5b89\u5168\u539f\u56e0\u8bf7\u7981\u7528\u4e34\u65f6\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u673a\u5236",level:4},{value:"3.4.2 \u53d6\u6d88\u8bbe\u7f6e\u4e34\u65f6OS_TOKEN\u548cOS_URL\u73af\u5883\u53d8\u91cf",id:"342-\u53d6\u6d88\u8bbe\u7f6e\u4e34\u65f6os_token\u548cos_url\u73af\u5883\u53d8\u91cf",level:4},{value:"3.4.3 \u4f5c\u4e3aadmin\u7528\u6237\uff0c\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\uff0c\u5bc6\u7801\u4e3a<code>ADMIN_PASS</code>",id:"343-\u4f5c\u4e3aadmin\u7528\u6237\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5bc6\u7801\u4e3aadmin_pass",level:4},{value:"3.4.4 \u4f5c\u4e3a\u6f14\u793a\u7528\u6237\uff0c\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c",id:"344-\u4f5c\u4e3a\u6f14\u793a\u7528\u6237\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c",level:4},{value:"3.5 \u521b\u5efaOpenStack\u5ba2\u6237\u7aef\u73af\u5883\u811a\u672c",id:"35-\u521b\u5efaopenstack\u5ba2\u6237\u7aef\u73af\u5883\u811a\u672c",level:3},{value:"3.5.1 \u521b\u5efa\u811a\u672c",id:"351-\u521b\u5efa\u811a\u672c",level:4},{value:"3.5.2 \u4f7f\u7528\u811a\u672c",id:"352-\u4f7f\u7528\u811a\u672c",level:4},{value:"4.\u63a7\u5236\u8282\u70b9\u955c\u50cf\u670d\u52a1glance\u5b89\u88c5",id:"4\u63a7\u5236\u8282\u70b9\u955c\u50cf\u670d\u52a1glance\u5b89\u88c5",level:2},{value:"4.1 \u521b\u5efaglance\u6570\u636e\u5e93\u5e76\u6388\u6743",id:"41-\u521b\u5efaglance\u6570\u636e\u5e93\u5e76\u6388\u6743",level:3},{value:"4.2 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee",id:"42-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee",level:3},{value:"4.3 \u521b\u5efa\u670d\u52a1\u51ed\u636e",id:"43-\u521b\u5efa\u670d\u52a1\u51ed\u636e",level:3},{value:"4.3.1 \u521b\u5efaglance\u7528\u6237\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3a<code>GLANCE_PASS</code>",id:"431-\u521b\u5efaglance\u7528\u6237\u5bc6\u7801\u8bbe\u7f6e\u4e3aglance_pass",level:4},{value:"4.3.2 \u5c06\u7ba1\u7406\u89d2\u8272\u6dfb\u52a0\u5230glance\u7528\u6237\u548c\u670d\u52a1\u9879\u76ee\u4e2d",id:"432-\u5c06\u7ba1\u7406\u89d2\u8272\u6dfb\u52a0\u5230glance\u7528\u6237\u548c\u670d\u52a1\u9879\u76ee\u4e2d",level:4},{value:"4.3.3 \u521b\u5efaglance\u670d\u52a1\u5b9e\u4f53",id:"433-\u521b\u5efaglance\u670d\u52a1\u5b9e\u4f53",level:4},{value:"4.3.4 \u521b\u5efaImage\u670d\u52a1API\u7aef\u70b9",id:"434-\u521b\u5efaimage\u670d\u52a1api\u7aef\u70b9",level:4},{value:"4.4 \u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",id:"44-\u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",level:3},{value:"4.4.1 \u5b89\u88c5\u5305",id:"441-\u5b89\u88c5\u5305",level:4},{value:"4.4.2 \u7f16\u8f91/etc/glance/glance-api.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",id:"442-\u7f16\u8f91etcglanceglance-apiconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",level:4},{value:"4.4.3 \u7f16\u8f91/etc/glance/glance-registry.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",id:"443-\u7f16\u8f91etcglanceglance-registryconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",level:4},{value:"4.4.4 \u540c\u6b65\u6570\u636e\u5e93",id:"444-\u540c\u6b65\u6570\u636e\u5e93",level:4},{value:"4.4.5 \u542f\u52a8glance\u670d\u52a1\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\uff08glance-api\u548cglance-registry\uff09",id:"445-\u542f\u52a8glance\u670d\u52a1\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542fglance-api\u548cglance-registry",level:4},{value:"4.4.6 \u9a8c\u8bc1\u64cd\u4f5c",id:"446-\u9a8c\u8bc1\u64cd\u4f5c",level:4},{value:"4.4.7 \u786e\u8ba4\u4e0a\u4f20\u56fe\u50cf\u5e76\u9a8c\u8bc1\u5c5e\u6027",id:"447-\u786e\u8ba4\u4e0a\u4f20\u56fe\u50cf\u5e76\u9a8c\u8bc1\u5c5e\u6027",level:4},{value:"5.\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u8ba1\u7b97\u670d\u52a1nova\u5b89\u88c5",id:"5\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u8ba1\u7b97\u670d\u52a1nova\u5b89\u88c5",level:2},{value:"5.1 \u521b\u5efanova\u548cnova-api\u6570\u636e\u5e93\u5e76\u6388\u6743",id:"51-\u521b\u5efanova\u548cnova-api\u6570\u636e\u5e93\u5e76\u6388\u6743",level:3},{value:"5.2 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",id:"52-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",level:3},{value:"5.3 \u521b\u5efa\u670d\u52a1\u51ed\u636e",id:"53-\u521b\u5efa\u670d\u52a1\u51ed\u636e",level:3},{value:"5.4 \u521b\u5efaCompute\u670d\u52a1API\u7aef\u70b9",id:"54-\u521b\u5efacompute\u670d\u52a1api\u7aef\u70b9",level:3},{value:"5.5 \u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",id:"55-\u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",level:3},{value:"5.5.1 \u5b89\u88c5\u5305",id:"551-\u5b89\u88c5\u5305",level:4},{value:"5.5.2 \u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",id:"552-\u7f16\u8f91etcnovanovaconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",level:4},{value:"5.5.3 \u540c\u6b65\u6570\u636e\u5e93\uff0c\u5ffd\u7565\u8f93\u51fa",id:"553-\u540c\u6b65\u6570\u636e\u5e93\u5ffd\u7565\u8f93\u51fa",level:4},{value:"5.5.4 \u542f\u52a8Compute\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",id:"554-\u542f\u52a8compute\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",level:4},{value:"5.6 \u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",id:"56-\u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",level:3},{value:"5.6.1 \u5b89\u88c5\u5305",id:"561-\u5b89\u88c5\u5305",level:4},{value:"5.6.2 \u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",id:"562-\u7f16\u8f91etcnovanovaconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",level:4},{value:"5.6.3 \u786e\u5b9a\u60a8\u7684\u8ba1\u7b97\u8282\u70b9\u662f\u5426\u652f\u6301\u865a\u62df\u673a\u7684\u786c\u4ef6\u52a0\u901f",id:"563-\u786e\u5b9a\u60a8\u7684\u8ba1\u7b97\u8282\u70b9\u662f\u5426\u652f\u6301\u865a\u62df\u673a\u7684\u786c\u4ef6\u52a0\u901f",level:4},{value:"5.6.4 \u542f\u52a8Compute\u670d\u52a1\u53ca\u5176\u4f9d\u8d56\u9879\uff0c\u5e76\u5c06\u5b83\u4eec\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u81ea\u52a8\u542f\u52a8",id:"564-\u542f\u52a8compute\u670d\u52a1\u53ca\u5176\u4f9d\u8d56\u9879\u5e76\u5c06\u5b83\u4eec\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u81ea\u52a8\u542f\u52a8",level:4},{value:"5.7 \u9a8c\u8bc1Compute\u670d\u52a1\u7684\u8fd0\u884c",id:"57-\u9a8c\u8bc1compute\u670d\u52a1\u7684\u8fd0\u884c",level:3},{value:"5.7.1 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",id:"571-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",level:4},{value:"5.7.2 \u5217\u51fa\u670d\u52a1\u7ec4\u4ef6\u4ee5\u9a8c\u8bc1\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8\u548c\u6ce8\u518c",id:"572-\u5217\u51fa\u670d\u52a1\u7ec4\u4ef6\u4ee5\u9a8c\u8bc1\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8\u548c\u6ce8\u518c",level:4},{value:"6.\u63a7\u5236\u8282\u70b9\u3001\u8ba1\u7b97\u8282\u70b9\u7f51\u7edc\u670d\u52a1neutron\u5b89\u88c5",id:"6\u63a7\u5236\u8282\u70b9\u8ba1\u7b97\u8282\u70b9\u7f51\u7edc\u670d\u52a1neutron\u5b89\u88c5",level:2},{value:"6.1 \u521b\u5efaneutron\u6570\u636e\u5e93\u5e76\u6388\u6743",id:"61-\u521b\u5efaneutron\u6570\u636e\u5e93\u5e76\u6388\u6743",level:3},{value:"6.2 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",id:"62-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",level:3},{value:"6.3 \u521b\u5efa\u670d\u52a1\u51ed\u8bc1",id:"63-\u521b\u5efa\u670d\u52a1\u51ed\u8bc1",level:3},{value:"6.3.1 \u521b\u5efaneutron\u7528\u6237\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3a<code>NEUTRON_PASS</code>",id:"631-\u521b\u5efaneutron\u7528\u6237\u5bc6\u7801\u8bbe\u7f6e\u4e3aneutron_pass",level:4},{value:"6.3.2 \u5c06admin\u89d2\u8272\u6dfb\u52a0\u5230neutron\u7528\u6237",id:"632-\u5c06admin\u89d2\u8272\u6dfb\u52a0\u5230neutron\u7528\u6237",level:4},{value:"6.3.3 \u521b\u5efaneutron\u670d\u52a1\u5b9e\u4f53",id:"633-\u521b\u5efaneutron\u670d\u52a1\u5b9e\u4f53",level:4},{value:"6.4 \u521b\u5efa\u7f51\u7edc\u670d\u52a1API\u7aef\u70b9",id:"64-\u521b\u5efa\u7f51\u7edc\u670d\u52a1api\u7aef\u70b9",level:3},{value:"6.5 \u914d\u7f6e\u7f51\u7edc\u9009\u9879\uff0c\u63a7\u5236\u8282\u70b9\u64cd\u4f5c",id:"65-\u914d\u7f6e\u7f51\u7edc\u9009\u9879\u63a7\u5236\u8282\u70b9\u64cd\u4f5c",level:3},{value:"6.5.1 \u5b89\u88c5\u5305",id:"651-\u5b89\u88c5\u5305",level:4},{value:"6.5.2 \u914d\u7f6e\u670d\u52a1\u5668\u7ec4\u4ef6",id:"652-\u914d\u7f6e\u670d\u52a1\u5668\u7ec4\u4ef6",level:4},{value:"6.6 \u914d\u7f6e\u6a21\u5757\u5316\u7b2c2\u5c42\uff08ML2\uff09\u63d2\u4ef6",id:"66-\u914d\u7f6e\u6a21\u5757\u5316\u7b2c2\u5c42ml2\u63d2\u4ef6",level:3},{value:"6.7 \u914d\u7f6elinux\u6865\u63a5\u4ee3\u7406",id:"67-\u914d\u7f6elinux\u6865\u63a5\u4ee3\u7406",level:3},{value:"6.8 \u914d\u7f6eDHCP\u4ee3\u7406",id:"68-\u914d\u7f6edhcp\u4ee3\u7406",level:3},{value:"6.9 \u914d\u7f6e\u5143\u6570\u636e\u4ee3\u7406",id:"69-\u914d\u7f6e\u5143\u6570\u636e\u4ee3\u7406",level:3},{value:"6.10 \u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc",id:"610-\u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc",level:3},{value:"6.11 \u5b8c\u6210\u5b89\u88c5",id:"611-\u5b8c\u6210\u5b89\u88c5",level:3},{value:"6.11.1 \u8054\u7f51\u670d\u52a1\u521d\u59cb\u5316\u811a\u672c\u671f\u5f85\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5 /etc/neutron/plugin.ini\u6307\u5411ML2\u63d2\u4ef6\u914d\u7f6e\u6587\u4ef6\uff0c/etc/neutron/plugins/ml2/ml2_conf.ini\u3002\u5982\u679c\u6b64\u7b26\u53f7\u94fe\u63a5\u4e0d\u5b58\u5728\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u5b83",id:"6111-\u8054\u7f51\u670d\u52a1\u521d\u59cb\u5316\u811a\u672c\u671f\u5f85\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5-etcneutronpluginini\u6307\u5411ml2\u63d2\u4ef6\u914d\u7f6e\u6587\u4ef6etcneutronpluginsml2ml2_confini\u5982\u679c\u6b64\u7b26\u53f7\u94fe\u63a5\u4e0d\u5b58\u5728\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u5b83",level:4},{value:"6.11.2 \u540c\u6b65\u6570\u636e\u5e93\uff0c\u6700\u540e\u63d0\u793aOK\u5373\u4e3a\u6b63\u786e",id:"6112-\u540c\u6b65\u6570\u636e\u5e93\u6700\u540e\u63d0\u793aok\u5373\u4e3a\u6b63\u786e",level:4},{value:"6.11.3 \u91cd\u65b0\u542f\u52a8Compute API\u670d\u52a1",id:"6113-\u91cd\u65b0\u542f\u52a8compute-api\u670d\u52a1",level:4},{value:"6.11.4 \u542f\u52a8\u7f51\u7edc\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",id:"6114-\u542f\u52a8\u7f51\u7edc\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",level:4},{value:"6.12 \u5b89\u88c5\u5305",id:"612-\u5b89\u88c5\u5305",level:3},{value:"6.13 \u914d\u7f6e\u516c\u5171\u7ec4\u4ef6",id:"613-\u914d\u7f6e\u516c\u5171\u7ec4\u4ef6",level:3},{value:"6.14 \u914d\u7f6e\u7f51\u7edc\u9009\u9879",id:"614-\u914d\u7f6e\u7f51\u7edc\u9009\u9879",level:3},{value:"6.14.1 \u914d\u7f6e\u6865\u63a5\u4ee3\u7406",id:"6141-\u914d\u7f6e\u6865\u63a5\u4ee3\u7406",level:4},{value:"6.14.2 \u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc",id:"6142-\u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc",level:4},{value:"6.15 \u5b8c\u6210\u5b89\u88c5",id:"615-\u5b8c\u6210\u5b89\u88c5",level:3},{value:"6.15.1 \u91cd\u65b0\u542f\u52a8Compute\u670d\u52a1",id:"6151-\u91cd\u65b0\u542f\u52a8compute\u670d\u52a1",level:4},{value:"6.15.2 \u542f\u52a8Linux\u7f51\u6865\u4ee3\u7406\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",id:"6152-\u542f\u52a8linux\u7f51\u6865\u4ee3\u7406\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",level:4},{value:"6.16 \u9a8c\u8bc1\u64cd\u4f5c\uff0c\u5728\u63a7\u5236\u8282\u70b9\u64cd\u4f5c",id:"616-\u9a8c\u8bc1\u64cd\u4f5c\u5728\u63a7\u5236\u8282\u70b9\u64cd\u4f5c",level:3},{value:"6.16.1 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",id:"6161-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",level:4},{value:"6.16.2 \u5217\u51fa\u5df2\u52a0\u8f7d\u7684\u6269\u5c55\u4ee5\u9a8c\u8bc1neutron-server\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8",id:"6162-\u5217\u51fa\u5df2\u52a0\u8f7d\u7684\u6269\u5c55\u4ee5\u9a8c\u8bc1neutron-server\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8",level:4},{value:"6.16.3 \u5217\u51fa\u4ee3\u7406\u4ee5\u9a8c\u8bc1\u6210\u529f\u542f\u52a8neutron\u4ee3\u7406\uff0calive\u5904\u90fd\u4e3a\u7b11\u8138\u5373\u4e3a\u6b63\u786e",id:"6163-\u5217\u51fa\u4ee3\u7406\u4ee5\u9a8c\u8bc1\u6210\u529f\u542f\u52a8neutron\u4ee3\u7406alive\u5904\u90fd\u4e3a\u7b11\u8138\u5373\u4e3a\u6b63\u786e",level:4},{value:"7.\u8ba1\u7b97\u8282\u70b9horizon web\u754c\u9762Dashboard\u5b89\u88c5",id:"7\u8ba1\u7b97\u8282\u70b9horizon-web\u754c\u9762dashboard\u5b89\u88c5",level:2},{value:"7.1 \u5b89\u88c5\u5305",id:"71-\u5b89\u88c5\u5305",level:3},{value:"7.2 \u7f16\u8f91/etc/openstack-dashboard/local_settings\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",id:"72-\u7f16\u8f91etcopenstack-dashboardlocal_settings\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",level:3},{value:"7.3 \u9a8c\u8bc1\u64cd\u4f5c",id:"73-\u9a8c\u8bc1\u64cd\u4f5c",level:3},{value:"7.3.1 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u5426\u5219\u540e\u7eed\u8bbf\u95eedashboard\u4f1a\u62a5500\u9519\u8bef",id:"731-\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u5426\u5219\u540e\u7eed\u8bbf\u95eedashboard\u4f1a\u62a5500\u9519\u8bef",level:4},{value:"7.3.2 \u767b\u5f55dashboard",id:"732-\u767b\u5f55dashboard",level:4}];function d(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"[toc]"}),"\n",(0,o.jsx)(e.h1,{id:"centos78\u642d\u5efaopenstack-mitaka\u7248",children:"centos7.8\u642d\u5efaopenstack Mitaka\u7248"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://docs.openstack.org/zh_CN/",children:"openstack\u4e2d\u6587\u6587\u6863"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://docs.openstack.org/mitaka/install-guide-rdo/",children:"mitaka\u7248\u5b98\u65b9\u6587\u6863"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"mitaka\u7248\u5bc6\u7801\u8bf4\u660e"})}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{style:{textAlign:"left"},children:"\u5bc6\u7801\u540d\u79f0"}),(0,o.jsx)(e.th,{style:{textAlign:"left"},children:"\u63cf\u8ff0"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u6570\u636e\u5e93\u5bc6\u7801(\u4e0d\u80fd\u4f7f\u7528\u53d8\u91cf)"}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u6570\u636e\u5e93\u7684root\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"ADMIN_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:[(0,o.jsx)(e.code,{children:"admin"})," \u7528\u6237\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"CEILOMETER_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"Telemetry \u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"CEILOMETER_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["Telemetry \u670d\u52a1\u7684 ",(0,o.jsx)(e.code,{children:"ceilometer"})," \u7528\u6237\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"CINDER_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u5757\u8bbe\u5907\u5b58\u50a8\u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"CINDER_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["\u5757\u8bbe\u5907\u5b58\u50a8\u670d\u52a1\u7684 ",(0,o.jsx)(e.code,{children:"cinder"})," \u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"DASH_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"Database password for the dashboard"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"DEMO_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:[(0,o.jsx)(e.code,{children:"demo"})," \u7528\u6237\u7684\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"GLANCE_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u955c\u50cf\u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"GLANCE_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["\u955c\u50cf\u670d\u52a1\u7684 ",(0,o.jsx)(e.code,{children:"glance"})," \u7528\u6237\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"HEAT_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"Orchestration\u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"HEAT_DOMAIN_PASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"Orchestration \u57df\u7684\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"HEAT_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["Orchestration \u670d\u52a1\u4e2d",(0,o.jsx)(e.code,{children:"heat"}),"\u7528\u6237\u7684\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"KEYSTONE_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u8ba4\u8bc1\u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"NEUTRON_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u7f51\u7edc\u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"NEUTRON_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["\u7f51\u7edc\u670d\u52a1\u7684 ",(0,o.jsx)(e.code,{children:"neutron"})," \u7528\u6237\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"NOVA_DBPASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"\u8ba1\u7b97\u670d\u52a1\u7684\u6570\u636e\u5e93\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"NOVA_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["\u8ba1\u7b97\u670d\u52a1\u4e2d",(0,o.jsx)(e.code,{children:"nova"}),"\u7528\u6237\u7684\u5bc6\u7801"]})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"RABBIT_PASS"})}),(0,o.jsx)(e.td,{style:{textAlign:"left"},children:"RabbitMQ\u7684guest\u7528\u6237\u5bc6\u7801"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{style:{textAlign:"left"},children:(0,o.jsx)(e.code,{children:"SWIFT_PASS"})}),(0,o.jsxs)(e.td,{style:{textAlign:"left"},children:["\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u7528\u6237",(0,o.jsx)(e.code,{children:"swift"}),"\u7684\u5bc6\u7801"]})]})]})]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u5b9e\u9a8c\u73af\u5883"})}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"\u89d2\u8272"}),(0,o.jsx)(e.th,{children:"IP"}),(0,o.jsx)(e.th,{children:"\u4e3b\u673a\u540d"}),(0,o.jsx)(e.th,{children:"\u9ed8\u8ba4\u7f51\u5173"}),(0,o.jsx)(e.th,{children:"\u786c\u4ef6\u73af\u5883"}),(0,o.jsx)(e.th,{children:"\u865a\u62df\u5316"}),(0,o.jsx)(e.th,{children:"\u9632\u706b\u5899"}),(0,o.jsx)(e.th,{children:"selinux"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u63a7\u5236\u8282\u70b9"}),(0,o.jsx)(e.td,{children:"10.0.0.11/24"}),(0,o.jsx)(e.td,{children:"controller"}),(0,o.jsx)(e.td,{children:"10.0.0.1"}),(0,o.jsx)(e.td,{children:"4G\u5185\u5b58\uff0c50G\u786c\u76d8"}),(0,o.jsx)(e.td,{children:"\u5f00\u542f"}),(0,o.jsx)(e.td,{children:"\u5173\u95ed"}),(0,o.jsx)(e.td,{children:"\u5173\u95ed"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u8ba1\u7b97\u8282\u70b9"}),(0,o.jsx)(e.td,{children:"10.0.0.31/24"}),(0,o.jsx)(e.td,{children:"compute1"}),(0,o.jsx)(e.td,{children:"10.0.0.1"}),(0,o.jsx)(e.td,{children:"4G\u5185\u5b58\uff0c50G\u786c\u76d8"}),(0,o.jsx)(e.td,{children:"\u5f00\u542f"}),(0,o.jsx)(e.td,{children:"\u5173\u95ed"}),(0,o.jsx)(e.td,{children:"\u5173\u95ed"})]})]})]}),"\n",(0,o.jsx)(e.h2,{id:"1\u57fa\u7840\u73af\u5883\u914d\u7f6e",children:"1.\u57fa\u7840\u73af\u5883\u914d\u7f6e"}),"\n",(0,o.jsx)(e.h3,{id:"11-\u5173\u95ed\u9632\u706b\u5899\u548cselinux",children:"1.1 \u5173\u95ed\u9632\u706b\u5899\u548cselinux"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"//\u7981\u7528\u9632\u706b\u5899\nsystemctl stop firewalld && systemctl disable firewalld\n\n//\u7981\u7528selinux\n#\u4e34\u65f6\u4fee\u6539\nsetenforce 0\n\n#\u6c38\u4e45\u4fee\u6539\uff0c\u91cd\u542f\u670d\u52a1\u5668\u540e\u751f\u6548\nsed -i '7s/enforcing/disabled/' /etc/selinux/config\n"})}),"\n",(0,o.jsx)(e.h3,{id:"12-\u914d\u7f6ehosts\u89e3\u6790",children:"1.2 \u914d\u7f6ehosts\u89e3\u6790"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u76f8\u540c\u64cd\u4f5c\ncat >> /etc/hosts << EOF\n10.0.0.11 controller\n10.0.0.31 compute1\n10.0.0.41 block1\n10.0.0.51 object1\n10.0.0.52 object2\nEOF\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"13-\u914d\u7f6entp\u670d\u52a1\u8981\u4fdd\u8bc1\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u65f6\u95f4\u4e00\u81f4",children:"1.3 \u914d\u7f6eNTP\u670d\u52a1\uff0c\u8981\u4fdd\u8bc1\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u65f6\u95f4\u4e00\u81f4"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u63a7\u5236\u8282\u70b9"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5b89\u88c5chrony\nyum -y install chrony\n\n2.\u7f16\u8f91chrony\u914d\u7f6e\u6587\u4ef6/etc/chrony.conf\n    /\u5220\u9664\u4ee5\u4e0b4\u884c\uff0c\u4f7f\u7528\u963f\u91cc\u4e91NTP\u670d\u52a1\u5668\n    server 0.centos.pool.ntp.org iburst\n    server 1.centos.pool.ntp.org iburst\n    server 2.centos.pool.ntp.org iburst\n    server 3.centos.pool.ntp.org iburst\n    \u4fee\u6539\u4e3a\n    server ntp1.aliyun.com iburst\n   /\u5141\u8bb8\u8fde\u63a5\u63a7\u5236\u8282\u70b9\u7684\u7f51\u6bb5\uff0c24\u884c\u589e\u52a0\u4ee5\u4e0b\u4e00\u884c\n    allow 10.0.0.0/24\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nsed -i '3,6d' /etc/chrony.conf && sed -i '3cserver ntp1.aliyun.com iburst' \\\n/etc/chrony.conf && sed -i '23callow 10.0.0.0/24' /etc/chrony.conf\n\n3.\u542f\u52a8NTP\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsystemctl enable chronyd && systemctl start chronyd\n\n4.\u68c0\u67e5\u7aef\u53e3\uff0c\u76d1\u542cudp323\u7aef\u53e3\nnetstat -nupl|grep chronyd\nudp        0      0 127.0.0.1:323           0.0.0.0:*              29356/chronyd       \nudp        0      0 0.0.0.0:123             0.0.0.0:*              29356/chronyd       \nudp6       0      0 ::1:323                 :::*                   29356/chronyd   \n\n5.\u9a8c\u8bc1\nchronyc sources\n210 Number of sources = 1\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^* 8.8.8.8                 2   6    37    29    +43us[ -830us] +/-   22ms\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u8ba1\u7b97\u8282\u70b9"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5b89\u88c5chrony\nyum -y install chrony\n\n2.\u7f16\u8f91chrony\u914d\u7f6e\u6587\u4ef6/etc/chrony.conf\n    /\u5220\u9664\u4ee5\u4e0b4\u884c\uff0c\u6307\u5b9a\u63a7\u5236\u8282\u70b9\u4e3aNTP\u670d\u52a1\u5668\n    server 0.centos.pool.ntp.org iburst\n    server 1.centos.pool.ntp.org iburst\n    server 2.centos.pool.ntp.org iburst\n    server 3.centos.pool.ntp.org iburst\n    \u4fee\u6539\u4e3a\n    server controller iburst\n \n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nsed -i '3,6d' /etc/chrony.conf && sed -i '3cserver controller iburst' /etc/chrony.conf    \n    \n3.\u542f\u52a8NTP\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsystemctl enable chronyd && systemctl start chronyd\n\n4.\u68c0\u67e5\u7aef\u53e3\uff0c\u76d1\u542cudp323\u7aef\u53e3\nnetstat -nupl|grep chronyd\nudp        0      0 127.0.0.1:323       0.0.0.0:*         1327/chronyd        \nudp6       0      0 ::1:323             :::*              1327/chronyd     \n\n5.\u9a8c\u8bc1\uff0c\u8ba1\u7b97\u8282\u70b9\u663e\u793a\u7684\u662f\u63a7\u5236\u8282\u70b9\nchronyc sources\n210 Number of sources = 1\nMS Name/IP address         Stratum Poll Reach LastRx Last sample               \n===============================================================================\n^? controller                    3   6   200    50  +1319ms[+1319ms] +/-  14.4s\n"})}),"\n",(0,o.jsx)(e.h3,{id:"14-\u4e0b\u8f7dopenstack\u5b98\u65b9yum\u6e90\u5b89\u88c5openstack\u5ba2\u6237\u7aef",children:"1.4 \u4e0b\u8f7dopenstack\u5b98\u65b9yum\u6e90\u5b89\u88c5openstack\u5ba2\u6237\u7aef"}),"\n",(0,o.jsxs)(e.p,{children:["\u26a0\ufe0f",(0,o.jsxs)(e.strong,{children:["Mitaka\u7248\u5b98\u65b9\u6587\u6863\u4e2d\u76f4\u63a5\u5b89\u88c5",(0,o.jsx)(e.code,{children:"centos-release-openstack-mitaka"}),"\u4f1a\u63d0\u793a\u6ca1\u6709\u53ef\u7528\u5305(\u4f7f\u7528\u7684\u662f\u963f\u91cc\u4e91\u7684yum\u6e90)\uff0c\u5f97\u5148\u4e0b\u8f7d\u4e00\u4e2a\u5305\u624d\u53ef\u4ee5\u7ee7\u7eed\u5b89\u88c5\uff01\uff01\uff01"]})]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u4e0b\u8f7d\u5b98\u65b9yum\u6e90\u63d0\u793a\u65e0\u5305\u53ef\u7528\u89e3\u51b3\u65b9\u6cd5"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://ask.openstack.org/en/question/90877/no-package-centos-release-openstack-mitaka-available/",children:"\u5173\u4e8em\u7248\u5b89\u88c5\u7684\u5751\uff0c\u63d0\u793a\u65e0\u5b89\u88c5\u5305"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:"https://cbs.centos.org/koji/buildinfo?buildID=10392",children:"\u5177\u4f53\u89e3\u51b3\u65b9\u6cd5"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u76f8\u540c\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u4e0b\u8f7dyum\u6e90\u5e76\u5b89\u88c5openstack\u5ba2\u6237\u7aef\nwget https://cbs.centos.org/kojifiles/packages/centos-release-openstack-mitaka/1/1.el7/noarch/centos-release-openstack-mitaka-1-1.el7.noarch.rpm\nyum -y localinstall centos-release-openstack-mitaka-1-1.el7.noarch.rpm   \nyum -y install python-openstackclient\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u64cd\u4f5c\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.h2,{id:"2\u63a7\u5236\u8282\u70b9\u73af\u5883\u5b89\u88c5",children:"2.\u63a7\u5236\u8282\u70b9\u73af\u5883\u5b89\u88c5"}),"\n",(0,o.jsx)(e.h3,{id:"21-\u5b89\u88c5mariadb\u6570\u636e\u5e93",children:"2.1 \u5b89\u88c5mariadb\u6570\u636e\u5e93"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5b89\u88c5mariadb\u6570\u636e\u5e93\nyum -y install mariadb mariadb-server python2-PyMySQL\n\n2.\u521b\u5efa\u5e76\u7f16\u8f91 /etc/my.cnf.d/openstack.cnf\n\u5728[mysqld]\u4e2d\uff0c\u8bbe\u7f6e\u201cbind-address\u201d\u503c\u4e3a\u63a7\u5236\u8282\u70b9\u7684\u7ba1\u7406\u7f51\u7edcIP\u5730\u5740\u4ee5\u4f7f\u5f97\u5176\u4ed6\u8282\u70b9\u53ef\u4ee5\u901a\u8fc7\u7ba1\u7406\u7f51\u7edc\u8bbf\u95ee\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u8bbe\u7f6e\u5176\u4ed6\u5173\u952e\u5b57\u6765\u8bbe\u7f6e\u4e00\u4e9b\u6709\u7528\u7684\u9009\u9879\u548cUTF-8\u7f16\u7801\ncat > /etc/my.cnf.d/openstack.cnf << EOF\n[mysqld]\nbind-address = 10.0.0.11\ndefault-storage-engine = innodb\ninnodb_file_per_table = on\nmax_connections = 4096\ncollation-server = utf8_general_ci\ncharacter-set-server = utf8\nEOF\n\n3.\u542f\u52a8\u6570\u636e\u5e93\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsystemctl enable mariadb && systemctl start mariadb\n\n4.\u8fdb\u884c\u6570\u636e\u5e93\u5b89\u5168\u8bbe\u7f6e \nmysql_secure_installation\n\nEnter current password for root (enter for none):\t\t/\u6ca1\u6709\u5bc6\u7801\uff0c\u76f4\u63a5\u56de\u8f66\nSet root password? [Y/n] n\t\t\t\t\t\t\t            /\u4e0d\u8bbe\u7f6eroot\u5bc6\u7801\nRemove anonymous users? [Y/n] y\t\t\t\t\t            /\u79fb\u9664\u533f\u540d\u7528\u6237\nDisallow root login remotely? [Y/n] y\t\t\t\t\t      /\u7981\u6b62root\u8fdc\u7a0b\u767b\u9646\nRemove test database and access to it? [Y/n] y\t\t  /\u79fb\u9664test\u6570\u636e\u5e93\nReload privilege tables now? [Y/n] y\t\t\t\t\t      /\u5237\u65b0\u6743\u9650\u8868\n"})}),"\n",(0,o.jsx)(e.h3,{id:"22-\u5b89\u88c5mongodb\u6570\u636e\u5e93",children:"2.2 \u5b89\u88c5MongoDB\u6570\u636e\u5e93"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Telemetry \u670d\u52a1\u4f7f\u7528 NoSQL \u6570\u636e\u5e93\u6765\u5b58\u50a8\u4fe1\u606f\uff0c\u5178\u578b\u5730\uff0c\u8fd9\u4e2a\u6570\u636e\u5e93\u8fd0\u884c\u5728\u63a7\u5236\u8282\u70b9\u4e0a\u3002\u5411\u5bfc\u4e2d\u4f7f\u7528MongoDB\u3002"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"mongodb\u76d1\u542ctcp/27017"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5b89\u88c5MongoDB\u6570\u636e\u5e93\nyum -y install mongodb-server mongodb\n\n2.\u7f16\u8f91\u6587\u4ef6/etc/mongod.conf\n\u914d\u7f6e bind_ip \u4f7f\u7528\u63a7\u5236\u8282\u70b9\u7ba1\u7406\u7f51\u5361\u7684IP\u5730\u5740\n\u4fee\u6539\u7b2c6\u884c\u4e3a\nbind_ip = 10.0.0.11\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cMongoDB\u4f1a\u5728``/var/lib/mongodb/journal`` \u76ee\u5f55\u4e0b\u521b\u5efa\u51e0\u4e2a1GB\u5927\u5c0f\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u5982\u679c\u4f60\u60f3\u5c06\u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\u51cf\u5c0f\u5230128MB\u5e76\u4e14\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u5360\u7528\u7684\u603b\u7a7a\u95f4\u4e3a512MB\uff0c\u914d\u7f6e smallfiles \u7684\u503c\n\u53d6\u6d88\u7b2c113\u884c\u6ce8\u91ca \nsmallfiles = true\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nsed -i.bak '/^bind_ip/cbind_ip = 10.0.0.11' /etc/mongod.conf \\\n&& sed -i 's/#smallfiles = true/smallfiles = true/' /etc/mongod.conf\n\n3.\u542f\u52a8MongoDB\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\nsystemctl enable mongod && systemctl start mongod\n"})}),"\n",(0,o.jsx)(e.h3,{id:"23-\u5b89\u88c5\u6d88\u606f\u961f\u5217rabbitmq",children:"2.3 \u5b89\u88c5\u6d88\u606f\u961f\u5217rabbitmq"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["OpenStack \u4f7f\u7528 ",(0,o.jsx)(e.a,{href:"https://docs.openstack.org/mitaka/zh_CN/install-guide-rdo/common/glossary.html#term-message-queue",children:(0,o.jsx)(e.em,{children:"message queue"})})," \u534f\u8c03\u64cd\u4f5c\u548c\u5404\u670d\u52a1\u7684\u72b6\u6001\u4fe1\u606f\u3002\u6d88\u606f\u961f\u5217\u670d\u52a1\u4e00\u822c\u8fd0\u884c\u5728\u63a7\u5236\u8282\u70b9\u4e0a"]})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"rabbitmq\u4f1a\u542f\u52a82\u4e2a\u7aef\u53e3"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"tcp/5672\t\trabbitmq\u670d\u52a1\u7aef\u53e3"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"tcp/25672\t  \u591a\u4e2arabbitmq\u901a\u4fe1\u7528\u5230\u7684\u7aef\u53e3"})}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u5b89\u88c5rabbitmq\nyum -y install rabbitmq-server\n\n2.\u542f\u52a8\u6d88\u606f\u961f\u5217rabbitmq\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\nsystemctl enable rabbitmq-server && systemctl start rabbitmq-server\n\n3.\u6dfb\u52a0openstack\u7528\u6237\nrabbitmqctl add_user openstack RABBIT_PASS\n\nCreating user "openstack"\n\n\n4.\u7ed9openstack\u7528\u6237\u8bbe\u7f6e\u8bfb\u548c\u5199\u6743\u9650   3\u4e2a.*\u5206\u522b\u662f \u53ef\u8bfb\u3001\u53ef\u5199\u3001\u53ef\u914d\u7f6e\nrabbitmqctl set_permissions openstack ".*" ".*" ".*"\n\nSetting permissions for user "openstack" in vhost "/" \n\n\n5.\u542f\u52a8rabbitmq\u4e00\u4e2a\u63d2\u4ef6\uff0c\u542f\u52a8\u4e4b\u540e\u4f1a\u76d1\u542ctcp/15672\uff0c\u662f\u4e00\u4e2aweb\u7ba1\u7406\u754c\u9762\uff0c\u9ed8\u8ba4\u7528\u6237\u540d\u5bc6\u7801guest\nrabbitmq-plugins enable rabbitmq_management\n\nThe following plugins have been enabled:\n  amqp_client\n  cowlib\n  cowboy\n  rabbitmq_web_dispatch\n  rabbitmq_management_agent\n  rabbitmq_management\n\nApplying plugin configuration to rabbit@controller... started 6 plugins.\n'})}),"\n",(0,o.jsx)(e.h3,{id:"24-\u5b89\u88c5memcached",children:"2.4 \u5b89\u88c5memcached"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u8ba4\u8bc1\u670d\u52a1\u8ba4\u8bc1\u7f13\u5b58\u4f7f\u7528Memcached\u7f13\u5b58\u4ee4\u724c\u3002\u7f13\u5b58\u670d\u52a1memecached\u8fd0\u884c\u5728\u63a7\u5236\u8282\u70b9\u3002\u5728\u751f\u4ea7\u90e8\u7f72\u4e2d\uff0c\u6211\u4eec\u63a8\u8350\u8054\u5408\u542f\u7528\u9632\u706b\u5899\u3001\u8ba4\u8bc1\u548c\u52a0\u5bc6\u4fdd\u8bc1\u5b83\u7684\u5b89\u5168\u3002"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"memcache\u76d1\u542c tcp/udp 11211\u7aef\u53e3"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5b89\u88c5\u8f6f\u4ef6\u5305\nyum -y install memcached python-memcached\n\n2.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u8bbe\u7f6ememcache\u76d1\u542c\u7aef\u53e3\u4e3a\u63a7\u5236\u8282\u70b9\uff0c\u9ed8\u8ba4\u76d1\u542c127.0.0.1\nsed -i.bak 's#127.0.0.1#10.0.0.11#g' /etc/sysconfig/memcached\n\n3.\u542f\u52a8memcached\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\nsystemctl enable memcached && systemctl start memcached\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u63a7\u5236\u8282\u70b9\u73af\u5883\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.h2,{id:"3\u63a7\u5236\u8282\u70b9\u8ba4\u8bc1\u670d\u52a1keystone\u5b89\u88c5",children:"3.\u63a7\u5236\u8282\u70b9\u8ba4\u8bc1\u670d\u52a1keystone\u5b89\u88c5"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"keystone\u8ba4\u8bc1\u670d\u52a1\u529f\u80fd\uff1a\u8ba4\u8bc1\u7ba1\u7406\u3001\u6388\u6743\u7ba1\u7406\u3001\u670d\u52a1\u76ee\u5f55"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u8ba4\u8bc1\uff1a\u7528\u6237\u540d\u548c\u5bc6\u7801"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u6388\u6743\uff1a\u6388\u6743\u7ba1\u7406\uff0c\u4f8b\u5982\u4e00\u4e9b\u6280\u672f\u7f51\u7ad9(\u6398\u91d1\u3001csdn)\u53ef\u4ee5\u6388\u6743\u5fae\u4fe1\u3001QQ\u767b\u9646"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u670d\u52a1\u76ee\u5f55\uff1a\u76f8\u5f53\u4e8e\u901a\u8baf\u5f55\uff0c\u5373\u8981\u8bbf\u95eeopenstack\u7684\u955c\u50cf\u3001\u7f51\u7edc\u3001\u5b58\u50a8\u7b49\u670d\u52a1\uff0c\u53ea\u9700\u8981\u627e\u5230keystone\u5373\u53ef\uff0c\u800c\u4e0d\u9700\u8981\u518d\u5355\u72ec\u8bb0\u4f4f\u5404\u4e2a\u670d\u52a1\u7684\u8bbf\u95ee\u5730\u5740"})}),"\n"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u540e\u7eed\u6bcf\u5b89\u88c5\u4e00\u4e2a\u670d\u52a1\u90fd\u9700\u8981\u5728keystone\u4e0a\u6ce8\u518c"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"31-\u521b\u5efakeystone\u6570\u636e\u5e93\u5e76\u6388\u6743",children:"3.1 \u521b\u5efakeystone\u6570\u636e\u5e93\u5e76\u6388\u6743"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u7528\u4ee5\u4e0b\u547d\u4ee4\u64cd\u4f5c\nmysql -e \"CREATE DATABASE keystone;\"\nmysql -e \"GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' \\\nIDENTIFIED BY 'KEYSTONE_DBPASS';\"\nmysql -e \"GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' \\\nIDENTIFIED BY 'KEYSTONE_DBPASS';\"\n"})}),"\n",(0,o.jsx)(e.h3,{id:"32-\u914d\u7f6ekeystron",children:"3.2 \u914d\u7f6ekeystron"}),"\n",(0,o.jsx)(e.h4,{id:"321-\u5b89\u88c5\u548c\u914d\u7f6ekeystron",children:"3.2.1 \u5b89\u88c5\u548c\u914d\u7f6ekeystron"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"keystone\u501f\u52a9apache\u8bbf\u95ee"}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"mod_wsgi\u662f\u5e2e\u52a9apache\u8fde\u63a5python\u7a0b\u5e8f"}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"\u76d1\u542c\u7aef\u53e3 5000(\u666e\u901a\u7528\u6237\u8bbf\u95ee) 35357(\u7ba1\u7406\u5458\u7528\u6237\u8bbf\u95ee)\uff0capache\u505a\u4e862\u4e2a\u591a\u7aef\u53e3\u7684\u7ad9\u70b9"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u5b89\u88c5\u76f8\u5173\u5305\nyum -y install openstack-keystone httpd mod_wsgi openstack-utils.noarch\n\n2.\u7f16\u8f91\u6587\u4ef6 /etc/keystone/keystone.conf \u5e76\u5b8c\u6210\u5982\u4e0b\u52a8\u4f5c\uff1a\n\u5728 [database] \u90e8\u5206\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u8bbf\u95ee\uff1a\n[root@controller ~]# vim /etc/keystone/keystone.conf\n[database]\nconnection = mysql+pymysql://keystone:KEYSTONE_DBPASS@controller/keystone\n\u5728[token]\u90e8\u5206\uff0c\u914d\u7f6eFernet UUID\u4ee4\u724c\u7684\u63d0\u4f9b\u8005\n[token]\nprovider = fernet\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/keystone/keystone.conf{,.bak}\ngrep -Ev \'^$|#\' /etc/keystone/keystone.conf.bak >/etc/keystone/keystone.conf\nopenstack-config --set /etc/keystone/keystone.conf DEFAULT admin_token  ADMIN_TOKEN\nopenstack-config --set /etc/keystone/keystone.conf database connection  mysql+pymysql://keystone:KEYSTONE_DBPASS@controller/keystone\nopenstack-config --set /etc/keystone/keystone.conf token provider  fernet\n\nMD5\u503c\nmd5sum /etc/keystone/keystone.conf\nd5acb3db852fe3f247f4f872b051b7a9  /etc/keystone/keystone.conf\n\n\n3.\u521d\u59cb\u5316\u8eab\u4efd\u8ba4\u8bc1\u670d\u52a1\u7684\u6570\u636e\u5e93\uff08\u5207\u6362\u5230keystone\u7528\u6237\uff0c\u4f7f\u7528\u7684shell\u662f/bin/sh\uff0c\u6267\u884c -c\u540e\u7684\u547d\u4ee4\uff09\nsu -s /bin/sh -c "keystone-manage db_sync" keystone\n\n\u4e0a\u4e00\u6b65\u64cd\u4f5c\u4e3a\u5bfc\u5165\u8868\uff0c\u4ee5\u4e0b\u547d\u4ee4\u6267\u884c\u8fd4\u56de\u6709\u8868\u5373\u4e3a\u6b63\u786e\nmysql keystone -e "show tables;"|wc -l\n38\n\n4.\u521d\u59cb\u5316Fernet key\nkeystone-manage fernet_setup --keystone-user keystone \\\n--keystone-group keystone\n\n5.\u914d\u7f6eApache\u670d\u52a1\u5668\n5.1\u7f16\u8f91/etc/httpd/conf/httpd.conf`\u6587\u4ef6\uff0c\u914d\u7f6e``ServerName`` \u9009\u9879\u4e3a\u63a7\u5236\u8282\u70b9\n96\u884c\u4e0b\u5165\u4ee5\u4e0b\u4e00\u884c\nServerName controller\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nsed -i.bak \'96cServerName controller\' /etc/httpd/conf/httpd.conf\n\nMD5\u503c\nmd5sum /etc/httpd/conf/httpd.conf\neaf0e2ae3fea84bac3e5a842f64bdfdb  /etc/httpd/conf/httpd.conf\n\n\n5.2\u521b\u5efa\u6587\u4ef6/etc/httpd/conf.d/wsgi-keystone.conf\ncat > /etc/httpd/conf.d/wsgi-keystone.conf <<\\EOF\nListen 5000\nListen 35357\n\n<VirtualHost *:5000>\n    WSGIDaemonProcess keystone-public processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}\n    WSGIProcessGroup keystone-public\n    WSGIScriptAlias / /usr/bin/keystone-wsgi-public\n    WSGIApplicationGroup %{GLOBAL}\n    WSGIPassAuthorization On\n    ErrorLogFormat "%{cu}t %M"\n    ErrorLog /var/log/httpd/keystone-error.log\n    CustomLog /var/log/httpd/keystone-access.log combined\n\n    <Directory /usr/bin>\n        Require all granted\n    </Directory>\n</VirtualHost>\n\n<VirtualHost *:35357>\n    WSGIDaemonProcess keystone-admin processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}\n    WSGIProcessGroup keystone-admin\n    WSGIScriptAlias / /usr/bin/keystone-wsgi-admin\n    WSGIApplicationGroup %{GLOBAL}\n    WSGIPassAuthorization On\n    ErrorLogFormat "%{cu}t %M"\n    ErrorLog /var/log/httpd/keystone-error.log\n    CustomLog /var/log/httpd/keystone-access.log combined\n\n    <Directory /usr/bin>\n        Require all granted\n    </Directory>\n</VirtualHost>\nEOF\n\nMD5\u503c\nmd5sum /etc/httpd/conf.d/wsgi-keystone.conf\n8f051eb53577f67356ed03e4550315c2  /etc/httpd/conf.d/wsgi-keystone.conf\n\n\n6.\u542f\u52a8apache\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\nsystemctl enable httpd && systemctl start httpd\n'})}),"\n",(0,o.jsx)(e.h4,{id:"322-\u521b\u5efa\u670d\u52a1\u5b9e\u4f53\u548capi\u7aef\u70b9",children:"3.2.2 \u521b\u5efa\u670d\u52a1\u5b9e\u4f53\u548cAPI\u7aef\u70b9"}),"\n",(0,o.jsx)(e.p,{children:"API\u7aef\u70b9\u67093\u4e2a"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"public\t\u516c\u5171"}),"\n",(0,o.jsx)(e.li,{children:"internal    \u5185\u90e8"}),"\n",(0,o.jsx)(e.li,{children:"admin    \u7ba1\u7406\u5458"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u5148\u51b3\u6761\u4ef6\n#\u914d\u7f6e\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\nexport OS_TOKEN=ADMIN_TOKEN\n#\u914d\u7f6e\u7aef\u70b9URL\nexport OS_URL=http://controller:35357/v3\n#\u914d\u7f6eIdentity API\u7248\u672c\nexport OS_IDENTITY_API_VERSION=3\n\n2.\u521b\u5efa\u670d\u52a1\u5b9e\u4f53\u548cAPI\u7aef\u70b9\n2.1 Identity\u670d\u52a1\u7ba1\u7406OpenStack\u73af\u5883\u4e2d\u7684\u670d\u52a1\u76ee\u5f55\u3002\u670d\u52a1\u4f7f\u7528\u6b64\u76ee\u5f55\u6765\u786e\u5b9a\u60a8\u7684\u73af\u5883\u4e2d\u53ef\u7528\u7684\u5176\u4ed6\u670d\u52a1\u3002\n\u4e3aIdentity\u670d\u52a1\u521b\u5efa\u670d\u52a1\u5b9e\u4f53\nopenstack service create --name \\\nkeystone --description "OpenStack Identity" identity\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | OpenStack Identity               |\n| enabled     | True                             |\n| id          | c7c0d1e96d7e4f809c2957099eb8a0d2 |\n| name        | keystone                         |\n| type        | identity                         |\n+-------------+----------------------------------+\n\n2.2 Identity\u670d\u52a1\u7ba1\u7406\u4e0eOpenStack\u73af\u5883\u4e2d\u7684\u670d\u52a1\u5173\u8054\u7684API\u7aef\u70b9\u7684\u76ee\u5f55\u3002\u670d\u52a1\u4f7f\u7528\u6b64\u76ee\u5f55\u6765\u786e\u5b9a\u5982\u4f55\u4e0e\u73af\u5883\u4e2d\u7684\u5176\u4ed6\u670d\u52a1\u8fdb\u884c\u901a\u4fe1\u3002\nOpenStack\u4e3a\u6bcf\u9879\u670d\u52a1\u4f7f\u7528\u4e09\u79cdAPI\u7aef\u70b9\u53d8\u4f53\uff1aadmin\uff0cinternal\u548cpublic\u3002\u7ba1\u7406API\u7aef\u70b9\u5141\u8bb8\u9ed8\u8ba4\u4fee\u6539\u7528\u6237\u548c\u79df\u6237\uff0c\u800c\u516c\u5171\u548c\u5185\u90e8API\u4e0d\u5141\u8bb8\u8fd9\u4e9b\u64cd\u4f5c\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u51fa\u4e8e\u5b89\u5168\u539f\u56e0\uff0c\u53d8\u4f53\u53ef\u80fd\u9a7b\u7559\u5728\u4e3a\u4e0d\u540c\u7c7b\u578b\u7684\u7528\u6237\u63d0\u4f9b\u670d\u52a1\u7684\u5355\u72ec\u7f51\u7edc\u4e0a\u3002\u4f8b\u5982\uff0c\u516c\u5171API\u7f51\u7edc\u53ef\u80fd\u4eceInternet\u4e0a\u53ef\u89c1\uff0c\u56e0\u6b64\u5ba2\u6237\u53ef\u4ee5\u7ba1\u7406\u4ed6\u4eec\u7684\u4e91\u3002\u7ba1\u7406API\u7f51\u7edc\u53ef\u80fd\u4ec5\u9650\u4e8e\u7ba1\u7406\u4e91\u57fa\u7840\u67b6\u6784\u7684\u7ec4\u7ec7\u5185\u7684\u8fd0\u8425\u5546\u3002\u5185\u90e8API\u7f51\u7edc\u53ef\u80fd\u4ec5\u9650\u4e8e\u5305\u542bOpenStack\u670d\u52a1\u7684\u4e3b\u673a\u3002\u6b64\u5916\uff0cOpenStack\u652f\u6301\u591a\u4e2a\u533a\u57df\u4ee5\u5b9e\u73b0\u53ef\u4f38\u7f29\u6027\u3002\u4e3a\u7b80\u5355\u8d77\u89c1\uff0c\u672c\u6307\u5357\u5c06\u7ba1\u7406\u7f51\u7edc\u7528\u4e8e\u6240\u6709\u7aef\u70b9\u53d8\u4f53\u548c\u9ed8\u8ba4\u503c RegionOne\u5730\u533a\u3002\n\u521b\u5efaIdentity Service API\u7aef\u70b9\uff1a\n\n#\u516c\u5171\u666e\u901a\u7528\u6237\u4f7f\u75285000\u7aef\u53e3\nopenstack endpoint create --region RegionOne \\\nidentity public http://controller:5000/v3\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | f63e9c4450254214947ac75cddd394c1 |\n| interface    | public                           |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | c7c0d1e96d7e4f809c2957099eb8a0d2 |\n| service_name | keystone                         |\n| service_type | identity                         |\n| url          | http://controller:5000/v3        |\n+--------------+----------------------------------+\n\n#keystone\u5185\u90e8\u901a\u4fe1\u4f7f\u75285000\u7aef\u53e3\nopenstack endpoint create --region RegionOne \\\nidentity internal http://controller:5000/v3\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 9b6a5be720ea46a4a38f403c47ad8b8f |\n| interface    | internal                         |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | c7c0d1e96d7e4f809c2957099eb8a0d2 |\n| service_name | keystone                         |\n| service_type | identity                         |\n| url          | http://controller:5000/v3        |\n+--------------+----------------------------------+\n\n#\u7ba1\u7406\u5458\u4f7f\u752835357\u7aef\u53e3\nopenstack endpoint create --region RegionOne \\\nidentity admin http://controller:35357/v3\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 53d4bdc5bea041a0abfb9ea89dff65d6 |\n| interface    | admin                            |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | c7c0d1e96d7e4f809c2957099eb8a0d2 |\n| service_name | keystone                         |\n| service_type | identity                         |\n| url          | http://controller:35357/v3       |\n+--------------+----------------------------------+\n'})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u521b\u5efa\u5b8cAPI\u7aef\u70b9\u540e\u4f7f\u7528\u547d\u4ee4",(0,o.jsx)(e.code,{children:"openstack endpoint list"}),"\u9a8c\u8bc1\u662f\u5426\u521b\u5efa\u6210\u529f"]})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack endpoint list\n+----------------------------------+-----------+--------------+--------------+---------+-----------+----------------------------+\n| ID                               | Region    | Service Name | Service Type | Enabled | Interface | URL                        |\n+----------------------------------+-----------+--------------+--------------+---------+-----------+----------------------------+\n| 2f551bb367c045379a8042cdcb7287eb | RegionOne | keystone     | identity     | True    | public    | http://controller:5000/v3  |\n| 77b014a9b8d44d038cb5d608ff6b9d56 | RegionOne | keystone     | identity     | True    | internal  | http://controller:5000/v3  |\n| c2fcc9c1ee0244acb2860124a1575fd0 | RegionOne | keystone     | identity     | True    | admin     | http://controller:35357/v3 |\n+----------------------------------+-----------+--------------+--------------+---------+-----------+----------------------------+\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u5220\u9664API\u7aef\u70b9\u4f7f\u7528",(0,o.jsx)(e.code,{children:"openstack delete <endpoint-id>"})]})}),"\n",(0,o.jsx)(e.h3,{id:"33-\u521b\u5efa\u57df\u9879\u76ee\u7528\u6237\u548c\u89d2\u8272",children:"3.3 \u521b\u5efa\u57df\u3001\u9879\u76ee\u3001\u7528\u6237\u548c\u89d2\u8272"}),"\n",(0,o.jsx)(e.h4,{id:"331-\u521b\u5efa\u9ed8\u8ba4\u57df",children:"3.3.1 \u521b\u5efa\u9ed8\u8ba4\u57df"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'openstack domain create --description "Default Domain" default\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | Default Domain                   |\n| enabled     | True                             |\n| id          | fad8700e172044e6ac4869c9eed6d2c3 |\n| name        | default                          |\n+-------------+----------------------------------+\n'})}),"\n",(0,o.jsx)(e.h4,{id:"332-\u4e3a\u73af\u5883\u4e2d\u7684\u7ba1\u7406\u64cd\u4f5c\u521b\u5efa\u7ba1\u7406\u9879\u76ee\u7528\u6237\u548c\u89d2\u8272",children:"3.3.2 \u4e3a\u73af\u5883\u4e2d\u7684\u7ba1\u7406\u64cd\u4f5c\u521b\u5efa\u7ba1\u7406\u9879\u76ee\uff0c\u7528\u6237\u548c\u89d2\u8272"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u521b\u5efa\u7ba1\u7406\u9879\u76ee\nopenstack project create --domain default \\\n--description "Admin Project" admin\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | Admin Project                    |\n| domain_id   | fad8700e172044e6ac4869c9eed6d2c3 |\n| enabled     | True                             |\n| id          | 9c1b0cb2b3914507b429f3f7b0c6b5e4 |\n| is_domain   | False                            |\n| name        | admin                            |\n| parent_id   | fad8700e172044e6ac4869c9eed6d2c3 |\n+-------------+----------------------------------+\n\n2.\u521b\u5efa\u7ba1\u7406\u5458\u7528\u6237\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3aADMIN_PASS     //\u8fd9\u91cc\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\u548c\u975e\u4ea4\u4e92\u5f0f\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\n#\u975e\u4ea4\u4e92\u5f0f\u8bbe\u7f6e\u5bc6\u7801\nopenstack user create --domain default \\\n--password ADMIN_PASS admin\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | 984cb3d5f3054e16b029676de97b6ca6 |\n| enabled   | True                             |\n| id        | 273c94d5f389418b83ee6738376a6bdf |\n| name      | admin                            |\n+-----------+----------------------------------+\n\n#\u4ea4\u4e92\u5f0f\u8bbe\u7f6e\u5bc6\u7801\nopenstack user create --domain default \\\n--password-prompt admin\nUser Password:\nRepeat User Password:\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | fad8700e172044e6ac4869c9eed6d2c3 |\n| enabled   | True                             |\n| id        | cc0f0af9f5c1492aa8919bf936c1c19b |\n| name      | admin                            |\n+-----------+----------------------------------+\n\n3.\u521b\u5efa\u7ba1\u7406\u5458\u89d2\u8272\nopenstack role create admin\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | None                             |\n| id        | 921e36b9338141479f52f7c46c04f9ef |\n| name      | admin                            |\n+-----------+----------------------------------+\n\n4.\u5c06admin\u89d2\u8272\u6dfb\u52a0\u5230admin\u9879\u76ee\u548c\u7528\u6237\nopenstack role add --project admin --user admin admin\n'})}),"\n",(0,o.jsx)(e.h4,{id:"333-\u672c\u6307\u5357\u4f7f\u7528\u7684\u670d\u52a1\u9879\u76ee\u5305\u542b\u60a8\u6dfb\u52a0\u5230\u73af\u5883\u4e2d\u7684\u6bcf\u9879\u670d\u52a1\u7684\u552f\u4e00\u7528\u6237",children:"3.3.3 \u672c\u6307\u5357\u4f7f\u7528\u7684\u670d\u52a1\u9879\u76ee\u5305\u542b\u60a8\u6dfb\u52a0\u5230\u73af\u5883\u4e2d\u7684\u6bcf\u9879\u670d\u52a1\u7684\u552f\u4e00\u7528\u6237"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u521b\u5efa\u670d\u52a1\u9879\u76ee"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'#service\uff0c\u540e\u671f\u7528\u4e8e\u5173\u8054openstack\u7cfb\u7edf\u7528\u6237glance\u3001nova\u3001neutron\nopenstack project create --domain default \\\n--description "Service Project" service\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | Service Project                  |\n| domain_id   | fad8700e172044e6ac4869c9eed6d2c3 |\n| enabled     | True                             |\n| id          | ae31639e04be474cbabcad502be62cac |\n| is_domain   | False                            |\n| name        | service                          |\n| parent_id   | fad8700e172044e6ac4869c9eed6d2c3 |\n+-------------+----------------------------------+\n'})}),"\n",(0,o.jsx)(e.h4,{id:"334-\u5e38\u89c4\u975e\u7ba1\u7406\u5458\u4efb\u52a1\u5e94\u8be5\u4f7f\u7528\u975e\u7279\u6743\u9879\u76ee\u548c\u7528\u6237\u4f8b\u5982\u672c\u6307\u5357\u521b\u5efa\u4e86\u6f14\u793a\u9879\u76ee\u548c\u7528\u6237",children:"3.3.4 \u5e38\u89c4\uff08\u975e\u7ba1\u7406\u5458\uff09\u4efb\u52a1\u5e94\u8be5\u4f7f\u7528\u975e\u7279\u6743\u9879\u76ee\u548c\u7528\u6237\u3002\u4f8b\u5982\uff0c\u672c\u6307\u5357\u521b\u5efa\u4e86\u6f14\u793a\u9879\u76ee\u548c\u7528\u6237"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u521b\u5efa\u6f14\u793a\u9879\u76ee\nopenstack project create --domain default \\\n--description "Demo Project" demo\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | Demo Project                     |\n| domain_id   | fad8700e172044e6ac4869c9eed6d2c3 |\n| enabled     | True                             |\n| id          | 6244aa0291104859b255990cef3eacd6 |\n| is_domain   | False                            |\n| name        | demo                             |\n| parent_id   | fad8700e172044e6ac4869c9eed6d2c3 |\n+-------------+----------------------------------+\n\n2.\u521b\u5efa\u6f14\u793a\u7528\u6237\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3a123456   //\u8fd9\u91cc\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\u548c\u975e\u4ea4\u4e92\u5f0f\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\n#\u975e\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\nopenstack user create --domain default \\\n--password 123456 demo\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | af51b1180eb14a66b0380e4cd134df90 |\n| enabled   | True                             |\n| id        | c75ad14657d0497190cb479ba50f531b |\n| name      | demo                             |\n+-----------+----------------------------------+\n\n#\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\nopenstack user create --domain default \\\n--password-prompt demo\nUser Password:\nRepeat User Password:\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | fad8700e172044e6ac4869c9eed6d2c3 |\n| enabled   | True                             |\n| id        | 4639e42215a946b4be7e588d36979c64 |\n| name      | demo                             |\n+-----------+----------------------------------+\n\n3.\u521b\u5efa\u7528\u6237\u89d2\u8272\nopenstack role create user\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | None                             |\n| id        | a35f989b04d1403e92a19895cae21c9d |\n| name      | user                             |\n+-----------+----------------------------------+\n\n4.\u5c06\u7528\u6237\u89d2\u8272\u6dfb\u52a0\u5230\u6f14\u793a\u9879\u76ee\u548c\u7528\u6237\nopenstack role add --project demo --user demo user\n'})}),"\n",(0,o.jsx)(e.h3,{id:"34-\u9a8c\u8bc1\u64cd\u4f5c",children:"3.4 \u9a8c\u8bc1\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.h4,{id:"341-\u51fa\u4e8e\u5b89\u5168\u539f\u56e0\u8bf7\u7981\u7528\u4e34\u65f6\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u673a\u5236",children:"3.4.1 \u51fa\u4e8e\u5b89\u5168\u539f\u56e0\uff0c\u8bf7\u7981\u7528\u4e34\u65f6\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u673a\u5236\uff1a"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u7f16\u8f91\u6587\u4ef6 ",(0,o.jsx)(e.code,{children:"/etc/keystone/keystone-paste.ini"})," \u5e76\u4e14\u79fb\u9664",(0,o.jsx)(e.code,{children:"admin_token_auth"})," \u4ece ",(0,o.jsx)(e.code,{children:"[pipeline:public_api], [pipeline:admin_api],"})," \u548c ",(0,o.jsx)(e.code,{children:"[pipeline:api_v3]"})," \u90e8\u5206"]})}),"\n",(0,o.jsx)(e.admonition,{type:"tip",children:(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u8fd9\u4e00\u6b65\u64cd\u4f5c\u53ef\u80fd\u4f1a\u9020\u6210\u540e\u7eedkeystone\u8ba4\u8bc1\u5931\u8d25\uff01\uff01\uff01\uff0c\u5b9e\u9a8c\u7684\u65f6\u5019\u53ef\u4ee5\u4e0d\u6267\u884c\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"sed -i.bak '51,64d' /etc/keystone/keystone-paste.ini\n"})}),"\n",(0,o.jsx)(e.h4,{id:"342-\u53d6\u6d88\u8bbe\u7f6e\u4e34\u65f6os_token\u548cos_url\u73af\u5883\u53d8\u91cf",children:"3.4.2 \u53d6\u6d88\u8bbe\u7f6e\u4e34\u65f6OS_TOKEN\u548cOS_URL\u73af\u5883\u53d8\u91cf"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"unset OS_TOKEN OS_URL\n"})}),"\n",(0,o.jsxs)(e.h4,{id:"343-\u4f5c\u4e3aadmin\u7528\u6237\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u5bc6\u7801\u4e3aadmin_pass",children:["3.4.3 \u4f5c\u4e3aadmin\u7528\u6237\uff0c\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\uff0c\u5bc6\u7801\u4e3a",(0,o.jsx)(e.code,{children:"ADMIN_PASS"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack --os-auth-url http://controller:35357/v3 \\\n--os-project-domain-name default --os-user-domain-name default  \\\n--os-project-name admin --os-username admin token issue\nPassword: \n+------------+----------------------------------------------------------------------------------------------------------------------------------------------+\n| Field      | Value                                                                                                                                        |\n+------------+----------------------------------------------------------------------------------------------------------------------------------------------+\n| expires    | 2019-01-31T05:46:45.000000Z                                                                                                                  |\n| id         | gAAAAABcUn21ftl6WYlhMsqIffRDo9Pg6Ei35hUlg8D_kzw1Azy-                                                                                         |\n|            | 4Ly1DeL0s3YbMOlz88jVFWnMyg2gaxFoVsS2pZYnRhVlnclg1yofFFHOENz39XHsuCUYICuDq4XqOLEbKWyS9IfZuNbWtKjEQa-jQaoe4PCk0fyFG0B6nE3vn9gNkOvXiTA          |\n| project_id | 9c1b0cb2b3914507b429f3f7b0c6b5e4                                                                                                             |\n| user_id    | cc0f0af9f5c1492aa8919bf936c1c19b                                                                                                             |\n+------------+----------------------------------------------------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,o.jsx)(e.h4,{id:"344-\u4f5c\u4e3a\u6f14\u793a\u7528\u6237\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c",children:"3.4.4 \u4f5c\u4e3a\u6f14\u793a\u7528\u6237\uff0c\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c"}),"\n",(0,o.jsx)(e.admonition,{type:"caution",children:(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u6267\u884c3.4.1\u5c31\u4f1a\u6709\u95ee\u9898\uff0c\u4f1a\u62a5\u9519HTTP 500"})})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack --os-auth-url http://controller:5000/v3 \\\n--os-project-domain-name default --os-user-domain-name default \\\n--os-project-name demo --os-username demo token issue\nPassword: \nDiscovering versions from the identity service failed when creating the password plugin. Attempting to determine version from URL.\nInternal Server Error (HTTP 500)\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u4e0d\u6267\u884c3.4.1\uff0c\u9a8c\u8bc1\u5c31\u6ca1\u6709\u95ee\u9898"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack --os-auth-url http://controller:5000/v3 \\\n--os-project-domain-name default --os-user-domain-name default \\\n--os-project-name demo --os-username demo token issue\n+------------+-----------------------------------------------------------------------------------------------------------------------------------------+\n| Field      | Value                                                                                                                                   |\n+------------+-----------------------------------------------------------------------------------------------------------------------------------------+\n| expires    | 2019-01-31T10:30:43.000000Z                                                                                                             |\n| id         | gAAAAABeym2jDfXll4iZ2JcCP1XY1mHbu8Ovgaf8BMWe1FsoBp9XkaEqsnphx_BIuY0RFC-goS-JVZJ0xbiOajLnob7nWYKz5zlPlGkybvtDWd6L3jRMGD20RE-             |\n|            | H5gRz5oBXPPRUt9e5Kxbc-5_WXu_nfjw3ASXPIu25inoeeXsvd1aeg9FzgBE                                                                            |\n| project_id | d08b00aa3c6944afa7095c280319acb9                                                                                                        |\n| user_id    | ec75d657d09c4899894d40364011f552                                                                                                        |\n+------------+-----------------------------------------------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,o.jsx)(e.h3,{id:"35-\u521b\u5efaopenstack\u5ba2\u6237\u7aef\u73af\u5883\u811a\u672c",children:"3.5 \u521b\u5efaOpenStack\u5ba2\u6237\u7aef\u73af\u5883\u811a\u672c"}),"\n",(0,o.jsx)(e.h4,{id:"351-\u521b\u5efa\u811a\u672c",children:"3.5.1 \u521b\u5efa\u811a\u672c"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91admin-openrc\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9,\u8fd9\u91cc\u653e\u5728/opt\u4e0b"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"cat > /opt/admin-openrc <<EOF\nexport OS_PROJECT_DOMAIN_NAME=default\nexport OS_USER_DOMAIN_NAME=default\nexport OS_PROJECT_NAME=admin\nexport OS_USERNAME=admin\nexport OS_PASSWORD=ADMIN_PASS\nexport OS_AUTH_URL=http://controller:35357/v3\nexport OS_IDENTITY_API_VERSION=3\nexport OS_IMAGE_API_VERSION=2\nEOF\n"})}),"\n",(0,o.jsx)(e.h4,{id:"352-\u4f7f\u7528\u811a\u672c",children:"3.5.2 \u4f7f\u7528\u811a\u672c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u52a0\u8f7dadmin-openrc\u6587\u4ef6\uff0c\u4f7f\u7528Identity\u670d\u52a1\u7684\u4f4d\u7f6e\u4ee5\u53caadmin\u9879\u76ee\u548c\u7528\u6237\u51ed\u636e\u586b\u5145\u73af\u5883\u53d8\u91cf\nsource /opt/admin-openrc \n\n2.\u8bf7\u6c42\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\uff08\u6ce8\u610fexpires\u4e2d\u662fUTC\u65f6\u95f4\uff0c\u843d\u540e\u4e2d\u56fd8\u4e2a\u5c0f\u65f6\uff0c\u6211\u56fd\u662f\u4e1c\u516b\u533a\uff0c\u4f7f\u7528timedatectl\u67e5\u770b\u65f6\u95f4\u53ca\u65f6\u533a\uff0c\u9ed8\u8ba4\u8fc7\u671f\u65f6\u95f41\u5c0f\u65f6\uff09\nopenstack token issue\n+------------+----------------------------------------------------------------------------------------------------------------------------------------------+\n| Field      | Value                                                                                                                                        |\n+------------+----------------------------------------------------------------------------------------------------------------------------------------------+\n| expires    | 2019-01-31T10:49:41.000000Z                                                                                                                  |\n| id         | gAAAAABcUsS1O_B3QETf0hx8KWiuUyTBz23e2E70mY6DeWPvZreQrX58bEyJcMVgLGazsrKrqaJw0gSK75JHT0WNHf7V6VxNR5-uYLJKsGIuaUzNe9RMdTys_CcK680L-            |\n|            | NU9VdSDllR6GQvbu4EqejSm_1d5iarR2cQD8n8kG1PcV_SNijApskk                                                                                       |\n| project_id | e33e3feaef784a5bb45bd9c766bc0f46                                                                                                             |\n| user_id    | aaa8bfce5b5d451b956bb76dee235b9e                                                                                                             |\n+------------+----------------------------------------------------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u63a7\u5236\u8282\u70b9\u8ba4\u8bc1\u670d\u52a1keystone\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.h2,{id:"4\u63a7\u5236\u8282\u70b9\u955c\u50cf\u670d\u52a1glance\u5b89\u88c5",children:"4.\u63a7\u5236\u8282\u70b9\u955c\u50cf\u670d\u52a1glance\u5b89\u88c5"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"OpenStack\u955c\u50cf\u670d\u52a1\u5305\u62ec\u4ee5\u4e0b\u7ec4\u4ef6\uff1a"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"glance-api\t\t\t\u63a5\u6536\u955c\u50cfAPI\u7684\u8c03\u7528\uff0c\u8bf8\u5982\u955c\u50cf\u53d1\u73b0\u3001\u6062\u590d\u3001\u5b58\u50a8"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"glance-registry\t\u5b58\u50a8\u3001\u5904\u7406\u548c\u6062\u590d\u955c\u50cf\u7684\u5143\u6570\u636e(\u5c5e\u6027)\uff0c\u5143\u6570\u636e\u5305\u62ec\u9879\u8bf8\u5982\u5927\u5c0f\u548c\u7c7b\u578b"})}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"glance\u670d\u52a1\u76d1\u542c\u4e24\u4e2a\u7aef\u53e3"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"glance-api\t9292"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"glance-registry\t9191"})}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"41-\u521b\u5efaglance\u6570\u636e\u5e93\u5e76\u6388\u6743",children:"4.1 \u521b\u5efaglance\u6570\u636e\u5e93\u5e76\u6388\u6743"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nmysql -e \"CREATE DATABASE glance;\"\nmysql -e \"GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' \\\nIDENTIFIED BY 'GLANCE_DBPASS';\"\nmysql -e \"GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' \\\nIDENTIFIED BY 'GLANCE_DBPASS';\"\n"})}),"\n",(0,o.jsx)(e.h3,{id:"42-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee",children:"4.2 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"source /opt/admin-openrc\n"})}),"\n",(0,o.jsx)(e.h3,{id:"43-\u521b\u5efa\u670d\u52a1\u51ed\u636e",children:"4.3 \u521b\u5efa\u670d\u52a1\u51ed\u636e"}),"\n",(0,o.jsxs)(e.h4,{id:"431-\u521b\u5efaglance\u7528\u6237\u5bc6\u7801\u8bbe\u7f6e\u4e3aglance_pass",children:["4.3.1 \u521b\u5efaglance\u7528\u6237\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3a",(0,o.jsx)(e.code,{children:"GLANCE_PASS"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"//\u8fd9\u91cc\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\u548c\u975e\u4ea4\u4e92\u5f0f\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\n#\u975e\u4ea4\u4e92\u5f0f\u8bbe\u7f6e\u5bc6\u7801\nopenstack user create --domain default --password GLANCE_PASS glance\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | af51b1180eb14a66b0380e4cd134df90 |\n| enabled   | True                             |\n| id        | 593894e4dabc411ebecf8cbe8f3f1109 |\n| name      | glance                           |\n+-----------+----------------------------------+\n\n#\u4ea4\u4e92\u5f0f\u8bbe\u7f6e\u5bc6\u7801\nopenstack user create --domain default --password-prompt glance\nUser Password:\nRepeat User Password:\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | b245194b1e8749d0b3c51a78e05d7734 |\n| enabled   | True                             |\n| id        | ff135a9cce5e4a55842dd2beaffa67e2 |\n| name      | glance                           |\n+-----------+----------------------------------+\n"})}),"\n",(0,o.jsx)(e.h4,{id:"432-\u5c06\u7ba1\u7406\u89d2\u8272\u6dfb\u52a0\u5230glance\u7528\u6237\u548c\u670d\u52a1\u9879\u76ee\u4e2d",children:"4.3.2 \u5c06\u7ba1\u7406\u89d2\u8272\u6dfb\u52a0\u5230glance\u7528\u6237\u548c\u670d\u52a1\u9879\u76ee\u4e2d"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack role add --project service --user glance admin\n"})}),"\n",(0,o.jsx)(e.h4,{id:"433-\u521b\u5efaglance\u670d\u52a1\u5b9e\u4f53",children:"4.3.3 \u521b\u5efaglance\u670d\u52a1\u5b9e\u4f53"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'openstack service create --name glance \\\n--description "OpenStack Image" image\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | OpenStack Image                  |\n| enabled     | True                             |\n| id          | de2e6d60f6234918a96f768516a36e9a |\n| name        | glance                           |\n| type        | image                            |\n+-------------+----------------------------------+\n'})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u5220\u9664\u670d\u52a1\u5b9e\u4f53\u4f7f\u7528\u547d\u4ee4",(0,o.jsx)(e.code,{children:"openstack service delete <service-id>"})]})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u4f7f\u7528\u547d\u4ee4",(0,o.jsx)(e.code,{children:"openstack service list"}),"\u67e5\u770b",(0,o.jsx)(e.code,{children:"service-id"}),"\u7136\u540e\u6839\u636eid\u5220\u9664"]})}),"\n",(0,o.jsx)(e.h4,{id:"434-\u521b\u5efaimage\u670d\u52a1api\u7aef\u70b9",children:"4.3.4 \u521b\u5efaImage\u670d\u52a1API\u7aef\u70b9"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack endpoint create --region RegionOne \\\nimage public http://controller:9292\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 7aede44313aa4f98971c513fb6aa37b9 |\n| interface    | public                           |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | de2e6d60f6234918a96f768516a36e9a |\n| service_name | glance                           |\n| service_type | image                            |\n| url          | http://controller:9292           |\n+--------------+----------------------------------+\n\nopenstack endpoint create --region RegionOne \\\nimage internal http://controller:9292\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 8edf9fd9452347d99d1a419b5f631f2c |\n| interface    | internal                         |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | de2e6d60f6234918a96f768516a36e9a |\n| service_name | glance                           |\n| service_type | image                            |\n| url          | http://controller:9292           |\n+--------------+----------------------------------+\n\nopenstack endpoint create --region RegionOne \\\nimage admin http://controller:9292\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 89ced10fcf444d5a95c9ad5fd9381040 |\n| interface    | admin                            |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | de2e6d60f6234918a96f768516a36e9a |\n| service_name | glance                           |\n| service_type | image                            |\n| url          | http://controller:9292           |\n+--------------+----------------------------------+\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u5220\u9664API\u7aef\u70b9\u4f7f\u7528\u547d\u4ee4",(0,o.jsx)(e.code,{children:"openstack endpoint delete <endpoint-id>"})]})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u4f7f\u7528\u547d\u4ee4",(0,o.jsx)(e.code,{children:"openstack endpoint list"}),"\u67e5\u770b",(0,o.jsx)(e.code,{children:"endpoint-id"}),"\u7136\u540e\u6839\u636eid\u5220\u9664"]})}),"\n",(0,o.jsx)(e.h3,{id:"44-\u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",children:"4.4 \u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.h4,{id:"441-\u5b89\u88c5\u5305",children:"4.4.1 \u5b89\u88c5\u5305"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"yum -y install openstack-glance\n"})}),"\n",(0,o.jsx)(e.h4,{id:"442-\u7f16\u8f91etcglanceglance-apiconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",children:"4.4.2 \u7f16\u8f91/etc/glance/glance-api.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[database]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u8bbf\u95ee\n[database]\n...\nconnection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance\n\n2.\u5728[keystone_authtoken]\u548c[paste_deploy]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8eab\u4efd\u670d\u52a1\u8bbf\u95ee\n[keystone_authtoken]\n...\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = glance\npassword = GLANCE_PASS\n\n[paste_deploy]\n...\nflavor = keystone\n\n\n3.\u5728[glance_store]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u5b58\u50a8\u548c\u6620\u50cf\u6587\u4ef6\u7684\u4f4d\u7f6e\n[glance_store]\n...\nstores = file,http\ndefault_store = file\nfilesystem_store_datadir = /var/lib/glance/images/\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/glance/glance-api.conf{,.bak}\ngrep '^[a-Z\\[]' /etc/glance/glance-api.conf.bak >/etc/glance/glance-api.conf\nopenstack-config --set /etc/glance/glance-api.conf  database  connection  mysql+pymysql://glance:GLANCE_DBPASS@controller/glance\nopenstack-config --set /etc/glance/glance-api.conf  glance_store stores  file,http\nopenstack-config --set /etc/glance/glance-api.conf  glance_store default_store  file\nopenstack-config --set /etc/glance/glance-api.conf  glance_store filesystem_store_datadir  /var/lib/glance/images/\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken auth_uri  http://controller:5000\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken auth_url  http://controller:35357\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken memcached_servers  controller:11211\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken auth_type  password\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken project_domain_name  default\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken user_domain_name  default\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken project_name  service\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken username  glance\nopenstack-config --set /etc/glance/glance-api.conf  keystone_authtoken password  GLANCE_PASS\nopenstack-config --set /etc/glance/glance-api.conf  paste_deploy flavor  keystone\n\nMD5\u503c\nmd5sum /etc/glance/glance-api.conf\n3e1a4234c133eda11b413788e001cba3  /etc/glance/glance-api.conf\n"})}),"\n",(0,o.jsx)(e.h4,{id:"443-\u7f16\u8f91etcglanceglance-registryconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",children:"4.4.3 \u7f16\u8f91/etc/glance/glance-registry.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[database]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u8bbf\u95ee\uff1a\n[database] \n... \nconnection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance\n\n2.\u5728[keystone_authtoken]\u548c[paste_deploy]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8eab\u4efd\u670d\u52a1\u8bbf\u95ee\uff1a\n...\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = glance\npassword = GLANCE_PASS\n\n[paste_deploy]\n...\nflavor = keystone\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/glance/glance-registry.conf{,.bak}\ngrep '^[a-Z\\[]' /etc/glance/glance-registry.conf.bak > /etc/glance/glance-registry.conf\nopenstack-config --set /etc/glance/glance-registry.conf  database  connection  mysql+pymysql://glance:GLANCE_DBPASS@controller/glance\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken auth_uri  http://controller:5000\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken auth_url  http://controller:35357\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken memcached_servers  controller:11211\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken auth_type  password\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken project_domain_name  default\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken user_domain_name  default\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken project_name  service\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken username  glance\nopenstack-config --set /etc/glance/glance-registry.conf  keystone_authtoken password  GLANCE_PASS\nopenstack-config --set /etc/glance/glance-registry.conf  paste_deploy flavor  keystone\n\nMD5\u503c\nmd5sum /etc/glance/glance-registry.conf\n46acabd81a65b924256f56fe34d90b8f  /etc/glance/glance-registry.conf\n"})}),"\n",(0,o.jsx)(e.h4,{id:"444-\u540c\u6b65\u6570\u636e\u5e93",children:"4.4.4 \u540c\u6b65\u6570\u636e\u5e93"}),"\n",(0,o.jsx)(e.admonition,{type:"tip",children:(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u5ffd\u7565\u6b64\u8f93\u51fa\u4e2d\u7684\u4efb\u4f55\u5f03\u7528\u6d88\u606f"})})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'su -s /bin/sh -c "glance-manage db_sync" glance\n\nOption "verbose" from group "DEFAULT" is deprecated for removal.  Its value may be silently ignored in the future.\n/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py:1056: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade\n  expire_on_commit=expire_on_commit, _conf=conf)\n/usr/lib/python2.7/site-packages/pymysql/cursors.py:170: Warning: (1831, u\'Duplicate index `ix_image_properties_image_id_name`. This is deprecated and will be disallowed in a future release.\')\n  result = self._query(query)\n \n#\u6709\u8f93\u51fa\u5373\u4e3a\u6b63\u786e   \nmysql glance -e "show tables;" | wc -l\n21\n'})}),"\n",(0,o.jsx)(e.h4,{id:"445-\u542f\u52a8glance\u670d\u52a1\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542fglance-api\u548cglance-registry",children:"4.4.5 \u542f\u52a8glance\u670d\u52a1\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\uff08glance-api\u548cglance-registry\uff09"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"systemctl enable openstack-glance-api openstack-glance-registry && \\\nsystemctl start openstack-glance-api openstack-glance-registry\n"})}),"\n",(0,o.jsx)(e.h4,{id:"446-\u9a8c\u8bc1\u64cd\u4f5c",children:"4.4.6 \u9a8c\u8bc1\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650\nsource /opt/admin-openrc\n\n2.\u4e0b\u8f7d\u6e90\u955c\u50cf\nwget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img\n  \n3.\u4f7f\u7528QCOW2\u78c1\u76d8\u683c\u5f0f\uff0c\u88f8\u5bb9\u5668\u683c\u5f0f\u548c\u516c\u5171\u53ef\u89c1\u6027\u5c06\u6620\u50cf\u4e0a\u8f7d\u5230\u6620\u50cf\u670d\u52a1 \uff0c\u4ee5\u4fbf\u6240\u6709\u9879\u76ee\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5b83\n\u6ce8\u610f\uff1a\u8fd9\u4e00\u6b65\u4e00\u5b9a\u8981\u770b\u6267\u884c\u540e\u8f93\u51fa\u7ed3\u679c\u4e2dsize\u5927\u5c0f\uff0c\u5982\u679c\u4e3a0\u5219\u8bf4\u660e\u955c\u50cf\u4e0a\u8f7d\u6709\u95ee\u9898\nopenstack image create "cirros" \\\n--file cirros-0.3.4-x86_64-disk.img \\\n--disk-format qcow2 --container-format bare \\\n--public\n+------------------+------------------------------------------------------+\n| Field            | Value                                                |\n+------------------+------------------------------------------------------+\n| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                     |\n| container_format | bare                                                 |\n| created_at       | 2019-01-31T12:26:32Z                                 |\n| disk_format      | qcow2                                                |\n| file             | /v2/images/ac21b17b-e910-4ca4-b743-914b8fbd0e55/file |\n| id               | ac21b17b-e910-4ca4-b743-914b8fbd0e55                 |\n| min_disk         | 0                                                    |\n| min_ram          | 0                                                    |\n| name             | cirros                                               |\n| owner            | e33e3feaef784a5bb45bd9c766bc0f46                     |\n| protected        | False                                                |\n| schema           | /v2/schemas/image                                    |\n| size             | 13287936                                             | //\u4e00\u5b9a\u8981\u6ce8\u610f\u8fd9\u91cc\u7684\u5927\u5c0f\uff0c\u4e3a0\u6709\u9519\u8bef       \n| status           | active                                               |\n| tags             |                                                      |\n| updated_at       | 2019-01-31T12:26:34Z                                 |\n| virtual_size     | None                                                 |\n| visibility       | public                                               |\n+------------------+------------------------------------------------------+\n\n\n\n\u955c\u50cf\u4e0a\u4f20\u4f4d\u7f6e\n[root@controller images]# pwd\n/var/lib/glance/images\n[root@controller images]# ls\n6a143876-39c6-4b4a-8056-c3d7fbe0ce75\n\n'})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:["\u5220\u9664\u955c\u50cf\u4f7f\u7528\u547d\u4ee4",(0,o.jsx)(e.code,{children:"glance image-delete \u955c\u50cfid"})]})}),"\n",(0,o.jsx)(e.h4,{id:"447-\u786e\u8ba4\u4e0a\u4f20\u56fe\u50cf\u5e76\u9a8c\u8bc1\u5c5e\u6027",children:"4.4.7 \u786e\u8ba4\u4e0a\u4f20\u56fe\u50cf\u5e76\u9a8c\u8bc1\u5c5e\u6027"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack image list\n+--------------------------------------+--------+--------+\n| ID                                   | Name   | Status |\n+--------------------------------------+--------+--------+\n| ac21b17b-e910-4ca4-b743-914b8fbd0e55 | cirros | active |\n+--------------------------------------+--------+--------+\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u63a7\u5236\u8282\u70b9\u955c\u50cf\u670d\u52a1glance\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.h2,{id:"5\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u8ba1\u7b97\u670d\u52a1nova\u5b89\u88c5",children:"5.\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u8ba1\u7b97\u670d\u52a1nova\u5b89\u88c5"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"nova\u76f8\u5173\u670d\u52a1"})}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"\u670d\u52a1\u540d\u79f0"}),(0,o.jsx)(e.th,{children:"\u4f5c\u7528"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-api"}),(0,o.jsx)(e.td,{children:"\u63a5\u53d7\u5e76\u54cd\u5e94\u6240\u6709\u7684\u8ba1\u7b97\u670d\u52a1\u8bf7\u6c42\uff0c\u7ba1\u7406\u865a\u62df\u673a(\u4e91\u4e3b\u673a)\u751f\u547d\u5468\u671f"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-api-metadata"}),(0,o.jsx)(e.td,{children:"\u63a5\u53d7\u6765\u81ea\u865a\u62df\u673a\u53d1\u9001\u7684\u5143\u6570\u636e\u8bf7\u6c42"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-compute\uff08\u591a\u4e2a\uff09"}),(0,o.jsx)(e.td,{children:"\u771f\u6b63\u7ba1\u7406\u865a\u62df\u673a"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-scheduler"}),(0,o.jsx)(e.td,{children:"nova\u8c03\u5ea6\u5668\uff08\u6311\u9009\u51fa\u6700\u5408\u9002\u7684nova-compute\u6765\u521b\u5efa\u865a\u673a\uff09"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-conductor"}),(0,o.jsx)(e.td,{children:"\u5e2e\u52a9nova-compute\u4ee3\u7406\u4fee\u6539\u6570\u636e\u5e93\u4e2d\u865a\u62df\u673a\u7684\u72b6\u6001"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-network"}),(0,o.jsx)(e.td,{children:"\u65e9\u671fopenstack\u7248\u672c\u7ba1\u7406\u865a\u62df\u673a\u7684\u7f51\u7edc\uff08\u5df2\u5f03\u7528\uff0cneutron\uff09"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"nova-consoleauth\u548cnova-novncproxy"}),(0,o.jsx)(e.td,{children:"web\u7248\u7684vnc\u6765\u76f4\u63a5\u64cd\u4f5c\u4e91\u4e3b\u673a"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"novncproxy"}),(0,o.jsx)(e.td,{children:"web\u7248 vnc\u5ba2\u6237\u7aef"})]})]})]}),"\n",(0,o.jsx)("h3",{style:{color:"red"},children:"\u5b89\u88c5\u548c\u914d\u7f6e\u63a7\u5236\u8282\u70b9"}),"\n",(0,o.jsx)(e.h3,{id:"51-\u521b\u5efanova\u548cnova-api\u6570\u636e\u5e93\u5e76\u6388\u6743",children:"5.1 \u521b\u5efanova\u548cnova-api\u6570\u636e\u5e93\u5e76\u6388\u6743"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u7528\u4ee5\u4e0b\u547d\u4ee4\nmysql -e \"CREATE DATABASE nova;\"\nmysql -e \"CREATE DATABASE nova_api;\"\nmysql -e \"GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'localhost' \\\nIDENTIFIED BY 'NOVA_DBPASS';\"\nmysql -e \"GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'%' \\\nIDENTIFIED BY 'NOVA_DBPASS';\"\nmysql -e \"GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' \\\nIDENTIFIED BY 'NOVA_DBPASS';\"\nmysql -e \"GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' \\\nIDENTIFIED BY 'NOVA_DBPASS';\"\n"})}),"\n",(0,o.jsx)(e.h3,{id:"52-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",children:"5.2 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"source /opt/admin-openrc\n"})}),"\n",(0,o.jsx)(e.h3,{id:"53-\u521b\u5efa\u670d\u52a1\u51ed\u636e",children:"5.3 \u521b\u5efa\u670d\u52a1\u51ed\u636e"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'1.\u521b\u5efanova\u7528\u6237,\u5bc6\u7801\u8bbe\u7f6e\u4e3aNOVA_PASS      //\u8fd9\u91cc\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\u548c\u975e\u4ea4\u4e92\u5f0f\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\n#\u975e\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\nopenstack user create --domain default \\\n--password NOVA_PASS nova\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | af51b1180eb14a66b0380e4cd134df90 |\n| enabled   | True                             |\n| id        | 1ad918dc1de84c279999e89bb7c312bc |\n| name      | nova                             |\n+-----------+----------------------------------+\n\n#\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\nopenstack user create --domain default \\\n--password-prompt nova\nUser Password:\nRepeat User Password:\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | b245194b1e8749d0b3c51a78e05d7734 |\n| enabled   | True                             |\n| id        | b7cd769660c64b96bed91baebb229d54 |\n| name      | nova                             |\n+-----------+----------------------------------+\n\n2.\u5c06admin\u89d2\u8272\u6dfb\u52a0\u5230nova\u7528\u6237\nopenstack role add --project service --user nova admin\n\n3.\u521b\u5efanova\u670d\u52a1\u5b9e\u4f53\nopenstack service create --name nova \\\n--description "OpenStack Compute" compute\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | OpenStack Compute                |\n| enabled     | True                             |\n| id          | 3db049ab4b334d6d979a9ee9a6aea5d5 |\n| name        | nova                             |\n| type        | compute                          |\n+-------------+----------------------------------+\n'})}),"\n",(0,o.jsx)(e.h3,{id:"54-\u521b\u5efacompute\u670d\u52a1api\u7aef\u70b9",children:"5.4 \u521b\u5efaCompute\u670d\u52a1API\u7aef\u70b9"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack endpoint create --region RegionOne \\\ncompute public http://controller:8774/v2.1/%\\(tenant_id\\)s\n+--------------+-------------------------------------------+\n| Field        | Value                                     |\n+--------------+-------------------------------------------+\n| enabled      | True                                      |\n| id           | 0e1da405775b4a238f4142d8df6b8b58          |\n| interface    | public                                    |\n| region       | RegionOne                                 |\n| region_id    | RegionOne                                 |\n| service_id   | 3db049ab4b334d6d979a9ee9a6aea5d5          |\n| service_name | nova                                      |\n| service_type | compute                                   |\n| url          | http://controller:8774/v2.1/%(tenant_id)s |\n+--------------+-------------------------------------------+\n\nopenstack endpoint create --region RegionOne \\\ncompute internal http://controller:8774/v2.1/%\\(tenant_id\\)s\n+--------------+-------------------------------------------+\n| Field        | Value                                     |\n+--------------+-------------------------------------------+\n| enabled      | True                                      |\n| id           | 36775f0fcbf24ce1888ff714442aea04          |\n| interface    | internal                                  |\n| region       | RegionOne                                 |\n| region_id    | RegionOne                                 |\n| service_id   | 3db049ab4b334d6d979a9ee9a6aea5d5          |\n| service_name | nova                                      |\n| service_type | compute                                   |\n| url          | http://controller:8774/v2.1/%(tenant_id)s |\n+--------------+-------------------------------------------+\n\nopenstack endpoint create --region RegionOne \\\ncompute admin http://controller:8774/v2.1/%\\(tenant_id\\)s\n+--------------+-------------------------------------------+\n| Field        | Value                                     |\n+--------------+-------------------------------------------+\n| enabled      | True                                      |\n| id           | 8d575d9584df4c0cb3d903c50688175f          |\n| interface    | admin                                     |\n| region       | RegionOne                                 |\n| region_id    | RegionOne                                 |\n| service_id   | 3db049ab4b334d6d979a9ee9a6aea5d5          |\n| service_name | nova                                      |\n| service_type | compute                                   |\n| url          | http://controller:8774/v2.1/%(tenant_id)s |\n+--------------+-------------------------------------------+\n"})}),"\n",(0,o.jsx)(e.h3,{id:"55-\u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",children:"5.5 \u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.h4,{id:"551-\u5b89\u88c5\u5305",children:"5.5.1 \u5b89\u88c5\u5305"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"yum -y install openstack-nova-api openstack-nova-conductor \\\nopenstack-nova-console openstack-nova-novncproxy openstack-nova-scheduler\n"})}),"\n",(0,o.jsx)(e.h4,{id:"552-\u7f16\u8f91etcnovanovaconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",children:"5.5.2 \u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u4ec5\u542f\u7528\u8ba1\u7b97\u548c\u5143\u6570\u636eAPI\n[DEFAULT]\n...\nenabled_apis = osapi_compute,metadata\n\n2.\u5728[api_database]\u548c[database]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u8bbf\u95ee\n[api_database]\n...\nconnection = mysql+pymysql://nova:NOVA_DBPASS@controller/nova_api\n\n[database]\n...\nconnection = mysql+pymysql://nova:NOVA_DBPASS@controller/nova\n\n3.\u5728[DEFAULT]\u548c[oslo_messaging_rabbit]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eRabbitMQ\u6d88\u606f\u961f\u5217\u8bbf\u95ee\n[DEFAULT]\n...\nrpc_backend = rabbit\n\n[oslo_messaging_rabbit]\n...\nrabbit_host = controller\nrabbit_userid = openstack\nrabbit_password = RABBIT_PASS\n\n4.\u5728[DEFAULT]\u548c[keystone_authtoken]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8eab\u4efd\u670d\u52a1\u8bbf\u95ee\n[DEFAULT]\n...\nauth_strategy = keystone\n\n[keystone_authtoken]\n...\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = nova\npassword = NOVA_PASS\n\n5.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6emy_ip\u9009\u9879\u4ee5\u4f7f\u7528\u63a7\u5236\u5668\u8282\u70b9\u7684\u7ba1\u7406\u63a5\u53e3IP\u5730\u5740\n[DEFAULT]\n...\nmy_ip = 10.0.0.11\n\n6.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u542f\u7528\u5bf9Networking\u670d\u52a1\u7684\u652f\u6301\n[DEFAULT]\n...\nuse_neutron = True\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\n\n7.\u5728[vnc]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eVNC\u4ee3\u7406\u4ee5\u4f7f\u7528\u63a7\u5236\u5668\u8282\u70b9\u7684\u7ba1\u7406\u63a5\u53e3IP\u5730\u5740\n[vnc]\n...\nvncserver_listen = $my_ip\nvncserver_proxyclient_address = $my_ip\n\n8.\u5728[glance]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eImage\u670d\u52a1API\u7684\u4f4d\u7f6e\n[glance]\n...\napi_servers = http://controller:9292\n\n9.\u5728[oslo_concurrency]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u9501\u5b9a\u8def\u5f84\n[oslo_concurrency]\n...\nlock_path = /var/lib/nova/tmp\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\uff0c\u5206\u5f00\u590d\u5236\uff0c\u4e00\u6b21\u6027\u590d\u5236\u65e0\u6cd5\u90fd\u6267\u884c\ncp /etc/nova/nova.conf{,.bak}\ngrep '^[a-Z\\[]' /etc/nova/nova.conf.bak >/etc/nova/nova.conf\nopenstack-config --set /etc/nova/nova.conf  DEFAULT enabled_apis  osapi_compute,metadata\nopenstack-config --set /etc/nova/nova.conf  DEFAULT rpc_backend  rabbit\nopenstack-config --set /etc/nova/nova.conf  DEFAULT auth_strategy  keystone\nopenstack-config --set /etc/nova/nova.conf  DEFAULT my_ip  10.0.0.11\nopenstack-config --set /etc/nova/nova.conf  DEFAULT use_neutron  True\nopenstack-config --set /etc/nova/nova.conf  DEFAULT firewall_driver  nova.virt.firewall.NoopFirewallDriver\nopenstack-config --set /etc/nova/nova.conf  api_database connection  mysql+pymysql://nova:NOVA_DBPASS@controller/nova_api\nopenstack-config --set /etc/nova/nova.conf  database  connection  mysql+pymysql://nova:NOVA_DBPASS@controller/nova\nopenstack-config --set /etc/nova/nova.conf  glance api_servers  http://controller:9292\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  auth_uri  http://controller:5000\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  auth_url  http://controller:35357\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  memcached_servers  controller:11211\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  auth_type  password\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  project_domain_name  default\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  user_domain_name  default\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  project_name  service\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  username  nova\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  password  NOVA_PASS\nopenstack-config --set /etc/nova/nova.conf  oslo_concurrency lock_path  /var/lib/nova/tmp\nopenstack-config --set /etc/nova/nova.conf  oslo_messaging_rabbit   rabbit_host  controller\nopenstack-config --set /etc/nova/nova.conf  oslo_messaging_rabbit   rabbit_userid  openstack\nopenstack-config --set /etc/nova/nova.conf  oslo_messaging_rabbit   rabbit_password  RABBIT_PASS\nopenstack-config --set /etc/nova/nova.conf  vnc vncserver_listen  '$my_ip'\nopenstack-config --set /etc/nova/nova.conf  vnc vncserver_proxyclient_address  '$my_ip'\n\nMD5\u503c\nmd5sum /etc/nova/nova.conf\n47ded61fdd1a79ab91bdb37ce59ef192  /etc/nova/nova.conf\n"})}),"\n",(0,o.jsx)(e.h4,{id:"553-\u540c\u6b65\u6570\u636e\u5e93\u5ffd\u7565\u8f93\u51fa",children:"5.5.3 \u540c\u6b65\u6570\u636e\u5e93\uff0c\u5ffd\u7565\u8f93\u51fa"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'su -s /bin/sh -c "nova-manage api_db sync" nova\nsu -s /bin/sh -c "nova-manage db sync" nova\n/usr/lib/python2.7/site-packages/pymysql/cursors.py:170: Warning: (1831, u\'Duplicate index `block_device_mapping_instance_uuid_virtual_name_device_name_idx`. This is deprecated and will be disallowed in a future release.\')\n  result = self._query(query)\n/usr/lib/python2.7/site-packages/pymysql/cursors.py:170: Warning: (1831, u\'Duplicate index `uniq_instances0uuid`. This is deprecated and will be disallowed in a future release.\')\n  result = self._query(query)\n  \n  \n#\u67e5\u770b\u6570\u636e\u5e93\uff0c\u6709\u8f93\u51fa\u5373\u4e3a\u6b63\u786e  \nmysql nova_api -e "show tables;"|wc -l\n10\nmysql nova -e "show tables;"|wc -l\n110  \n'})}),"\n",(0,o.jsx)(e.h4,{id:"554-\u542f\u52a8compute\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",children:"5.5.4 \u542f\u52a8Compute\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"systemctl enable openstack-nova-api.service \\\nopenstack-nova-consoleauth.service openstack-nova-scheduler.service \\\nopenstack-nova-conductor.service openstack-nova-novncproxy.service\n\nsystemctl start openstack-nova-api.service \\\nopenstack-nova-consoleauth.service openstack-nova-scheduler.service \\\nopenstack-nova-conductor.service openstack-nova-novncproxy.service\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5b89\u88c5\u5b8c\u6210\u540e\u4f1a\u6709no VNC    10.0.0.11:6080"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-05-2410.07.11.png",alt:"iShot2020-05-2410.07.11"})}),"\n",(0,o.jsx)("h3",{style:{color:"red"},children:"\u5b89\u88c5\u548c\u914d\u7f6e\u8ba1\u7b97\u8282\u70b9"}),"\n",(0,o.jsx)(e.h3,{id:"56-\u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6",children:"5.6 \u5b89\u88c5\u548c\u914d\u7f6e\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.h4,{id:"561-\u5b89\u88c5\u5305",children:"5.6.1 \u5b89\u88c5\u5305"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"yum -y install openstack-nova-compute openstack-utils\n"})}),"\n",(0,o.jsx)(e.h4,{id:"562-\u7f16\u8f91etcnovanovaconf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",children:"5.6.2 \u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[DEFAULT]\u548c[oslo_messaging_rabbit]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eRabbitMQ\u6d88\u606f\u961f\u5217\u8bbf\u95ee\n[DEFAULT]\n...\nrpc_backend = rabbit\n\n[oslo_messaging_rabbit]\n...\nrabbit_host = controller\nrabbit_userid = openstack\nrabbit_password = RABBIT_PASS\n\n2.\u5728[DEFAULT]\u548c[keystone_authtoken]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8eab\u4efd\u670d\u52a1\u8bbf\u95ee\n[DEFAULT]\n...\nauth_strategy = keystone\n\n[keystone_authtoken]\n...\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = nova\npassword = NOVA_PASS\n\n3.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6emy_ip\u9009\u9879\uff0c\u5c06MANAGEMENT_INTERFACE_IP_ADDRESS\u66ff\u6362\u4e3a\u8ba1\u7b97\u8282\u70b9\u4e0a\u7ba1\u7406\u7f51\u7edc\u63a5\u53e3\u7684IP\u5730\u5740\uff0c\u5bf9\u4e8e\u793a\u4f8b\u4f53\u7cfb\u7ed3\u6784\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9\uff0c\u901a\u5e38\u4e3a10.0.0.31\n[DEFAULT]\n...\nmy_ip = MANAGEMENT_INTERFACE_IP_ADDRESS\n\n4.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u542f\u7528\u5bf9Networking\u670d\u52a1\u7684\u652f\u6301\n[DEFAULT]\n...\nuse_neutron = True\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\n\n5.\u5728[vnc]\u90e8\u5206\u4e2d\uff0c\u542f\u7528\u5e76\u914d\u7f6e\u8fdc\u7a0b\u63a7\u5236\u53f0\u8bbf\u95ee\n[vnc]\n...\nenabled = True\nvncserver_listen = 0.0.0.0\nvncserver_proxyclient_address = $my_ip\nnovncproxy_base_url = http://controller:6080/vnc_auto.html\n\n6.\u5728[glance]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eImage\u670d\u52a1API\u7684\u4f4d\u7f6e\n[glance]\n...\napi_servers = http://controller:9292\n\n7.\u5728[oslo_concurrency]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u9501\u5b9a\u8def\u5f84\n[oslo_concurrency]\n...\nlock_path = /var/lib/nova/tmp\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\ncp /etc/nova/nova.conf{,.bak}\ngrep '^[a-Z\\[]' /etc/nova/nova.conf.bak >/etc/nova/nova.conf\nopenstack-config --set /etc/nova/nova.conf  DEFAULT rpc_backend  rabbit\nopenstack-config --set /etc/nova/nova.conf  DEFAULT auth_strategy  keystone\nopenstack-config --set /etc/nova/nova.conf  DEFAULT my_ip  10.0.0.31\nopenstack-config --set /etc/nova/nova.conf  DEFAULT use_neutron  True\nopenstack-config --set /etc/nova/nova.conf  DEFAULT firewall_driver  nova.virt.firewall.NoopFirewallDriver\nopenstack-config --set /etc/nova/nova.conf  glance api_servers  http://controller:9292\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  auth_uri  http://controller:5000\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  auth_url  http://controller:35357\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  memcached_servers  controller:11211\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  auth_type  password\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  project_domain_name  default\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  user_domain_name  default\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  project_name  service\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  username  nova\nopenstack-config --set /etc/nova/nova.conf  keystone_authtoken  password  NOVA_PASS\nopenstack-config --set /etc/nova/nova.conf  oslo_concurrency lock_path  /var/lib/nova/tmp\nopenstack-config --set /etc/nova/nova.conf  oslo_messaging_rabbit   rabbit_host  controller\nopenstack-config --set /etc/nova/nova.conf  oslo_messaging_rabbit   rabbit_userid  openstack\nopenstack-config --set /etc/nova/nova.conf  oslo_messaging_rabbit   rabbit_password  RABBIT_PASS\nopenstack-config --set /etc/nova/nova.conf  vnc enabled  True\nopenstack-config --set /etc/nova/nova.conf  vnc vncserver_listen  0.0.0.0\nopenstack-config --set /etc/nova/nova.conf  vnc vncserver_proxyclient_address  '$my_ip'\nopenstack-config --set /etc/nova/nova.conf  vnc novncproxy_base_url  http://controller:6080/vnc_auto.html\n\n\nMD5\u503c\nmd5sum /etc/nova/nova.conf\n2f53f4e0848bc5927493925a4ea61f63  /etc/nova/nova.conf\n"})}),"\n",(0,o.jsx)(e.h4,{id:"563-\u786e\u5b9a\u60a8\u7684\u8ba1\u7b97\u8282\u70b9\u662f\u5426\u652f\u6301\u865a\u62df\u673a\u7684\u786c\u4ef6\u52a0\u901f",children:"5.6.3 \u786e\u5b9a\u60a8\u7684\u8ba1\u7b97\u8282\u70b9\u662f\u5426\u652f\u6301\u865a\u62df\u673a\u7684\u786c\u4ef6\u52a0\u901f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"egrep -c '(vmx|svm)' /proc/cpuinfo\n1\n\n#\u8bf4\u660e\n\u5982\u679c\u6b64\u547d\u4ee4\u8fd4\u56de\u503c1\u6216\u66f4\u5927\uff0c\u5219\u8ba1\u7b97\u8282\u70b9\u652f\u6301\u786c\u4ef6\u52a0\u901f\uff0c\u901a\u5e38\u4e0d\u9700\u8981\u5176\u4ed6\u914d\u7f6e\u3002\n\u5982\u679c\u6b64\u547d\u4ee4\u8fd4\u56de\u96f6\u503c\uff0c\u5219\u8ba1\u7b97\u8282\u70b9\u4e0d\u652f\u6301\u786c\u4ef6\u52a0\u901f\uff0c\u60a8\u5fc5\u987b\u5c06libvirt\u914d\u7f6e\u4e3a\u4f7f\u7528QEMU\u800c\u4e0d\u662fKVM\u3002\n\u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u4e2d\u7684[libvirt]\u90e8\u5206\uff0c \u5982\u4e0b\u6240\u793a\uff1a\n[libvirt] \n...... \nvirt_type = qemu\n"})}),"\n",(0,o.jsx)(e.h4,{id:"564-\u542f\u52a8compute\u670d\u52a1\u53ca\u5176\u4f9d\u8d56\u9879\u5e76\u5c06\u5b83\u4eec\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u81ea\u52a8\u542f\u52a8",children:"5.6.4 \u542f\u52a8Compute\u670d\u52a1\u53ca\u5176\u4f9d\u8d56\u9879\uff0c\u5e76\u5c06\u5b83\u4eec\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u81ea\u52a8\u542f\u52a8"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"systemctl enable libvirtd.service openstack-nova-compute.service && \\\nsystemctl start libvirtd.service openstack-nova-compute.service\n"})}),"\n",(0,o.jsx)("h3",{style:{color:"red"},children:"\u9a8c\u8bc1\u64cd\u4f5c\uff0c\u5728\u63a7\u5236\u8282\u70b9\u6267\u884c"}),"\n",(0,o.jsx)(e.h3,{id:"57-\u9a8c\u8bc1compute\u670d\u52a1\u7684\u8fd0\u884c",children:"5.7 \u9a8c\u8bc1Compute\u670d\u52a1\u7684\u8fd0\u884c"}),"\n",(0,o.jsx)(e.h4,{id:"571-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",children:"5.7.1 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"source /opt/admin-openrc\n"})}),"\n",(0,o.jsx)(e.h4,{id:"572-\u5217\u51fa\u670d\u52a1\u7ec4\u4ef6\u4ee5\u9a8c\u8bc1\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8\u548c\u6ce8\u518c",children:"5.7.2 \u5217\u51fa\u670d\u52a1\u7ec4\u4ef6\u4ee5\u9a8c\u8bc1\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8\u548c\u6ce8\u518c"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u6b64\u8f93\u51fa\u5e94\u6307\u793a\u63a7\u5236\u5668\u8282\u70b9\u4e0a\u542f\u7528\u7684\u4e09\u4e2a\u670d\u52a1\u7ec4\u4ef6\u4ee5\u53ca\u8ba1\u7b97\u8282\u70b9\u4e0a\u542f\u7528\u7684\u4e00\u4e2a\u670d\u52a1\u7ec4\u4ef6"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack compute service list\n+----+------------------+------------+----------+---------+-------+----------------------------+\n| Id | Binary           | Host       | Zone     | Status  | State | Updated At                 |\n+----+------------------+------------+----------+---------+-------+----------------------------+\n|  1 | nova-conductor   | controller | internal | enabled | up    | 2019-02-01T14:33:13.000000 |\n|  2 | nova-consoleauth | controller | internal | enabled | up    | 2019-02-01T14:33:18.000000 |\n|  3 | nova-scheduler   | controller | internal | enabled | up    | 2019-02-01T14:33:13.000000 |\n|  6 | nova-compute     | compute1   | nova     | enabled | up    | 2019-02-01T14:33:19.000000 |\n+----+------------------+------------+----------+---------+-------+----------------------------+\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u63a7\u5236\u8282\u70b9\u548c\u8ba1\u7b97\u8282\u70b9\u8ba1\u7b97\u670d\u52a1nova\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.h2,{id:"6\u63a7\u5236\u8282\u70b9\u8ba1\u7b97\u8282\u70b9\u7f51\u7edc\u670d\u52a1neutron\u5b89\u88c5",children:"6.\u63a7\u5236\u8282\u70b9\u3001\u8ba1\u7b97\u8282\u70b9\u7f51\u7edc\u670d\u52a1neutron\u5b89\u88c5"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"neutron\u76f8\u5173\u670d\u52a1"})}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"\u670d\u52a1\u540d"}),(0,o.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"neutron-server"}),(0,o.jsx)(e.td,{children:"\u7aef\u53e3(9696)  api\t\u63a5\u53d7\u548c\u54cd\u5e94\u5916\u90e8\u7684\u7f51\u7edc\u7ba1\u7406\u8bf7\u6c42"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"neutron-linuxbridge-agent"}),(0,o.jsx)(e.td,{children:"\u8d1f\u8d23\u521b\u5efa\u6865\u63a5\u7f51\u5361"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"neutron-dhcp-agent"}),(0,o.jsx)(e.td,{children:"\u8d1f\u8d23\u5206\u914dIP"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"neutron-metadata-agent"}),(0,o.jsx)(e.td,{children:"\u914d\u5408nova-metadata-api\u5b9e\u73b0\u865a\u62df\u673a\u7684\u5b9a\u5236\u5316\u64cd\u4f5c"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"L3-agent"}),(0,o.jsx)(e.td,{children:"\u5b9e\u73b0\u4e09\u5c42\u7f51\u7edc(\u7f51\u7edc\u5c42)"})]})]})]}),"\n",(0,o.jsx)("h3",{style:{color:"red"},children:"\u5b89\u88c5\u548c\u914d\u7f6e\u63a7\u5236\u8282\u70b9"}),"\n",(0,o.jsx)(e.h3,{id:"61-\u521b\u5efaneutron\u6570\u636e\u5e93\u5e76\u6388\u6743",children:"6.1 \u521b\u5efaneutron\u6570\u636e\u5e93\u5e76\u6388\u6743"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u7528\u4ee5\u4e0b\u547d\u4ee4\nmysql -e \"CREATE DATABASE neutron;\"\nmysql -e \"GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'localhost' \\\nIDENTIFIED BY 'NEUTRON_DBPASS';\"\nmysql -e \"GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'%' \\\nIDENTIFIED BY 'NEUTRON_DBPASS';\"\n"})}),"\n",(0,o.jsx)(e.h3,{id:"62-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",children:"6.2 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"source /opt/admin-openrc \n"})}),"\n",(0,o.jsx)(e.h3,{id:"63-\u521b\u5efa\u670d\u52a1\u51ed\u8bc1",children:"6.3 \u521b\u5efa\u670d\u52a1\u51ed\u8bc1"}),"\n",(0,o.jsxs)(e.h4,{id:"631-\u521b\u5efaneutron\u7528\u6237\u5bc6\u7801\u8bbe\u7f6e\u4e3aneutron_pass",children:["6.3.1 \u521b\u5efaneutron\u7528\u6237\uff0c\u5bc6\u7801\u8bbe\u7f6e\u4e3a",(0,o.jsx)(e.code,{children:"NEUTRON_PASS"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"//\u8fd9\u91cc\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\u548c\u975e\u4ea4\u4e92\u5f0f\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\n#\u975e\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\nopenstack user create --domain default --password NEUTRON_PASS neutron\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | af51b1180eb14a66b0380e4cd134df90 |\n| enabled   | True                             |\n| id        | c0ac0eda2eca4a698eade50b060dd2ce |\n| name      | neutron                          |\n+-----------+----------------------------------+\n\n#\u4ea4\u4e92\u5f0f\u521b\u5efa\u5bc6\u7801\nopenstack user create --domain default --password-prompt neutron\nUser Password:\nRepeat User Password:\n+-----------+----------------------------------+\n| Field     | Value                            |\n+-----------+----------------------------------+\n| domain_id | b245194b1e8749d0b3c51a78e05d7734 |\n| enabled   | True                             |\n| id        | 98f34dc4ddf346b3833de4a0320f7bc9 |\n| name      | neutron                          |\n+-----------+----------------------------------+\n"})}),"\n",(0,o.jsx)(e.h4,{id:"632-\u5c06admin\u89d2\u8272\u6dfb\u52a0\u5230neutron\u7528\u6237",children:"6.3.2 \u5c06admin\u89d2\u8272\u6dfb\u52a0\u5230neutron\u7528\u6237"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack role add --project service --user neutron admin\n"})}),"\n",(0,o.jsx)(e.h4,{id:"633-\u521b\u5efaneutron\u670d\u52a1\u5b9e\u4f53",children:"6.3.3 \u521b\u5efaneutron\u670d\u52a1\u5b9e\u4f53"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'openstack service create --name neutron \\\n--description "OpenStack Networking" network\n+-------------+----------------------------------+\n| Field       | Value                            |\n+-------------+----------------------------------+\n| description | OpenStack Networking             |\n| enabled     | True                             |\n| id          | 86251b67e0c94b699489ee1b331c33a6 |\n| name        | neutron                          |\n| type        | network                          |\n+-------------+----------------------------------+\n'})}),"\n",(0,o.jsx)(e.h3,{id:"64-\u521b\u5efa\u7f51\u7edc\u670d\u52a1api\u7aef\u70b9",children:"6.4 \u521b\u5efa\u7f51\u7edc\u670d\u52a1API\u7aef\u70b9"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"openstack endpoint create --region RegionOne \\\nnetwork public http://controller:9696\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 48b0ab77e4e74a0788f88b0916e8b696 |\n| interface    | public                           |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | 86251b67e0c94b699489ee1b331c33a6 |\n| service_name | neutron                          |\n| service_type | network                          |\n| url          | http://controller:9696           |\n+--------------+----------------------------------+\n\nopenstack endpoint create --region RegionOne \\\nnetwork internal http://controller:9696\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 5b2be24de46f455694a77e8a096916fb |\n| interface    | internal                         |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | 86251b67e0c94b699489ee1b331c33a6 |\n| service_name | neutron                          |\n| service_type | network                          |\n| url          | http://controller:9696           |\n+--------------+----------------------------------+\n\nopenstack endpoint create --region RegionOne \\\nnetwork admin http://controller:9696\n+--------------+----------------------------------+\n| Field        | Value                            |\n+--------------+----------------------------------+\n| enabled      | True                             |\n| id           | 0f06a3d409bc41cb9b6651de68006102 |\n| interface    | admin                            |\n| region       | RegionOne                        |\n| region_id    | RegionOne                        |\n| service_id   | 86251b67e0c94b699489ee1b331c33a6 |\n| service_name | neutron                          |\n| service_type | network                          |\n| url          | http://controller:9696           |\n+--------------+----------------------------------+\n"})}),"\n",(0,o.jsx)(e.h3,{id:"65-\u914d\u7f6e\u7f51\u7edc\u9009\u9879\u63a7\u5236\u8282\u70b9\u64cd\u4f5c",children:"6.5 \u914d\u7f6e\u7f51\u7edc\u9009\u9879\uff0c\u63a7\u5236\u8282\u70b9\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.h4,{id:"651-\u5b89\u88c5\u5305",children:"6.5.1 \u5b89\u88c5\u5305"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"yum -y install openstack-neutron openstack-neutron-ml2 \\\nopenstack-neutron-linuxbridge ebtables\n"})}),"\n",(0,o.jsx)(e.h4,{id:"652-\u914d\u7f6e\u670d\u52a1\u5668\u7ec4\u4ef6",children:"6.5.2 \u914d\u7f6e\u670d\u52a1\u5668\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/neutron/neutron.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[database]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u8bbf\u95ee\uff1a\n[database]\n...\nconnection = mysql+pymysql://neutron:NEUTRON_DBPASS@controller/neutron\n\n2.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u542f\u7528Modular Layer 2\uff08ML2\uff09\u63d2\u4ef6\u5e76\u7981\u7528\u5176\u4ed6\u63d2\u4ef6\uff1a\n[DEFAULT]\n...\ncore_plugin = ml2\nservice_plugins =\n\n3.\u5728[DEFAULT]\u548c[oslo_messaging_rabbit]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eRabbitMQ\u6d88\u606f\u961f\u5217\u8bbf\u95ee\uff1a\n[DEFAULT]\n...\nrpc_backend = rabbit\n\n[oslo_messaging_rabbit]\n...\nrabbit_host = controller\nrabbit_userid = openstack\nrabbit_password = RABBIT_PASS\n\n4.\u5728[DEFAULT]\u548c[keystone_authtoken]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8eab\u4efd\u670d\u52a1\u8bbf\u95ee\uff1a\n[DEFAULT]\n...\nauth_strategy = keystone\n\n[keystone_authtoken]\n...\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS\n\n5.\u5728[DEFAULT]\u548c[nova]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eNetworking\u4ee5\u901a\u77e5Compute\u7f51\u7edc\u62d3\u6251\u66f4\u6539\uff1a\n[DEFAULT]\n...\nnotify_nova_on_port_status_changes = True\nnotify_nova_on_port_data_changes = True\n\n[nova]\n...\nauth_url = http://controller:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = nova\npassword = NOVA_PASS\n\n6.\u5728[oslo_concurrency]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u9501\u5b9a\u8def\u5f84\uff1a\n[oslo_concurrency]\n...\nlock_path = /var/lib/neutron/tmp\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/neutron/neutron.conf{,.bak}\ngrep '^[a-Z\\[]' /etc/neutron/neutron.conf.bak >/etc/neutron/neutron.conf\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT core_plugin  ml2\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT service_plugins\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT rpc_backend  rabbit\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT auth_strategy  keystone\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT notify_nova_on_port_status_changes  True\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT notify_nova_on_port_data_changes  True\nopenstack-config --set /etc/neutron/neutron.conf  database connection  mysql+pymysql://neutron:NEUTRON_DBPASS@controller/neutron\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken auth_uri  http://controller:5000\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken auth_url  http://controller:35357\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken memcached_servers  controller:11211\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken auth_type  password\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken project_domain_name  default\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken user_domain_name  default\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken project_name  service\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken username  neutron\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken password  NEUTRON_PASS\nopenstack-config --set /etc/neutron/neutron.conf  nova auth_url  http://controller:35357\nopenstack-config --set /etc/neutron/neutron.conf  nova auth_type  password \nopenstack-config --set /etc/neutron/neutron.conf  nova project_domain_name  default\nopenstack-config --set /etc/neutron/neutron.conf  nova user_domain_name  default\nopenstack-config --set /etc/neutron/neutron.conf  nova region_name  RegionOne\nopenstack-config --set /etc/neutron/neutron.conf  nova project_name  service\nopenstack-config --set /etc/neutron/neutron.conf  nova username  nova\nopenstack-config --set /etc/neutron/neutron.conf  nova password  NOVA_PASS\nopenstack-config --set /etc/neutron/neutron.conf  oslo_concurrency lock_path  /var/lib/neutron/tmp\nopenstack-config --set /etc/neutron/neutron.conf  oslo_messaging_rabbit rabbit_host  controller\nopenstack-config --set /etc/neutron/neutron.conf  oslo_messaging_rabbit rabbit_userid  openstack\nopenstack-config --set /etc/neutron/neutron.conf  oslo_messaging_rabbit rabbit_password  RABBIT_PASS\n\nMD5\u503c\nmd5sum /etc/neutron/neutron.conf\ne399b7958cd22f47becc6d8fd6d3521a  /etc/neutron/neutron.conf\n"})}),"\n",(0,o.jsx)(e.h3,{id:"66-\u914d\u7f6e\u6a21\u5757\u5316\u7b2c2\u5c42ml2\u63d2\u4ef6",children:"6.6 \u914d\u7f6e\u6a21\u5757\u5316\u7b2c2\u5c42\uff08ML2\uff09\u63d2\u4ef6"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"ML2\u63d2\u4ef6\u4f7f\u7528Linux\u6865\u63a5\u673a\u5236\u4e3a\u5b9e\u4f8b\u6784\u5efa\u7b2c2\u5c42\uff08\u6865\u63a5\u548c\u4ea4\u6362\uff09\u865a\u62df\u7f51\u7edc\u57fa\u7840\u67b6\u6784"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/neutron/plugins/ml2/ml2_conf.ini\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[ml2]\u90e8\u5206\u4e2d\uff0c\u542f\u7528flat\u548cVLAN\u7f51\u7edc\uff1a\n[ml2]\n...\ntype_drivers = flat,vlan\n\n2.\u5728[ml2]\u90e8\u5206\u4e2d\uff0c\u7981\u7528\u81ea\u52a9\u670d\u52a1\u7f51\u7edc\n[ml2]\n...\ntenant_network_types =\n\n3.\u5728[ml2]\u90e8\u5206\u4e2d\uff0c\u542f\u7528Linux\u6865\u63a5\u673a\u5236\n[ml2]\n...\nmechanism_drivers = linuxbridge\n\n4.\u5728[ml2]\u90e8\u5206\u4e2d\uff0c\u542f\u7528\u7aef\u53e3\u5b89\u5168\u6027\u6269\u5c55\u9a71\u52a8\u7a0b\u5e8f\n[ml2]\n...\nextension_drivers = port_security\n\n5.\u5728[ml2_type_flat]\u90e8\u5206\u4e2d\uff0c\u5c06\u63d0\u4f9b\u5546\u865a\u62df\u7f51\u7edc\u914d\u7f6e\u4e3a\u6241\u5e73\u7f51\u7edc\uff1a\n[ml2_type_flat]\n...\nflat_networks = provider\n\n6.\u5728[securitygroup]\u90e8\u5206\u4e2d\uff0c\u542f\u7528ipset\u4ee5\u63d0\u9ad8\u5b89\u5168\u7ec4\u89c4\u5219\u7684\u6548\u7387\n[securitygroup]\n...\nenable_ipset = True\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/neutron/plugins/ml2/ml2_conf.ini{,.bak}\ngrep '^[a-Z\\[]' /etc/neutron/plugins/ml2/ml2_conf.ini.bak >/etc/neutron/plugins/ml2/ml2_conf.ini\nopenstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini  ml2 type_drivers  flat,vlan\nopenstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini  ml2 tenant_network_types \nopenstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini  ml2 mechanism_drivers  linuxbridge\nopenstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini  ml2 extension_drivers  port_security\nopenstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini  ml2_type_flat flat_networks  provider\nopenstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini  securitygroup enable_ipset  True\n\nMD5\u503c\nmd5sum /etc/neutron/plugins/ml2/ml2_conf.ini\n2640b5de519fafcd675b30e1bcd3c7d5  /etc/neutron/plugins/ml2/ml2_conf.ini\n"})}),"\n",(0,o.jsx)(e.h3,{id:"67-\u914d\u7f6elinux\u6865\u63a5\u4ee3\u7406",children:"6.7 \u914d\u7f6elinux\u6865\u63a5\u4ee3\u7406"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Linux\u7f51\u6865\u4ee3\u7406\u4e3a\u5b9e\u4f8b\u6784\u5efa\u7b2c2\u5c42\uff08\u6865\u63a5\u548c\u4ea4\u6362\uff09\u865a\u62df\u7f51\u7edc\u57fa\u7840\u67b6\u6784\u5e76\u5904\u7406\u5b89\u5168\u7ec4"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/neutron/plugins/ml2/linuxbridge_agent.ini\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[linux_bridge]\u90e8\u5206\u4e2d\uff0c\u5c06\u63d0\u4f9b\u8005\u865a\u62df\u7f51\u7edc\u6620\u5c04\u5230\u63d0\u4f9b\u8005\u7269\u7406\u7f51\u7edc\u63a5\u53e3\uff0c\u5c06PROVIDER_INTERFACE_NAME\u66ff\u6362\n\u4e3a\u57fa\u7840\u63d0\u4f9b\u7a0b\u5e8f\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u7684\u540d\u79f0\uff0c\u8fd9\u91cc\u4e3aeth0\n[linux_bridge]\nphysical_interface_mappings = provider:PROVIDER_INTERFACE_NAME\n\n2.\u5728[vxlan]\u90e8\u5206\u4e2d\uff0c\u7981\u7528VXLAN\u91cd\u53e0\u7f51\u7edc\n[vxlan]\nenable_vxlan = False\n\n3.\u5728[securitygroup]\u90e8\u5206\u4e2d\uff0c\u542f\u7528\u5b89\u5168\u7ec4\u5e76\u914d\u7f6eLinux\u7f51\u6865iptables\u9632\u706b\u5899\u9a71\u52a8\u7a0b\u5e8f\n[securitygroup]\n...\nenable_security_group = True\nfirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/neutron/plugins/ml2/linuxbridge_agent.ini{,.bak}\ngrep '^[a-Z\\[]' /etc/neutron/plugins/ml2/linuxbridge_agent.ini.bak >/etc/neutron/plugins/ml2/linuxbridge_agent.ini\nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini  linux_bridge physical_interface_mappings  provider:eth0\nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini  securitygroup enable_security_group  True\nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini  securitygroup firewall_driver  neutron.agent.linux.iptables_firewall.IptablesFirewallDriver\nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini  vxlan enable_vxlan  False\n\nMD5\u503c\nmd5sum /etc/neutron/plugins/ml2/linuxbridge_agent.ini\n3f474907a7f438b34563e4d3f3c29538  /etc/neutron/plugins/ml2/linuxbridge_agent.ini\n"})}),"\n",(0,o.jsx)(e.h3,{id:"68-\u914d\u7f6edhcp\u4ee3\u7406",children:"6.8 \u914d\u7f6eDHCP\u4ee3\u7406"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u8be5"}),(0,o.jsx)(e.a,{href:"https://docs.openstack.org/mitaka/install-guide-rdo/common/glossary.html#term-dhcp-agent",children:(0,o.jsx)(e.strong,{children:"DHCP\u4ee3\u7406"})}),(0,o.jsx)(e.strong,{children:"\u4e3a\u865a\u62df\u7f51\u7edc\u63d0\u4f9bDHCP\u670d\u52a1"})]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/neutron/dhcp_agent.ini\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eLinux\u6865\u63a5\u63a5\u53e3\u9a71\u52a8\u7a0b\u5e8f\uff0cDnsmasq DHCP\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5e76\u542f\u7528\u9694\u79bb\u7684\u5143\u6570\u636e\uff0c\u4ee5\u4fbf\u63d0\u4f9b\u5546\u7f51\u7edc\u4e0a\u7684\u5b9e\u4f8b\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u5143\u6570\u636e\n[DEFAULT]\n...\ninterface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver\ndhcp_driver = neutron.agent.linux.dhcp.Dnsmasq\nenable_isolated_metadata = True\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/neutron/dhcp_agent.ini{,.bak} \ngrep '^[a-Z\\[]' /etc/neutron/dhcp_agent.ini.bak >/etc/neutron/dhcp_agent.ini \nopenstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT interface_driver neutron.agent.linux.interface.BridgeInterfaceDriver\nopenstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT dhcp_driver neutron.agent.linux.dhcp.Dnsmasq \nopenstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT enable_isolated_metadata True\n\nMD5\u503c\nmd5sum /etc/neutron/dhcp_agent.ini\nd39579607b2f7d92e88f8910f9213520  /etc/neutron/dhcp_agent.ini\n"})}),"\n",(0,o.jsx)(e.h3,{id:"69-\u914d\u7f6e\u5143\u6570\u636e\u4ee3\u7406",children:"6.9 \u914d\u7f6e\u5143\u6570\u636e\u4ee3\u7406"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u6240\u8ff0\u5143\u6570\u636e\u4ee3\u7406\u63d0\u4f9b\u914d\u7f6e\u4fe1\u606f\u7684\u8bf8\u5982\u51ed\u636e\u5b9e\u4f8b\u3002"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/neutron/metadata_agent.ini\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"\u5728[DEFAULT]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u5143\u6570\u636e\u4e3b\u673a\u548c\u5171\u4eab\u5bc6\u94a5\n[DEFAULT]\n...\nnova_metadata_ip = controller\nmetadata_proxy_shared_secret = METADATA_SECRET\n\n#\u7528\u4ee5\u4e0b\u9886\u547d\u4fee\u6539\n\\cp /etc/neutron/metadata_agent.ini{,.bak}\ngrep '^[a-Z\\[]' /etc/neutron/metadata_agent.ini.bak >/etc/neutron/metadata_agent.ini\nopenstack-config --set /etc/neutron/metadata_agent.ini DEFAULT nova_metadata_ip controller\nopenstack-config --set /etc/neutron/metadata_agent.ini DEFAULT metadata_proxy_shared_secret METADATA_SECRET\n\nMD5\u503c\nmd5sum /etc/neutron/metadata_agent.ini\ne1166b0dfcbcf4507d50860d124335d6  /etc/neutron/metadata_agent.ini\n"})}),"\n",(0,o.jsx)(e.h3,{id:"610-\u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc",children:"6.10 \u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u5e76\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"\u5728[neutron]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8bbf\u95ee\u53c2\u6570\uff0c\u542f\u7528\u5143\u6570\u636e\u4ee3\u7406\u5e76\u914d\u7f6e\u5bc6\u7801\n[neutron]\n...\nurl = http://controller:9696\nauth_url = http://controller:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS\n\nservice_metadata_proxy = True\nmetadata_proxy_shared_secret = METADATA_SECRET\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nopenstack-config --set /etc/nova/nova.conf  neutron url  http://controller:9696\nopenstack-config --set /etc/nova/nova.conf  neutron auth_url  http://controller:35357\nopenstack-config --set /etc/nova/nova.conf  neutron auth_type  password\nopenstack-config --set /etc/nova/nova.conf  neutron project_domain_name  default\nopenstack-config --set /etc/nova/nova.conf  neutron user_domain_name  default\nopenstack-config --set /etc/nova/nova.conf  neutron region_name  RegionOne\nopenstack-config --set /etc/nova/nova.conf  neutron project_name  service\nopenstack-config --set /etc/nova/nova.conf  neutron username  neutron\nopenstack-config --set /etc/nova/nova.conf  neutron password  NEUTRON_PASS\nopenstack-config --set /etc/nova/nova.conf  neutron service_metadata_proxy  True\nopenstack-config --set /etc/nova/nova.conf  neutron metadata_proxy_shared_secret METADATA_SECRET\n\nMD5\u503c\nmd5sum /etc/nova/nova.conf\n6334f359655efdbcf083b812ab94efc1  /etc/nova/nova.conf\n"})}),"\n",(0,o.jsx)(e.h3,{id:"611-\u5b8c\u6210\u5b89\u88c5",children:"6.11 \u5b8c\u6210\u5b89\u88c5"}),"\n",(0,o.jsx)(e.h4,{id:"6111-\u8054\u7f51\u670d\u52a1\u521d\u59cb\u5316\u811a\u672c\u671f\u5f85\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5-etcneutronpluginini\u6307\u5411ml2\u63d2\u4ef6\u914d\u7f6e\u6587\u4ef6etcneutronpluginsml2ml2_confini\u5982\u679c\u6b64\u7b26\u53f7\u94fe\u63a5\u4e0d\u5b58\u5728\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u5b83",children:"6.11.1 \u8054\u7f51\u670d\u52a1\u521d\u59cb\u5316\u811a\u672c\u671f\u5f85\u4e00\u4e2a\u7b26\u53f7\u94fe\u63a5 /etc/neutron/plugin.ini\u6307\u5411ML2\u63d2\u4ef6\u914d\u7f6e\u6587\u4ef6\uff0c/etc/neutron/plugins/ml2/ml2_conf.ini\u3002\u5982\u679c\u6b64\u7b26\u53f7\u94fe\u63a5\u4e0d\u5b58\u5728\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u5b83"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini\n"})}),"\n",(0,o.jsx)(e.h4,{id:"6112-\u540c\u6b65\u6570\u636e\u5e93\u6700\u540e\u63d0\u793aok\u5373\u4e3a\u6b63\u786e",children:"6.11.2 \u540c\u6b65\u6570\u636e\u5e93\uff0c\u6700\u540e\u63d0\u793aOK\u5373\u4e3a\u6b63\u786e"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'su -s /bin/sh -c "neutron-db-manage --config-file /etc/neutron/neutron.conf \\\n--config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head" neutron\n'})}),"\n",(0,o.jsx)(e.h4,{id:"6113-\u91cd\u65b0\u542f\u52a8compute-api\u670d\u52a1",children:"6.11.3 \u91cd\u65b0\u542f\u52a8Compute API\u670d\u52a1"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"systemctl restart openstack-nova-api.service\n"})}),"\n",(0,o.jsx)(e.h4,{id:"6114-\u542f\u52a8\u7f51\u7edc\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",children:"6.11.4 \u542f\u52a8\u7f51\u7edc\u670d\u52a1\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u5bf9\u4e8e\u5b98\u7f51\u4e2d\u7684\u4e24\u79cd\u7f51\u7edc\uff0c\u8fd9\u91cc\u9009\u62e9\u7684\u662f\u7b2c\u4e00\u79cd\u7f51\u7edc"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#\u542f\u52a8\u7f51\u7edc\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsystemctl enable neutron-server.service \\\nneutron-linuxbridge-agent.service neutron-dhcp-agent.service \\\nneutron-metadata-agent.service\n\nsystemctl start neutron-server.service \\\nneutron-linuxbridge-agent.service neutron-dhcp-agent.service \\\nneutron-metadata-agent.service\n\n#\u542f\u52a8\u670d\u52a1\u540e\u63d0\u793a\u5982\u4e0b\u5373\u4e3a\u6b63\u786e\uff0calive\u5904\u90fd\u4e3a\u7b11\u8138     //\u6ce8\u610f\uff0c\u6b64\u5904\u542f\u52a8\u6bd4\u8f83\u6162\uff0c\u9700\u8981\u7b49\u5f85\u51e0\u5206\u949f\nneutron agent-list\n+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+\n| id                                   | agent_type         | host       | availability_zone | alive | admin_state_up | binary                    |\n+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+\n| 2a79bce3-2492-4d5b-b565-6f18aa7c8bcd | DHCP agent         | controller | nova              | :-)   | True           | neutron-dhcp-agent        |\n| 2b3799ae-3162-47f7-82fa-6291d76e0e14 | Metadata agent     | controller |                   | :-)   | True           | neutron-metadata-agent    |\n| 82ff3326-f570-4f50-bb5c-eec057034fd1 | Linux bridge agent | controller |                   | :-)   | True           | neutron-linuxbridge-agent |\n+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+\n"})}),"\n",(0,o.jsx)("h3",{style:{color:"red"},children:"\u5b89\u88c5\u548c\u914d\u7f6e\u8ba1\u7b97\u8282\u70b9"}),"\n",(0,o.jsx)(e.h3,{id:"612-\u5b89\u88c5\u5305",children:"6.12 \u5b89\u88c5\u5305"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"yum -y install openstack-neutron-linuxbridge ebtables ipset openstack-utils\n"})}),"\n",(0,o.jsx)(e.h3,{id:"613-\u914d\u7f6e\u516c\u5171\u7ec4\u4ef6",children:"6.13 \u914d\u7f6e\u516c\u5171\u7ec4\u4ef6"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/neutron/neutron.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u5728[database]\u90e8\u5206\u4e2d\uff0c\u6ce8\u91ca\u6389\u4efb\u4f55\u8fde\u63a5\u9009\u9879\uff0c\u56e0\u4e3a\u8ba1\u7b97\u8282\u70b9\u4e0d\u76f4\u63a5\u8bbf\u95ee\u6570\u636e\u5e93\u3002\n\u5728[DEFAULT]\u548c[oslo_messaging_rabbit]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6eRabbitMQ\u6d88\u606f\u961f\u5217\u8bbf\u95ee\n[DEFAULT]\n...\nrpc_backend = rabbit\n\n[oslo_messaging_rabbit]\n...\nrabbit_host = controller\nrabbit_userid = openstack\nrabbit_password = RABBIT_PASS\n\n2.\u5728[DEFAULT]\u548c[keystone_authtoken]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8eab\u4efd\u670d\u52a1\u8bbf\u95ee\n[DEFAULT]\n...\nauth_strategy = keystone\n\n[keystone_authtoken]\n...\nauth_uri = http://controller:5000\nauth_url = http://controller:35357\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS\n\n3.\u5728[oslo_concurrency]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u9501\u5b9a\u8def\u5f84\n[oslo_concurrency]\n...\nlock_path = /var/lib/neutron/tmp\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/neutron/neutron.conf{,.bak}\ngrep '^[a-Z\\[]' /etc/neutron/neutron.conf.bak >/etc/neutron/neutron.conf\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT rpc_backend  rabbit\nopenstack-config --set /etc/neutron/neutron.conf  DEFAULT auth_strategy  keystone\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken auth_uri  http://controller:5000\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken auth_url  http://controller:35357\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken memcached_servers  controller:11211\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken auth_type  password\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken project_domain_name  default\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken user_domain_name  default\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken project_name  service\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken username  neutron\nopenstack-config --set /etc/neutron/neutron.conf  keystone_authtoken password  NEUTRON_PASS\nopenstack-config --set /etc/neutron/neutron.conf  oslo_concurrency lock_path  /var/lib/neutron/tmp\nopenstack-config --set /etc/neutron/neutron.conf  oslo_messaging_rabbit rabbit_host  controller\nopenstack-config --set /etc/neutron/neutron.conf  oslo_messaging_rabbit rabbit_userid  openstack\nopenstack-config --set /etc/neutron/neutron.conf  oslo_messaging_rabbit rabbit_password  RABBIT_PASS\n\nMD5\u503c\nmd5sum /etc/neutron/neutron.conf\n77ffab503797be5063c06e8b956d6ed0  /etc/neutron/neutron.conf\n"})}),"\n",(0,o.jsx)(e.h3,{id:"614-\u914d\u7f6e\u7f51\u7edc\u9009\u9879",children:"6.14 \u914d\u7f6e\u7f51\u7edc\u9009\u9879"}),"\n",(0,o.jsx)(e.h4,{id:"6141-\u914d\u7f6e\u6865\u63a5\u4ee3\u7406",children:"6.14.1 \u914d\u7f6e\u6865\u63a5\u4ee3\u7406"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"Linux\u7f51\u6865\u4ee3\u7406\u4e3a\u5b9e\u4f8b\u6784\u5efa\u7b2c2\u5c42\uff08\u6865\u63a5\u548c\u4ea4\u6362\uff09\u865a\u62df\u7f51\u7edc\u57fa\u7840\u67b6\u6784\u5e76\u5904\u7406\u5b89\u5168\u7ec4\u3002\n\u7f16\u8f91/etc/neutron/plugins/ml2/linuxbridge_agent.ini\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n1.\u5728[linux_bridge]\u90e8\u5206\u4e2d\uff0c\u5c06\u63d0\u4f9b\u8005\u865a\u62df\u7f51\u7edc\u6620\u5c04\u5230\u63d0\u4f9b\u8005\u7269\u7406\u7f51\u7edc\u63a5\u53e3\uff0c\u8fd9\u91cc\u4e3aeth0\n[linux_bridge]\nphysical_interface_mappings = provider:PROVIDER_INTERFACE_NAME\n\n2.\u5728[vxlan]\u90e8\u5206\u4e2d\uff0c\u7981\u7528VXLAN\u91cd\u53e0\u7f51\u7edc\n[vxlan]\nenable_vxlan = False\n\n3.\u5728[securitygroup]\u90e8\u5206\u4e2d\uff0c\u542f\u7528\u5b89\u5168\u7ec4\u5e76\u914d\u7f6eLinux\u7f51\u6865iptables\u9632\u706b\u5899\u9a71\u52a8\u7a0b\u5e8f\n[securitygroup]\n...\nenable_security_group = True\nfirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver\n\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/neutron/plugins/ml2/linuxbridge_agent.ini{,.bak} \ngrep '^[a-Z\\[]' /etc/neutron/plugins/ml2/linuxbridge_agent.ini.bak >/etc/neutron/plugins/ml2/linuxbridge_agent.ini \nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini linux_bridge physical_interface_mappings provider:eth0 \nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini vxlan enable_vxlan False \nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup enable_security_group True \nopenstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup firewall_driver neutron.agent.linux.iptables_firewall.IptablesFirewallDriver\n\nMD5\u503c\nmd5sum /etc/neutron/plugins/ml2/linuxbridge_agent.ini\n3f474907a7f438b34563e4d3f3c29538  /etc/neutron/plugins/ml2/linuxbridge_agent.ini\n"})}),"\n",(0,o.jsx)(e.h4,{id:"6142-\u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc",children:"6.14.2 \u914d\u7f6e\u8ba1\u7b97\u4ee5\u4f7f\u7528\u7f51\u7edc"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"\u7f16\u8f91/etc/nova/nova.conf\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"\u5728[neutron]\u90e8\u5206\u4e2d\uff0c\u914d\u7f6e\u8bbf\u95ee\u53c2\u6570\n[neutron]\n...\nurl = http://controller:9696\nauth_url = http://controller:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS\n\n#\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nopenstack-config --set /etc/nova/nova.conf  neutron url  http://controller:9696 && \\\nopenstack-config --set /etc/nova/nova.conf  neutron auth_url  http://controller:35357 && \\\nopenstack-config --set /etc/nova/nova.conf  neutron auth_type  password && \\\nopenstack-config --set /etc/nova/nova.conf  neutron project_domain_name  default && \\\nopenstack-config --set /etc/nova/nova.conf  neutron user_domain_name  default && \\\nopenstack-config --set /etc/nova/nova.conf  neutron region_name  RegionOne && \\\nopenstack-config --set /etc/nova/nova.conf  neutron project_name  service && \\\nopenstack-config --set /etc/nova/nova.conf  neutron username  neutron && \\\nopenstack-config --set /etc/nova/nova.conf  neutron password  NEUTRON_PASS\n\nMD5\u503c\nmd5sum /etc/nova/nova.conf\n8e6590c8dc3d59beb3da37fdeeadfd1d  /etc/nova/nova.conf\n"})}),"\n",(0,o.jsx)(e.h3,{id:"615-\u5b8c\u6210\u5b89\u88c5",children:"6.15 \u5b8c\u6210\u5b89\u88c5"}),"\n",(0,o.jsx)(e.h4,{id:"6151-\u91cd\u65b0\u542f\u52a8compute\u670d\u52a1",children:"6.15.1 \u91cd\u65b0\u542f\u52a8Compute\u670d\u52a1"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"systemctl restart openstack-nova-compute.service\n"})}),"\n",(0,o.jsx)(e.h4,{id:"6152-\u542f\u52a8linux\u7f51\u6865\u4ee3\u7406\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8",children:"6.15.2 \u542f\u52a8Linux\u7f51\u6865\u4ee3\u7406\u5e76\u5c06\u5176\u914d\u7f6e\u4e3a\u5728\u7cfb\u7edf\u5f15\u5bfc\u65f6\u542f\u52a8"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"systemctl enable neutron-linuxbridge-agent.service && \\\nsystemctl start neutron-linuxbridge-agent.service\n"})}),"\n",(0,o.jsx)(e.h3,{id:"616-\u9a8c\u8bc1\u64cd\u4f5c\u5728\u63a7\u5236\u8282\u70b9\u64cd\u4f5c",children:"6.16 \u9a8c\u8bc1\u64cd\u4f5c\uff0c\u5728\u63a7\u5236\u8282\u70b9\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.h4,{id:"6161-\u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458cli\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650",children:"6.16.1 \u83b7\u53d6\u7ba1\u7406\u5458\u51ed\u636e\u4ee5\u83b7\u53d6\u5bf9\u4ec5\u7ba1\u7406\u5458CLI\u547d\u4ee4\u7684\u8bbf\u95ee\u6743\u9650"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"source /opt/admin-openrc\n"})}),"\n",(0,o.jsx)(e.h4,{id:"6162-\u5217\u51fa\u5df2\u52a0\u8f7d\u7684\u6269\u5c55\u4ee5\u9a8c\u8bc1neutron-server\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8",children:"6.16.2 \u5217\u51fa\u5df2\u52a0\u8f7d\u7684\u6269\u5c55\u4ee5\u9a8c\u8bc1neutron-server\u8fdb\u7a0b\u7684\u6210\u529f\u542f\u52a8"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"neutron ext-list\n+---------------------------+-----------------------------------------------+\n| alias                     | name                                          |\n+---------------------------+-----------------------------------------------+\n| default-subnetpools       | Default Subnetpools                           |\n| availability_zone         | Availability Zone                             |\n| network_availability_zone | Network Availability Zone                     |\n| auto-allocated-topology   | Auto Allocated Topology Services              |\n| binding                   | Port Binding                                  |\n| agent                     | agent                                         |\n| subnet_allocation         | Subnet Allocation                             |\n| dhcp_agent_scheduler      | DHCP Agent Scheduler                          |\n| tag                       | Tag support                                   |\n| external-net              | Neutron external network                      |\n| net-mtu                   | Network MTU                                   |\n| network-ip-availability   | Network IP Availability                       |\n| quotas                    | Quota management support                      |\n| provider                  | Provider Network                              |\n| multi-provider            | Multi Provider Network                        |\n| address-scope             | Address scope                                 |\n| timestamp_core            | Time Stamp Fields addition for core resources |\n| extra_dhcp_opt            | Neutron Extra DHCP opts                       |\n| security-group            | security-group                                |\n| rbac-policies             | RBAC Policies                                 |\n| standard-attr-description | standard-attr-description                     |\n| port-security             | Port Security                                 |\n| allowed-address-pairs     | Allowed Address Pairs                         |\n+---------------------------+-----------------------------------------------+\n"})}),"\n",(0,o.jsx)(e.h4,{id:"6163-\u5217\u51fa\u4ee3\u7406\u4ee5\u9a8c\u8bc1\u6210\u529f\u542f\u52a8neutron\u4ee3\u7406alive\u5904\u90fd\u4e3a\u7b11\u8138\u5373\u4e3a\u6b63\u786e",children:"6.16.3 \u5217\u51fa\u4ee3\u7406\u4ee5\u9a8c\u8bc1\u6210\u529f\u542f\u52a8neutron\u4ee3\u7406\uff0calive\u5904\u90fd\u4e3a\u7b11\u8138\u5373\u4e3a\u6b63\u786e"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"neutron agent-list\n+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+\n| id                                   | agent_type         | host       | availability_zone | alive | admin_state_up | binary                    |\n+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+\n| 2a79bce3-2492-4d5b-b565-6f18aa7c8bcd | DHCP agent         | controller | nova              | :-)   | True           | neutron-dhcp-agent        |\n| 2b3799ae-3162-47f7-82fa-6291d76e0e14 | Metadata agent     | controller |                   | :-)   | True           | neutron-metadata-agent    |\n| 82ff3326-f570-4f50-bb5c-eec057034fd1 | Linux bridge agent | controller |                   | :-)   | True           | neutron-linuxbridge-agent |\n| ee271e44-25c3-4024-b414-40d8fa838d68 | Linux bridge agent | compute1   |                   | :-)   | True           | neutron-linuxbridge-agent |\n+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u63a7\u5236\u8282\u70b9\u3001\u8ba1\u7b97\u8282\u70b9\u7f51\u7edc\u670d\u52a1neutron\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.h2,{id:"7\u8ba1\u7b97\u8282\u70b9horizon-web\u754c\u9762dashboard\u5b89\u88c5",children:"7.\u8ba1\u7b97\u8282\u70b9horizon web\u754c\u9762Dashboard\u5b89\u88c5"}),"\n",(0,o.jsx)(e.h3,{id:"71-\u5b89\u88c5\u5305",children:"7.1 \u5b89\u88c5\u5305"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"yum -y install openstack-dashboard\n"})}),"\n",(0,o.jsx)(e.h3,{id:"72-\u7f16\u8f91etcopenstack-dashboardlocal_settings\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c",children:"7.2 \u7f16\u8f91/etc/openstack-dashboard/local_settings\u6587\u4ef6\u5e76\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"1.\u914d\u7f6e\u4eea\u8868\u677f\u4ee5\u5728\u63a7\u5236\u5668\u8282\u70b9\u4e0a\u4f7f\u7528OpenStack\u670d\u52a1\n158\u884c\uff0cOPENSTACK_HOST = \"127.0.0.1\"\n\u4fee\u6539\u4e3a  OPENSTACK_HOST = \"controller\"\n\n2.\u5141\u8bb8\u6240\u6709\u4e3b\u673a\u8bbf\u95ee\u4eea\u8868\u677f\n30\u884c\uff0cALLOWED_HOSTS = ['horizon.example.com', 'localhost']\n\u4fee\u6539\u4e3a  ALLOWED_HOSTS = ['*', ]\n\n3.\u914d\u7f6ememcached\u4f1a\u8bdd\u5b58\u50a8\u670d\u52a1\n134-142\u884c\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',\n    },\n}\n\n\u4fee\u6539\u4e3a\nSESSION_ENGINE = 'django.contrib.sessions.backends.file'\n\nCACHES = {\n    'default': {\n         'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n         'LOCATION': 'controller:11211',\n    }\n}\n\n4.\u542f\u7528Identity API\u7248\u672c3\n161\u884c   OPENSTACK_KEYSTONE_URL = \"http://%s:5000/v2.0\" % OPENSTACK_HOST\n\u4fee\u6539\u4e3a   OPENSTACK_KEYSTONE_URL = \"http://%s:5000/v3\" % OPENSTACK_HOST\n\n5.\u542f\u7528\u5bf9\u57df\u7684\u652f\u6301\n65\u884c   #OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = False\n\u4fee\u6539\u4e3a   OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True\n\n6.\u914d\u7f6eAPI\u7248\u672c\n55-60\u884c\uff0c\u53d6\u6d88\u6ce8\u91ca\n#OPENSTACK_API_VERSIONS = {\n#    \"data-processing\": 1.1,\n#    \"identity\": 3,\n#    \"volume\": 2,\n#    \"compute\": 2,\n#}\n\n\u4fee\u6539\u4e3a\nOPENSTACK_API_VERSIONS = {\n    \"identity\": 3,\n    \"image\": 2,\n    \"volume\": 2,\n}\n\n7.\u914d\u7f6edefault\u4f5c\u4e3a\u60a8\u901a\u8fc7\u4eea\u8868\u76d8\u521b\u5efa\u7528\u6237\u7684\u9ed8\u8ba4\u57df\n71\u884c   #OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = 'default'\n\u4fee\u6539\u4e3a   OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = \"default\"\n\n8.\u5c06user\u914d\u7f6e\u4e3a\u60a8\u901a\u8fc7\u4eea\u8868\u677f\u521b\u5efa\u7684\u7528\u6237\u7684\u9ed8\u8ba4\u89d2\u8272\n161\u884c   OPENSTACK_KEYSTONE_DEFAULT_ROLE = \"_member_\"\n\u4fee\u6539\u4e3a   OPENSTACK_KEYSTONE_DEFAULT_ROLE = \"user\"\n\n9.\u5982\u679c\u9009\u62e9\u7f51\u7edc\u9009\u98791\uff0c\u8bf7\u7981\u7528\u5bf9\u7b2c3\u5c42\u7f51\u7edc\u670d\u52a1\u7684\u652f\u6301\n261-270\u884c\nOPENSTACK_NEUTRON_NETWORK = {\n    'enable_router': True,\n    'enable_quotas': True,\n    'enable_ipv6': True,\n    'enable_distributed_router': False,\n    'enable_ha_router': False,\n    'enable_lb': True,\n    'enable_firewall': True,\n    'enable_vpn': True,\n    'enable_fip_topology_check': True,\n\n\u4fee\u6539\u4e3a\nOPENSTACK_NEUTRON_NETWORK = {\n    ...\n    'enable_router': False,\n    'enable_quotas': False,\n    'enable_distributed_router': False,\n    'enable_ha_router': False,\n    'enable_lb': False,\n    'enable_firewall': False,\n    'enable_vpn': False,\n    'enable_fip_topology_check': False,\n\n\n10.\u53ef\u9009\uff09\u914d\u7f6e\u65f6\u533a\n371\u884c   TIME_ZONE = \"UTC\"\n\u4fee\u6539\u4e3a   TIME_ZONE = \"Asia/Shanghai\"\n\n//\u6709BUG\uff0c\u6682\u65f6\u4e0d\u7528\n#\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\n\\cp /etc/openstack-dashboard/local_settings{,.bak} && \\\nsed -i.bak '158cOPENSTACK_HOST = \"controller\"' /etc/openstack-dashboard/local_settings && \\\nsed -i '30s/horizon.example.com/*/' /etc/openstack-dashboard/local_settings|sed -i '30s/\\x27localhost\\x27//' /etc/openstack-dashboard/local_settings && \\\nsed -i $'137a\\t\\'LOCATION\\': \\'controller:11211\\',' /etc/openstack-dashboard/local_settings \n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsxs)(e.strong,{children:[(0,o.jsx)(e.code,{children:"/etc/openstack-dashboard/local_settings"}),"\u6587\u4ef6\u5185\u5bb9"]})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"# -*- coding: utf-8 -*-\n\nimport os\n\nfrom django.utils.translation import ugettext_lazy as _\n\n\nfrom openstack_dashboard import exceptions\nfrom openstack_dashboard.settings import HORIZON_CONFIG\n\nDEBUG = False\nTEMPLATE_DEBUG = DEBUG\n\n\n# WEBROOT is the location relative to Webserver root\n# should end with a slash.\nWEBROOT = '/dashboard/'\n#LOGIN_URL = WEBROOT + 'auth/login/'\n#LOGOUT_URL = WEBROOT + 'auth/logout/'\n#\n# LOGIN_REDIRECT_URL can be used as an alternative for\n# HORIZON_CONFIG.user_home, if user_home is not set.\n# Do not set it to '/home/', as this will cause circular redirect loop\n#LOGIN_REDIRECT_URL = WEBROOT\n\n# If horizon is running in production (DEBUG is False), set this\n# with the list of host/domain names that the application can serve.\n# For more information see:\n# https://docs.djangoproject.com/en/dev/ref/settings/#allowed-hosts\nALLOWED_HOSTS = ['*', ]\n\n# Set SSL proxy settings:\n# Pass this header from the proxy after terminating the SSL,\n# and don't forget to strip it from the client's request.\n# For more information see:\n# https://docs.djangoproject.com/en/1.8/ref/settings/#secure-proxy-ssl-header\n#SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')\n\n# If Horizon is being served through SSL, then uncomment the following two\n# settings to better secure the cookies from security exploits\n#CSRF_COOKIE_SECURE = True\n#SESSION_COOKIE_SECURE = True\n\n# The absolute path to the directory where message files are collected.\n# The message file must have a .json file extension. When the user logins to\n# horizon, the message files collected are processed and displayed to the user.\n#MESSAGES_PATH=None\n\n# Overrides for OpenStack API versions. Use this setting to force the\n# OpenStack dashboard to use a specific API version for a given service API.\n# Versions specified here should be integers or floats, not strings.\n# NOTE: The version should be formatted as it appears in the URL for the\n# service API. For example, The identity service APIs have inconsistent\n# use of the decimal point, so valid options would be 2.0 or 3.\nOPENSTACK_API_VERSIONS = {\n#    \"data-processing\": 1.1,\n    \"identity\": 3,\n    \"image\": 2,\n    \"volume\": 2,\n    \"compute\": 2,\n}\n\n# Set this to True if running on multi-domain model. When this is enabled, it\n# will require user to enter the Domain name in addition to username for login.\nOPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True\n\n# Overrides the default domain used when running on single-domain model\n# with Keystone V3. All entities will be created in the default domain.\n# NOTE: This value must be the ID of the default domain, NOT the name.\n# Also, you will most likely have a value in the keystone policy file like this\n#    \"cloud_admin\": \"rule:admin_required and domain_id:<your domain id>\"\n# This value must match the domain id specified there.\nOPENSTACK_KEYSTONE_DEFAULT_DOMAIN = 'default'\n\n# Set this to True to enable panels that provide the ability for users to\n# manage Identity Providers (IdPs) and establish a set of rules to map\n# federation protocol attributes to Identity API attributes.\n# This extension requires v3.0+ of the Identity API.\n#OPENSTACK_KEYSTONE_FEDERATION_MANAGEMENT = False\n\n# Set Console type:\n# valid options are \"AUTO\"(default), \"VNC\", \"SPICE\", \"RDP\", \"SERIAL\" or None\n# Set to None explicitly if you want to deactivate the console.\n#CONSOLE_TYPE = \"AUTO\"\n\n# If provided, a \"Report Bug\" link will be displayed in the site header\n# which links to the value of this setting (ideally a URL containing\n# information on how to report issues).\n#HORIZON_CONFIG[\"bug_url\"] = \"http://bug-report.example.com\"\n\n# Show backdrop element outside the modal, do not close the modal\n# after clicking on backdrop.\n#HORIZON_CONFIG[\"modal_backdrop\"] = \"static\"\n\n# Specify a regular expression to validate user passwords.\n#HORIZON_CONFIG[\"password_validator\"] = {\n#    \"regex\": '.*',\n#    \"help_text\": _(\"Your password does not meet the requirements.\"),\n#}\n\n# Disable simplified floating IP address management for deployments with\n# multiple floating IP pools or complex network requirements.\n#HORIZON_CONFIG[\"simple_ip_management\"] = False\n\n# Turn off browser autocompletion for forms including the login form and\n# the database creation workflow if so desired.\n#HORIZON_CONFIG[\"password_autocomplete\"] = \"off\"\n\n# Setting this to True will disable the reveal button for password fields,\n# including on the login form.\n#HORIZON_CONFIG[\"disable_password_reveal\"] = False\n\nLOCAL_PATH = '/tmp'\n\n# Set custom secret key:\n# You can either set it to a specific value or you can let horizon generate a\n# default secret key that is unique on this machine, e.i. regardless of the\n# amount of Python WSGI workers (if used behind Apache+mod_wsgi): However,\n# there may be situations where you would want to set this explicitly, e.g.\n# when multiple dashboard instances are distributed on different machines\n# (usually behind a load-balancer). Either you have to make sure that a session\n# gets all requests routed to the same dashboard instance or you set the same\n# SECRET_KEY for all of them.\nSECRET_KEY='65941f1393ea1c265ad7'\n\n# We recommend you use memcached for development; otherwise after every reload\n# of the django development server, you will have to login again. To use\n# memcached set CACHES to something like\nSESSION_ENGINE = 'django.contrib.sessions.backends.file'\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': 'controller:11211',\n    },\n}\n\n#CACHES = {\n#    'default': {\n#        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',\n#    },\n#}\n\n# Send email to the console by default\nEMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'\n# Or send them to /dev/null\n#EMAIL_BACKEND = 'django.core.mail.backends.dummy.EmailBackend'\n\n# Configure these for your outgoing email host\n#EMAIL_HOST = 'smtp.my-company.com'\n#EMAIL_PORT = 25\n#EMAIL_HOST_USER = 'djangomail'\n#EMAIL_HOST_PASSWORD = 'top-secret!'\n\n# For multiple regions uncomment this configuration, and add (endpoint, title).\n#AVAILABLE_REGIONS = [\n#    ('http://cluster1.example.com:5000/v2.0', 'cluster1'),\n#    ('http://cluster2.example.com:5000/v2.0', 'cluster2'),\n#]\n\nOPENSTACK_HOST = \"controller\"\nOPENSTACK_KEYSTONE_URL = \"http://%s:5000/v3\" % OPENSTACK_HOST\nOPENSTACK_KEYSTONE_DEFAULT_ROLE = \"user\"\n\n# Enables keystone web single-sign-on if set to True.\n#WEBSSO_ENABLED = False\n\n# Determines which authentication choice to show as default.\n#WEBSSO_INITIAL_CHOICE = \"credentials\"\n\n# The list of authentication mechanisms which include keystone\n# federation protocols and identity provider/federation protocol\n# mapping keys (WEBSSO_IDP_MAPPING). Current supported protocol\n# IDs are 'saml2' and 'oidc'  which represent SAML 2.0, OpenID\n# Connect respectively.\n# Do not remove the mandatory credentials mechanism.\n# Note: The last two tuples are sample mapping keys to a identity provider\n# and federation protocol combination (WEBSSO_IDP_MAPPING).\n#WEBSSO_CHOICES = (\n#    (\"credentials\", _(\"Keystone Credentials\")),\n#    (\"oidc\", _(\"OpenID Connect\")),\n#    (\"saml2\", _(\"Security Assertion Markup Language\")),\n#    (\"acme_oidc\", \"ACME - OpenID Connect\"),\n#    (\"acme_saml2\", \"ACME - SAML2\"),\n#)\n\n# A dictionary of specific identity provider and federation protocol\n# combinations. From the selected authentication mechanism, the value\n# will be looked up as keys in the dictionary. If a match is found,\n# it will redirect the user to a identity provider and federation protocol\n# specific WebSSO endpoint in keystone, otherwise it will use the value\n# as the protocol_id when redirecting to the WebSSO by protocol endpoint.\n# NOTE: The value is expected to be a tuple formatted as: (<idp_id>, <protocol_id>).\n#WEBSSO_IDP_MAPPING = {\n#    \"acme_oidc\": (\"acme\", \"oidc\"),\n#    \"acme_saml2\": (\"acme\", \"saml2\"),\n#}\n\n# Disable SSL certificate checks (useful for self-signed certificates):\n#OPENSTACK_SSL_NO_VERIFY = True\n\n# The CA certificate to use to verify SSL connections\n#OPENSTACK_SSL_CACERT = '/path/to/cacert.pem'\n\n# The OPENSTACK_KEYSTONE_BACKEND settings can be used to identify the\n# capabilities of the auth backend for Keystone.\n# If Keystone has been configured to use LDAP as the auth backend then set\n# can_edit_user to False and name to 'ldap'.\n#\n# TODO(tres): Remove these once Keystone has an API to identify auth backend.\nOPENSTACK_KEYSTONE_BACKEND = {\n    'name': 'native',\n    'can_edit_user': True,\n    'can_edit_group': True,\n    'can_edit_project': True,\n    'can_edit_domain': True,\n    'can_edit_role': True,\n}\n\n# Setting this to True, will add a new \"Retrieve Password\" action on instance,\n# allowing Admin session password retrieval/decryption.\n#OPENSTACK_ENABLE_PASSWORD_RETRIEVE = False\n\n# The Launch Instance user experience has been significantly enhanced.\n# You can choose whether to enable the new launch instance experience,\n# the legacy experience, or both. The legacy experience will be removed\n# in a future release, but is available as a temporary backup setting to ensure\n# compatibility with existing deployments. Further development will not be\n# done on the legacy experience. Please report any problems with the new\n# experience via the Launchpad tracking system.\n#\n# Toggle LAUNCH_INSTANCE_LEGACY_ENABLED and LAUNCH_INSTANCE_NG_ENABLED to\n# determine the experience to enable.  Set them both to true to enable\n# both.\n#LAUNCH_INSTANCE_LEGACY_ENABLED = True\n#LAUNCH_INSTANCE_NG_ENABLED = False\n\n# A dictionary of settings which can be used to provide the default values for\n# properties found in the Launch Instance modal.\n#LAUNCH_INSTANCE_DEFAULTS = {\n#    'config_drive': False,\n#}\n\n# The Xen Hypervisor has the ability to set the mount point for volumes\n# attached to instances (other Hypervisors currently do not). Setting\n# can_set_mount_point to True will add the option to set the mount point\n# from the UI.\nOPENSTACK_HYPERVISOR_FEATURES = {\n    'can_set_mount_point': False,\n    'can_set_password': False,\n    'requires_keypair': False,\n}\n\n# The OPENSTACK_CINDER_FEATURES settings can be used to enable optional\n# services provided by cinder that is not exposed by its extension API.\nOPENSTACK_CINDER_FEATURES = {\n    'enable_backup': False,\n}\n\n# The OPENSTACK_NEUTRON_NETWORK settings can be used to enable optional\n# services provided by neutron. Options currently available are load\n# balancer service, security groups, quotas, VPN service.\nOPENSTACK_NEUTRON_NETWORK = {\n    'enable_router': False,\n    'enable_quotas': False,\n    'enable_ipv6': False,\n    'enable_distributed_router': False,\n    'enable_ha_router': False,\n    'enable_lb': False,\n    'enable_firewall': False,\n    'enable_vpn': False,\n    'enable_fip_topology_check': False,\n\n    # Neutron can be configured with a default Subnet Pool to be used for IPv4\n    # subnet-allocation. Specify the label you wish to display in the Address\n    # pool selector on the create subnet step if you want to use this feature.\n    'default_ipv4_subnet_pool_label': None,\n\n    # Neutron can be configured with a default Subnet Pool to be used for IPv6\n    # subnet-allocation. Specify the label you wish to display in the Address\n    # pool selector on the create subnet step if you want to use this feature.\n    # You must set this to enable IPv6 Prefix Delegation in a PD-capable\n    # environment.\n    'default_ipv6_subnet_pool_label': None,\n\n    # The profile_support option is used to detect if an external router can be\n    # configured via the dashboard. When using specific plugins the\n    # profile_support can be turned on if needed.\n    'profile_support': None,\n    #'profile_support': 'cisco',\n\n    # Set which provider network types are supported. Only the network types\n    # in this list will be available to choose from when creating a network.\n    # Network types include local, flat, vlan, gre, and vxlan.\n    'supported_provider_types': ['*'],\n\n    # Set which VNIC types are supported for port binding. Only the VNIC\n    # types in this list will be available to choose from when creating a\n    # port.\n    # VNIC types include 'normal', 'macvtap' and 'direct'.\n    # Set to empty list or None to disable VNIC type selection.\n    'supported_vnic_types': ['*'],\n}\n\n# The OPENSTACK_HEAT_STACK settings can be used to disable password\n# field required while launching the stack.\nOPENSTACK_HEAT_STACK = {\n    'enable_user_pass': True,\n}\n\n# The OPENSTACK_IMAGE_BACKEND settings can be used to customize features\n# in the OpenStack Dashboard related to the Image service, such as the list\n# of supported image formats.\n#OPENSTACK_IMAGE_BACKEND = {\n#    'image_formats': [\n#        ('', _('Select format')),\n#        ('aki', _('AKI - Amazon Kernel Image')),\n#        ('ami', _('AMI - Amazon Machine Image')),\n#        ('ari', _('ARI - Amazon Ramdisk Image')),\n#        ('docker', _('Docker')),\n#        ('iso', _('ISO - Optical Disk Image')),\n#        ('ova', _('OVA - Open Virtual Appliance')),\n#        ('qcow2', _('QCOW2 - QEMU Emulator')),\n#        ('raw', _('Raw')),\n#        ('vdi', _('VDI - Virtual Disk Image')),\n#        ('vhd', _('VHD - Virtual Hard Disk')),\n#        ('vmdk', _('VMDK - Virtual Machine Disk')),\n#    ],\n#}\n\n# The IMAGE_CUSTOM_PROPERTY_TITLES settings is used to customize the titles for\n# image custom property attributes that appear on image detail pages.\nIMAGE_CUSTOM_PROPERTY_TITLES = {\n    \"architecture\": _(\"Architecture\"),\n    \"kernel_id\": _(\"Kernel ID\"),\n    \"ramdisk_id\": _(\"Ramdisk ID\"),\n    \"image_state\": _(\"Euca2ools state\"),\n    \"project_id\": _(\"Project ID\"),\n    \"image_type\": _(\"Image Type\"),\n}\n\n# The IMAGE_RESERVED_CUSTOM_PROPERTIES setting is used to specify which image\n# custom properties should not be displayed in the Image Custom Properties\n# table.\nIMAGE_RESERVED_CUSTOM_PROPERTIES = []\n\n# OPENSTACK_ENDPOINT_TYPE specifies the endpoint type to use for the endpoints\n# in the Keystone service catalog. Use this setting when Horizon is running\n# external to the OpenStack environment. The default is 'publicURL'.\n#OPENSTACK_ENDPOINT_TYPE = \"publicURL\"\n\n# SECONDARY_ENDPOINT_TYPE specifies the fallback endpoint type to use in the\n# case that OPENSTACK_ENDPOINT_TYPE is not present in the endpoints\n# in the Keystone service catalog. Use this setting when Horizon is running\n# external to the OpenStack environment. The default is None.  This\n# value should differ from OPENSTACK_ENDPOINT_TYPE if used.\n#SECONDARY_ENDPOINT_TYPE = \"publicURL\"\n\n# The number of objects (Swift containers/objects or images) to display\n# on a single page before providing a paging element (a \"more\" link)\n# to paginate results.\nAPI_RESULT_LIMIT = 1000\nAPI_RESULT_PAGE_SIZE = 20\n\n# The size of chunk in bytes for downloading objects from Swift\nSWIFT_FILE_TRANSFER_CHUNK_SIZE = 512 * 1024\n\n# Specify a maximum number of items to display in a dropdown.\nDROPDOWN_MAX_ITEMS = 30\n\n# The timezone of the server. This should correspond with the timezone\n# of your entire OpenStack installation, and hopefully be in UTC.\nTIME_ZONE = \"Asia/Shanghai\"\n\n# When launching an instance, the menu of available flavors is\n# sorted by RAM usage, ascending. If you would like a different sort order,\n# you can provide another flavor attribute as sorting key. Alternatively, you\n# can provide a custom callback method to use for sorting. You can also provide\n# a flag for reverse sort. For more info, see\n# http://docs.python.org/2/library/functions.html#sorted\n#CREATE_INSTANCE_FLAVOR_SORT = {\n#    'key': 'name',\n#     # or\n#    'key': my_awesome_callback_method,\n#    'reverse': False,\n#}\n\n# Set this to True to display an 'Admin Password' field on the Change Password\n# form to verify that it is indeed the admin logged-in who wants to change\n# the password.\n#ENFORCE_PASSWORD_CHECK = False\n\n# Modules that provide /auth routes that can be used to handle different types\n# of user authentication. Add auth plugins that require extra route handling to\n# this list.\n#AUTHENTICATION_URLS = [\n#    'openstack_auth.urls',\n#]\n\n# The Horizon Policy Enforcement engine uses these values to load per service\n# policy rule files. The content of these files should match the files the\n# OpenStack services are using to determine role based access control in the\n# target installation.\n\n# Path to directory containing policy.json files\nPOLICY_FILES_PATH = '/etc/openstack-dashboard'\n\n# Map of local copy of service policy files.\n# Please insure that your identity policy file matches the one being used on\n# your keystone servers. There is an alternate policy file that may be used\n# in the Keystone v3 multi-domain case, policy.v3cloudsample.json.\n# This file is not included in the Horizon repository by default but can be\n# found at\n# http://git.openstack.org/cgit/openstack/keystone/tree/etc/ \\\n# policy.v3cloudsample.json\n# Having matching policy files on the Horizon and Keystone servers is essential\n# for normal operation. This holds true for all services and their policy files.\n#POLICY_FILES = {\n#    'identity': 'keystone_policy.json',\n#    'compute': 'nova_policy.json',\n#    'volume': 'cinder_policy.json',\n#    'image': 'glance_policy.json',\n#    'orchestration': 'heat_policy.json',\n#    'network': 'neutron_policy.json',\n#    'telemetry': 'ceilometer_policy.json',\n#}\n\n# TODO: (david-lyle) remove when plugins support adding settings.\n# Note: Only used when trove-dashboard plugin is configured to be used by\n# Horizon.\n# Trove user and database extension support. By default support for\n# creating users and databases on database instances is turned on.\n# To disable these extensions set the permission here to something\n# unusable such as [\"!\"].\n#TROVE_ADD_USER_PERMS = []\n#TROVE_ADD_DATABASE_PERMS = []\n\n# Change this patch to the appropriate list of tuples containing\n# a key, label and static directory containing two files:\n# _variables.scss and _styles.scss\n#AVAILABLE_THEMES = [\n#    ('default', 'Default', 'themes/default'),\n#    ('material', 'Material', 'themes/material'),\n#]\n\nLOGGING = {\n    'version': 1,\n    # When set to True this will disable all logging except\n    # for loggers specified in this configuration dictionary. Note that\n    # if nothing is specified here and disable_existing_loggers is True,\n    # django.db.backends will still log unless it is disabled explicitly.\n    'disable_existing_loggers': False,\n    'handlers': {\n        'null': {\n            'level': 'DEBUG',\n            'class': 'logging.NullHandler',\n        },\n        'console': {\n            # Set the level to \"DEBUG\" for verbose output logging.\n            'level': 'INFO',\n            'class': 'logging.StreamHandler',\n        },\n    },\n    'loggers': {\n        # Logging from django.db.backends is VERY verbose, send to null\n        # by default.\n        'django.db.backends': {\n            'handlers': ['null'],\n            'propagate': False,\n        },\n        'requests': {\n            'handlers': ['null'],\n            'propagate': False,\n        },\n        'horizon': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'openstack_dashboard': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'novaclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'cinderclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'keystoneclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'glanceclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'neutronclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'heatclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'ceilometerclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'swiftclient': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'openstack_auth': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'nose.plugins.manager': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'django': {\n            'handlers': ['console'],\n            'level': 'DEBUG',\n            'propagate': False,\n        },\n        'iso8601': {\n            'handlers': ['null'],\n            'propagate': False,\n        },\n        'scss': {\n            'handlers': ['null'],\n            'propagate': False,\n        },\n    },\n}\n\n# 'direction' should not be specified for all_tcp/udp/icmp.\n# It is specified in the form.\nSECURITY_GROUP_RULES = {\n    'all_tcp': {\n        'name': _('All TCP'),\n        'ip_protocol': 'tcp',\n        'from_port': '1',\n        'to_port': '65535',\n    },\n    'all_udp': {\n        'name': _('All UDP'),\n        'ip_protocol': 'udp',\n        'from_port': '1',\n        'to_port': '65535',\n    },\n    'all_icmp': {\n        'name': _('All ICMP'),\n        'ip_protocol': 'icmp',\n        'from_port': '-1',\n        'to_port': '-1',\n    },\n    'ssh': {\n        'name': 'SSH',\n        'ip_protocol': 'tcp',\n        'from_port': '22',\n        'to_port': '22',\n    },\n    'smtp': {\n        'name': 'SMTP',\n        'ip_protocol': 'tcp',\n        'from_port': '25',\n        'to_port': '25',\n    },\n    'dns': {\n        'name': 'DNS',\n        'ip_protocol': 'tcp',\n        'from_port': '53',\n        'to_port': '53',\n    },\n    'http': {\n        'name': 'HTTP',\n        'ip_protocol': 'tcp',\n        'from_port': '80',\n        'to_port': '80',\n    },\n    'pop3': {\n        'name': 'POP3',\n        'ip_protocol': 'tcp',\n        'from_port': '110',\n        'to_port': '110',\n    },\n    'imap': {\n        'name': 'IMAP',\n        'ip_protocol': 'tcp',\n        'from_port': '143',\n        'to_port': '143',\n    },\n    'ldap': {\n        'name': 'LDAP',\n        'ip_protocol': 'tcp',\n        'from_port': '389',\n        'to_port': '389',\n    },\n    'https': {\n        'name': 'HTTPS',\n        'ip_protocol': 'tcp',\n        'from_port': '443',\n        'to_port': '443',\n    },\n    'smtps': {\n        'name': 'SMTPS',\n        'ip_protocol': 'tcp',\n        'from_port': '465',\n        'to_port': '465',\n    },\n    'imaps': {\n        'name': 'IMAPS',\n        'ip_protocol': 'tcp',\n        'from_port': '993',\n        'to_port': '993',\n    },\n    'pop3s': {\n        'name': 'POP3S',\n        'ip_protocol': 'tcp',\n        'from_port': '995',\n        'to_port': '995',\n    },\n    'ms_sql': {\n        'name': 'MS SQL',\n        'ip_protocol': 'tcp',\n        'from_port': '1433',\n        'to_port': '1433',\n    },\n    'mysql': {\n        'name': 'MYSQL',\n        'ip_protocol': 'tcp',\n        'from_port': '3306',\n        'to_port': '3306',\n    },\n    'rdp': {\n        'name': 'RDP',\n        'ip_protocol': 'tcp',\n        'from_port': '3389',\n        'to_port': '3389',\n    },\n}\n\n# Deprecation Notice:\n#\n# The setting FLAVOR_EXTRA_KEYS has been deprecated.\n# Please load extra spec metadata into the Glance Metadata Definition Catalog.\n#\n# The sample quota definitions can be found in:\n# <glance_source>/etc/metadefs/compute-quota.json\n#\n# The metadata definition catalog supports CLI and API:\n#  $glance --os-image-api-version 2 help md-namespace-import\n#  $glance-manage db_load_metadefs <directory_with_definition_files>\n#\n# See Metadata Definitions on: http://docs.openstack.org/developer/glance/\n\n# TODO: (david-lyle) remove when plugins support settings natively\n# Note: This is only used when the Sahara plugin is configured and enabled\n# for use in Horizon.\n# Indicate to the Sahara data processing service whether or not\n# automatic floating IP allocation is in effect.  If it is not\n# in effect, the user will be prompted to choose a floating IP\n# pool for use in their cluster.  False by default.  You would want\n# to set this to True if you were running Nova Networking with\n# auto_assign_floating_ip = True.\n#SAHARA_AUTO_IP_ALLOCATION_ENABLED = False\n\n# The hash algorithm to use for authentication tokens. This must\n# match the hash algorithm that the identity server and the\n# auth_token middleware are using. Allowed values are the\n# algorithms supported by Python's hashlib library.\n#OPENSTACK_TOKEN_HASH_ALGORITHM = 'md5'\n\n# Hashing tokens from Keystone keeps the Horizon session data smaller, but it\n# doesn't work in some cases when using PKI tokens.  Uncomment this value and\n# set it to False if using PKI tokens and there are 401 errors due to token\n# hashing.\n#OPENSTACK_TOKEN_HASH_ENABLED = True\n\n# AngularJS requires some settings to be made available to\n# the client side. Some settings are required by in-tree / built-in horizon\n# features. These settings must be added to REST_API_REQUIRED_SETTINGS in the\n# form of ['SETTING_1','SETTING_2'], etc.\n#\n# You may remove settings from this list for security purposes, but do so at\n# the risk of breaking a built-in horizon feature. These settings are required\n# for horizon to function properly. Only remove them if you know what you\n# are doing. These settings may in the future be moved to be defined within\n# the enabled panel configuration.\n# You should not add settings to this list for out of tree extensions.\n# See: https://wiki.openstack.org/wiki/Horizon/RESTAPI\nREST_API_REQUIRED_SETTINGS = ['OPENSTACK_HYPERVISOR_FEATURES',\n                              'LAUNCH_INSTANCE_DEFAULTS']\n\n# Additional settings can be made available to the client side for\n# extensibility by specifying them in REST_API_ADDITIONAL_SETTINGS\n# !! Please use extreme caution as the settings are transferred via HTTP/S\n# and are not encrypted on the browser. This is an experimental API and\n# may be deprecated in the future without notice.\n#REST_API_ADDITIONAL_SETTINGS = []\n\n# DISALLOW_IFRAME_EMBED can be used to prevent Horizon from being embedded\n# within an iframe. Legacy browsers are still vulnerable to a Cross-Frame\n# Scripting (XFS) vulnerability, so this option allows extra security hardening\n# where iframes are not used in deployment. Default setting is True.\n# For more information see:\n# http://tinyurl.com/anticlickjack\n#DISALLOW_IFRAME_EMBED = True\n"})}),"\n",(0,o.jsx)(e.h3,{id:"73-\u9a8c\u8bc1\u64cd\u4f5c",children:"7.3 \u9a8c\u8bc1\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.h4,{id:"731-\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u5426\u5219\u540e\u7eed\u8bbf\u95eedashboard\u4f1a\u62a5500\u9519\u8bef",children:"7.3.1 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u5426\u5219\u540e\u7eed\u8bbf\u95eedashboard\u4f1a\u62a5500\u9519\u8bef"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"sed -i.bak  '3aWSGIApplicationGroup %{GLOBAL}' \\\n/etc/httpd/conf.d/openstack-dashboard.conf\n\n#\u91cd\u542fhttpd\nsystemctl enable httpd && systemctl restart httpd\n"})}),"\n",(0,o.jsx)(e.h4,{id:"732-\u767b\u5f55dashboard",children:"7.3.2 \u767b\u5f55dashboard"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"10.0.0.31/dashboard"}),"\n",(0,o.jsx)(e.p,{children:"\u57df\uff1adefault"}),"\n",(0,o.jsx)(e.p,{children:"\u7528\u6237\u540d\uff1aadmin"}),"\n",(0,o.jsx)(e.p,{children:"\u5bc6\u7801\uff1aADMIN_PASS"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-05-2321.12.47.png",alt:"iShot2020-05-2321.12.47"})}),"\n",(0,o.jsx)(e.p,{children:"\u767b\u9646\u540e\u9996\u754c\u9762"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://gitee.com/pptfz/picgo-images/raw/master/img/iShot2020-05-2410.06.00.png",alt:"iShot2020-05-2410.17.18"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u8ba1\u7b97\u8282\u70b9Dashboard\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})}),"\n",(0,o.jsx)(e.p,{children:"\u5982\u679c\u9047\u5230\u5982\u4e0b\u9519\u8bef"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-05-2410.17.18.png",alt:"iShot2020-05-2410.17.18"})}),"\n",(0,o.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"\u5b89\u88c5dashboard\u8282\u70b9\u505a\u4ee5\u4e0b\u64cd\u4f5c\n1.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/openstack-dashboard/local_settings\n\u4fee\u6539\t\tSESSION_ENGINE = 'django.contrib.sessions.backends.cache'\n\u4fee\u6539\u4e3a\t SESSION_ENGINE = 'django.contrib.sessions.backends.file'\t\n\n2.\u91cd\u542fhttpd\nsystemctl restart httpd\n"})})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>i});var o=t(96540);const a={},s=o.createContext(a);function r(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);