"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2876],{16002:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>a});var s=e(74848),o=e(28453);const i={},l="django\u5c0f\u9879\u76ee(\u57fa\u4e8edjango1.11.9)",d={id:"python/python\u8fdb\u9636/django/django\u5c0f\u9879\u76ee",title:"django\u5c0f\u9879\u76ee",description:"[toc]",source:"@site/docs/python/python\u8fdb\u9636/django/django\u5c0f\u9879\u76ee.md",sourceDirName:"python/python\u8fdb\u9636/django",slug:"/python/python\u8fdb\u9636/django/django\u5c0f\u9879\u76ee",permalink:"/docs/python/python\u8fdb\u9636/django/django\u5c0f\u9879\u76ee",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"csrf_token\u9a8c\u8bc1\u8fc7\u7a0b",permalink:"/docs/python/python\u8fdb\u9636/django/csrf_token\u9a8c\u8bc1\u8fc7\u7a0b"},next:{title:"css\u57fa\u7840\u77e5\u8bc6",permalink:"/docs/web/css/css\u57fa\u7840\u77e5\u8bc6"}},r={},a=[{value:"\u4e00\u3001\u5229\u7528form\u8868\u5355\u7b80\u5355\u7684\u767b\u9646\u8ba4\u8bc1",id:"\u4e00\u5229\u7528form\u8868\u5355\u7b80\u5355\u7684\u767b\u9646\u8ba4\u8bc1",level:2},{value:"1.urls\u6587\u4ef6\u914d\u7f6e",id:"1urls\u6587\u4ef6\u914d\u7f6e",level:3},{value:"2.views\u6587\u4ef6\u914d\u7f6e",id:"2views\u6587\u4ef6\u914d\u7f6e",level:3},{value:"3.settings\u6587\u4ef6\u914d\u7f6e",id:"3settings\u6587\u4ef6\u914d\u7f6e",level:3},{value:"4.html\u6587\u4ef6",id:"4html\u6587\u4ef6",level:3},{value:"4.1 login.html\u6587\u4ef6",id:"41-loginhtml\u6587\u4ef6",level:4},{value:"4.2 index.html\u6587\u4ef6",id:"42-indexhtml\u6587\u4ef6",level:4},{value:"4.3 \u9759\u6001\u6587\u4ef6\u7684\u76f8\u5173\u914d\u7f6e",id:"43-\u9759\u6001\u6587\u4ef6\u7684\u76f8\u5173\u914d\u7f6e",level:4},{value:"5.\u8bbf\u95ee\u6548\u679c",id:"5\u8bbf\u95ee\u6548\u679c",level:3},{value:"\u4e8c\u3001\u9879\u76ee\u4e00\u7684\u63d0\u5347\u7248\uff0c\u4e0e\u540e\u53f0\u8fdb\u884c\u6570\u636e\u4ea4\u4e92",id:"\u4e8c\u9879\u76ee\u4e00\u7684\u63d0\u5347\u7248\u4e0e\u540e\u53f0\u8fdb\u884c\u6570\u636e\u4ea4\u4e92",level:2},{value:"1.urls\u6587\u4ef6\u914d\u7f6e",id:"1urls\u6587\u4ef6\u914d\u7f6e-1",level:3},{value:"2.views\u6587\u4ef6\u914d\u7f6e",id:"2views\u6587\u4ef6\u914d\u7f6e-1",level:3},{value:"3.settings\u6587\u4ef6\u914d\u7f6e",id:"3settings\u6587\u4ef6\u914d\u7f6e-1",level:3},{value:"4.Django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684<code>__init__.py</code>\u6587\u4ef6",id:"4django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684__init__py\u6587\u4ef6",level:3},{value:"5.models\u6587\u4ef6\u914d\u7f6e",id:"5models\u6587\u4ef6\u914d\u7f6e",level:3},{value:"6.html\u6587\u4ef6\u914d\u7f6e",id:"6html\u6587\u4ef6\u914d\u7f6e",level:3},{value:"\u4e09\u3001\u9879\u76ee\u4e8c\u7684\u8fdb\u9636\u7248\u672c\uff0c\u9879\u76ee\u4e8c\u4e2d\u7528\u5230\u7684\u662f\u5355\u8868\u589e\u5220\u6539\u67e5\uff0c\u73b0\u5728\u6539\u4e3a\u591a\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5",id:"\u4e09\u9879\u76ee\u4e8c\u7684\u8fdb\u9636\u7248\u672c\u9879\u76ee\u4e8c\u4e2d\u7528\u5230\u7684\u662f\u5355\u8868\u589e\u5220\u6539\u67e5\u73b0\u5728\u6539\u4e3a\u591a\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5",level:2},{value:"1.urls\u6587\u4ef6\u914d\u7f6e",id:"1urls\u6587\u4ef6\u914d\u7f6e-2",level:3},{value:"2.views\u6587\u4ef6\u914d\u7f6e",id:"2views\u6587\u4ef6\u914d\u7f6e-2",level:3},{value:"3.settings\u6587\u4ef6\u914d\u7f6e",id:"3settings\u6587\u4ef6\u914d\u7f6e-2",level:3},{value:"4.Django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684<code>__init__.py</code>\u6587\u4ef6",id:"4django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684__init__py\u6587\u4ef6-1",level:3},{value:"5.models\u6587\u4ef6\u914d\u7f6e",id:"5models\u6587\u4ef6\u914d\u7f6e-1",level:3},{value:"6.html\u6587\u4ef6\u914d\u7f6e",id:"6html\u6587\u4ef6\u914d\u7f6e-1",level:3}];function c(n){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"[toc]"}),"\n",(0,s.jsx)(t.h1,{id:"django\u5c0f\u9879\u76ee\u57fa\u4e8edjango1119",children:"django\u5c0f\u9879\u76ee(\u57fa\u4e8edjango1.11.9)"}),"\n",(0,s.jsx)(t.h2,{id:"\u4e00\u5229\u7528form\u8868\u5355\u7b80\u5355\u7684\u767b\u9646\u8ba4\u8bc1",children:"\u4e00\u3001\u5229\u7528form\u8868\u5355\u7b80\u5355\u7684\u767b\u9646\u8ba4\u8bc1"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u6574\u4e2a\u9879\u76ee\u7684\u76ee\u5f55\u53ca\u6587\u4ef6"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.07.24.png",alt:"iShot2020-10-16 14.07.24"})}),"\n",(0,s.jsx)(t.h3,{id:"1urls\u6587\u4ef6\u914d\u7f6e",children:"1.urls\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from django.conf.urls import url\nfrom django.contrib import admin\n\n#\u4ece\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5bfc\u5165\u89c6\u56fe\u6587\u4ef6\nfrom app01 import views\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n  \n    #\u8fd9\u91cc\u5339\u914d\u7684\u8def\u5f84\u662f\u6a21\u62df\u767b\u9646\u6210\u529f\u540e\u8fd4\u56de\u7684\u9875\u9762\n    url(r'^home/', views.home),\n  \n    #\u8fd9\u91cc\u5339\u914d\u7684\u8def\u5f84\u5c31\u662f\u6a21\u62dfform\u8868\u5355\u4e2d\u767b\u9646\u7684\u754c\u9762\n    url(r'^login/', views.login),\n    # url(r'^login/', views.LoginView.as_view()),\n]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"2views\u6587\u4ef6\u914d\u7f6e",children:"2.views\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"#\u5bfc\u5165\u76f8\u5173\u6a21\u5757\nfrom django.shortcuts import render,HttpResponse,redirect\n\n# Create your views here.\n\n#\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u5982\u679c\u767b\u9646\u6210\u529f\u5c31\u8fd4\u56deindex.html\u9875\u9762\uff0c\u8fd9\u91cc\u968f\u4fbf\u5199\u4e86\u4e00\u4e2aindex.html\u9875\u9762\ndef home(request):\n    # return HttpResponse('\u767b\u9646\u6210\u529f')\n    return render(request,'index.html')\n\n#\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u6237\u540d\u548c\u5bc6\u7801\u8fd9\u91cc\u4e3a\u56fa\u5b9a\u7684admin\uff0c\u5982\u679c\u767b\u9646\u6210\u529f\u5c31\u91cd\u5b9a\u5411\u5230/home  \u5982\u679c\u767b\u9646\u5931\u8d25\u5c31\u8fd8\u8fd4\u56de\u767b\u9646\u754c\u9762\ndef login(request):\n    if request.method == 'GET':\n        return render(request,'login.html')\n    else:\n        uname = request.POST.get('username')\n        pwd = request.POST.get('password')\n\n        if uname == 'admin' and pwd == 'admin':\n            # return HttpResponse('\u767b\u9646\u6210\u529f')\n            return redirect('/home/')\n        else:\n            # return HttpResponse('\u767b\u9646\u5931\u8d25')\n            return redirect('/login/')\n"})}),"\n",(0,s.jsx)(t.h3,{id:"3settings\u6587\u4ef6\u914d\u7f6e",children:"3.settings\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u4e3a\u4e86\u9a8c\u8bc1POST\u8bf7\u6c42\u6548\u679c\uff0c\u4fee\u6539settings\u6587\u4ef6\u5982\u4e0b"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"Django\u9879\u76ee\u4e0b\u540c\u540d\u76ee\u5f55\u4e2d\u7684settings\u6587\u4ef6\uff0c48\u884c\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    # 'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"4html\u6587\u4ef6",children:"4.html\u6587\u4ef6"}),"\n",(0,s.jsx)(t.h4,{id:"41-loginhtml\u6587\u4ef6",children:"4.1 login.html\u6587\u4ef6"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7b80\u5355\u7684form\u8868\u5355\u767b\u9646\u754c\u9762\uff0clogin.html\u6587\u4ef6\u5b58\u653e\u4e8etemplates\u76ee\u5f55\u4e0b"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n</head>\n<body>\n<form action="" method="post">\n    \u7528\u6237\u540d\uff1a<input type="text" name="username">\n    \u5bc6\u7801\uff1a<input type="password" name="password">\n    <input type="submit" value="\u767b\u9646">\n</form>\n\n</body>\n</html>\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.08.08.png",alt:"iShot2020-10-16 14.08.08"})}),"\n",(0,s.jsx)(t.h4,{id:"42-indexhtml\u6587\u4ef6",children:"4.2 index.html\u6587\u4ef6"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u767b\u9646\u6210\u529f\u540e\u8fd4\u56de\u7684\u754c\u9762\uff0cindex.html\u6587\u4ef6\u5b58\u653e\u4e8etemplates\u76ee\u5f55\u4e0b"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.min.css">\n</head>\n<body>\n<div class="container-fluid">\n    <h1>\u67e5\u770b\u4e66\u7c4d</h1>\n    <div class="row">\n    <div class="col-md-9 col-md-push-3">\n        <button type="button" class="btn btn-primary">\u6dfb\u52a0\u4e66\u7c4d</button>\n\n    <table class="table table-striped">\n        <thead>\n        <tr>\n            <th>\u7f16\u53f7</th>\n            <th>\u4e66\u7c4d\u540d\u79f0</th>\n            <th>\u4ef7\u683c</th>\n            <th>\u51fa\u7248\u65e5\u671f</th>\n            <th>\u51fa\u7248\u793e</th>\n            <th>\u64cd\u4f5c</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n            <td>1</td>\n            <td>python\u4ece\u5165\u95e8\u5230\u653e\u5f03</td>\n            <td>9.9</td>\n            <td>2012-12-12</td>\n            <td>\u4eba\u6c11\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n        <tr>\n            <td>2</td>\n            <td>Linux\u4ece\u5165\u95e8\u5230\u653e\u5f03</td>\n            <td>10.11</td>\n            <td>2013-12-12</td>\n            <td>\u673a\u68b0\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n        <tr>\n            <td>3</td>\n            <td>mysql\u4ece\u5220\u5e93\u5230\u8dd1\u8def</td>\n            <td>66</td>\n            <td>2015-12-12</td>\n            <td>\u5317\u4eac\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n         <tr>\n            <td>4</td>\n            <td>\u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b</td>\n            <td>100</td>\n            <td>2016-11-11</td>\n            <td>\u4e0a\u6d77\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n         <tr>\n            <td>5</td>\n            <td>\u653e\u5f00\u90a3\u4e2a\u5973\u5b69\uff01\uff01\uff01</td>\n            <td>30</td>\n            <td>2017-11-11</td>\n            <td>\u5e7f\u5dde\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n         <tr>\n            <td>6</td>\n            <td>GO\u8bed\u8a00\u4ece\u5165\u95e8\u5230\u653e\u5f03</td>\n            <td>50</td>\n            <td>2018-11-11</td>\n            <td>\u5317\u65b9\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n         <tr>\n            <td>7</td>\n            <td>\u91d1\u74f6\u6885\u662f\u4e00\u672c\u4ec0\u4e48\u6837\u7684\u4e66</td>\n            <td>7.7</td>\n            <td>2019-12-12</td>\n            <td>\u5357\u65b9\u51fa\u7248\u793e</td>\n            <td>\n                  <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n            </td>\n        </tr>\n         <tr>\n            <td>8</td>\n            <td>\u9694\u58c1\u6bcd\u732a\u7684\u53eb\u58f0</td>\n            <td>66</td>\n            <td>2020-01-01</td>\n            <td>\u751f\u6d3b\u51fa\u7248\u793e</td>\n            <td>\n                <button type="button" class="btn btn-warning">\u7f16\u8f91</button>\n                <button type="button" class="btn btn-danger">\u5220\u9664</button>\n\n            </td>\n        </tr>\n        </tbody>\n    </table>\n\n    </div>\n\n\n    </div>\n</div>\n\n\n</body>\n    <script src="jquery.js"><\/script>\n    <script src="/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"><\/script>\n</html>\n'})}),"\n",(0,s.jsx)(t.h4,{id:"43-\u9759\u6001\u6587\u4ef6\u7684\u76f8\u5173\u914d\u7f6e",children:"4.3 \u9759\u6001\u6587\u4ef6\u7684\u76f8\u5173\u914d\u7f6e"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7531\u4e8eindex.html\u6587\u4ef6\u4e2d\u5f15\u5165\u4e86bootstrap\uff0c\u56e0\u6b64\u9700\u8981\u8fdb\u884c\u76f8\u5173\u7684\u914d\u7f6e"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7b2c\u4e00\u6b65\u3001\u5728\u9879\u76ee\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3astatic_file\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u9759\u6001\u6587\u4ef6\uff0c\u5e76\u4e14\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u5f15\u5165bootstrap"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.08.43.png",alt:"iShot2020-10-16 14.08.43"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7b2c\u4e8c\u6b65\u3001\u4fee\u6539setting\u914d\u7f6e\u6587\u4ef6"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"\u5728index.html\u6587\u4ef6\u4e2d\u5f15\u5165\u7684bootstrap\u662f\u8fd9\u6837\u5199\u7684\n<link rel=\"stylesheet\" href=\"/static/bootstrap-3.3.7-dist/css/bootstrap.min.css\">\n\n\n//\u9700\u8981\u8bbe\u7f6e\u7684\u9879\u5982\u4e0b\nstatic\u662f\u4ec0\u4e48\uff1fstatic\u662fsettings\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u7684\u8def\u5f84\u522b\u540d\uff0c\u8bbe\u7f6e\u9879\u5982\u4e0b\nSTATIC_URL = '/static/'\n\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR,'static_file'),\n]\n\n\nos.path.join(BASE_DIR,'static_file')\u8fd9\u4e00\u9879\u4e2d\u7684static_file\u662fdjango\u9879\u76ee\u540c\u76ee\u5f55\u7ea7\u522b\u4e0b\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u9759\u6001\u6587\u4ef6\uff0c\u800cSTATIC_URL = '/static/'\u4e2d\u7684static\u5219\u662f\u8bbf\u95ee\u65f6\u5019\u7684\u522b\u540d\uff0c\u8fd9\u91cc\u8bf4\u7684\u8bbf\u95ee\u6307\u7684\u662findex.html\u6587\u4ef6\u4e2d\u5f15\u5165bootstrap\u6307\u5b9a\u7684\u8def\u5f84\u5f00\u5934\u7684static\n\n\u8fd9\u91cc\u9700\u8981\u8bf4\u660e\u4e00\u4e0b\uff0c\u7ed9\u9759\u6001\u6587\u4ef6\u8bbe\u7f6e\u522b\u540d\u662f\u4e3a\u4e86\u5b89\u5168\uff0c\u56e0\u4e3a\u522b\u4eba\u8bbf\u95ee\u53ea\u80fd\u627e\u5230\u4f60\u7684\u522b\u540d\u8def\u5f84\uff0c\u800c\u4e0d\u77e5\u9053\u771f\u6b63\u7684\u5b58\u653e\u8def\u5f84\uff0c\u771f\u6b63\u7684\u8def\u5f84\u662f/static\u2014\u2014file/bootstrap-3.3.7-dist/css/bootstrap.min.css\uff0c\u800c\u5ba2\u6237\u8bbf\u95ee\u7684\u8def\u5f84\u5219\u662f/static/bootstrap-3.3.7-dist/css/bootstrap.min.css\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5fc5\u987b\u8bbe\u7f6e\u522b\u540d\u624d\u53ef\u4ee5\u5f15\u5165bootstrap\u6837\u5f0f\uff0c\u5426\u5219\u4e0d\u751f\u6548\n"})}),"\n",(0,s.jsx)(t.h3,{id:"5\u8bbf\u95ee\u6548\u679c",children:"5.\u8bbf\u95ee\u6548\u679c"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u8f93\u5165\u6b63\u786e\u7684\u7528\u6237\u540d\u8fd4\u56deindex.html\uff0c\u767b\u9646\u5931\u8d25\u8fd8\u662f\u5219\u91cd\u5b9a\u5411\u5230\u767b\u9646\u754c\u9762"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/login2.gif",alt:"login2"})}),"\n",(0,s.jsx)(t.h2,{id:"\u4e8c\u9879\u76ee\u4e00\u7684\u63d0\u5347\u7248\u4e0e\u540e\u53f0\u8fdb\u884c\u6570\u636e\u4ea4\u4e92",children:"\u4e8c\u3001\u9879\u76ee\u4e00\u7684\u63d0\u5347\u7248\uff0c\u4e0e\u540e\u53f0\u8fdb\u884c\u6570\u636e\u4ea4\u4e92"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u9879\u76ee\u4e00\u4e2d\u5b9e\u73b0\u7684\u4e66\u7c4d\u7f16\u8f91\u754c\u9762\u53ea\u662f\u4e00\u4e2a\u9759\u6001\u9875\u9762\uff0c\u73b0\u5728\u5c06\u6dfb\u52a0\u4e66\u7c4d\u3001\u7f16\u8f91\u3001\u5220\u9664\u6309\u94ae\u5b9e\u73b0\u4e0e\u540e\u53f0\u4ea4\u4e92\u529f\u80fd"})}),"\n",(0,s.jsx)(t.h3,{id:"1urls\u6587\u4ef6\u914d\u7f6e-1",children:"1.urls\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from django.conf.urls import url\nfrom django.contrib import admin\nfrom app01 import views\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n  \n  \t#\u8bbf\u95ee\u8def\u5f84\u4e3abook/list\uff0c\u8d77\u4e86\u4e00\u4e2aurl\u522b\u540dbook_list\n    url(r'^book/list', views.book_list, name='book_list'),\n  \t\n    #\u540e\u7eed\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u6dfb\u52a0\u4e66\u7c4d\u7684\u6309\u94ae\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u70b9\u51fb\u6dfb\u52a0\u6570\u636e\u8df3\u8f6c\u5230\u53e6\u5916\u4e00\u4e2a\u9875\u9762\n  \turl(r'^book/add', views.book_add, name='book_add'),\n  \n    #\u540e\u7eed\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u7f16\u8f91\u4e66\u7c4d\u7684\u6309\u94ae\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u7f16\u8f91\u4e66\u7c4d\n    url(r'^book/edit/', views.book_edit, name='book_edit'),\n  \n    #\u540e\u7eed\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u5220\u9664\u4e66\u7c4d\u7684\u6309\u94ae\n    url(r'^book/del/(\\d+)/', views.book_del, name='book_del'),\n]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"2views\u6587\u4ef6\u914d\u7f6e-1",children:"2.views\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u5c55\u793a\u9875\u9762\u548c\u6dfb\u52a0\u4e66\u7c4d\u7684\u914d\u7f6e"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse,redirect\nfrom app01 import models\nfrom django.urls import reverse\n# Create your views here.\n\ndef book_list(request):\n    all_books = models.Book.objects.all()\n    return render(request,'book_list.html',{'all_books':all_books})\n\n\ndef book_add(request):\n    #\u5982\u679c\u662fget\u8bf7\u6c42\u5c31\u8fd4\u56de\u6dfb\u52a0\u4e66\u7c4d\u7684\u9875\u9762\n    if request.method == 'GET':\n        return render(request,'book_add.html')\n    else:\n        #\u6253\u5370\u4e00\u4e0b\u8bf7\u6c42\u7684post\u65b9\u6cd5\n        print(request.POST)\n        # < QueryDict: {'csrfmiddlewaretoken': ['M5sNsaCjFaTCDjy8AGfEmDaeC5GCKDvClAQpHLdHCzUjZGtLMWjwi2YPXdzr6482'],\n        #               'title': ['\u6211\u662f\u4e00\u672c\u4e66'], 'price': ['9'], 'publish_date': ['2019-11-30'], 'publish': ['\u5954\u8dd1\u51fa\u7248\u793e']} >\n\n        #\u6dfb\u52a0\u4e66\u7c4dlow\u7248\u5199\u6cd5\n        #\u6dfb\u52a0\u4e66\u7c4d\uff0c\u8bf7\u6c42\u662fpost\uff0c\u5728book_add.html\u4e2d\u7684form\u8868\u5355\u5b9a\u4e49\uff0c\u5206\u522b\u83b7\u53d6\u5404\u4e2a\u5b57\u6bb5\n        # title = request.POST.get('title')\n        # price = request.POST.get('price')\n        # publish_date = request.POST.get('publish_date')\n        # publish = request.POST.get('publish')\n\n        #\u6dfb\u52a0\u4e66\u7c4d\uff0c\u725b\u903c\u7248\u5199\u6cd5\n        #\u4ee3\u7801\u610f\u601d\u4e3a\u5220\u9664\u8fd4\u56de\u7684post\u8bf7\u6c42\u4e2d\u7684\u8fd9\u4e2a\u952e\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u8868\u4e2d\u7684\u5b57\u6bb5\u548c\u6dfb\u52a0\u7684\u4fe1\u606f\u5bf9\u5e94\u7684\u5b57\u5178\u4e86\n        data = request.POST.dict()\n        del data['csrfmiddlewaretoken']\n\n\n        #\u4e0a\u8fb9\u5df2\u7ecf\u83b7\u53d6\u4e86\u5404\u4e2a\u5b57\u6bb5\uff0c\u73b0\u5728\u8981\u628a\u83b7\u53d6\u7684\u5b57\u6bb5\u6dfb\u52a0\u5230\u6570\u636e\u5e93\u4e2d\n        models.Book.objects.create(\n            #low\u7248\u5199\u6cd5\uff0c\u6bd4\u8f83\u9ebb\u70e6\n            # title=title,\n            # price=price,\n            # publish_date=publish_date,\n            # publish=publish,\n\n            #\u725b\u903c\u7248\u5199\u6cd5\n            **data\n\n            #\u26a0\ufe0f\u8fd9\u91cc\u7528\u5230\u7684\u662f\u5b57\u5178\u6253\u6563\u7684\u7528\u6cd5\uff0c\u5b57\u5178\u4e2d\u7684\u952e\u5fc5\u987b\u548c\u8868\u4e2d\u7684\u5b57\u6bb5\u540d\u76f8\u540c\uff0c\u800cbook_add\u4e2dinput\u6807\u7b7e\u4e2d\u5b9a\u4e49\u7684name\u5c5e\u6027\u5c31\u662f\u8868\u4e2d\u7684\u5b57\u6bb5\u540d\uff0c\u56e0\u6b64\u8fd4\u56de\u7684post\u8bf7\u6c42\u4e2d\u7684\u5b57\u5178\u7684\u952e\u5c31\u548c\u8868\u4e2d\u7684\u5b57\u6bb5\u540d\u76f8\u540c\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u7528\u5b57\u5178\u6253\u6563\n        )\n        #\u5bf9\u4e8eGET\u65b9\u6cd5\uff0c\u4e0d\u52a0reverse\u4e5f\u53ef\u4ee5\n        return redirect('book_list')\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7f16\u8f91\u4e66\u7c4d\u7684\u914d\u7f6e"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7f16\u8f91\u4e66\u7c4d\u7684\u91cd\u70b9\u662f\u70b9\u51fb\u7f16\u8f91\u4e66\u7c4d\uff0c\u9700\u8981\u627e\u5230\u7f16\u8f91\u6309\u94ae\u5bf9\u5e94\u7684\u90a3\u4e00\u884c\u7684\u6570\u636e"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u83b7\u53d6\u5199\u6cd5\u4e00"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"def book_edit(request):\n    if request.method == 'GET':\n        #\u8fd9\u91cc\u5c31\u62ff\u5230\u4e86\u540e\u53f0\u63d0\u4ea4\u8fc7\u6765\u7684\u7f16\u8f91\u6309\u94ae\u5bf9\u5e94\u7684\u90a3\u4e00\u884c\u7684\u6570\u636e\uff0c\n        book_id = request.GET.get('id')\n\n        #\u8fd9\u91cc\u662f\u83b7\u53d6\u8868\u4e2d\u7684\u5bf9\u5e94\u7f16\u8f91\u6309\u94ae\u7684\u90a3\u4e00\u884c\u6570\u636e\u7684id\uff0c\u8fd9\u91cc\u6700\u597d\u5199pk=book_id\uff0c\u56e0\u4e3aorm\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u521b\u5efa\u4e00\u4e2aid\u5b57\u6bb5\uff0c\u4f46\u662f\u5982\u679c\u540e\u7eed\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u5b57\u6bb5\u4e0d\u53ebid\uff0c\u8fd9\u91cc\u5199pk\u5c31\u6bd4\u8f83\u5408\u9002\u4e86\uff0cpk\u662f\u4e3b\u952e\u7684\u610f\u601d\n        old_book_obj = models.Book.objects.filter(pk=book_id)[0]\n\n        return render(request,'book_edit.html',{'old_book_obj':old_book_obj})\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u83b7\u53d6\u5199\u6cd5\u4e8c"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"//\u65b9\u5f0f\u4e8c \u76f4\u63a5\u4f20\u53c2book.id\u800c\u4e0d\u9700\u8981\u5728\u540e\u9762\u5199\u4e0a\u5bf9\u5e94\u7684\u8def\u5f84\n<a href=\"{% url 'book_edit' book.id %}\" class=\"btn btn-warning btn-sm\">\u7f16\u8f91</a>\n\n//\u5982\u679c\u4e3a\u4ee5\u4e0a\u7684\u5199\u6cd5\uff0c\u5219url\u6587\u4ef6\u4e2d\u7f16\u8f91\u8def\u5f84\u9700\u8981\u4fee\u6539\u4e3a\u5982\u4e0b\uff0c\u5373edit\u540e\u8fb9\u8ddf\u4e00\u4e2a\u53c2\u6570\nurl(r'^book/edit/(\\d+)', views.book_edit, name='book_edit'),\n\n//views\u4e2d\u7684\u5199\u6cd5\ndef book_edit(request,book_id):\n    if request.method == 'GET':\n        #\u8fd9\u91cc\u5c31\u62ff\u5230\u4e86\u540e\u53f0\u63d0\u4ea4\u8fc7\u6765\u7684\u7f16\u8f91\u6309\u94ae\u5bf9\u5e94\u7684\u90a3\u4e00\u884c\u7684\u6570\u636e\uff0c\n        # book_id = request.GET.get('id')\n\n        #\u8fd9\u91cc\u662f\u83b7\u53d6\u8868\u4e2d\u7684\u5bf9\u5e94\u7f16\u8f91\u6309\u94ae\u7684\u90a3\u4e00\u884c\u6570\u636e\u7684id\uff0c\u8fd9\u91cc\u6700\u597d\u5199pk=book_id\uff0c\u56e0\u4e3aorm\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u521b\u5efa\u4e00\u4e2aid\u5b57\u6bb5\uff0c\u4f46\u662f\u5982\u679c\u540e\u7eed\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u5b57\u6bb5\u4e0d\u53ebid\uff0c\u8fd9\u91cc\u5199pk\u5c31\u6bd4\u8f83\u5408\u9002\u4e86\uff0cpk\u662f\u4e3b\u952e\u7684\u610f\u601d\n        old_book_obj = models.Book.objects.filter(pk=book_id)[0]\n        return render(request,'book_edit.html',{'old_book_obj':old_book_obj})\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7f16\u8f91\u6309\u94ae\u643a\u5e26\u6570\u636e\u5199\u6cd5"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'<a href="{% url \'book_edit\' %}?book_id={{ book.id }}" class="btn btn-warning btn-sm">\u7f16\u8f91</a>#}\n\n{#   <a href="/book/edit/{{ book.id }}/" class="btn btn-warning btn-sm">\u7f16\u8f91</a>#}\n\n<a href="{% url \'book_edit\' book.id %}" class="btn btn-warning btn-sm">\u7f16\u8f91</a>\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"url\u522b\u540d\u53cd\u5411\u89e3\u6790\u65f6 \u5982\u679c\u9700\u8981\u53c2\u6570"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"html\n\t{% url '\u522b\u540d' 3 %}         url(r'^index/(\\d+)/',views.index,name='index');\n\t-- /index/3/\n\t\nviews\u89c6\u56fe\n\treverse('index',args=(3,))    -- /index/3/\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u5220\u9664\u4e66\u7c4d\u7684\u914d\u7f6e"})}),"\n",(0,s.jsx)(t.h3,{id:"3settings\u6587\u4ef6\u914d\u7f6e-1",children:"3.settings\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"#\u5173\u4e8e\u9759\u6001\u6587\u4ef6\u7684\u914d\u7f6e\u9879\n\u5728index.html\u6587\u4ef6\u4e2d\u5f15\u5165\u7684bootstrap\u662f\u8fd9\u6837\u5199\u7684\n<link rel=\"stylesheet\" href=\"/static/bootstrap-3.3.7-dist/css/bootstrap.min.css\">\n\n\n//\u9700\u8981\u8bbe\u7f6e\u7684\u9879\u5982\u4e0b\nstatic\u662f\u4ec0\u4e48\uff1fstatic\u662fsettings\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u7684\u8def\u5f84\u522b\u540d\uff0c\u8bbe\u7f6e\u9879\u5982\u4e0b\nSTATIC_URL = '/static/'\n\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR,'statics'),\t#\u26a0\ufe0f\u8fd9\u91cc\u7684\u540d\u5b57\u4e0d\u8981\u548c\u4e0a\u8fb9\u7684static\u91cd\u540d\n]\n\n\nos.path.join(BASE_DIR,'statics')\u8fd9\u4e00\u9879\u4e2d\u7684statics\u662fdjango\u9879\u76ee\u540c\u76ee\u5f55\u7ea7\u522b\u4e0b\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u9759\u6001\u6587\u4ef6\uff0c\u800cSTATIC_URL = '/static/'\u4e2d\u7684static\u5219\u662f\u8bbf\u95ee\u65f6\u5019\u7684\u522b\u540d\uff0c\u8fd9\u91cc\u8bf4\u7684\u8bbf\u95ee\u6307\u7684\u662findex.html\u6587\u4ef6\u4e2d\u5f15\u5165bootstrap\u6307\u5b9a\u7684\u8def\u5f84\u5f00\u5934\u7684static\n\n\u8fd9\u91cc\u9700\u8981\u8bf4\u660e\u4e00\u4e0b\uff0c\u7ed9\u9759\u6001\u6587\u4ef6\u8bbe\u7f6e\u522b\u540d\u662f\u4e3a\u4e86\u5b89\u5168\uff0c\u56e0\u4e3a\u522b\u4eba\u8bbf\u95ee\u53ea\u80fd\u627e\u5230\u4f60\u7684\u522b\u540d\u8def\u5f84\uff0c\u800c\u4e0d\u77e5\u9053\u771f\u6b63\u7684\u5b58\u653e\u8def\u5f84\uff0c\u771f\u6b63\u7684\u8def\u5f84\u662f/statics/bootstrap-3.3.7-dist/css/bootstrap.min.css\uff0c\u800c\u5ba2\u6237\u8bbf\u95ee\u7684\u8def\u5f84\u5219\u662f/static/bootstrap-3.3.7-dist/css/bootstrap.min.css\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5fc5\u987b\u8bbe\u7f6e\u522b\u540d\u624d\u53ef\u4ee5\u5f15\u5165bootstrap\u6837\u5f0f\uff0c\u5426\u5219\u4e0d\u751f\u6548\n\n\n\n#\u5173\u4e8e\u6570\u636e\u5e93\u7684\u914d\u7f6e\u9879\u76ee\n#\u5148\u6ce8\u91ca\u9ed8\u8ba4\u9879\n# DATABASES = {\n#     'default': {\n#         'ENGINE': 'django.db.backends.sqlite3',\n#         'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n#     }\n# }\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'book',\t\t\t\t#\u6570\u636e\u5e93\u540d\n        'HOST': '127.0.0.1',\t#\u6570\u636e\u5e93IP\n        'PORT': '3306',\t\t\t\t#\u6570\u636e\u5e93\u7aef\u53e3\n        'USER': 'root',\t\t\t\t#\u6570\u636e\u5e93\u7528\u6237\n        'PASSWORD': 'xxx'\t\t\t#\u6570\u636e\u5e93\u5bc6\u7801\n    }\n}\n"})}),"\n",(0,s.jsxs)(t.h3,{id:"4django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684__init__py\u6587\u4ef6",children:["4.Django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684",(0,s.jsx)(t.code,{children:"__init__.py"}),"\u6587\u4ef6"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"import pymysql\npymysql.install_as_MySQLdb()\n"})}),"\n",(0,s.jsx)(t.h3,{id:"5models\u6587\u4ef6\u914d\u7f6e",children:"5.models\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from django.db import models\nclass Book(models.Model):\n    title = models.CharField(max_length=32)\n    price = models.FloatField()\n    publish_date = models.DateField()\n    publish = models.CharField(max_length=32)\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"models\u6587\u4ef6\u4e3a\u521b\u5efa\u8868\u64cd\u4f5c\uff0c\u914d\u7f6e\u5b8c\u6210\u540e\u9700\u8981\u8fdb\u5165django\u9879\u76ee\u4e0b\u8fdb\u884c\u6570\u636e\u5e93\u540c\u6b65"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"python3 manage.py makemigrations\npython3 manage.py migrate\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.09.27.png",alt:"iShot2020-10-16 14.09.27"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u540c\u6b65\u5b8c\u6570\u636e\u5e93\u67e5\u770b\u8868"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.09.48.png",alt:"iShot2020-10-16 14.09.48"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u5411\u8868\u4e2d\u63d2\u5165\u51e0\u6761\u6570\u636e"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"#\u5411\u8868\u4e2d\u63d2\u5165\u6570\u636e\ninsert into app01_book values(1,'linux\u4ece\u5165\u95e8\u5230\u653e\u5f03',99,'2010-10-10','\u5de5\u4e1a\u51fa\u7248\u793e'),(2,'mysql\u4e4b\u4ece\u5220\u5e93\u5230\u8dd1\u8def',100,'2018-11-11','\u8dd1\u8def\u51fa\u7248\u793e'),(3,'\u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b',66.6,'2020-02-02','\u8001\u738b\u51fa\u7248\u793e');\n\n\n#\u67e5\u770b\u63d2\u5165\u7684\u6570\u636e\nmysql> select * from app01_book;\n+----+----------------------------+-------+--------------+-----------------+\n| id | title                      | price | publish_date | publish         |\n+----+----------------------------+-------+--------------+-----------------+\n|  1 | linux\u4ece\u5165\u95e8\u5230\u653e\u5f03          |    99 | 2010-10-10   | \u5de5\u4e1a\u51fa\u7248\u793e      |\n|  2 | mysql\u4e4b\u4ece\u5220\u5e93\u5230\u8dd1\u8def        |   100 | 2018-11-11   | \u8dd1\u8def\u51fa\u7248\u793e      |\n|  3 | \u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b             |  66.6 | 2020-02-02   | \u8001\u738b\u51fa\u7248\u793e      |\n+----+----------------------------+-------+--------------+-----------------+\n3 rows in set (0.00 sec)\n"})}),"\n",(0,s.jsx)(t.h3,{id:"6html\u6587\u4ef6\u914d\u7f6e",children:"6.html\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u8fd9\u91cc\u5148\u8bf4\u660e\u4e00\u4e0b\u9759\u6001\u6587\u4ef6\u7684\u5f15\u5165\uff0c\u6211\u4eec\u81ea\u5b9a\u4e49\u4e86\u8fd4\u56debook_list.html\uff0c\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u9700\u8981\u5f15\u5165jquery\u548cbootstrap"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'{#\u5728settings\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u9759\u6001\u6587\u4ef6\u7684\u522b\u540d\u4e3astatic\uff0c\u8fd9\u91cc\u4e3a\u5bfc\u5165\u8fd9\u4e2a\u8def\u5f84\uff0c\u5373static_file#}\n{% load static %}\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <link rel="stylesheet" href="{% static \'bootstrap-3.3.7-dist/css/bootstrap.min.css\' %}">\n</head>\n<body>\n\n</body>\n{#\u4ee5\u4e0b\u4e3a\u5f15\u5165jquery\u548cbootstrap\uff0c\u56e0\u4e3a\u5728settings\u6587\u4ef6\u4e2d\u5df2\u7ecf\u5b9a\u4e49\u4e86\u9759\u6001\u6587\u4ef6\u7684\u522b\u540dstatic\uff0c\u56e0\u6b64\u76f4\u63a5\u5f15\u5165\u5c31\u80fd\u81ea\u52a8\u627e\u5230static_file\u4e0b\u5b58\u653e\u7684jquery\u548cbootstrap\u6587\u4ef6#}\n<script src="{% static \'jquery.js\' %}"><\/script>\n<script src="{% static \'bootstrap-3.3.7-dist/js/bootstrap.min.js\' %}"><\/script>\n</html>\n'})}),"\n",(0,s.jsx)(t.p,{children:"book_list.html"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'{#\u5728settings\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u9759\u6001\u6587\u4ef6\u7684\u522b\u540d\u4e3astatic\uff0c\u8fd9\u91cc\u4e3a\u5bfc\u5165\u8fd9\u4e2a\u8def\u5f84\uff0c\u5373static_file#}\n{% load static %}\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <link rel="stylesheet" href="{% static \'bootstrap-3.3.7-dist/css/bootstrap.min.css\' %}">\n</head>\n<body>\n<div class="container-fluid">\n    <h1>\u67e5\u770b\u4e66\u7c4d</h1>\n    <div class="row">\n        <div class="col-md-8 col-md-offset-2">\n{#            \u6dfb\u52a0\u4e00\u4e2a\u6dfb\u52a0\u4e66\u7c4d\u6309\u94ae\uff0c\u8fd9\u91cc\u7528\u5230\u4e86url\u522b\u540d\uff0c\u5373url\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u8bbf\u95eebook/add\u7684url\u522b\u540d#}\n            <a href="{% url \'book_add\' %}" class="btn btn-primary">\u6dfb\u52a0\u4e66\u7c4d</a>\n            <table class="table table-striped table-hover table-bordered">\n                <thead>\n                    <tr>\n                        <th>\u7f16\u53f7</th>\n                        <th>\u4e66\u540d</th>\n                        <th>\u4ef7\u683c</th>\n                        <th>\u51fa\u7248\u65e5\u671f</th>\n                        <th>\u51fa\u7248\u793e</th>\n                        <th>\u64cd\u4f5c</th>\n                    </tr>\n                </thead>\n                <tbody>\n{#                \u56e0\u4e3a\u8fd9\u91cc\u8981\u83b7\u53d6\u5230\u7684\u662f\u4ece\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u7684\u6570\u636e\uff0c\u56e0\u6b64\u9700\u8981\u5faa\u73af\u5c55\u793aviews\u4e2dall_books\uff0c\u5373\u83b7\u53d6\u5230\u7684\u6240\u6709\u4e66\u7c4d\u7684\u4fe1\u606f#}\n                {% for book in all_books %}\n                    <tr>\n{#                        \u8fd9\u91cc\u4e3a\u5c55\u793a\u5faa\u73af\u7684\u6b21\u6570#}\n                        <td>{{ forloop.counter }}</td>\n\n{#                        \u4e0b\u8fb9\u4e3a\u83b7\u53d6\u4e66\u540d\u3001\u4ef7\u683c\u3001\u51fa\u7248\u65e5\u671f\u3001\u51fa\u7248\u793e\u7b49\u7b49#}\n                        <td>{{ book.title }}</td>\n                        <td>{{ book.price }}</td>\n{#                        \u8fd9\u91cc\u9700\u8981\u7528\u8fc7\u6ee4\u5668\u5c55\u793a\u65f6\u95f4\u663e\u793a\uff0c\u5426\u5219\u662f\u8fd9\u6837\u7684Oct. 10, 2010#}\n                        <td>{{ book.publish_date | date:\'Y-m-d\'}}</td>\n                        <td>{{ book.publish }}</td>\n{#                        \u5b9a\u4e49\u4e24\u4e2a\u6309\u94ae\u3001\u7f16\u8f91\u3001\u5220\u9664#}\n                        <td>\n{#                            \u65b9\u5f0f\u4e00 \u70b9\u51fb\u7f16\u8f91\u6309\u94ae\u8df3\u8f6c\u5230url\u522b\u540d\u4e3abook_edit\u7684\u8def\u5f84\uff0c\u5e76\u4e14\u8fd8\u643a\u5e26\u4e86\u5bf9\u5e94\u7684book id#}\n{#                            <a href="{% url \'book_edit\' %}?id={{ book.id }}" class="btn btn-warning btn-sm">\u7f16\u8f91</a>#}\n\n{#                            \u65b9\u5f0f\u4e8c \u76f4\u63a5\u4f20\u53c2book.id\u800c\u4e0d\u9700\u8981\u5728\u540e\u9762\u5199\u4e0a\u5bf9\u5e94\u7684\u8def\u5f84#}\n                            <a href="{% url \'book_edit\' book.id %}" class="btn btn-warning btn-sm">\u7f16\u8f91</a>\n                            <a href="{% url \'book_del\' book.id %}" class="btn btn-danger btn-sm">\u5220\u9664</a>\n                        </td>\n                    </tr>\n                {% endfor %}\n\n                </tbody>\n            </table>\n\n        </div>\n    </div>\n</div>\n\n</body>\n{#\u4ee5\u4e0b\u4e3a\u5f15\u5165jquery\u548cbootstrap\uff0c\u56e0\u4e3a\u5728settings\u6587\u4ef6\u4e2d\u5df2\u7ecf\u5b9a\u4e49\u4e86\u9759\u6001\u6587\u4ef6\u7684\u522b\u540dstatic\uff0c\u56e0\u6b64\u76f4\u63a5\u5f15\u5165\u5c31\u80fd\u81ea\u52a8\u627e\u5230static_file\u4e0b\u5b58\u653e\u7684jquery\u548cbootstrap\u6587\u4ef6#}\n<script src="{% static \'jquery.js\' %}"><\/script>\n<script src="{% static \'bootstrap-3.3.7-dist/js/bootstrap.min.js\' %}"><\/script>\n</html>\n\n'})}),"\n",(0,s.jsx)(t.p,{children:"book_edit.html"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'{% load static %}\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <link rel="stylesheet" href="{% static \'bootstrap-3.3.7-dist/css/bootstrap.min.css\' %}">\n</head>\n<body>\n\n<div class="container-fluid">\n    <h1>\u7f16\u8f91\u4e66\u7c4d</h1>\n    <div class="row">\n        <div class="col-md-8 col-md-offset-2">\n            <form action="" method="post">\n                {% csrf_token %}\n                <div class="form-group">\n                    <label for="title">\u4e66\u7c4d\u540d\u79f0</label>\n\n\n                    <input type="text" class="form-control" id="title" placeholder="\u4e66\u7c4d\u540d\u79f0" name="title" value="{{ old_book_obj.title }}">\n                </div>\n\n                <div class="form-group">\n                    <label for="price">\u4ef7\u683c</label>\n                    <input type="number" class="form-control" id="price" placeholder="\u4ef7\u683c" name="price" value="{{ old_book_obj.price }}">\n                </div>\n                <div class="form-group">\n                    <label for="publish_date">\u51fa\u7248\u65e5\u671f</label>\n\n{#                    \u65e5\u671f\u8fd9\u91cc\u9700\u8981\u7528\u8fc7\u6ee4\u5668\u8fc7\u6ee4\u4e00\u4e0b\uff0c\u5426\u5219\u4e0d\u663e\u793a#}\n                    <input type="date" class="form-control" id="publish_date" name="publish_date" value="{{ old_book_obj.publish_date|date:\'Y-m-d\' }}">\n                </div>\n                <div class="form-group">\n                    <label for="publish">\u51fa\u7248\u793e</label>\n                    <input type="text" class="form-control" id="publish" placeholder="\u51fa\u7248\u793e" name="publish" value="{{ old_book_obj.publish }}" >\n                </div>\n\n                <button type="submit" class="btn btn-success pull-right">\u63d0\u4ea4</button>\n            </form>\n\n\n        </div>\n\n    </div>\n\n\n</div>\n\n\n</body>\n<script src="{% static \'jquery.js\' %}"><\/script>\n<script src="{% static \'bootstrap-3.3.7-dist/js/bootstrap.min.js\' %}"><\/script>\n</html>\n\n'})}),"\n",(0,s.jsx)(t.p,{children:"book_add.html"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'{% load static %}\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <link rel="stylesheet" href="{% static \'bootstrap-3.3.7-dist/css/bootstrap.min.css\' %}">\n</head>\n<body>\n\n<div class="container-fluid">\n    <h1>\u6dfb\u52a0\u4e66\u7c4d</h1>\n    <div class="row">\n        <div class="col-md-8 col-md-offset-2">\n            <form action="" method="post">\n                {% csrf_token %}\n                <div class="form-group">\n                    <label for="title">\u4e66\u7c4d\u540d\u79f0</label>\n                    <input type="text" class="form-control" id="title" placeholder="\u4e66\u7c4d\u540d\u79f0" name="title">\n                </div>\n\n                <div class="form-group">\n                    <label for="price">\u4ef7\u683c</label>\n                    <input type="number" class="form-control" id="price" placeholder="\u4ef7\u683c" name="price">\n                </div>\n                <div class="form-group">\n                    <label for="publish_date">\u51fa\u7248\u65e5\u671f</label>\n                    <input type="date" class="form-control" id="publish_date" name="publish_date">\n                </div>\n                <div class="form-group">\n                    <label for="publish">\u51fa\u7248\u793e</label>\n                    <input type="text" class="form-control" id="publish" placeholder="\u51fa\u7248\u793e" name="publish">\n                </div>\n\n                <button type="submit" class="btn btn-success pull-right">\u63d0\u4ea4</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n</body>\n<script src="{% static \'jquery.js\' %}"><\/script>\n<script src="{% static \'bootstrap-3.3.7-dist/js/bootstrap.min.js\' %}"><\/script>\n</html>\n\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u6700\u7ec8\u6548\u679c"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/book.gif",alt:"book"})}),"\n",(0,s.jsx)(t.h2,{id:"\u4e09\u9879\u76ee\u4e8c\u7684\u8fdb\u9636\u7248\u672c\u9879\u76ee\u4e8c\u4e2d\u7528\u5230\u7684\u662f\u5355\u8868\u589e\u5220\u6539\u67e5\u73b0\u5728\u6539\u4e3a\u591a\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5",children:"\u4e09\u3001\u9879\u76ee\u4e8c\u7684\u8fdb\u9636\u7248\u672c\uff0c\u9879\u76ee\u4e8c\u4e2d\u7528\u5230\u7684\u662f\u5355\u8868\u589e\u5220\u6539\u67e5\uff0c\u73b0\u5728\u6539\u4e3a\u591a\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u8868\u5b57\u6bb5\u53ca\u8868\u4e4b\u95f4\u7684\u5173\u7cfb"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.10.45.png",alt:"iShot2020-10-16 14.10.45"})}),"\n",(0,s.jsx)(t.h3,{id:"1urls\u6587\u4ef6\u914d\u7f6e-2",children:"1.urls\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from django.conf.urls import url\nfrom django.contrib import admin\nfrom app01 import views\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n  \n  \t#\u8bbf\u95ee\u8def\u5f84\u4e3abook/list\uff0c\u8d77\u4e86\u4e00\u4e2aurl\u522b\u540dbook_list\n    url(r'^book/list', views.book_list, name='book_list'),\n  \t\n    #\u540e\u7eed\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u6dfb\u52a0\u4e66\u7c4d\u7684\u6309\u94ae\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u70b9\u51fb\u6dfb\u52a0\u6570\u636e\u8df3\u8f6c\u5230\u53e6\u5916\u4e00\u4e2a\u9875\u9762\n  \turl(r'^book/add', views.book_add, name='book_add'),\n  \n    #\u540e\u7eed\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u7f16\u8f91\u4e66\u7c4d\u7684\u6309\u94ae\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u7f16\u8f91\u4e66\u7c4d\n    url(r'^book/edit/', views.book_edit, name='book_edit'),\n  \n    #\u540e\u7eed\u9875\u9762\u4e2d\u6709\u4e00\u4e2a\u5220\u9664\u4e66\u7c4d\u7684\u6309\u94ae\n    url(r'^book/del/(\\d+)/', views.book_del, name='book_del'),\n]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"2views\u6587\u4ef6\u914d\u7f6e-2",children:"2.views\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u5c55\u793a\u9875\u9762\u548c\u6dfb\u52a0\u4e66\u7c4d"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"#\u5c55\u793a\u4e66\u7c4d\ndef book_list(request):\n    all_books = models.Book.objects.all()\n\n    return render(request,'book_list.html',{'all_books':all_books})\n\n#\u6dfb\u52a0\u4e66\u7c4d\ndef book_add(request):\n    all_publish = models.Publish.objects.all()\n\n    all_author = models.Author.objects.all()\n\n\n\n    #\u5982\u679c\u662fget\u8bf7\u6c42\u5c31\u8fd4\u56de\u6dfb\u52a0\u4e66\u7c4d\u7684\u9875\u9762\n    if request.method == 'GET':\n        return render(request,'book_add.html',{'all_publish':all_publish,'all_author':all_author})\n    else:\n        #\u6253\u5370\u4e00\u4e0b\u8bf7\u6c42\u7684post\u65b9\u6cd5\n        print(request.POST)\n        \"\"\"\n        \u26a0\ufe0fcsrm\u6211\u4eec\u662f\u4e0d\u9700\u8981\u5230\uff0c\u8fd8\u8981\u6ce8\u610f\u5230\u662f\uff0c\u8fd9\u6b21\u63d0\u4ea4\u8fc7\u6765\u7684\u6570\u636e\u6709\u4f5c\u8005\u4fe1\u606f\uff0c\u4f46\u662fbook\u8868\u4e2d\u6ca1\u6709\u4f5c\u8005\u76f8\u5173\u4fe1\u606f\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u53bb\u6389\u7ed3\u5c3e\u7684\u4f5c\u8005\u4fe1\u606f\n        \n        < QueryDict: {'csrfmiddlewaretoken': ['6auuMHKofHokDAZr04FGVyRVk0u2AXFSFFS61ilMc6p1ZXU4ckJyRXFwF8nRWoii'],\n'title': ['\u5929\u9f99\u516b\u90e8'], 'price': ['99'], 'publishDate': ['2019-11-22'], 'publishs_id': ['1']\uff0c'authors': ['2', '3']} >\n        \"\"\"\n\n\n        #\u6dfb\u52a0\u4e66\u7c4dlow\u7248\u5199\u6cd5\n        #\u6dfb\u52a0\u4e66\u7c4d\uff0c\u8bf7\u6c42\u662fpost\uff0c\u5728book_add.html\u4e2d\u7684form\u8868\u5355\u5b9a\u4e49\uff0c\u5206\u522b\u83b7\u53d6\u5404\u4e2a\u5b57\u6bb5\n        # title = request.POST.get('title')\n        # price = request.POST.get('price')\n        # publish_date = request.POST.get('publish_date')\n        # publish = request.POST.get('publish')\n\n        #\u6dfb\u52a0\u4e66\u7c4d\uff0c\u725b\u903c\u7248\u5199\u6cd5\n        #\u4ee3\u7801\u610f\u601d\u4e3a\u5220\u9664\u8fd4\u56de\u7684post\u8bf7\u6c42\u4e2d\u7684\u8fd9\u4e2a\u952e\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u8868\u4e2d\u7684\u5b57\u6bb5\u548c\u6dfb\u52a0\u7684\u4fe1\u606f\u5bf9\u5e94\u7684\u5b57\u5178\u4e86\n\n\n        # data = request.POST.dict()\n        # del data['csrfmiddlewaretoken']\n\n\n        #\u4e0a\u8fb9\u5df2\u7ecf\u83b7\u53d6\u4e86\u5404\u4e2a\u5b57\u6bb5\uff0c\u73b0\u5728\u8981\u628a\u83b7\u53d6\u7684\u5b57\u6bb5\u6dfb\u52a0\u5230\u6570\u636e\u5e93\u4e2d\n        # models.Book.objects.create(\n            #low\u7248\u5199\u6cd5\uff0c\u6bd4\u8f83\u9ebb\u70e6\n            # title=title,\n            # price=price,\n            # publish_date=publish_date,\n            # publish=publish,\n\n\n\n        data = request.POST.dict()\n        data.pop('csrfmiddlewaretoken')\n\n        #\u5c06\u6700\u540e\u7684\u4f5c\u8005\u4fe1\u606f\u5220\u9664\n        data.pop('authors')\n\n        #\u83b7\u53d6\u8fd4\u56de\u7684post\u8bf7\u6c42\u4e2d\u4f5c\u8005\u5217\u8868\u4fe1\u606f\n        authors = request.POST.getlist('authors')\n        # print(authors)\n\n\n        #\u8fd9\u91cc\u9700\u8981\u6ce8\u610f**data\u6253\u6563\u7684\u95ee\u9898\uff0cpost\u8fd4\u56de\u7684\u5185\u5bb9\u5fc5\u987b\u662fpublishs_id\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u4e66\u7c4d\u8868\u4e2d\u5b9a\u4e49\u7684\u5b57\u6bb5\u662f\u53ebpublishs\uff0c\u4f46\u662fdjango\u4f1a\u81ea\u52a8\u628a\u5b83\u53d8\u6210publishs_id\n\n        new_book_obj = models.Book.objects.create(\n            **data\n        )\n        # book_obj= models.Book.objects.get(title=data['title'])\n        # book_obj.authors.add(*authors)\n\n        # create\u6709\u4e00\u4e2a\u8fd4\u56de\u5bf9\u8c61\uff0c\u8fd4\u56de\u7684\u5c31\u662f\u6dfb\u52a0\u7684\u4e66\u7c4d\u5185\u5bb9\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u5728\u8fdb\u884c\u67e5\u8be2\uff0c\u7136\u540e\u518d\u6dfb\u52a0\u4e86\n        new_book_obj.authors.add(*authors)\n\n\n            #\u26a0\ufe0f\u8fd9\u91cc\u7528\u5230\u7684\u662f\u5b57\u5178\u6253\u6563\u7684\u7528\u6cd5\uff0c\u5b57\u5178\u4e2d\u7684\u952e\u5fc5\u987b\u548c\u8868\u4e2d\u7684\u5b57\u6bb5\u540d\u76f8\u540c\uff0c\u800cbook_add\u4e2dinput\u6807\u7b7e\u4e2d\u5b9a\u4e49\u7684name\u5c5e\u6027\u5c31\u662f\u8868\u4e2d\u7684\u5b57\u6bb5\u540d\uff0c\u56e0\u6b64\u8fd4\u56de\u7684post\u8bf7\u6c42\u4e2d\u7684\u5b57\u5178\u7684\u952e\u5c31\u548c\u8868\u4e2d\u7684\u5b57\u6bb5\u540d\u76f8\u540c\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u7528\u5b57\u5178\u6253\u6563\n\n        #\u5bf9\u4e8eGET\u65b9\u6cd5\uff0c\u4e0d\u52a0reverse\u4e5f\u53ef\u4ee5\n        return redirect('book_list')\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u7f16\u8f91\u4e66\u7c4d"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"\u5220\u9664\u4e66\u7c4d"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python"})}),"\n",(0,s.jsx)(t.h3,{id:"3settings\u6587\u4ef6\u914d\u7f6e-2",children:"3.settings\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"#\u5173\u4e8e\u9759\u6001\u6587\u4ef6\u7684\u914d\u7f6e\u9879\n\u5728index.html\u6587\u4ef6\u4e2d\u5f15\u5165\u7684bootstrap\u662f\u8fd9\u6837\u5199\u7684\n<link rel=\"stylesheet\" href=\"/static/bootstrap-3.3.7-dist/css/bootstrap.min.css\">\n\n\n//\u9700\u8981\u8bbe\u7f6e\u7684\u9879\u5982\u4e0b\nstatic\u662f\u4ec0\u4e48\uff1fstatic\u662fsettings\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u7684\u8def\u5f84\u522b\u540d\uff0c\u8bbe\u7f6e\u9879\u5982\u4e0b\nSTATIC_URL = '/static/'\n\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR,'statics'),\t#\u26a0\ufe0f\u8fd9\u91cc\u7684\u540d\u5b57\u4e0d\u8981\u548c\u4e0a\u8fb9\u7684static\u91cd\u540d\n]\n\n\nos.path.join(BASE_DIR,'statics')\u8fd9\u4e00\u9879\u4e2d\u7684statics\u662fdjango\u9879\u76ee\u540c\u76ee\u5f55\u7ea7\u522b\u4e0b\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u9759\u6001\u6587\u4ef6\uff0c\u800cSTATIC_URL = '/static/'\u4e2d\u7684static\u5219\u662f\u8bbf\u95ee\u65f6\u5019\u7684\u522b\u540d\uff0c\u8fd9\u91cc\u8bf4\u7684\u8bbf\u95ee\u6307\u7684\u662findex.html\u6587\u4ef6\u4e2d\u5f15\u5165bootstrap\u6307\u5b9a\u7684\u8def\u5f84\u5f00\u5934\u7684static\n\n\u8fd9\u91cc\u9700\u8981\u8bf4\u660e\u4e00\u4e0b\uff0c\u7ed9\u9759\u6001\u6587\u4ef6\u8bbe\u7f6e\u522b\u540d\u662f\u4e3a\u4e86\u5b89\u5168\uff0c\u56e0\u4e3a\u522b\u4eba\u8bbf\u95ee\u53ea\u80fd\u627e\u5230\u4f60\u7684\u522b\u540d\u8def\u5f84\uff0c\u800c\u4e0d\u77e5\u9053\u771f\u6b63\u7684\u5b58\u653e\u8def\u5f84\uff0c\u771f\u6b63\u7684\u8def\u5f84\u662f/statics/bootstrap-3.3.7-dist/css/bootstrap.min.css\uff0c\u800c\u5ba2\u6237\u8bbf\u95ee\u7684\u8def\u5f84\u5219\u662f/static/bootstrap-3.3.7-dist/css/bootstrap.min.css\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5fc5\u987b\u8bbe\u7f6e\u522b\u540d\u624d\u53ef\u4ee5\u5f15\u5165bootstrap\u6837\u5f0f\uff0c\u5426\u5219\u4e0d\u751f\u6548\n\n\n\n#\u5173\u4e8e\u6570\u636e\u5e93\u7684\u914d\u7f6e\u9879\u76ee\n#\u5148\u6ce8\u91ca\u9ed8\u8ba4\u9879\n# DATABASES = {\n#     'default': {\n#         'ENGINE': 'django.db.backends.sqlite3',\n#         'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n#     }\n# }\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'book',\t\t\t\t#\u6570\u636e\u5e93\u540d\n        'HOST': '127.0.0.1',\t#\u6570\u636e\u5e93IP\n        'PORT': '3306',\t\t\t\t#\u6570\u636e\u5e93\u7aef\u53e3\n        'USER': 'root',\t\t\t\t#\u6570\u636e\u5e93\u7528\u6237\n        'PASSWORD': 'xxx'\t\t\t#\u6570\u636e\u5e93\u5bc6\u7801\n    }\n}\n"})}),"\n",(0,s.jsxs)(t.h3,{id:"4django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684__init__py\u6587\u4ef6-1",children:["4.Django\u9879\u76ee\u540c\u540d\u76ee\u5f55\u4e0b\u7684",(0,s.jsx)(t.code,{children:"__init__.py"}),"\u6587\u4ef6"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"import pymysql\npymysql.install_as_MySQLdb()\n"})}),"\n",(0,s.jsx)(t.h3,{id:"5models\u6587\u4ef6\u914d\u7f6e-1",children:"5.models\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from django.db import models\n\n# Create your models here.\n\nclass Author(models.Model):\n    name=models.CharField(max_length=32)\n    age=models.IntegerField()\n    ad=models.OneToOneField(to="AuthorDetail",to_field="id",on_delete=models.CASCADE)\n    # to_field="id"  \u53ef\u4ee5\u4e0d\u5199,\u9ed8\u8ba4\u627e\u4e3b\u952e\n    # to="AuthorDetail",  to=\u53ef\u4ee5\u4e0d\u7528\u5199\n    # models.SET_NULL  \u7f6e\u7a7a\n    # on_delete=models.CASCADE  \u9ed8\u8ba4\u662f\u7ea7\u8054\u5220\u9664,\u60f3\u505a\u7ea7\u8054\u66f4\u65b0,\u76f4\u63a5\u53bb\u6570\u636e\u5e93\u4fee\u6539\u8868\u7ed3\u6784\n\nclass AuthorDetail(models.Model):\n    birthday=models.DateField()\n    telephone=models.CharField(max_length=16)\n    addr=models.CharField(max_length=64)\n\n\nclass Publish(models.Model):\n    name=models.CharField(max_length=32)\n    city=models.CharField(max_length=32)\n\nclass Book(models.Model):\n    title = models.CharField(max_length=32)\n    publishDate=models.DateField()\n    price=models.DecimalField(max_digits=5,decimal_places=2)\n    publishs=models.ForeignKey(to="Publish",to_field="id",on_delete=models.CASCADE)\n\n    #\u8fd9\u884c\u4ee3\u7801\u7684\u610f\u601d\u662f\u751f\u6210\u7b2c3\u5f20\u8868\u5173\u8054book\u8868\u548cauthor\u8868\n    authors=models.ManyToManyField(to=\'Author\',)\n'})}),"\n",(0,s.jsx)(t.h3,{id:"6html\u6587\u4ef6\u914d\u7f6e-1",children:"6.html\u6587\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(t.p,{children:"\u5c55\u793a\u9875\u9762\u4e2d\uff0c\u51fa\u7248\u793e\u548c\u4f5c\u8005\u7684\u4fe1\u606f\u4e0d\u5728book\u8868\u4e2d\uff0c\u4f46\u662f\u51fa\u7248\u793e\u53ef\u4ee5\u5229\u7528\u4e66\u7c4d\u8868\u4e0e\u51fa\u7248\u793e\u8868\u7684\u4e00\u5bf9\u591a\u5173\u7cfb\u4ece\u4e66\u7c4d\u8868\u83b7\u53d6\u7684\u5bf9\u8c61\u4e2d\u83b7\u53d6\u5230\u51fa\u7248\u793e\u7684\u4fe1\u606f(book.publishs.name \u51fa\u7248\u793e\u8868\u4e0e\u4e66\u7c4d\u8868\u4e4b\u95f4\u7684\u5173\u8054\u5b57\u6bb5\u662fpublishs\uff0c\u56e0\u6b64\u53ef\u4ee5\u4ece\u83b7\u53d6\u5230\u7684\u4e66\u7c4d\u8868\u5bf9\u8c61\u518d\u83b7\u53d6\u5230\u51fa\u7248\u793e\u7684\u4fe1\u606f\uff0c\u4f46\u662f\u4ec5\u9650\u4e8e\u4e00\u5bf9\u591a\u5173\u7cfb\uff0c\u591a\u5bf9\u591a\u5173\u7cfb\u4e0d\u53ef\u4ee5\u8fd9\u6837\u53d6\u503c)"}),"\n",(0,s.jsx)(t.p,{children:"\u4f46\u662f\u4f5c\u8005\u7684\u4fe1\u606f\u4e0d\u80fd\u5229\u7528\u4e00\u5bf9\u591a\u5173\u7cfb\u83b7\u53d6\u5230\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"//\u65b9\u6cd51\uff0c\u5728html\u6587\u4ef6\u4e2d\u5199for\u5faa\u73af\n{# \u8fd9\u4e00\u6b65\u62ff\u5230\u4e86\u4f5c\u8005\u7684\u5bf9\u8c61\uff0c\u4e0b\u8fb9\u7684for\u5faa\u73af\u5c31\u662f\u5faa\u73af\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u7136\u540e\u53d6name\u503c#}\n{# <td>{{ book.authors.all.name }}</td>#}\n<td>\n{% for author in book.authors.all %}\n{{ author.name }}\n{# \u8fd9\u91cc\u7ed9\u4f5c\u8005\u4e4b\u95f4\u52a0\u4e00\u4e2a\u9017\u53f7\uff0c\u505a\u4e00\u4e0b\u5224\u65ad\uff0c\u5982\u679c\u662f\u5faa\u73af\u7684\u6700\u540e\u4e00\u6b21\u5c31\u4ec0\u4e48\u4e5f\u4e0d\u52a0#}\n{% if forloop.last %}\n\n{% else %}\n     ,\n{% endif %}\n{% endfor %}\n</td>\n\n\n//\u65b9\u6cd52,models\u6587\u4ef6\u4e2d\n\u5728Book\u7c7b\u4e2d\n#\u51fd\u6570\u5199\u6cd5  \n      def get_all_authors(self):\n        authors = self.authors.all()\n        authors_list = []\n        for i in authors:\n            authors_list.append(i.name)\n\n        ret = ','.join(authors_list)\n        return ret\n  \n#\u5217\u8868\u63a8\u5012\u5f0f\u5199\u6cd5\nreturn '.'.join([i.name for i in self.authors.all()])\n\nhtml\u6587\u4ef6\u4e2d\u5f15\u7528\n{{ book.get_all_authors }}\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.12.24.png",alt:"iShot2020-10-16 14.12.24"})})]})}function h(n={}){const{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,s.jsx)(t,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},28453:(n,t,e)=>{e.d(t,{R:()=>l,x:()=>d});var s=e(96540);const o={},i=s.createContext(o);function l(n){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function d(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),s.createElement(i.Provider,{value:t},n.children)}}}]);