"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5179],{97759:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});var s=l(74848),i=l(28453);const r={},c="CentOS7.5\u5b89\u88c5walle1.2",t={id:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/walle/CentOS7.5\u5b89\u88c5walle1.2",title:"CentOS7.5\u5b89\u88c5walle1.2",description:"[toc]",source:"@site/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/walle/CentOS7.5\u5b89\u88c5walle1.2.md",sourceDirName:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/walle",slug:"/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/walle/CentOS7.5\u5b89\u88c5walle1.2",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/walle/CentOS7.5\u5b89\u88c5walle1.2",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"spug\u5b89\u88c5",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/spug/spug\u5b89\u88c5"},next:{title:"CentOS7.5\u5b89\u88c5walle2.0",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/walle/CentOS7.5\u5b89\u88c5walle2.0"}},p={},a=[{value:"1.\u4f9d\u8d56",id:"1\u4f9d\u8d56",level:2},{value:"2.\u7cfb\u7edf\u73af\u5883",id:"2\u7cfb\u7edf\u73af\u5883",level:2},{value:"2.1  \u7cfb\u7edf\u7248\u672c",id:"21--\u7cfb\u7edf\u7248\u672c",level:3},{value:"2.2 php\u7248\u672c",id:"22-php\u7248\u672c",level:3},{value:"3. \u5b89\u88c5\u6b65\u9aa4",id:"3-\u5b89\u88c5\u6b65\u9aa4",level:2},{value:"3.1\u66f4\u6362\u7cfb\u7edfyum\u6e90\u4e3a\u963f\u91cc\u4e91yum\u6e90\u53ca\u6dfb\u52a0epel\u6e90",id:"31\u66f4\u6362\u7cfb\u7edfyum\u6e90\u4e3a\u963f\u91cc\u4e91yum\u6e90\u53ca\u6dfb\u52a0epel\u6e90",level:3},{value:"3.2 \u5b89\u88c5php-7.2",id:"32-\u5b89\u88c5php-72",level:3},{value:"3.3 \u5b89\u88c5mysql-5.7.22",id:"33-\u5b89\u88c5mysql-5722",level:3},{value:"3.4 \u5b89\u88c5nginx-1.14\u5e76\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",id:"34-\u5b89\u88c5nginx-114\u5e76\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",level:3},{value:"3.5 \u5b89\u88c5ansible",id:"35-\u5b89\u88c5ansible",level:3},{value:"3.6 \u4ee3\u7801\u68c0\u51fa",id:"36-\u4ee3\u7801\u68c0\u51fa",level:3},{value:"3.7 \u8bbe\u7f6emysql",id:"37-\u8bbe\u7f6emysql",level:3},{value:"3.8 \u5b89\u88c5composer\uff0cComposer \u662f PHP5.3\u4ee5\u4e0a \u7684\u4e00\u4e2a\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177",id:"38-\u5b89\u88c5composercomposer-\u662f-php53\u4ee5\u4e0a-\u7684\u4e00\u4e2a\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177",level:3},{value:"3.9 \u5b89\u88c5vendor",id:"39-\u5b89\u88c5vendor",level:3},{value:"3.10 \u521d\u59cb\u5316\u9879\u76ee",id:"310-\u521d\u59cb\u5316\u9879\u76ee",level:3},{value:"3.11 \u7ed1\u5b9ahosts\u6587\u4ef6",id:"311-\u7ed1\u5b9ahosts\u6587\u4ef6",level:3},{value:"3.12 \u6d4f\u89c8\u5668\u8bbf\u95ee <code>my.walle1.com</code>",id:"312-\u6d4f\u89c8\u5668\u8bbf\u95ee-mywalle1com",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"[toc]"}),"\n",(0,s.jsx)(n.h1,{id:"centos75\u5b89\u88c5walle12",children:"CentOS7.5\u5b89\u88c5walle1.2"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"walle1.0\u662f\u57fa\u4e8ephp\u5f00\u53d1\u7684\uff0c\u9700\u8981php5.4\u4ee5\u4e0a\u7248\u672c"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"http://www.walle-web.io/docs/1/installation.html",children:"\u74e6\u529b\u5b98\u65b9\u6587\u6863"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u74e6\u529b\u4e0a\u7ebf\u6d41\u7a0b"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-07-2010.13.06.png",alt:"iShot2020-07-2010.13.06"})}),"\n",(0,s.jsx)(n.h2,{id:"1\u4f9d\u8d56",children:"1.\u4f9d\u8d56"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Bash(git\u3001ssh)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"\u610f\u5473\u7740\u4e0d\u652f\u6301win\u3001mac\u7684zsh"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"LNMP/LAMP(php5.4+)"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"php\u9700\u8981\u5f00\u542fpdo_mysql\uff0cexec\u51fd\u6570\u6267\u884c"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Composer"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:["\u5982\u679c\u56fd\u5185\u73af\u5883\u5b89\u88c5\u6781\u6162\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d",(0,s.jsx)(n.a,{href:"http://pan.baidu.com/s/1c0wiuyc",children:"vendor"}),"\u89e3\u538b\u5230\u9879\u76ee\u6839\u76ee\u5f55"]})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"ansible"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"2\u7cfb\u7edf\u73af\u5883",children:"2.\u7cfb\u7edf\u73af\u5883"}),"\n",(0,s.jsx)(n.h3,{id:"21--\u7cfb\u7edf\u7248\u672c",children:"2.1  \u7cfb\u7edf\u7248\u672c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"$ cat /etc/redhat-release \nCentOS Linux release 7.5.1804 (Core) \n"})}),"\n",(0,s.jsx)(n.h3,{id:"22-php\u7248\u672c",children:"2.2 php\u7248\u672c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"$ php -v\nPHP 7.2.16 (cli) (built: Mar 10 2019 21:22:49) ( NTS )\nCopyright (c) 1997-2018 The PHP Group\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\n    with Zend OPcache v7.2.16, Copyright (c) 1999-2018, by Zend Technologies\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-\u5b89\u88c5\u6b65\u9aa4",children:"3. \u5b89\u88c5\u6b65\u9aa4"}),"\n",(0,s.jsx)(n.h3,{id:"31\u66f4\u6362\u7cfb\u7edfyum\u6e90\u4e3a\u963f\u91cc\u4e91yum\u6e90\u53ca\u6dfb\u52a0epel\u6e90",children:"3.1\u66f4\u6362\u7cfb\u7edfyum\u6e90\u4e3a\u963f\u91cc\u4e91yum\u6e90\u53ca\u6dfb\u52a0epel\u6e90"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"//\u5907\u4efd\u539f\u6709base\u6e90\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n\n//\u4e0b\u8f7d\u963f\u91cc\u4e91yum\u6e90\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n\n//\u4e0b\u8f7depel\u6e90\nwget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n\n//\u6e05\u7a7a\u7f13\u5b58\u3001\u751f\u6210yum\u7f13\u5b58\nyum clean all\nyum makecache\n"})}),"\n",(0,s.jsx)(n.h3,{id:"32-\u5b89\u88c5php-72",children:"3.2 \u5b89\u88c5php-7.2"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"1.\u4e0b\u8f7dphp7.2yum\u6e90\n\u9700\u8981\u5148\u5b89\u88c5epel-release\nyum -y install https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\n\n2.\u5b89\u88c5php7.2\nyum -y install php72w php72w-cli php72w-common php72w-curl php72w-gd \\\nphp72w-mbstring php72w-mysqlnd php72w-process php72w-xml php72w-zip \\\nphp72w-opcache php72w-pecl-apcu php72w-intl php72w-pecl-redis php72w-fpm \n\n3.\u542f\u52a8php-fpm\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f\nsystemctl start php-fpm && systemctl enable php-fpm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"33-\u5b89\u88c5mysql-5722",children:"3.3 \u5b89\u88c5mysql-5.7.22"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://gitbook.pptfz.top/db/mysql/mysql%E5%9F%BA%E7%A1%80/4.CentOS7.5%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85MySQL-5.7.22.html",children:"gitbook\u94fe\u63a5-\u5b89\u88c5msql-5.7.22"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"http://note.youdao.com/noteshare?id=797a38d0cd414fbd93dc6f4ab6f74ce3&sub=A4D89AF1BA6142F6B4A10620F4BB788D",children:"\u6709\u9053\u4e91\u94fe\u63a5-\u5b89\u88c5mysql-5.7.22"})}),"\n",(0,s.jsx)(n.h3,{id:"34-\u5b89\u88c5nginx-114\u5e76\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",children:"3.4 \u5b89\u88c5nginx-1.14\u5e76\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"//\u6dfb\u52a0nginx\u5b98\u65b9yum\u6e90\ncat >/etc/yum.repos.d/nginx.repo <<'EOF'\n[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/7/$basearch/\ngpgcheck=0\nenabled=1\nEOF\n\n//\u5b89\u88c5nginx1.14\nyum -y install nginx\n\n//\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\ncd /etc/nginx/conf.d/ && mv default.conf default.conf.bak\n\ncat >/etc/nginx/conf.d/my.walle1.com.conf <<'EOF'\nserver {\n    listen       80;\n    server_name  my.walle1.com; # \u6539\u4f60\u7684host\n    root /data/www/walle-web/web; # \u6839\u76ee\u5f55\u4e3aweb\n    index index.php;\n\n    # \u5efa\u8bae\u653e\u5185\u7f51\n    # allow 192.168.0.0/24;\n    # deny all;\n\n    location / {\n        try_files $uri $uri/ /index.php$is_args$args;\n    }\n\n    location ~ \\.php$ {\n        try_files $uri = 404;\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}\nEOF\n\n\n//\u68c0\u6d4bnginx\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\n$ nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n\n//\u542f\u52a8nginx\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsystemctl start nginx && systemctl enable nginx\n"})}),"\n",(0,s.jsx)(n.h3,{id:"35-\u5b89\u88c5ansible",children:"3.5 \u5b89\u88c5ansible"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"yum -y install ansible\n"})}),"\n",(0,s.jsx)(n.h3,{id:"36-\u4ee3\u7801\u68c0\u51fa",children:"3.6 \u4ee3\u7801\u68c0\u51fa"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"//\u521b\u5efa\u76ee\u5f55\nmkdir -p /data/www/walle-web && cd /data/www/walle-web \n\n//\u514b\u9686\u4ee3\u7801\ngit clone https://github.com/meolu/walle-web-v1.x.git .\n"})}),"\n",(0,s.jsx)(n.h3,{id:"37-\u8bbe\u7f6emysql",children:"3.7 \u8bbe\u7f6emysql"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"[root@walle walle-web]# pwd\n/data/www/walle-web\n[root@walle walle-web]# vim config/local.php\n\u4fee\u653924\u884c\uff0c25\u884c\uff0c\u5199\u5165mysql\u7528\u6237\u540d\u548c\u5bc6\u7801\n'username'  => isset($_ENV['WALLE_DB_USER']) ? $_ENV['WALLE_DB_USER'] : 'root',\n'password'  => isset($_ENV['WALLE_DB_PASS']) ? $_ENV['WALLE_DB_PASS'] : '123456',\n\n//\u521b\u5efa\u6570\u636e\u5e93walle\nmysql -uroot -p -e \"create database walle\"\n"})}),"\n",(0,s.jsx)(n.h3,{id:"38-\u5b89\u88c5composercomposer-\u662f-php53\u4ee5\u4e0a-\u7684\u4e00\u4e2a\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177",children:"3.8 \u5b89\u88c5composer\uff0cComposer \u662f PHP5.3\u4ee5\u4e0a \u7684\u4e00\u4e2a\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"//\u4e0b\u8f7d\u5b89\u88c5\u811a\u672ccomposer-setup.php\u5230\u5f53\u524d\u76ee\u5f55\nphp -r \"copy('https://install.phpcomposer.com/installer', 'composer-setup.php');\"\n\n//\u6267\u884c\u5b89\u88c5\u8fc7\u7a0b\nphp composer-setup.php\n\n//\u5220\u9664\u5b89\u88c5\u811a\u672c\nphp -r \"unlink('composer-setup.php');\"\n\n//\u5c06composer.phar\u79fb\u52a8\u81f3/usr/local/bin,\u4ee5\u4fbf\u80fd\u76f4\u63a5\u6267\u884ccomposer\u547d\u4ee4\nmv composer.phar /usr/local/bin/composer\n"})}),"\n",(0,s.jsx)(n.h3,{id:"39-\u5b89\u88c5vendor",children:"3.9 \u5b89\u88c5vendor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"omposer install --prefer-dist --no-dev --optimize-autoloader -vvvv\n"})}),"\n",(0,s.jsx)(n.h3,{id:"310-\u521d\u59cb\u5316\u9879\u76ee",children:"3.10 \u521d\u59cb\u5316\u9879\u76ee"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"./yii walle/setup\n"})}),"\n",(0,s.jsx)(n.h3,{id:"311-\u7ed1\u5b9ahosts\u6587\u4ef6",children:"3.11 \u7ed1\u5b9ahosts\u6587\u4ef6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"//windows\nC:\\Windows\\System32\\drivers\\etc\n10.0.0.51  my.walle1.com\n\n//mac\n/etc/hosts\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"312-\u6d4f\u89c8\u5668\u8bbf\u95ee-mywalle1com",children:["3.12 \u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"my.walle1.com"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u521d\u59cb\u5316\u7ba1\u7406\u5458\u8d26\u53f7\u5bc6\u7801\u4e3a\uff1aadmin/admin"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u521d\u59cb\u5316\u5f00\u53d1\u8005\u8d26\u53f7\u5bc6\u7801\u4e3a\uff1ademo/demo"})}),"\n",(0,s.jsxs)(n.p,{children:["![iShot2020-10-14 15.45.48](",(0,s.jsx)(n.a,{href:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-14",children:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-14"})," 15.45.48.png)"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u767b\u9646\u540e\u9996\u754c\u9762"})}),"\n",(0,s.jsxs)(n.p,{children:["![iShot2020-10-14 15.46.59](",(0,s.jsx)(n.a,{href:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-14",children:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-14"})," 15.46.59.png)"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)("span",{style:{color:"red"},children:"\u5230\u6b64\uff0c\u74e6\u529b1.2\u5b89\u88c5\u5b8c\u6210\uff01\uff01\uff01"})})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>c,x:()=>t});var s=l(96540);const i={},r=s.createContext(i);function c(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);