"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2091],{15393:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});var l=s(74848),i=s(28453);const r={},a="ansible\u4efb\u52a1\u63a7\u5236-handlers",t={id:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible\u4efb\u52a1\u63a7\u5236/ansible\u4efb\u52a1\u63a7\u5236-handlers",title:"ansible\u4efb\u52a1\u63a7\u5236-handlers",description:"handlers\u4f5c\u7528",source:"@site/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible\u4efb\u52a1\u63a7\u5236/ansible\u4efb\u52a1\u63a7\u5236-handlers.md",sourceDirName:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible\u4efb\u52a1\u63a7\u5236",slug:"/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible\u4efb\u52a1\u63a7\u5236/ansible\u4efb\u52a1\u63a7\u5236-handlers",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible\u4efb\u52a1\u63a7\u5236/ansible\u4efb\u52a1\u63a7\u5236-handlers",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ansible playbook",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible playbook/"},next:{title:"ansible\u4efb\u52a1\u63a7\u5236-\u5224\u65ad\u8bed\u53e5when",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/ansible/ansible\u4efb\u52a1\u63a7\u5236/ansible\u4efb\u52a1\u63a7\u5236-\u5224\u65ad\u8bed\u53e5when"}},d={},o=[];function c(n){const e={admonition:"admonition",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"ansible\u4efb\u52a1\u63a7\u5236-handlers",children:"ansible\u4efb\u52a1\u63a7\u5236-handlers"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"handlers\u4f5c\u7528"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"handlers\u7528\u4e8enotify\u76d1\u63a7\u53d1\u751f\u53d8\u66f4\u540e\u7684\u52a8\u4f5c\u89e6\u53d1\uff0c\u4f8b\u5982\u5f53\u67d0\u4e00\u4e2a\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u53d1\u751f\u53d8\u66f4\u65f6\u91cd\u542f\u670d\u52a1"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"handlers\u6d41\u7a0b"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"1.\u914d\u7f6enotify\u76d1\u63a7\uff0c\u4f8b\u5982\u76d1\u63a7nginx\u7684\u914d\u7f6e\u6587\u4ef6"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"2.\u53d1\u9001\u901a\u77e5\u5230handlers"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"3.handlers\u89e6\u53d1\u52a8\u4f5c"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b\uff1a\u5f53nginx\u914d\u7f6e\u6587\u4ef6\u53d1\u751f\u53d8\u66f4\u65f6\u91cd\u542f\u670d\u52a1"}),"\n",(0,l.jsx)(e.p,{children:"\u7f16\u8f91yml\u6587\u4ef6"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"notify\u540e\u7684\u5185\u5bb9\u53ef\u4ee5\u4efb\u610f\uff0c\u4f46\u662fhandlers\u540e\u7684name\u4e0b\u7684\u5185\u5bb9\u5fc5\u987b\u4e0enotify\u540e\u5b9a\u4e49\u7684\u540d\u79f0\u4e00\u81f4"})})}),"\n",(0,l.jsx)(e.p,{children:"handlers\u4f1a\u5728\u6240\u6709\u4efb\u52a1\u6b63\u786e\u6267\u884c\u5b8c\u6210\u540e\u6267\u884c\uff0c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u5e76\u4e14\u53ea\u6709\u5f53tasks\u6539\u53d8\u540e\u624d\u4f1a\u89e6\u53d1handlers"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"cat > task_handlers.yml < EOF\n- hosts: devops02\n  tasks:\n    - name: copy nginx conf\n      copy:\n        src: ./file/nginx.conf\n        dest: /etc/nginx\n      notify: restart nginx\n\n  handlers: \n    - name: restart nginx\n      service:\n        name: nginx\n        state: restarted\nEOF        \n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6267\u884cyml\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ ansible-playbook task_handlers.yml \n\nPLAY [devops02] ****************************************************************************************************************************************\n\nTASK [Gathering Facts] *********************************************************************************************************************************\nok: [devops02]\n\nTASK [copy nginx conf] *********************************************************************************************************************************\nchanged: [devops02]\n\nRUNNING HANDLER [restart nginx] ************************************************************************************************************************\nchanged: [devops02]\n\nPLAY RECAP *********************************************************************************************************************************************\ndevops02                   : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n"})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>t});var l=s(96540);const i={},r=l.createContext(i);function a(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);