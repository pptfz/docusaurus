"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6952],{59578:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>h,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var s=t(74848),r=t(28453);const o={},h="prometheus\u5b89\u88c5",i={id:"\u4e91\u539f\u751f/\u76d1\u63a7/prometheus/prometheus\u5b89\u88c5",title:"prometheus\u5b89\u88c5",description:"prometheus\u5b98\u7f51",source:"@site/docs/\u4e91\u539f\u751f/\u76d1\u63a7/prometheus/prometheus\u5b89\u88c5.md",sourceDirName:"\u4e91\u539f\u751f/\u76d1\u63a7/prometheus",slug:"/\u4e91\u539f\u751f/\u76d1\u63a7/prometheus/prometheus\u5b89\u88c5",permalink:"/docs/\u4e91\u539f\u751f/\u76d1\u63a7/prometheus/prometheus\u5b89\u88c5",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e"},next:{title:"wps\u51bb\u7ed3\u7a97\u53e3",permalink:"/docs/\u5176\u4ed6/wps/wps\u51bb\u7ed3\u7a97\u53e3"}},a={},l=[{value:"\u5b89\u88c5\u65b9\u5f0f",id:"\u5b89\u88c5\u65b9\u5f0f",level:2},{value:"\u6e90\u7801\u5b89\u88c5",id:"\u6e90\u7801\u5b89\u88c5",level:3},{value:"dcoker\u5b89\u88c5",id:"dcoker\u5b89\u88c5",level:3},{value:"\u4e8c\u8fdb\u5236\u5b89\u88c5",id:"\u4e8c\u8fdb\u5236\u5b89\u88c5",level:3},{value:"helm\u5b89\u88c5",id:"helm\u5b89\u88c5",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u6dfb\u52a0helm\u4ed3\u5e93",id:"\u6dfb\u52a0helm\u4ed3\u5e93",level:3},{value:"\u4e0b\u8f7d\u5305",id:"\u4e0b\u8f7d\u5305",level:3},{value:"\u89e3\u538b\u7f29",id:"\u89e3\u538b\u7f29",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:3},{value:"\u67e5\u770bpod\u72b6\u6001",id:"\u67e5\u770bpod\u72b6\u6001",level:3},{value:"\u8bbf\u95ee",id:"\u8bbf\u95ee",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"prometheus\u5b89\u88c5",children:"prometheus\u5b89\u88c5"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://prometheus.io/",children:"prometheus\u5b98\u7f51"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/prometheus/prometheus",children:"prometheus github\u5730\u5740"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b89\u88c5\u65b9\u5f0f",children:"\u5b89\u88c5\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.h3,{id:"\u6e90\u7801\u5b89\u88c5",children:"\u6e90\u7801\u5b89\u88c5"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/installation/#from-source",children:"\u6e90\u4ee3\u7801\u5b89\u88c5"})}),"\n",(0,s.jsx)(n.h3,{id:"dcoker\u5b89\u88c5",children:"dcoker\u5b89\u88c5"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/installation/#using-docker",children:"docker\u5b89\u88c5"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4e8c\u8fdb\u5236\u5b89\u88c5",children:"\u4e8c\u8fdb\u5236\u5b89\u88c5"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/prometheus/prometheus/releases",children:"\u4e8c\u8fdb\u5236\u5b89\u88c5"})}),"\n",(0,s.jsx)(n.h3,{id:"helm\u5b89\u88c5",children:"helm\u5b89\u88c5"}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u4ece ",(0,s.jsx)(n.a,{href:"https://artifacthub.io/packages/helm/prometheus-community/prometheus",children:"ArtifactHUB"})," \u4e0b\u8f7d\u5b89\u88c5\u5305"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u91cc\u9009\u62e9\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"https://github.com/helm/helm",children:"helm"})," \u5b89\u88c5"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6dfb\u52a0helm\u4ed3\u5e93",children:"\u6dfb\u52a0helm\u4ed3\u5e93"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm repo add prometheus-community https://prometheus-community.github.io/helm-charts\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4e0b\u8f7d\u5305",children:"\u4e0b\u8f7d\u5305"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm pull  prometheus-community/prometheus\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u89e3\u538b\u7f29",children:"\u89e3\u538b\u7f29"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"tar xf prometheus-25.21.0.tgz\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5b89\u88c5-1",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(n.admonition,{title:"\u8bf4\u660e",type:"tip",children:(0,s.jsxs)(n.p,{children:["\u5728\u5b89\u88c5\u4e4b\u524d\u53ef\u4ee5\u5bf9 ",(0,s.jsx)(n.code,{children:"values.yaml"})," \u4e2d\u7684\u76f8\u5173\u914d\u7f6e\u8fdb\u884c\u4fee\u6539\uff0c\u4f8b\u5982\u914d\u7f6esvc\u7c7b\u578b\u3001\u914d\u7f6eingress\u57df\u540d\u3001\u8d44\u6e90\u9650\u5236\u7b49\u7b49"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'$ helm upgrade --install prometheus -n monitor --create-namespace .\nRelease "prometheus" does not exist. Installing it now.\nNAME: prometheus\nLAST DEPLOYED: Wed May 29 21:09:44 2024\nNAMESPACE: monitor\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES:\nThe Prometheus server can be accessed via port 80 on the following DNS name from within your cluster:\nprometheus-server.monitor.svc.cluster.local\n\nFrom outside the cluster, the server URL(s) are:\nhttp://p8s.ops.com\n\n\nThe Prometheus alertmanager can be accessed via port 9093 on the following DNS name from within your cluster:\nprometheus-alertmanager.monitor.svc.cluster.local\n\n\nGet the Alertmanager URL by running these commands in the same shell:\n  export POD_NAME=$(kubectl get pods --namespace monitor -l "app.kubernetes.io/name=alertmanager,app.kubernetes.io/instance=prometheus" -o jsonpath="{.items[0].metadata.name}")\n  kubectl --namespace monitor port-forward $POD_NAME 9093\n#################################################################################\n######   WARNING: Pod Security Policy has been disabled by default since    #####\n######            it deprecated after k8s 1.25+. use                        #####\n######            (index .Values "prometheus-node-exporter" "rbac"          #####\n###### .          "pspEnabled") with (index .Values                         #####\n######            "prometheus-node-exporter" "rbac" "pspAnnotations")       #####\n######            in case you still need it.                                #####\n#################################################################################\n\n\nThe Prometheus PushGateway can be accessed via port 9091 on the following DNS name from within your cluster:\nprometheus-prometheus-pushgateway.monitor.svc.cluster.local\n\n\nGet the PushGateway URL by running these commands in the same shell:\n  export POD_NAME=$(kubectl get pods --namespace monitor -l "app=prometheus-pushgateway,component=pushgateway" -o jsonpath="{.items[0].metadata.name}")\n  kubectl --namespace monitor port-forward $POD_NAME 9091\n\nFor more information on running Prometheus, visit:\nhttps://prometheus.io/\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u67e5\u770bpod\u72b6\u6001",children:"\u67e5\u770bpod\u72b6\u6001"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"$ kubectl get pods|grep prometheus\nprometheus-alertmanager-0                            1/1     Running   0          3h3m\nprometheus-prometheus-node-exporter-48v5z            1/1     Running   0          3h3m\nprometheus-prometheus-node-exporter-b9qcw            1/1     Running   0          3h3m\nprometheus-prometheus-node-exporter-nnqv8            1/1     Running   0          3h3m\nprometheus-prometheus-node-exporter-rsj5p            1/1     Running   0          3h3m\nprometheus-prometheus-pushgateway-7c758897fd-bwbvx   1/1     Running   0          3h3m\nprometheus-server-69786c785-vbzbb                    2/2     Running   0          3h3m\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u8bbf\u95ee",children:"\u8bbf\u95ee"}),"\n",(0,s.jsx)(n.p,{children:"\u9ed8\u8ba4\u754c\u9762\u5982\u4e0b"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2024-05-30_17.23.40.png",alt:"iShot_2024-05-30_17.23.40"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>h,x:()=>i});var s=t(96540);const r={},o=s.createContext(r);function h(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:h(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);