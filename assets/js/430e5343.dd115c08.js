"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[8474],{19472:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>x,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var l=s(74848),d=s(28453);const r={},i="awk\u5339\u914d\u6a21\u5f0f",c={id:"linux/linux\u547d\u4ee4/awk/awk\u5339\u914d\u6a21\u5f0f",title:"awk\u5339\u914d\u6a21\u5f0f",description:"1.\u6b63\u5219\u8868\u8fbe\u5f0f",source:"@site/docs/linux/linux\u547d\u4ee4/awk/4.awk\u5339\u914d\u6a21\u5f0f.md",sourceDirName:"linux/linux\u547d\u4ee4/awk",slug:"/linux/linux\u547d\u4ee4/awk/awk\u5339\u914d\u6a21\u5f0f",permalink:"/docs/linux/linux\u547d\u4ee4/awk/awk\u5339\u914d\u6a21\u5f0f",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"awk\u5185\u7f6e\u53d8\u91cf",permalink:"/docs/linux/linux\u547d\u4ee4/awk/awk\u5185\u7f6e\u53d8\u91cf"},next:{title:"awk\u6761\u4ef6",permalink:"/docs/linux/linux\u547d\u4ee4/awk/awk\u6761\u4ef6"}},a={},h=[{value:"1.\u6b63\u5219\u8868\u8fbe\u5f0f",id:"1\u6b63\u5219\u8868\u8fbe\u5f0f",level:2},{value:"1.1 \u5339\u914d\u8bb0\u5f55(\u6574\u884c)",id:"11-\u5339\u914d\u8bb0\u5f55\u6574\u884c",level:3},{value:"1.2 \u5339\u914d\u5b57\u6bb5\t\u5339\u914d\u64cd\u4f5c\u7b26(<del>|!</del>)",id:"12-\u5339\u914d\u5b57\u6bb5\u5339\u914d\u64cd\u4f5c\u7b26",level:3},{value:"^\u548c~\u7528\u6cd5\u793a\u4f8b",id:"\u548c\u7528\u6cd5\u793a\u4f8b",level:4},{value:"^\u7528\u6cd5\u793a\u4f8b",id:"\u7528\u6cd5\u793a\u4f8b",level:4},{value:"\uff5e\u7528\u6cd5\u793a\u4f8b",id:"\u7528\u6cd5\u793a\u4f8b-1",level:4},{value:"2.\u6761\u4ef6\u8868\u8fbe\u5f0f",id:"2\u6761\u4ef6\u8868\u8fbe\u5f0f",level:2},{value:"2.1 \u5173\u7cfb\u8fd0\u7b97\u7b26",id:"21-\u5173\u7cfb\u8fd0\u7b97\u7b26",level:3},{value:"2.2 \u793a\u4f8b",id:"22-\u793a\u4f8b",level:3},{value:"2.3 awk\u7684\u4e00\u4e2a\u5751",id:"23-awk\u7684\u4e00\u4e2a\u5751",level:3},{value:"3.\u8fd0\u7b97\u8868\u8fbe\u5f0f",id:"3\u8fd0\u7b97\u8868\u8fbe\u5f0f",level:2},{value:"4.\u903b\u8f91\u64cd\u4f5c\u7b26\u548c\u590d\u5408\u6a21\u5f0f",id:"4\u903b\u8f91\u64cd\u4f5c\u7b26\u548c\u590d\u5408\u6a21\u5f0f",level:2},{value:"4.1 \u903b\u8f91\u64cd\u4f5c\u7b26",id:"41-\u903b\u8f91\u64cd\u4f5c\u7b26",level:3},{value:"4.2 \u4e09\u5143\u8fd0\u7b97\u7b26",id:"42-\u4e09\u5143\u8fd0\u7b97\u7b26",level:3}];function t(n){const e={admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"awk\u5339\u914d\u6a21\u5f0f",children:"awk\u5339\u914d\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.h2,{id:"1\u6b63\u5219\u8868\u8fbe\u5f0f",children:"1.\u6b63\u5219\u8868\u8fbe\u5f0f"}),"\n",(0,l.jsx)(e.h3,{id:"11-\u5339\u914d\u8bb0\u5f55\u6574\u884c",children:"1.1 \u5339\u914d\u8bb0\u5f55(\u6574\u884c)"}),"\n",(0,l.jsxs)(e.p,{children:["\u5339\u914d ",(0,l.jsx)(e.code,{children:"/etc/passwd"})," \u6587\u4ef6\u4e2d\u4ee5 ",(0,l.jsx)(e.code,{children:"root"})," \u5f00\u5934\u7684"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/^root/' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n            \n$ awk '$0 ~/^root/' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n"})}),"\n",(0,l.jsxs)(e.h3,{id:"12-\u5339\u914d\u5b57\u6bb5\u5339\u914d\u64cd\u4f5c\u7b26",children:["1.2 \u5339\u914d\u5b57\u6bb5\t\u5339\u914d\u64cd\u4f5c\u7b26(",(0,l.jsx)(e.del,{children:"|!"}),")"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5339\u914d ",(0,l.jsx)(e.code,{children:"/etc/passwd"})," \u6587\u4ef6\u4e2d\u7b2c\u4e00\u5217\u4ee5 ",(0,l.jsx)(e.code,{children:"root"})," \u5f00\u5934\u7684"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '$1~/^root/' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u5339\u914d ",(0,l.jsx)(e.code,{children:"/etc/passwd"})," \u6587\u4ef6\u4e2d\u6700\u540e\u4e00\u5217\u4e0d\u662f\u4ee5 ",(0,l.jsx)(e.code,{children:"bash"})," \u7ed3\u5c3e\u7684"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '$NF !~ /bash$/' /etc/passwd|head -5\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u548c\u7528\u6cd5\u793a\u4f8b",children:"^\u548c~\u7528\u6cd5\u793a\u4f8b"}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"^"})," \u5728awk\u4e2d\u8868\u793a\u4ee5 ",(0,l.jsx)(e.code,{children:"..."})," \u5f00\u5934\u7684\u5217\uff0c\u5728sed\u3001grep\u4e2d\u8868\u793a\u4ee5 ",(0,l.jsx)(e.code,{children:"..."})," \u5f00\u5934\u7684\u884c"]})}),"\n",(0,l.jsx)(e.h4,{id:"\u7528\u6cd5\u793a\u4f8b",children:"^\u7528\u6cd5\u793a\u4f8b"}),"\n",(0,l.jsx)(e.p,{children:"\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ cat t.txt \n1 101,hehe,CEO\n2 102,haha,CTO\n3 103,xixi,COO\n4 105,yy,CFO\n5 106,xx,CIO\n6 110,jjxx,COCO\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b\uff1a\u6253\u5370\u6587\u4ef6\u4e2d\u4ee51\u5f00\u5934\u7684\u884c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/^1/{print}' t.txt \n1 101,hehe,CEO\n"})}),"\n",(0,l.jsx)(e.h4,{id:"\u7528\u6cd5\u793a\u4f8b-1",children:"\uff5e\u7528\u6cd5\u793a\u4f8b"}),"\n",(0,l.jsx)(e.p,{children:"\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ cat t1.txt \nzhang  san  1234567    :550:100:175\nli     si   88883336   :155:90:201\nwang   wu   66666666   :250:60:50\nzhao   liu  67676798   :150:80:75\nhao    qi   11112222   :250:100:175\nzhu    ba   000098763  :50:95:135\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u663e\u793a\u6240\u6709ID\u53f7\u7801\u6700\u540e\u4e00\u4f4d\u662f2\u62167\u7684\u4eba\u7684\u5168\u540d"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '$3~/[27]$/{print $1,$2}' t1.txt\nzhang san\nhao qi\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u663e\u793a\u6587\u4ef6\u4e2d\u7b2c\u4e09\u5217\u4ee51\u5f00\u5934\u7684\u884c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '$3~/^1/{print}' t1.txt \nzhang san\nhao qi\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u663e\u793azhang\u7684\u59d3\u6c0f\u548cID\u53f7\u7801"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '$1~/zhang/{print $1,$3}' t1.txt \nzhang 1234567\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u663e\u793azhang\u7684\u6350\u6b3e\uff0c\u6bcf\u4e2a\u503c\u90fd\u4ee5 ",(0,l.jsx)(e.code,{children:"$"})," \u5f00\u5934\uff0c\u5982 ",(0,l.jsx)(e.code,{children:"$250$100$175"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u65b9\u6cd5\u4e00"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk -vFS='[ :]+' -vOFS=$ '$1~/zhang/{print \"$\"$4,$5,$NF}' t1.txt \n$550$100$175\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u65b9\u6cd5\u4e8c"}),"\n",(0,l.jsx)(e.p,{children:":::tip\u8bf4\u660e"}),"\n",(0,l.jsx)(e.p,{children:"awk\u66ff\u6362\u51fd\u6570gsub\ngsub    \u5168\u5c40\u66ff\u6362    awk\u5185\u7f6e\u547d\u4ee4(\u51fd\u6570)"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'gsub(//,"",$n)  n\u8868\u793a\u6570\u5b57\ngsub(/\u627e\u8c01/,"\u66ff\u6362\u4e3a\u4ec0\u4e48",\u66ff\u6362\u54ea\u4e00\u5217)\n'})}),"\n",(0,l.jsx)(e.p,{children:":::"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '$1~/zhang/{gsub(/:/,\"$\",$NF);print $1,$NF}' t1.txt \nzhang $550$100$175\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"2\u6761\u4ef6\u8868\u8fbe\u5f0f",children:"2.\u6761\u4ef6\u8868\u8fbe\u5f0f"}),"\n",(0,l.jsx)(e.h3,{id:"21-\u5173\u7cfb\u8fd0\u7b97\u7b26",children:"2.1 \u5173\u7cfb\u8fd0\u7b97\u7b26"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u8fd0\u7b97\u7b26"}),(0,l.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<"})}),(0,l.jsx)(e.td,{children:"\u5c0f\u4e8e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"<="})}),(0,l.jsx)(e.td,{children:"\u5c0f\u4e8e\u7b49\u4e8e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"=="})}),(0,l.jsx)(e.td,{children:"\u7b49\u4e8e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"!="})}),(0,l.jsx)(e.td,{children:"\u4e0d\u7b49\u4e8e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:">"})}),(0,l.jsx)(e.td,{children:"\u5927\u4e8e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:">="})}),(0,l.jsx)(e.td,{children:"\u5927\u4e8e\u7b49\u4e8e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"~"})}),(0,l.jsx)(e.td,{children:"\u6a21\u7cca\u5339\u914d"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"!~"})}),(0,l.jsx)(e.td,{children:"\u6a21\u7cca\u5339\u914d\u53d6\u53cd"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"22-\u793a\u4f8b",children:"2.2 \u793a\u4f8b"}),"\n",(0,l.jsx)(e.p,{children:"\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ cat t.txt \n1 101,hehe,CEO\n2 102,haha,CTO\n3 103,xixi,COO\n4 105,yy,CFO\n5 106,xx,CIO\n6 110,jjxx,COCO\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b1:\u6253\u5370\u7b2c\u4e00\u5217\u5927\u4e8e3\u7684\u884c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '{if($1>3)print}' t.txt \n4 105,yy,CFO\n5 106,xx,CIO\n6 110,jjxx,COCO\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b2:\u663e\u793a\u78c1\u76d8\u4f7f\u7528\u7387\u5927\u4e8e10%\u7684\u78c1\u76d8\u5206\u533a\u548c\u6302\u8f7d\u70b9"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ df -h\nFilesystem               Size  Used Avail Use% Mounted on\n/dev/mapper/centos-root   17G  2.4G   15G  14% /\ndevtmpfs                 224M     0  224M   0% /dev\ntmpfs                    236M     0  236M   0% /dev/shm\ntmpfs                    236M  9.6M  226M   5% /run\ntmpfs                    236M     0  236M   0% /sys/fs/cgroup\n/dev/sda1               1014M  132M  883M  14% /boot\ntmpfs                     48M     0   48M   0% /run/user/0\n\n$ df -h|awk -F'[% ]+' 'NR>1 && $5>10{print $1,$5\"%\",$NF}'\n/dev/mapper/centos-root 14% /\n/dev/sda1 14% /boot\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b3:\u8ba1\u7b97\u5185\u5b58\u4f7f\u7528\u7387"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"centos6"}),"\n",(0,l.jsx)(e.p,{children:"centOS6\u67e5\u770b\u5185\u5b58\u4f7f\u7528"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ free -m\n             total       used       free     shared    buffers     cached\nMem:           474        171        303          0         30         44\n-/+ buffers/cache:         95        378\nSwap:         1023          0       1023\n"})}),"\n",(0,l.jsx)(e.p,{children:"centOS6\u8ba1\u7b97\u5185\u5b58\u4f7f\u7528\u7387"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ free -m|awk 'NR==3{print $3/($3+$4)*100\"%\"}'\n20.296%\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"centos7"}),"\n",(0,l.jsx)(e.p,{children:"Centos7\u67e5\u770b\u5185\u5b58\u4f7f\u7528"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ free -m\n              total        used        free      shared  buff/cache   available\nMem:            470          90         243           5         136         330\nSwap:          2047           0        2047\n"})}),"\n",(0,l.jsx)(e.p,{children:"Centos7\u8ba1\u7b97\u5185\u5b58\u4f7f\u7528\u7387"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ free -m|awk 'NR==2{print ($2-$NF)/$2*100\"%\"}'\n30%\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b4:\u540c\u65f6\u8ba1\u7b97\u5185\u5b58\u4f7f\u7528\u7387\u548c\u7a7a\u95f2\u7387"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"centos6"}),"\n",(0,l.jsx)(e.p,{children:"centos6\u8ba1\u7b97\u5185\u5b58\u4f7f\u7528\u7387\u548c\u7a7a\u95f2\u7387"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'$ free -m|awk \'NR==3{print $3/($3+$4)*100"%",$NF/($3+$NF)*100"%"}\'\n20.4641% 79.5359%\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"centos7"}),"\n",(0,l.jsx)(e.p,{children:"centos7\u8ba1\u7b97\u5185\u5b58\u4f7f\u7528\u7387\u548c\u7a7a\u95f2\u7387"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'$ free -m|awk \'NR==2{print ($2-$NF)/$2*100"%",$NF/$2*100"%"}\'\n30% 70%\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"23-awk\u7684\u4e00\u4e2a\u5751",children:"2.3 awk\u7684\u4e00\u4e2a\u5751"}),"\n",(0,l.jsx)(e.p,{children:":::caution\u6ce8\u610f"}),"\n",(0,l.jsx)(e.p,{children:"awk\u4f1a\u628a\u6570\u5b57\u5f53\u6210\u5b57\u7b26\u5904\u7406"}),"\n",(0,l.jsx)(e.p,{children:":::"}),"\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u7387"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ df -h\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/sda3        19G  2.4G   16G  14% /\ntmpfs           238M     0  238M   0% /dev/shm\n/dev/sda1       190M   35M  146M  19% /boot\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6253\u5370\u7b2c\u4e8c\u884c\u7b2c5\u5217\u5c0f\u4e8e9\u7684\u5217\uff0c\u7ed3\u679c\u4e0d\u6b63\u786e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"$ df -h|awk 'NR>1 && $5<9{print $1,$5,$NF}'\n/dev/sda3 14% /\ntmpfs 0% /dev/shm\n/dev/sda1 19% /boot\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u56e0\u4e3aawk\u4f1a\u628a\u6570\u5b57\u5f53\u6210\u5b57\u7b26\u5904\u7406\uff0c\u6bd4\u5982sort\n\u5982\u4e0b\u6240\u793a\uff0csort\u4f1a\u628a\u6570\u5b57\u5f53\u6210\u5b57\u7b26\u5904\u7406\uff0c\u5e76\u6ca1\u6709\u628a\u6570\u5b57\u4ece\u5927\u5230\u5c0f\u6392\u5e8f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ seq 15|sort\n1\n10\n11\n12\n13\n14\n15\n2\n3\n4\n5\n6\n7\n8\n9\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u89e3\u51b3awk\u628a\u6570\u5b57\u5f53\u6210\u5b57\u7b26\u5904\u7406\u95ee\u9898\u7684\u65b9\u6cd5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u65b9\u6cd51 \u7528\u6307\u5b9a\u5206\u9694\u7b26\u7684\u65b9\u5f0f\u628a\u6570\u5b57\u548c ",(0,l.jsx)(e.code,{children:"%"})," \u5206\u5272\u5f00"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u6b63\u786e\u8f93\u51fa\n$ df -h|awk -F'[% ]+'  '$5<9{print $1,$5,$NF}'\ntmpfs 0 /dev/shm\n\n# \u4e0d\u6b63\u786e\u8f93\u51fa\n$ df -h|awk '$5<9{print $1,$5,$NF}'\n/dev/sda3 14% /\ntmpfs 0% /dev/shm\n/dev/sda1 19% /boot\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u65b9\u6cd52 \u8ba9awk\u77e5\u9053\u8fdb\u884c\u6570\u5b57\u6bd4\u8f83\uff0c\u67d0\u4e00\u5217\u52a00"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u6b63\u786e\u8f93\u51fa\n$ df -h|awk 'NR>1 && $5+0<9{print $1,$5,$NF}'\ntmpfs 0% /dev/shm\n\n# \u4e0d\u6b63\u786e\u8f93\u51fa\n$ df -h|awk 'NR>1 && $5<9{print $1,$5,$NF}'\n/dev/sda3 14% /\ntmpfs 0% /dev/shm\n/dev/sda1 19% /boot\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"3\u8fd0\u7b97\u8868\u8fbe\u5f0f",children:"3.\u8fd0\u7b97\u8868\u8fbe\u5f0f"}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b1:\u6253\u5370 ",(0,l.jsx)(e.code,{children:"/etc/passwd"})," \u7b2c\u4e09\u5217\u4e0e10\u76f8\u4e58\u5927\u4e8e5000\u7684\u5185\u5bb9"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk -F: '$3 * 10 > 5000' /etc/passwd\npolkitd:x:999:998:User for polkitd:/:/sbin/nologin\nchrony:x:998:996::/var/lib/chrony:/sbin/nologin\nmysql:x:1000:1000::/home/mysql:/sbin/nologin\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b2\uff1a\u6253\u5370 ",(0,l.jsx)(e.code,{children:"/etc/passwd"})," \u7b2c\u4e09\u5217\u4e0e10\u76f8\u4e58\u5927\u4e8e500\u7684\u5185\u5bb9\uff0c\u5e76\u6253\u5370\u7b2c\u4e00\u5217\u548c\u7b2c\u4e09\u5217"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'$ awk -F: \'BEGIN{OFS="--"} { if($3*10>5000) {print $1,$3} } END {print "\u6253\u5370ok"}\' /etc/passwd\npolkitd--999\nchrony--998\nmysql--1000\n\u6253\u5370ok\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b3:\u52a0\u3001\u51cf\u3001\u4e58\u3001\u9664\u3001\u53d6\u6a21\u3001\u5e42\u8fd0\u7b97"}),"\n",(0,l.jsx)(e.p,{children:"\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ cat test.txt \na 1 2 3 4 5\nb 1 2 3 4 5\na 5 6 7 8 9\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u52a0\u6cd5\u8ba1\u7b97"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/a/{print $2+10}' test.txt \n11\n15\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u51cf\u6cd5\u8ba1\u7b97"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/a/{print $2-10}' test.txt \n-9\n-5\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e58\u6cd5\u8ba1\u7b97"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/a/{print $2*10}' test.txt \n10\n50\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u9664\u6cd5\u8ba1\u7b97"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/a/{print $2/10}' test.txt \n0.1\n0.5\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u53d6\u6a21\u8ba1\u7b97"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/a/{print $2%10}' test.txt \n1\n5\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5e42\u8ba1\u7b97"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '/a/{print $2**10}' test.txt \n1\n9765625\n"})}),"\n",(0,l.jsx)(e.h2,{id:"4\u903b\u8f91\u64cd\u4f5c\u7b26\u548c\u590d\u5408\u6a21\u5f0f",children:"4.\u903b\u8f91\u64cd\u4f5c\u7b26\u548c\u590d\u5408\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.h3,{id:"41-\u903b\u8f91\u64cd\u4f5c\u7b26",children:"4.1 \u903b\u8f91\u64cd\u4f5c\u7b26"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7b26\u53f7"}),(0,l.jsx)(e.th,{children:"\u542b\u4e49"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"&&"}),(0,l.jsx)(e.td,{children:"\u903b\u8f91\u4e0e"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"||"}),(0,l.jsx)(e.td,{children:"\u903b\u8f91\u6216"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\uff01"}),(0,l.jsx)(e.td,{children:"\u903b\u8f91\u975e"})]})]})]}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b1:\u6253\u5370 ",(0,l.jsx)(e.code,{children:"/etc/passwd"})," \u6587\u4ef6\u4e2d\u7528\u6237\u540d\u4e3a ",(0,l.jsx)(e.code,{children:"root"})," \u5e76\u4e14\u6253\u5370 ",(0,l.jsx)(e.code,{children:"uid"})," \u5c0f\u4e8e15\u7684\u884c"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u6587\u4ef6\u4e2d\u7b2c\u4e09\u5217\u662fUID\n$ awk -F: '$1~/root/ && $3<=1' /etc/passwd \nroot:x:0:0:root:/root:/bin/bash\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b2:\u6253\u5370\u7528\u6237\u540d\u4e3a ",(0,l.jsx)(e.code,{children:"root "}),"\u6216\u7b2c\u4e09\u5217\u5927\u4e8e500\u7684\u884c"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk -F: '$1~/root/ || $3>=500' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\npolkitd:x:999:998:User for polkitd:/:/sbin/nologin\nchrony:x:998:996::/var/lib/chrony:/sbin/nologin\nmysql:x:1000:1000::/home/mysql:/bin/false\n"})}),"\n",(0,l.jsx)(e.h3,{id:"42-\u4e09\u5143\u8fd0\u7b97\u7b26",children:"4.2 \u4e09\u5143\u8fd0\u7b97\u7b26"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4e09\u5143\u8fd0\u7b97\u7b26\u8868\u8fbe\u5f0f"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.code,{children:"\u4e09\u5143\u8fd0\u7b97\u7b26\u7684\u5f62\u5f0f1\uff1a[ \u7ed3\u679c = \u6761\u4ef6 ? \u7ed3\u679c1 \uff1a\u7ed3\u679c2 ]"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.code,{children:"\u4e09\u5143\u8fd0\u7b97\u7b26\u7684\u5f62\u5f0f2\uff1a[ \u6761\u4ef6 \uff1f \u8868\u8fbe\u5f0f1 \uff1a \u8868\u8fbe\u5f0f2 ]"})}),"\n",(0,l.jsx)(e.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:"\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ cat t.txt \nstudent1 98\nstudent2 99\nstudent3 93\nstudent4 78\nstudent5 85\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u6839\u636e\u5b66\u751f\u6210\u7ee9\u5224\u65ad\u5b66\u751f\u6210\u7ee9\u662f\u5426\u4e3a\u4f18\u79c0\uff0c\u8fd9\u91cc\u89c4\u5b9a\u5206\u6570\u5927\u4e8e90\u662f\u4f18\u79c0\uff0c\u4f4e\u4e8e90\u975e\u4f18\u79c0"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u975e\u4e09\u5143\u8fd0\u7b97\u5199\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'$ awk \'{if($2>90){print $1,"\u4f18\u79c0"}else{print $1,"\u4e0d\u4f18\u79c0"}}\' t.txt \nstudent1 \u4f18\u79c0\nstudent2 \u4f18\u79c0\nstudent3 \u4f18\u79c0\nstudent4 \u4e0d\u4f18\u79c0\nstudent5 \u4e0d\u4f18\u79c0\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4e09\u5143\u8fd0\u7b97\u5199\u6cd5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5199\u6cd51 ",(0,l.jsx)(e.code,{children:"\u7ed3\u679c = \u6761\u4ef6 ? \u7ed3\u679c1\uff1a\u7ed3\u679c2"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'$ awk \'{res=$2>90?"\u4f18\u79c0":"\u4e0d\u4f18\u79c0";print $1,res}\' t.txt \nstudent1 \u4f18\u79c0\nstudent2 \u4f18\u79c0\nstudent3 \u4f18\u79c0\nstudent4 \u4e0d\u4f18\u79c0\nstudent5 \u4e0d\u4f18\u79c0\n\n# \u4e0a\u8ff0awk\u5199\u6cd5\u4e2d\u7684print\u4e5f\u53ef\u4ee5\u5355\u72ec\u5199\u5728\u4e00\u4e2a\u5927\u62ec\u53f7\u4e2d\nawk \'{res=$2>90?"\u4f18\u79c0":"\u4e0d\u4f18\u79c0"}{print $1,res}\' t.txt\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5199\u6cd52 ",(0,l.jsx)(e.code,{children:"\u6761\u4ef6 \uff1f \u8868\u8fbe\u5f0f1 \uff1a\u8868\u8fbe\u5f0f2"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# a\u8868\u793a\u7b26\u5408\u6761\u4ef6\u7684\uff0cb\u8868\u793a\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\uff0c\u5927\u4e8e90\u5206\u7684\u67093\u4e2a\uff0c\u4f4e\u4e8e90\u5206\u7684\u67092\u4e2a\n$ awk '{$2>90?a++:b++}END{print a,b}' t.txt \n3 2\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u98ce\u9a9a\u8d70\u4f4d\uff01\uff01\uff01"}),"\n",(0,l.jsx)(e.p,{children:"\u6587\u4ef6\u5185\u5bb9"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ cat lessons.txt \n634751 \u9884\u6392\n568688 \u9884\u6392\n386760 \u5220\u9664\n619373 \u9884\u6392\n428491 \u9884\u6392\n487563 \u5b8c\u6210\n603342 \u5b8c\u6210\n436339 \u5b8c\u6210\n\u7ed3\u679c\uff1a\n\u5220\u9664  386760\n\u5b8c\u6210  487563,603342,436339\n\u9884\u6392  634751,568688,619373,428491\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5565\u610f\u601d\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"# \u65b9\u6cd51\n$ awk '{a[$2]=a[$2]?a[$2]\",\"$1:a[$2]$1}END{for(i in a) print i,a[i]}' lessons.txt\n\u5220\u9664 386760\n\u5b8c\u6210 487563,603342,436339\n\u9884\u6392 634751,568688,619373,428491\n\n# \u65b9\u6cd52\n$ awk '{if(a[$2]){a[$2]=a[$2]\",\"$1}else{a[$2]=a[$2]$1}}END{for(i in a) print i,a[i]}' lessons.txt\n\u5220\u9664 386760\n\u5b8c\u6210 487563,603342,436339\n\u9884\u6392 634751,568688,619373,428491\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5565\u610f\u601d\uff1f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$ awk '{a[$2]=a[$2]\",\"$1}END{for(i in a) print i,a[i]}' lessons.txt\n\u5220\u9664 ,386760\n\u5b8c\u6210 ,487563,603342,436339\n\u9884\u6392 ,634751,568688,619373,428491\n"})})]})}function x(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>c});var l=s(96540);const d={},r=l.createContext(d);function i(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:i(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);