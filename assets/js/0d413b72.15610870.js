"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[198],{47924:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var t=s(74848),i=s(28453);const r={},l="\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387",d={id:"linux/\u6027\u80fd\u6d4b\u8bd5/\u6587\u4ef6\u5220\u9664\u6548\u7387\u6d4b\u8bd5/\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387",title:"\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387",description:"[toc]",source:"@site/docs/linux/\u6027\u80fd\u6d4b\u8bd5/\u6587\u4ef6\u5220\u9664\u6548\u7387\u6d4b\u8bd5/\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387.md",sourceDirName:"linux/\u6027\u80fd\u6d4b\u8bd5/\u6587\u4ef6\u5220\u9664\u6548\u7387\u6d4b\u8bd5",slug:"/linux/\u6027\u80fd\u6d4b\u8bd5/\u6587\u4ef6\u5220\u9664\u6548\u7387\u6d4b\u8bd5/\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387",permalink:"/docs/linux/\u6027\u80fd\u6d4b\u8bd5/\u6587\u4ef6\u5220\u9664\u6548\u7387\u6d4b\u8bd5/\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"nvm\u5b89\u88c5",permalink:"/docs/linux/\u5305\u7ba1\u7406\u5de5\u5177/nvm/nvm\u5b89\u88c5"},next:{title:"Linux \u65e5\u5fd7\u5207\u5272\u795e\u5668 Logrotate \u539f\u7406\u548c\u914d\u7f6e\u8be6\u89e3",permalink:"/docs/linux/\u65e5\u5fd7/Linux \u65e5\u5fd7\u5207\u5272\u795e\u5668 Logrotate \u539f\u7406\u548c\u914d\u7f6e\u8be6\u89e3"}},c={},o=[{value:"\u521b\u5efa50\u4e07\u4e2a\u6d4b\u8bd5\u6587\u4ef6",id:"\u521b\u5efa50\u4e07\u4e2a\u6d4b\u8bd5\u6587\u4ef6",level:2},{value:"1.rm\u5220\u9664",id:"1rm\u5220\u9664",level:2},{value:"2.find\u5220\u9664",id:"2find\u5220\u9664",level:2},{value:"3.find with delete",id:"3find-with-delete",level:2},{value:"4.rsync\u5220\u9664",id:"4rsync\u5220\u9664",level:2},{value:"5.python2.7",id:"5python27",level:2},{value:"6.perl",id:"6perl",level:2},{value:"\u7cfb\u7edf\u73af\u5883",id:"\u7cfb\u7edf\u73af\u5883",level:2},{value:"50\u4e07\u4e2a\u6587\u4ef6\u5220\u9664\u6240\u7528\u65f6\u95f4",id:"50\u4e07\u4e2a\u6587\u4ef6\u5220\u9664\u6240\u7528\u65f6\u95f4",level:2}];function a(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"[toc]"}),"\n",(0,t.jsx)(e.h1,{id:"\u6d4b\u8bd5linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387",children:"\u6d4b\u8bd5Linux\u4e0b\u5220\u9664\u5927\u91cf\u6587\u4ef6\u7684\u6548\u7387"}),"\n",(0,t.jsx)(e.h2,{id:"\u521b\u5efa50\u4e07\u4e2a\u6d4b\u8bd5\u6587\u4ef6",children:"\u521b\u5efa50\u4e07\u4e2a\u6d4b\u8bd5\u6587\u4ef6"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"//\u521b\u5efa50\u4e07\u4e2a\u6587\u4ef6\nmkdir /test && cd /test\ntime for i in $(seq 1 500000);do echo text >>$i.txt;done\n\nreal\t1m9.177s\nuser\t0m9.731s\nsys\t0m48.238s\n\n\n//\u603b\u5927\u5c0f\u4e3a2G\ndu -sh /test/\n2.0G\t/test/\n"})}),"\n",(0,t.jsx)(e.h2,{id:"1rm\u5220\u9664",children:"1.rm\u5220\u9664"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"time rm -rf *\n-bash: /usr/bin/rm: Argument list too long\n\nreal\t0m1.709s\nuser\t0m1.580s\nsys\t0m0.123s\n\n\u6587\u4ef6\u592a\u591a\uff0crm\u4e0d\u8d77\u4f5c\u7528\n"})}),"\n",(0,t.jsx)(e.h2,{id:"2find\u5220\u9664",children:"2.find\u5220\u9664"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"time find ./ -type f -exec rm {} \\;\n\nreal\t10m56.698s\nuser\t2m13.203s\nsys\t8m35.653s\n\n\u7528\u65f610\u5206\u949f\n"})}),"\n",(0,t.jsx)(e.h2,{id:"3find-with-delete",children:"3.find with delete"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"time find ./ -type f -delete\n\nreal\t0m26.757s\nuser\t0m1.222s\nsys\t0m23.112s\n\n\u7528\u65f626\u79d2\n"})}),"\n",(0,t.jsx)(e.h2,{id:"4rsync\u5220\u9664",children:"4.rsync\u5220\u9664"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"//\u5148\u5efa\u7acb\u4e00\u4e2a\u7a7a\u6587\u4ef6\u5939test-bak\nmkdir test-bak\ntime rsync -a --delete test-bak/ /test/\n\nreal\t0m25.440s\nuser\t0m1.364s\nsys\t0m22.082s\n\n\u7528\u65f625\u79d2\n"})}),"\n",(0,t.jsx)(e.h2,{id:"5python27",children:"5.python2.7"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"import os\nimport timeit\ndef main():\n    for pathname,dirnames,filenames in os.walk('/test'):\n        for filename in filenames:\n            file=os.path.join(pathname,filename)\n            os.remove(file)\n            \nif __name__=='__main__':\n    t=timeit.Timer('main()','from __main__ import main')\n    print t.timeit(1)\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u7528\u65f635\u79d2"}),"\n",(0,t.jsx)(e.h2,{id:"6perl",children:"6.perl"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"time perl -e 'for(<*>){((stat)[9]<(unlink))}'\n\nreal\t0m33.891s\nuser\t0m2.590s\nsys\t0m28.254s\n\n\u7528\u65f633\u79d2\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u7cfb\u7edf\u73af\u5883",children:"\u7cfb\u7edf\u73af\u5883"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-shell",children:"ucloud 1c2g centos7.7\n\n# \u4f7f\u7528dd\u547d\u4ee4\u6d4b\u8bd5\u78c1\u76d8\u8bfb\u5199\u901f\u5ea6\u4e3a78.6MB/s\ndd if=/dev/zero of=/opt/bigfile bs=1M count=1024\n1024+0 records in\n1024+0 records out\n1073741824 bytes (1.1 GB) copied, 13.668 s, 78.6 MB/s\n\n# \u4f7f\u7528hdparm\u6d4b\u8bd5\u78c1\u76d8\u8bfb\u5199\u901f\u5ea6\u4e3a74.60MB/s\nhdparm -t --direct /dev/vda1\n\n/dev/vda1:\n Timing O_DIRECT disk reads: 230 MB in  3.08 seconds =  74.60 MB/sec\n"})}),"\n",(0,t.jsx)(e.h2,{id:"50\u4e07\u4e2a\u6587\u4ef6\u5220\u9664\u6240\u7528\u65f6\u95f4",children:"50\u4e07\u4e2a\u6587\u4ef6\u5220\u9664\u6240\u7528\u65f6\u95f4"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["rm\u5220\u9664\uff1a",(0,t.jsx)(e.strong,{children:"\u6587\u4ef6\u592a\u591a\uff0c\u65e0\u6cd5\u5220\u9664"})]}),"\n",(0,t.jsxs)(e.p,{children:["find\u5220\u9664\uff1a",(0,t.jsx)(e.strong,{children:"\u7528\u65f610\u5206\u949f"})]}),"\n",(0,t.jsxs)(e.p,{children:["find with delete\u5220\u9664\uff1a",(0,t.jsx)(e.strong,{children:"\u7528\u65f626\u79d2"})]}),"\n",(0,t.jsxs)(e.p,{children:["rsync\u5220\u9664\uff1a",(0,t.jsx)(e.strong,{children:"\u7528\u65f625\u79d2"})]}),"\n",(0,t.jsxs)(e.p,{children:["python2.7\u5220\u9664\uff1a",(0,t.jsx)(e.strong,{children:"\u7528\u65f635\u79d2"})]}),"\n",(0,t.jsxs)(e.p,{children:["perl\u5220\u9664\uff1a",(0,t.jsx)(e.strong,{children:"\u7528\u65f633\u79d2"})]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:(0,t.jsx)("span",{style:{color:"red"},children:"rsync\u5220\u9664\u6700\u5feb"})})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>l,x:()=>d});var t=s(96540);const i={},r=t.createContext(i);function l(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);