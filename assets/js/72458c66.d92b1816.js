"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4770],{48617:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var o=r(74848),s=r(28453);const i={},t="nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f",a={id:"linux/linux\u670d\u52a1/nginx/nginx\u5b9e\u9645\u5e94\u7528\u573a\u666f/nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f",title:"nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f",description:"[toc]",source:"@site/docs/linux/linux\u670d\u52a1/nginx/nginx\u5b9e\u9645\u5e94\u7528\u573a\u666f/nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f.md",sourceDirName:"linux/linux\u670d\u52a1/nginx/nginx\u5b9e\u9645\u5e94\u7528\u573a\u666f",slug:"/linux/linux\u670d\u52a1/nginx/nginx\u5b9e\u9645\u5e94\u7528\u573a\u666f/nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f",permalink:"/docs/linux/linux\u670d\u52a1/nginx/nginx\u5b9e\u9645\u5e94\u7528\u573a\u666f/nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"nginx\u589e\u52a0\u65b0\u6a21\u5757",permalink:"/docs/linux/linux\u670d\u52a1/nginx/nginx\u589e\u52a0\u65b0\u6a21\u5757"},next:{title:"nginx\u89e3\u51b3\u91cd\u5b9a\u5411\u540ehttps\u53d8http\u95ee\u9898",permalink:"/docs/linux/linux\u670d\u52a1/nginx/nginx\u95ee\u9898/nginx\u89e3\u51b3\u91cd\u5b9a\u5411\u540ehttps\u53d8http\u95ee\u9898"}},c={},l=[{value:"1.location \u81ea\u52a8\u6dfb\u52a0\u540e\u7f00",id:"1location-\u81ea\u52a8\u6dfb\u52a0\u540e\u7f00",level:2},{value:"2.location \u914d\u7f6e\u9759\u6001\u8d44\u6e90",id:"2location-\u914d\u7f6e\u9759\u6001\u8d44\u6e90",level:2}];function x(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"[toc]"}),"\n",(0,o.jsx)(e.h1,{id:"nginx-locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f",children:"nginx locaiton\u5339\u914d\u5b9e\u9645\u5e94\u7528\u573a\u666f"}),"\n",(0,o.jsx)(e.h2,{id:"1location-\u81ea\u52a8\u6dfb\u52a0\u540e\u7f00",children:"1.location \u81ea\u52a8\u6dfb\u52a0\u540e\u7f00"}),"\n",(0,o.jsxs)(e.p,{children:["\u6709\u8fd9\u4e48\u4e00\u79cd\u573a\u666f\uff0c\u4e00\u4e9b\u670d\u52a1\u5b89\u88c5\u542f\u52a8\u540e\uff0c\u8bbf\u95ee\u7684\u7684url\u662f\u8fd9\u6837\u7684 ",(0,o.jsx)(e.code,{children:"IP:\u7aef\u53e3/xxx"}),"\uff0c\u4f8b\u5982 ",(0,o.jsx)(e.a,{href:"https://github.com/zabbix/zabbix",children:"zabbix"}),"\uff0c\u8bbf\u95ee\u7684url\u662f ",(0,o.jsx)(e.code,{children:"IP:\u7aef\u53e3/zabbix"}),"\uff0c\u8fd8\u6709 ",(0,o.jsx)(e.a,{href:"https://github.com/apache/incubator-dolphinscheduler",children:"dolphinscheduler"}),"\uff0c\u8bbf\u95ee\u7684url\u662f ",(0,o.jsx)(e.code,{children:"IP:12345/dolphinscheduler"}),"\uff0c\u8fd9\u4e2a\u662f\u670d\u52a1\u6e90\u7801\u8def\u7531\u5199\u6b7b\u7684\uff0c\u4e0d\u53ef\u4ee5\u66f4\u6539\uff0czabbix\u8fd8\u597d\uff0c\u5355\u8bcd\u53ef\u4ee5\u8bb0\u4f4f\uff0c\u4f46\u662f dolphinscheduler \u5b9e\u5728\u662f\u8bb0\u4e0d\u4f4f\uff0c\u90a3\u73b0\u5728\u5c31\u60f3\u914d\u7f6e\u76f4\u63a5\u4ee5\u57df\u540d\u7684\u5f62\u5f0f\u8bbf\u95ee\uff0c\u7136\u540e\u81ea\u52a8\u5339\u914d\u540e\u8fb9\u7684uir\uff0c\u4f8b\u5982\u8bbf\u95eezabbix\uff0c\u76f4\u63a5\u8f93\u5165\u8bbe\u7f6e\u7684\u57df\u540d ",(0,o.jsx)(e.code,{children:"zabbix.ac.com"})," \uff0c\u7136\u540e\u8df3\u8f6c\u5230 ",(0,o.jsx)(e.code,{children:"zabbix.abc.com/zabbix"})," \uff0c\u5728nginx\u4e2d\u9700\u8981\u505a\u5982\u4e0b\u914d\u7f6e"]}),"\n",(0,o.jsx)(e.p,{children:"zabbix\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-nginx",children:"server {\n  listen 80;\n  server_name zabbix.abc.com;\n  return 301 https://$server_name$request_uri;\n}\n\nserver {\n  listen 443 ssl;\n  server_name zabbix.abc.com;\n  client_max_body_size 10240m;\n\n  location / {\n    proxy_pass http://127.0.0.1:81/zabbix;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n    proxy_set_header X-NginX-Proxy true;\n    proxy_hide_header Server;\n    proxy_redirect off;\n\n    location /zabbix {\n        proxy_pass http://127.0.0.1:81;\n    }\n  }\n\n  access_log /var/log/zabbix/zabbix.abc.com.access.log;\n  error_log /var/log/zabbix/zabbix.abc.com.error.log;\n  ssl_certificate ssl_key/zabbix/1_zabbix.abc.com.pem;\n  ssl_certificate_key ssl_key/zabbix/2_zabbix.abc.com.key;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n}\n"})}),"\n",(0,o.jsx)(e.p,{children:"dolphinscheduler\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-nginx",children:"server {\n  listen 80;\n  server_name ds.abc.com;\n  return 301 https://$server_name$request_uri;\n}\n\nserver {\n  listen 443 ssl;\n  server_name ds.abc.com;\n  client_max_body_size 10240m;\n\n  location / {\n    proxy_pass http://127.0.0.1:12345/dolphinscheduler/;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n    proxy_set_header X-NginX-Proxy true;\n    proxy_hide_header Server;\n    proxy_redirect off;\n\n    location /dolphinscheduler {\n        proxy_pass http://127.0.0.1:12345;\n    }\n  }\n\n  access_log /var/log/ds/ds.abc.com.access.log;\n  error_log /var/log/ds/ds.abc.com.error.log;\n  ssl_certificate ssl_key/1_ds.abc.com_bundle.crt;\n  ssl_certificate_key ssl_key/2_ds.abc.com.key;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n}\n"})}),"\n",(0,o.jsxs)(e.p,{children:["\u914d\u7f6e\u6a21\u7248\uff0c\u914d\u7f6e\u4e3alocation\u4e2d\u5957location\uff0c\u6ce8\u610f\u4e24\u4e2alocation\u4e2d\u7684 ",(0,o.jsx)(e.code,{children:"proxy_pass"})," \u540e\u7684IP\u548c\u7aef\u53e3\u8981\u4e00\u81f4"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-nginx",children:"location / {\n    proxy_pass http://127.0.0.1:12345/xxx/;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n    proxy_set_header X-NginX-Proxy true;\n    proxy_hide_header Server;\n    proxy_redirect off;\n\n    location /xxx {\n        proxy_pass http://127.0.0.1:12345;\n    }\n  }\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5728ingress\u4e2d\u914d\u7f6e\u4e3a\u5982\u4e0b\uff0c\u4ee5nacos\u4e3a\u4f8b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  annotations:\n    nginx.ingress.kubernetes.io/configuration-snippet: |\n      proxy_set_header Upgrade "websocket";\n      proxy_set_header Connection "Upgrade";\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    nginx.ingress.kubernetes.io/proxy-body-size: 4096m\n    kubernetes.io/ingress.class: "nginx"\n    nginx.ingress.kubernetes.io/app-root: /nacos/\n    nginx.ingress.kubernetes.io/rewrite-target: /nacos/$2\n    nginx.ingress.kubernetes.io/configuration-snippet: |\n      rewrite ^(/nacos)$ $1/ redirect;\n  generation: 1\n  name: nacos-uat\n  namespace: ops\nspec:\n  ingressClassName: nginx\n  rules:\n  - host: nacos-uat.rd.com\n    http:\n      paths:\n      - path: /nacos(/|$)(.*)\n        pathType: Prefix\n        backend:\n          service:\n            name: nacos-uat\n            port:\n              number: 8848\nstatus:\n  loadBalancer:\n    ingress:\n    - ip: 172.18.4.112\n'})}),"\n",(0,o.jsx)(e.h2,{id:"2location-\u914d\u7f6e\u9759\u6001\u8d44\u6e90",children:"2.location \u914d\u7f6e\u9759\u6001\u8d44\u6e90"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-nginx",children:"location ~ .*\\.(gif|jpg|jpeg|bmp|png|ico|txt|js|css|ttf)$ {\n    root /var/www;\n  }\n"})})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(x,{...n})}):x(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>t,x:()=>a});var o=r(96540);const s={},i=o.createContext(s);function t(n){const e=o.useContext(i);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),o.createElement(i.Provider,{value:e},n.children)}}}]);