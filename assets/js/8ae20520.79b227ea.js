"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[8660],{75096:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>h});var r=t(74848),l=t(28453);const i={},s="python\u57fa\u7840\u4e8c\u5341\u4e94\t\u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b",o={id:"python/python\u57fa\u7840/python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b",title:"python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b",description:"[toc]",source:"@site/docs/python/python\u57fa\u7840/python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b.md",sourceDirName:"python/python\u57fa\u7840",slug:"/python/python\u57fa\u7840/python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b",permalink:"/docs/python/python\u57fa\u7840/python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"python\u57fa\u7840\u4e8c\u5341\u4e8c\t\u5305",permalink:"/docs/python/python\u57fa\u7840/python\u57fa\u7840\u4e8c\u5341\u4e8c \u5305"},next:{title:"python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u7ebf\u7a0b",permalink:"/docs/python/python\u57fa\u7840/python\u57fa\u7840\u4e8c\u5341\u4e94 \u5e76\u53d1\u7f16\u7a0b-\u591a\u7ebf\u7a0b"}},c={},h=[{value:"1.\u534f\u7a0b",id:"1\u534f\u7a0b",level:2},{value:"1.1 \u6982\u5ff5",id:"11-\u6982\u5ff5",level:3},{value:"1.2 \u534f\u7a0b\u4f5c\u7528",id:"12-\u534f\u7a0b\u4f5c\u7528",level:3},{value:"1.3 \u534f\u7a0b\u5b9e\u73b0",id:"13-\u534f\u7a0b\u5b9e\u73b0",level:3},{value:"1.3.1 greenlet(\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u624b\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c)",id:"131-greenlet\u7b2c\u4e09\u65b9\u6a21\u5757\u624b\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c",level:4},{value:"1.3.2 gevent(\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u81ea\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c)",id:"132-gevent\u7b2c\u4e09\u65b9\u6a21\u5757\u81ea\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c",level:4},{value:"\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u534f\u7a0b\u4e4b\u95f4\u7684\u533a\u522b",id:"\u8fdb\u7a0b\u7ebf\u7a0b\u534f\u7a0b\u4e4b\u95f4\u7684\u533a\u522b",level:2}];function p(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"[toc]"}),"\n",(0,r.jsx)(e.h1,{id:"python\u57fa\u7840\u4e8c\u5341\u4e94\u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b",children:"python\u57fa\u7840\u4e8c\u5341\u4e94\t\u5e76\u53d1\u7f16\u7a0b-\u591a\u534f\u7a0b"}),"\n",(0,r.jsx)(e.h2,{id:"1\u534f\u7a0b",children:"1.\u534f\u7a0b"}),"\n",(0,r.jsx)(e.h3,{id:"11-\u6982\u5ff5",children:"1.1 \u6982\u5ff5"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u534f\u7a0b\u662f\u6bd4\u7ebf\u7a0b\u66f4\u5c0f\u7684\u6267\u884c\u5355\u5143\uff0c\u4e5f\u53eb\u5fae\u7ebf\u7a0b"}),"\n",(0,r.jsx)(e.p,{children:"\u4e00\u4e2a\u7ebf\u7a0b\u4f5c\u4e3a\u4e00\u4e2a\u5bb9\u5668\u91cc\u9762\u53ef\u4ee5\u653e\u7f6e\u591a\u4e2a\u534f\u7a0b"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"12-\u534f\u7a0b\u4f5c\u7528",children:"1.2 \u534f\u7a0b\u4f5c\u7528"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u53ea\u5207\u6362\u51fd\u6570\u8c03\u7528\u5373\u53ef\u5b8c\u6210\u591a\u7ebf\u7a0b\uff0c\u53ef\u4ee5\u51cf\u5c11CPU\u7684\u5207\u6362"}),"\n",(0,r.jsx)(e.p,{children:"\u534f\u7a0b\u81ea\u5df1\u4e3b\u52a8\u8ba9\u51faCPU\uff0c\u4e0d\u9700\u8981\u7cfb\u7edf\u8c03\u7528"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"13-\u534f\u7a0b\u5b9e\u73b0",children:"1.3 \u534f\u7a0b\u5b9e\u73b0"}),"\n",(0,r.jsx)(e.h4,{id:"131-greenlet\u7b2c\u4e09\u65b9\u6a21\u5757\u624b\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c",children:"1.3.1 greenlet(\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u624b\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'#\u534f\u7a0b\u95f4\u6765\u56de\u5207\u6362\uff0c\u4e0d\u9700\u8981CPU\u7684\u8c03\u7528\n#\u9700\u8981\u5148\u5b89\u88c5greenlet\t\npip install greenlet\n\nfrom greenlet import greenlet\nimport time\ndef t1():\n    while True:\n        print("AAA")\t#\u7b2c\u4e00\u6b65\u5148\u6253\u5370AAA\n        gr2.switch()\t#\u7b2c\u4e8c\u6b65\u8ba9\u534f\u7a0bgr2\u8fdb\u6765\u6267\u884c\uff0cgr1\u4fdd\u7559\u6b64\u5904\u7684\u6267\u884c\u4f4d\u7f6e\uff0c\u534f\u7a0bgr2\u6267\u884c\u7684\u662ft2\u51fd\u6570\n        time.sleep(1)\n        \n        \ndef t2():\n    while True:\n        print("bbb")\t#\u7b2c\u4e09\u6b65\u6253\u5370bbb\n        gr1.switch()\t#\u7b2c\u56db\u6b65\u8ba9\u534f\u7a0bgr1\u8fdb\u6765\u6267\u884c\uff0cgr2\u4fdd\u7559\u6b64\u5904\u7684\u6267\u884c\u4f4d\u7f6e\uff0c\u534f\u7a0bgr1\u6267\u884c\u7684\u662ft1\u51fd\u6570\n        time.sleep(1)\n        \ngr1 = greenlet(t1)\t#\u521b\u5efa\u4e00\u4e2a\u534f\u7a0b\u5bf9\u8c61\ngr2 = greenlet(t2)\ngr1.switch()\t#\u6b64\u65f6\u4f1a\u6267\u884ct1\u51fd\u6570\n\n\n\u7ed3\u679c\uff1a\n\u5faa\u73af\u6253\u5370\nAAA\nbbb\n'})}),"\n",(0,r.jsx)(e.h4,{id:"132-gevent\u7b2c\u4e09\u65b9\u6a21\u5757\u81ea\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c",children:"1.3.2 gevent(\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u81ea\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c)"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u6982\u5ff5"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"gevent\u662f\u4e00\u4e2a\u80fd\u591f\u81ea\u52a8\u5207\u6362\u51fd\u6570\u6267\u884c\u7684\u534f\u7a0b\u6a21\u5757\uff0c\u6bd4greenlet\u529f\u80fd\u5f3a\u5927"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u539f\u7406"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"gevent\u901a\u8fc7greenlet\u5b9e\u73b0\u534f\u7a0b\uff0c\u5f53\u4e00\u4e2agreenlet\u9047\u5230IO\u64cd\u4f5c\u65f6\uff0c\u5c31\u81ea\u52a8\u5207\u6362\u5230\u5176\u4ed6\u7684greenlet\uff0c\u7b49\u5f85IO\u64cd\u4f5c\u5b8c\u6210\uff0c\u518d\u5728\u9002\u5f53\u7684\u65f6\u5019\u5207\u6362\u56de\u6765\u7ee7\u7eed\u6267\u884c"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"\u7279\u70b9"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"gevent\u53ea\u6709\u9047\u5230\u6a21\u5757\u80fd\u591f\u8bc6\u522b\u7684IO\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u7a0b\u5e8f\u624d\u4f1a\u8fdb\u884c\u4efb\u52a1\u5207\u6362\uff0c\u5b9e\u73b0\u5e76\u53d1\u6548\u679c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'#\u9700\u8981\u5148\u5b89\u88c5gevent\npip install gevent\n\n\n//\u4ee3\u7801\u793a\u4f8b1\t\u65e0\u9650\u5faa\u73af\u5207\u6362\u534f\u7a0b\nimport gevent\ndef A():\n    while True:\n        print(".........A.........")\n        gevent.sleep(1)#\u7528\u6765\u6a21\u62df\u4e00\u4e2a\u8017\u65f6\u64cd\u4f5c\n        #gevent\u4e2d\uff1a\u5f53\u4e00\u4e2a\u534f\u7a0b\u9047\u5230\u8017\u65f6\u64cd\u4f5c\u4f1a\u81ea\u52a8\u4ea4\u51fa\u63a7\u5236\u6743\u7ed9\u5176\u4ed6\u534f\u7a0b\ndef B():\n    while True:\n        print(".........B.........")\n        gevent.sleep(1)\t#\u6bcf\u5f53\u9047\u5230\u8017\u65f6\u64cd\u4f5c\uff0c\u4f1a\u81ea\u7528\u8f6c\u5230\u5176\u4ed6\u534f\u7a0b\ng1 = gevent.spawn(A)\t#\u521b\u5efa\u4e00\u4e2agevent\u5bf9\u8c61\uff08\u521b\u5efa\u4e86\u4e00\u4e2a\u534f\u7a0b\uff09\uff0c\u6b64\u65f6\u5c31\u5df2\u7ecf\u5f00\u59cb\u6267\u884c\u51fd\u6570A\ng2 = gevent.spawn(B)\ng1.join()  #\u7b49\u5f85\u534f\u7a0b\u6267\u884c\u7ed3\u675f\ng2.join()  #\u4f1a\u7b49\u5f85\u534f\u7a0b\u8fd0\u884c\u7ed3\u675f\u540e\u518d\u9000\u51fa\n\n\u7ed3\u679c\uff1a\n\u65e0\u9650\u5faa\u73af\u6253\u5370\n.........A.........\n.........B.........\n\u3002\u3002\u3002\n\n\n//\u4ee3\u7801\u793a\u4f8b2\t\u63a7\u5236\u534f\u7a0b\u5faa\u73af\u6b21\u6570\nimport gevent\ndef A():\n    for i in range(10):\n        print("AAA")\n        gevent.sleep(1)\n\ndef B():\n    for i in range(10):\n        print("BBB")\n        gevent.sleep(1)\n\ng1 = gevent.spawn(A)\ng2 = gevent.spawn(B)\ng1.join()\ng2.join()\n\n\u7ed3\u679c\uff1a\n\u6253\u537010\u6b21\nAAA\nBBB\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u8fdb\u7a0b\u7ebf\u7a0b\u534f\u7a0b\u4e4b\u95f4\u7684\u533a\u522b",children:"\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u534f\u7a0b\u4e4b\u95f4\u7684\u533a\u522b"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u8fdb\u7a0b\t\u6700\u5c0f\u7684\u8d44\u6e90\u5355\u4f4d\uff0c\u5185\u5b58\u7ea7\u522b\uff0c\u5982\u679c\u8fdb\u7a0b\u4e2d\u6ca1\u6709\u7ebf\u7a0b\u53ea\u662f\u5212\u5206\u4e86\u4e00\u4e2a\u7a7a\u95f4"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u7ebf\u7a0b\t\u6700\u5c0f\u7684\u8fd0\u884c\u5355\u4f4d\uff0ccpu\u7ea7\u522b\uff0c\u8fdb\u7a0b\u5728\u6267\u884c\uff0c\u5b9e\u9645\u4e0a\u662f\u7ebf\u7a0b\u5728\u6267\u884c"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u534f\u7a0b\t\u5fae\u7ebf\u7a0b\t\u7528\u6237\u7ea7\u522b\t\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u77e5\u9053\u4ec0\u4e48\u662f\u534f\u7a0b\uff0c\u662f\u7a0b\u5e8f\u5458yy\u51fa\u6765\u7684\uff0c\u6b3a\u9a97\u64cd\u4f5c\u7cfb\u7edf\uff0c\u56e0\u4e3a\u6709IO\u64cd\u4f5c\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u56de\u6536\u6743\u9650\uff0c\u534f\u7a0b\u5c31\u662f\u5728\u7528\u6237\u7ea7\u522b\u5c06\u591a\u4e2a\u4efb\u52a1\u505a\u6210\u4e00\u4e2a\u4efb\u52a1\uff0c\u4f46\u51e1\u6709\u4e00\u4e2a\u7ebf\u7a0b\u6709IO\uff0c\u624b\u52a8\u5207\u6362\uff0c\u8ba9\u7ebf\u7a0b\u80fd\u83b7\u5f97\u66f4\u5927\u5360\u7528\u7cfb\u7edf\u8d44\u6e90\u7684\u673a\u4f1a\uff0c\u63d0\u9ad8\u5355\u7ebf\u7a0b\u6548\u7387"})}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>o});var r=t(96540);const l={},i=r.createContext(l);function s(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);