"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2240],{18721:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>o});var l=s(74848),d=s(28453);const r={},c="CentOS7.9\u5b89\u88c5CDH6.2.1",i={id:"linux/big-data/CDH/CentOS7.9\u5b89\u88c5CDH6.2.1",title:"CentOS7.9\u5b89\u88c5CDH6.2.1",description:"[toc]",source:"@site/docs/linux/big-data/CDH/CentOS7.9\u5b89\u88c5CDH6.2.1.md",sourceDirName:"linux/big-data/CDH",slug:"/linux/big-data/CDH/CentOS7.9\u5b89\u88c5CDH6.2.1",permalink:"/docs/linux/big-data/CDH/CentOS7.9\u5b89\u88c5CDH6.2.1",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ambari\u4e0b\u8f7d",permalink:"/docs/linux/big-data/Ambari/ambari\u4e0b\u8f7d"},next:{title:"\u817e\u8baf\u4e91 MapReduce \u96c6\u7fa4 core \u8282\u70b9\u4e0b\u7ebf\u8fc7\u7a0b",permalink:"/docs/linux/big-data/MapReduce/\u817e\u8baf\u4e91 MapReduce \u96c6\u7fa4 core \u8282\u70b9\u4e0b\u7ebf\u8fc7\u7a0b"}},t={},o=[{value:"1.CDH\u7b80\u4ecb",id:"1cdh\u7b80\u4ecb",level:2},{value:"2.\u73af\u5883\u51c6\u5907",id:"2\u73af\u5883\u51c6\u5907",level:2},{value:"2.0 \u5b89\u88c5\u7eaf\u51c0\u7cfb\u7edf\u540e\u6267\u884c\u7684\u811a\u672c",id:"20-\u5b89\u88c5\u7eaf\u51c0\u7cfb\u7edf\u540e\u6267\u884c\u7684\u811a\u672c",level:3},{value:"2.1 \u5b9e\u9a8c\u73af\u5883",id:"21-\u5b9e\u9a8c\u73af\u5883",level:3},{value:"2.2 \u914d\u7f6essh\u514d\u5bc6",id:"22-\u914d\u7f6essh\u514d\u5bc6",level:3},{value:"2.2.1 \u7f16\u8f91\u73af\u5883\u53d8\u91cf\u6587\u4ef6",id:"221-\u7f16\u8f91\u73af\u5883\u53d8\u91cf\u6587\u4ef6",level:4},{value:"2.2.2 \u751f\u6210\u5bc6\u94a5\u5bf9",id:"222-\u751f\u6210\u5bc6\u94a5\u5bf9",level:4},{value:"2.2.3 \u7f16\u8f91expect\u81ea\u52a8\u5316\u4ea4\u4e92\u811a\u672c",id:"223-\u7f16\u8f91expect\u81ea\u52a8\u5316\u4ea4\u4e92\u811a\u672c",level:4},{value:"2.2.4 \u7f16\u8f91shell\u811a\u672c\u5faa\u73af\u6267\u884cexpect\u811a\u672c",id:"224-\u7f16\u8f91shell\u811a\u672c\u5faa\u73af\u6267\u884cexpect\u811a\u672c",level:4},{value:"2.3 \u6bcf\u4e2a\u8282\u70b9\u914d\u7f6ehosts\u4fe1\u606f",id:"23-\u6bcf\u4e2a\u8282\u70b9\u914d\u7f6ehosts\u4fe1\u606f",level:3},{value:"2.4 \u7981\u7528\u9632\u706b\u5899\u548cselinux",id:"24-\u7981\u7528\u9632\u706b\u5899\u548cselinux",level:3},{value:"2.5 \u5b89\u88c5JDK8",id:"25-\u5b89\u88c5jdk8",level:3},{value:"2.5.1 \u5b89\u88c5\u8bf4\u660e",id:"251-\u5b89\u88c5\u8bf4\u660e",level:4},{value:"2.5.2 \u7f16\u5199jdk\u5b89\u88c5\u811a\u672c",id:"252-\u7f16\u5199jdk\u5b89\u88c5\u811a\u672c",level:4},{value:"2.5.3 chd slave\u8282\u70b9\u521b\u5efa\u76f8\u5173\u76ee\u5f55",id:"253-chd-slave\u8282\u70b9\u521b\u5efa\u76f8\u5173\u76ee\u5f55",level:4},{value:"2.5.4 \u62f7\u8d1djdk\u5b89\u88c5\u5305\u548cjdk\u5b89\u88c5\u811a\u672c\u5230\u5176\u4f59\u8282\u70b9",id:"254-\u62f7\u8d1djdk\u5b89\u88c5\u5305\u548cjdk\u5b89\u88c5\u811a\u672c\u5230\u5176\u4f59\u8282\u70b9",level:4},{value:"2.5.5 \u6267\u884cjdk\u5b89\u88c5\u811a\u672c",id:"255-\u6267\u884cjdk\u5b89\u88c5\u811a\u672c",level:4},{value:"2.6 \u914d\u7f6e\u65f6\u95f4\u540c\u6b65",id:"26-\u914d\u7f6e\u65f6\u95f4\u540c\u6b65",level:3},{value:"2.6.1 \u5404\u8282\u70b9\u5b89\u88c5chrony",id:"261-\u5404\u8282\u70b9\u5b89\u88c5chrony",level:4},{value:"2.6.2 cdh master\u8282\u70b9\u4fee\u6539\u670d\u52a1\u5668\u5730\u5740\u4e3a\u963f\u91cc\u4e91",id:"262-cdh-master\u8282\u70b9\u4fee\u6539\u670d\u52a1\u5668\u5730\u5740\u4e3a\u963f\u91cc\u4e91",level:4},{value:"2.6.3 node\u8282\u70b9\u4fee\u6539\u540c\u6b65\u670d\u52a1\u5668\u4e3amaster\u8282\u70b9",id:"263-node\u8282\u70b9\u4fee\u6539\u540c\u6b65\u670d\u52a1\u5668\u4e3amaster\u8282\u70b9",level:4},{value:"2.6.4 \u542f\u52a8chronyd\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f",id:"264-\u542f\u52a8chronyd\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f",level:4},{value:"2.6.5 \u68c0\u67e5\u7aef\u53e3\uff0cchronyd\u76d1\u542cudp323\u7aef\u53e3",id:"265-\u68c0\u67e5\u7aef\u53e3chronyd\u76d1\u542cudp323\u7aef\u53e3",level:4},{value:"2.6.6 \u68c0\u67e5\u540c\u6b65",id:"266-\u68c0\u67e5\u540c\u6b65",level:4},{value:"2.7 \u5b89\u88c5mysql",id:"27-\u5b89\u88c5mysql",level:3},{value:"2.7.1 \u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305",id:"271-\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305",level:4},{value:"2.7.2 \u89e3\u538b\u7f29mysql\u4e8c\u8fdb\u5236\u5305\u5230/usr/local",id:"272-\u89e3\u538b\u7f29mysql\u4e8c\u8fdb\u5236\u5305\u5230usrlocal",level:4},{value:"2.7.3 \u4fee\u6539\u540d\u79f0\u3001\u505a\u8f6f\u8fde\u63a5",id:"273-\u4fee\u6539\u540d\u79f0\u505a\u8f6f\u8fde\u63a5",level:4},{value:"2.7.4 \u521b\u5efamysql\u7528\u6237",id:"274-\u521b\u5efamysql\u7528\u6237",level:4},{value:"2.7.5 \u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0cmyql-5.7.30\u4e8c\u8fdb\u5236\u5305\u9ed8\u8ba4\u6ca1\u6709mysql\u914d\u7f6e\u6587\u4ef6",id:"275-\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6myql-5730\u4e8c\u8fdb\u5236\u5305\u9ed8\u8ba4\u6ca1\u6709mysql\u914d\u7f6e\u6587\u4ef6",level:4},{value:"2.7.6 \u521b\u5efasocker\u6587\u4ef6\u76ee\u5f55\u3001\u76ee\u5f55\u6587\u4ef6\u6388\u6743",id:"276-\u521b\u5efasocker\u6587\u4ef6\u76ee\u5f55\u76ee\u5f55\u6587\u4ef6\u6388\u6743",level:4},{value:"2.7.7 \u62f7\u8d1d\u542f\u52a8\u811a\u672c",id:"277-\u62f7\u8d1d\u542f\u52a8\u811a\u672c",level:4},{value:"2.7.8 \u521d\u59cb\u5316mysql",id:"278-\u521d\u59cb\u5316mysql",level:4},{value:"2.7.9 \u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf",id:"279-\u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf",level:4},{value:"2.7.10 \u914d\u7f6esystemd\u7ba1\u7406mysql",id:"2710-\u914d\u7f6esystemd\u7ba1\u7406mysql",level:4},{value:"2.7.11 \u542f\u52a8mysql\u3001\u68c0\u67e5\u542f\u52a8",id:"2711-\u542f\u52a8mysql\u68c0\u67e5\u542f\u52a8",level:4}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"centos79\u5b89\u88c5cdh621",children:"CentOS7.9\u5b89\u88c5CDH6.2.1"}),"\n",(0,l.jsx)(n.p,{children:"[toc]"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://cn.cloudera.com/",children:"CDH\u5b98\u7f51"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_download.html",children:"CDH6.x\u4e0b\u8f7d\u9875\u9762"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_62_download.html#concept_mqv_mtz_bjb",children:"CDH6.2.1\u4e0b\u8f7d\u4fe1\u606f"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://www.cloudera.com/documentation/enterprise/6/6.2.html",children:"CDH6.x\u6587\u6863\u603b\u89c8"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://blog.csdn.net/summer089089/article/details/107605831",children:"\u672c\u6587\u53c2\u8003\u8fde\u63a5"})}),"\n",(0,l.jsx)(n.h2,{id:"1cdh\u7b80\u4ecb",children:"1.CDH\u7b80\u4ecb"}),"\n",(0,l.jsx)(n.p,{children:"Cloudera Manager\uff0c\u7b80\u79f0CM"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Cloudera Manager\u662f\u4e00\u4e2a\u62e5\u6709\u96c6\u7fa4\u81ea\u52a8\u5316\u5b89\u88c5\u3001\u4e2d\u5fc3\u5316\u7ba1\u7406\u3001\u96c6\u7fa4\u76d1\u63a7\u3001\u62a5\u8b66\u529f\u80fd\u7684\u4e00\u4e2a\u5de5\u5177"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"CM\u67b6\u6784"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-05-30%2021.38.39.png",alt:"iShot2021-05-30 21.38.39"})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7ec4\u4ef6"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Cloudera Repository"}),(0,l.jsx)(n.td,{children:"\u8f6f\u4ef6\u7531Cloudera\u7ba1\u7406\u5206\u5e03\u5b58\u50a8\u5e93"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Server"}),(0,l.jsx)(n.td,{children:"\u8d1f\u8d23\u8f6f\u4ef6\u5b89\u88c5\u3001\u914d\u7f6e\u3001\u542f\u52a8\u3001\u505c\u6b62\uff0c\u7ba1\u7406\u670d\u52a1\u8fd0\u884c\u7684\u96c6\u7fa4"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Management Service"}),(0,l.jsx)(n.td,{children:"\u7531\u4e00\u7ec4\u6267\u884c\u5404\u79cd\u76d1\u63a7\u3001\u544a\u8b66\u3001\u62a5\u544a\u529f\u80fd\u89d2\u8272\u7684\u670d\u52a1"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Database"}),(0,l.jsx)(n.td,{children:"\u50a8\u5b58\u914d\u7f6e\u548c\u76d1\u63a7\u4fe1\u606f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Agent"}),(0,l.jsx)(n.td,{children:"\u5b89\u88c5\u5728\u6bcf\u53f0\u673a\u5668\u4e0a\uff0c\u8d1f\u8d23\u542f\u52a8\u548c\u505c\u6b62\u3001\u914d\u7f6e\u3001\u76d1\u63a7\u4e3b\u673a"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Clients"}),(0,l.jsx)(n.td,{children:"\u7528\u4e8e\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u4ea4\u4e92\u7684\u63a5\u53e3"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"2\u73af\u5883\u51c6\u5907",children:"2.\u73af\u5883\u51c6\u5907"}),"\n",(0,l.jsx)(n.h3,{id:"20-\u5b89\u88c5\u7eaf\u51c0\u7cfb\u7edf\u540e\u6267\u884c\u7684\u811a\u672c",children:"2.0 \u5b89\u88c5\u7eaf\u51c0\u7cfb\u7edf\u540e\u6267\u884c\u7684\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"#!/usr/bin/env bash\n#\n\n# \u4fee\u6539\u7cfb\u7edfyum\u6e90\u4e3aaliyun\u5e76\u6dfb\u52a0epel\u6e90\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak\n[ ! -e /etc/yum.repos.d/CentOS-Base.repo ] && curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo && sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo\n\n[ ! -e /etc/yum.repos.d/epel.repo ] && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\nyum makecache\nyum -y install tar wget net-tools git vim tree lrzsz htop iftop iotop psmisc python36 python3-devel zlib zlib-devel gcc gcc-c++ conntrack-tools jq socat bash-completion telnet nload strace tcpdump lsof sysstat\n\n# \u5173\u95ed\u9632\u706b\u5899\u3001selinux\u3001NetworkManager\nsystemctl disable firewalld NetworkManager\nsed -i '7s/enforcing/disabled/' /etc/selinux/config\n\n# \u540c\u6b65\u65f6\u95f4\u8ba1\u5212\u4efb\u52a1 \u7531\u4e8e\u540e\u7eed\u8981\u7528\u5230ntpserver\uff0c\u56e0\u6b64ntpdate\u9009\u62e9\u4e0d\u6267\u884c\n#sed -i '/*\\/10 \\* \\* \\* \\* \\/usr\\/sbin\\/ntpdate ntp2\\.aliyun\\.com &>\\/dev\\/null/d' /var/spool/cron/root\n#echo \"*/10 * * * * /usr/sbin/ntpdate ntp2.aliyun.com &>/dev/null\" >>/var/spool/cron/root\n\n# \u5386\u53f2\u547d\u4ee4\u663e\u793a\u65f6\u95f4\nsed -i '/HISTFILESIZE=2000/d' /etc/bashrc\nsed -i '/HISTSIZE=2000/d' /etc/bashrc\nsed -i '/HISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S \"/d' /etc/bashrc\nsed -i '/export HISTTIMEFORMAT/d' /etc/bashrc\ncat >>/etc/bashrc<<'EOF'\nHISTFILESIZE=2000\nHISTSIZE=2000\nHISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S \"\nexport HISTTIMEFORMAT\nEOF\nsource /etc/bashrc\n\n# \u4fee\u6539\u7cfb\u7edf\u6700\u5927\u6587\u4ef6\u63cf\u8ff0\u7b26\nsed -i '/root soft nofile 65535/d' /etc/security/limits.conf\nsed -i '/root hard nofile 65535/d' /etc/security/limits.conf\nsed -i '/* soft nofile 65535/d' /etc/security/limits.conf\nsed -i '/* hard nofile 65535/d' /etc/security/limits.conf\ncat >>/etc/security/limits.conf<<'EOF'\nroot soft nofile 65535\nroot hard nofile 65535\n* soft nofile 65535\n* hard nofile 65535\nEOF\n\n# \u8bbe\u7f6epip\u56fd\u5185\u6e90\nmkdir ~/.pip\ncat >~/.pip/pip.conf<<EOF\n[global]\nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple/\nEOF\n\n# \u4e2a\u4eba\u4e60\u60ef\u6267\u884c\u547d\u4ee4 netstat -ntpl\uff0c\u6240\u4ee5\u505a\u4e00\u4e2a\u522b\u540d\nsed -i.bak \"8c alias n='netstat -ntpl'\" ~/.bashrc && source ~/.bashrc\n\nreboot\n"})}),"\n",(0,l.jsx)(n.h3,{id:"21-\u5b9e\u9a8c\u73af\u5883",children:"2.1 \u5b9e\u9a8c\u73af\u5883"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u89d2\u8272"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"IP\u5730\u5740"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u4e3b\u673a\u540d"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"CDH\u7248\u672c"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u786c\u4ef6\u914d\u7f6e"})}),(0,l.jsx)(n.th,{children:"\u8282\u70b9\u89d2\u8272"}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u7cfb\u7edf"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u5185\u6838"})})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"master"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"10.0.0.50"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"cdh-master01"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"6.2.1"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"4c8g+50G"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Hadoop Master\uff0cCM Server\uff0c\u6570\u636e\u8282\u70b9\uff0cMysql"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"CentOS7.9"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"3.10.0-1160.el7.x86_64"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"slave"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"10.0.0.51"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"cdh-slave01"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"6.2.1"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"4c8g+50G"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u6570\u636e\u8282\u70b9\uff0cCMAgent"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"CentOS7.9"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"3.10.0-1160.el7.x86_64"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"slave"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"10.0.0.52"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"cdh-slave02"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"6.2.1"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"4c8g+50G"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u6570\u636e\u8282\u70b9\uff0cCM Agent"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"CentOS7.9"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"3.10.0-1160.el7.x86_64"})})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"22-\u914d\u7f6essh\u514d\u5bc6",children:"2.2 \u914d\u7f6essh\u514d\u5bc6"}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u26a0\ufe0f\u5982\u65e0\u7279\u6b8a\u8bf4\u660e\uff0c\u4ee5\u4e0b\u64cd\u4f5c\u5747\u5728 cdh-master01 \u8282\u70b9"})}),(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"CDH\u670d\u52a1\u5f00\u542f\u4e0e\u5173\u95ed\u662f\u901a\u8fc7server\u548cagent\u6765\u5b8c\u6210\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0d\u9700\u8981\u914d\u7f6essh\u514d\u5bc6\u767b\u5f55\uff0c\u4f46\u662f\u4e3a\u4e86\u6211\u4eec\u5206\u53d1\u6587\u4ef6\u65b9\u4fbf\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u4e5f\u914d\u7f6essh\u514d\u5bc6"})})]}),"\n",(0,l.jsx)(n.h4,{id:"221-\u7f16\u8f91\u73af\u5883\u53d8\u91cf\u6587\u4ef6",children:"2.2.1 \u7f16\u8f91\u73af\u5883\u53d8\u91cf\u6587\u4ef6"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u73af\u5883\u53d8\u91cf\u6587\u4ef6\u4e2dIP\u3001\u4e3b\u673a\u540d\u3001\u5b50\u7f51\u7f51\u6bb5\u53ef\u81ea\u884c\u4fee\u6539"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"[ -d /opt/cdh6.2.1/script ] || mkdir -p /opt/cdh6.2.1/script && cd /opt/cdh6.2.1/script\ncat > env.sh <<EOF\nexport NODE_IPS=(10.0.0.50 10.0.0.51 10.0.0.52)\nexport NODE_NAMES=(cdh-master01 cdh-slave01 cdh-slave02)\nexport NODE_SUBNET='10.0.0.0/24'\nEOF\n"})}),"\n",(0,l.jsx)(n.h4,{id:"222-\u751f\u6210\u5bc6\u94a5\u5bf9",children:"2.2.2 \u751f\u6210\u5bc6\u94a5\u5bf9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa &>/dev/null\n"})}),"\n",(0,l.jsx)(n.h4,{id:"223-\u7f16\u8f91expect\u81ea\u52a8\u5316\u4ea4\u4e92\u811a\u672c",children:"2.2.3 \u7f16\u8f91expect\u81ea\u52a8\u5316\u4ea4\u4e92\u811a\u672c"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u8fd9\u91cc\u673a\u5668\u7528\u6237\u540d\u662f",(0,l.jsx)(n.code,{children:"root"}),"\uff0c\u5bc6\u7801\u662f\u56fd\u9645\u6807\u51c6\u901a\u7528\u5bc6\u7801",(0,l.jsx)(n.code,{children:"1"}),"\uff0cssh\u7aef\u53e3",(0,l.jsx)(n.code,{children:"22"})]})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u26a0\ufe0f\u6267\u884c\u8def\u5f84\u5728 ",(0,l.jsx)(n.code,{children:"/opt/cdh6.2.1/script"})]})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'cat > ssh.exp <<\'EOF\'\n#!/usr/bin/expect\nif { $argc !=2 } {\n  send_user "usage: expect ssh.exp file ip\\n"\n  exit\n}\n\nset file [lindex $argv 0]\nset ip [lindex $argv 1]\nset password "1"\n\nspawn ssh-copy-id -i $file -p 22 root@$ip\nexpect {\n  "yes/no" {send "yes\\r";exp_continue}\n  "*password" {send "$password\\r"}\n}\nexpect eof\nEOF\n'})}),"\n",(0,l.jsx)(n.h4,{id:"224-\u7f16\u8f91shell\u811a\u672c\u5faa\u73af\u6267\u884cexpect\u811a\u672c",children:"2.2.4 \u7f16\u8f91shell\u811a\u672c\u5faa\u73af\u6267\u884cexpect\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# \u7f16\u8f91\u811a\u672c\nsource env.sh\ncat > ssh.sh <<'EOF'\n#!/bin/bash\nfor i in ${NODE_IPS[@]}\ndo\n  expect ./ssh.exp ~/.ssh/id_rsa.pub $i\ndone\nEOF\n\n# \u5b89\u88c5expect\nyum -y install expect\n\n# \u6267\u884c\u811a\u672c\nsource ssh.sh\n"})}),"\n",(0,l.jsx)(n.h3,{id:"23-\u6bcf\u4e2a\u8282\u70b9\u914d\u7f6ehosts\u4fe1\u606f",children:"2.3 \u6bcf\u4e2a\u8282\u70b9\u914d\u7f6ehosts\u4fe1\u606f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'source /opt/cdh6.2.1/script/env.sh \nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    ssh root@${node_ip} "cat >> /etc/hosts <<EOF\n${NODE_IPS[0]} ${NODE_NAMES[0]}\n${NODE_IPS[1]} ${NODE_NAMES[1]}\n${NODE_IPS[2]} ${NODE_NAMES[2]}\nEOF"\ndone\n'})}),"\n",(0,l.jsx)(n.h3,{id:"24-\u7981\u7528\u9632\u706b\u5899\u548cselinux",children:"2.4 \u7981\u7528\u9632\u706b\u5899\u548cselinux"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8fd9\u4e00\u6b65\u5df2\u57282.0\u5b89\u88c5\u7eaf\u51c0\u7cfb\u7edf\u540e\u6267\u884c\u7684\u811a\u672c\u4e2d\u6267\u884c\u8fc7\u4e86"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# \u7981\u7528\u9632\u706b\u5899\nsystemctl stop firewalld && systemctl disable firewalld\n\n# \u7981\u7528selinux\t\u4e34\u65f6\u4fee\u6539\nsetenforce 0\n\n# \u7981\u7528selinux\t\u6c38\u4e45\u4fee\u6539\uff0c\u91cd\u542f\u670d\u52a1\u5668\u540e\u751f\u6548\nsed -i '7s/enforcing/disabled/' /etc/selinux/config\n"})}),"\n",(0,l.jsx)(n.h3,{id:"25-\u5b89\u88c5jdk8",children:"2.5 \u5b89\u88c5JDK8"}),"\n",(0,l.jsx)(n.h4,{id:"251-\u5b89\u88c5\u8bf4\u660e",children:"2.5.1 \u5b89\u88c5\u8bf4\u660e"}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f\u96c6\u7fa4\u4e2d\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u9700\u8981\u5b89\u88c5jdk"})}),(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u26a0\ufe0fjdk\u9700\u8981\u767b\u9646\u5230 ",(0,l.jsx)(n.a,{href:"https://www.oracle.com/",children:"oracle"})," \u5b98\u7f51\u624d\u53ef\u4ee5\u4e0b\u8f7d\uff0c\u8fd9\u91cc\u4e0b\u8f7d\u7684\u662f\u7248\u672c\u662f ",(0,l.jsx)(n.code,{children:"jdk-8u251"})]})}),(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["jdk\u5b89\u88c5\u5305\u4e0b\u8f7d\u81f3 ",(0,l.jsx)(n.code,{children:"/opt/cdh6.2.1/pkg"})]})}),(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://www.oracle.com/technetwork/java/javase/downloads/index.html",children:"jdk\u5b98\u65b9\u4e0b\u8f7d\u5730\u5740"})})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"[ -d /opt/cdh6.2.1/{pkg,script} ] || mkdir -p /opt/cdh6.2.1/{pkg,script}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"252-\u7f16\u5199jdk\u5b89\u88c5\u811a\u672c",children:"2.5.2 \u7f16\u5199jdk\u5b89\u88c5\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"cat >/opt/cdh6.2.1/script/jdk8_install.sh <<'ABC'\n#!/usr/bin/env bash\nPWD=/opt/cdh6.2.1/pkg\nJDK_PKG=jdk-8u251-linux-x64.tar.gz\n\n# \u5b89\u88c5jdk1.8.0_251\ntar xf $PWD/$JDK_PKG -C /usr/local\ncat >/etc/profile.d/jdk8.sh<<'EOF'\nexport JAVA_HOME=/usr/local/jdk1.8.0_251\nexport PATH=$JAVA_HOME/bin:$JAVA_HOME/jre:$JAVA_HOME/lib:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport JAVA_HOME PATH CLASSPATH\nEOF\n\n# \u4f7fjdk\u547d\u4ee4\u73af\u5883\u53d8\u91cf\u751f\u6548\nsource /etc/profile.d/jdk8.sh\n\n# \u505a\u4e00\u4e2a\u8f6f\u8fde\u63a5\nln -sf $JAVA_HOME/bin/java /usr/bin/java\nABC\n"})}),"\n",(0,l.jsx)(n.h4,{id:"253-chd-slave\u8282\u70b9\u521b\u5efa\u76f8\u5173\u76ee\u5f55",children:"2.5.3 chd slave\u8282\u70b9\u521b\u5efa\u76f8\u5173\u76ee\u5f55"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'source /opt/cdh6.2.1/script/env.sh\nexport NODE_IPS=(${NODE_IPS[1]} ${NODE_IPS[2]})\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    ssh root@${node_ip} "mkdir -p /opt/cdh6.2.1/{pkg,script}"\n  done\n'})}),"\n",(0,l.jsx)(n.h4,{id:"254-\u62f7\u8d1djdk\u5b89\u88c5\u5305\u548cjdk\u5b89\u88c5\u811a\u672c\u5230\u5176\u4f59\u8282\u70b9",children:"2.5.4 \u62f7\u8d1djdk\u5b89\u88c5\u5305\u548cjdk\u5b89\u88c5\u811a\u672c\u5230\u5176\u4f59\u8282\u70b9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'source /opt/cdh6.2.1/script/env.sh\nexport NODE_IPS=(${NODE_IPS[1]} ${NODE_IPS[2]})\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    scp ${NODE_NAMES}:/opt/cdh6.2.1/script/jdk8_install.sh ${node_ip}:/opt/cdh6.2.1/script\n    scp ${NODE_NAMES}:/opt/cdh6.2.1/pkg/jdk-8u251-linux-x64.tar.gz ${node_ip}:/opt/cdh6.2.1/pkg \n  done\n'})}),"\n",(0,l.jsx)(n.h4,{id:"255-\u6267\u884cjdk\u5b89\u88c5\u811a\u672c",children:"2.5.5 \u6267\u884cjdk\u5b89\u88c5\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"source /opt/cdh6.2.1/script/env.sh\n#export NODE_IPS=(${NODE_IPS[1]} ${NODE_IPS[2]})\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo \">>> ${node_ip}\"  \n    ssh root@${node_ip} 'source /opt/cdh6.2.1/script/jdk8_install.sh'\n  done\n"})}),"\n",(0,l.jsx)(n.h3,{id:"26-\u914d\u7f6e\u65f6\u95f4\u540c\u6b65",children:"2.6 \u914d\u7f6e\u65f6\u95f4\u540c\u6b65"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u65f6\u95f4\u540c\u6b65\u53ef\u9009 ntp \u548c chrony\uff0c\u8fd9\u91cc\u9009\u62e9 chrony"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"http://www.ntp.org",children:"ntp\u5b98\u7f51"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://chrony.tuxfamily.org/",children:"chrony\u5b98\u7f51"})}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u26a0\ufe0fsed\u4e2d\u6709\u53d8\u91cf\u66ff\u6362\uff0c\u9700\u8981\u4f7f\u7528\u53cc\u5f15\u53f7"})})}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u91cc\u6709\u95ee\u672a\u89e3\u51b3\uff01\uff01\uff01"}),"\n",(0,l.jsx)(n.h4,{id:"261-\u5404\u8282\u70b9\u5b89\u88c5chrony",children:"2.6.1 \u5404\u8282\u70b9\u5b89\u88c5chrony"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'source /opt/cdh6.2.1/script/env.sh\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    ssh root@${node_ip} yum -y install chrony\n  done\n'})}),"\n",(0,l.jsx)(n.h4,{id:"262-cdh-master\u8282\u70b9\u4fee\u6539\u670d\u52a1\u5668\u5730\u5740\u4e3a\u963f\u91cc\u4e91",children:"2.6.2 cdh master\u8282\u70b9\u4fee\u6539\u670d\u52a1\u5668\u5730\u5740\u4e3a\u963f\u91cc\u4e91"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"source /opt/cdh6.2.1/script/env.sh\nsed -i.bak '3,6d' /etc/chrony.conf && sed -i -e '3cserver ntp1.aliyun.com iburst' -e \"/^#allow/callow ${NODE_SUBNET}\" /etc/chrony.conf\n"})}),"\n",(0,l.jsx)(n.h4,{id:"263-node\u8282\u70b9\u4fee\u6539\u540c\u6b65\u670d\u52a1\u5668\u4e3amaster\u8282\u70b9",children:"2.6.3 node\u8282\u70b9\u4fee\u6539\u540c\u6b65\u670d\u52a1\u5668\u4e3amaster\u8282\u70b9"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'# \u8fd9\u91cc\u9009\u62e9\u53e6\u5916\u4e24\u4e2a\u8282\u70b9\u6267\u884c\nsource /opt/cdh6.2.1/script/env.sh\nexport NODE_IPS=(${NODE_IPS[1]} ${NODE_IPS[2]})\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    ssh root@${node_ip} sed -i.bak \'3,6d\' /etc/chrony.conf && sed -i "3cserver ${NODE_NAMES[0]} iburst" /etc/chrony.conf\n  done\n'})}),"\n",(0,l.jsx)(n.h4,{id:"264-\u542f\u52a8chronyd\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f",children:"2.6.4 \u542f\u52a8chronyd\u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"source /opt/cdh6.2.1/script/env.sh\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo \">>> ${node_ip}\"\n    ssh root@${node_ip} 'systemctl enable chronyd && systemctl start chronyd'\n  done\n"})}),"\n",(0,l.jsx)(n.h4,{id:"265-\u68c0\u67e5\u7aef\u53e3chronyd\u76d1\u542cudp323\u7aef\u53e3",children:"2.6.5 \u68c0\u67e5\u7aef\u53e3\uff0cchronyd\u76d1\u542cudp323\u7aef\u53e3"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'source /opt/cdh6.2.1/script/env.sh\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    ssh root@${node_ip} netstat -nupl|grep chronyd\n  done\n'})}),"\n",(0,l.jsx)(n.h4,{id:"266-\u68c0\u67e5\u540c\u6b65",children:"2.6.6 \u68c0\u67e5\u540c\u6b65"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'source /opt/cdh6.2.1/script/env.sh\nfor node_ip in ${NODE_IPS[@]}\n  do\n    echo ">>> ${node_ip}"\n    ssh root@${node_ip} chronyc sources\n  done\n'})}),"\n",(0,l.jsx)(n.h3,{id:"27-\u5b89\u88c5mysql",children:"2.7 \u5b89\u88c5mysql"}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u4e8c\u8fdb\u5236\u5b89\u88c5\u7684mysql\u542f\u52a8\u811a\u672c ",(0,l.jsx)(n.code,{children:"/etc/init.d/mysql"})," \u548c  ",(0,l.jsx)(n.code,{children:"\u5b89\u88c5\u76ee\u5f55/mysql/bin/mysqld_safe"}),"  \u8fd9\u4e24\u4e2a\u6587\u4ef6\u4e2d\u90fd\u662f\u9ed8\u8ba4\u5728 ",(0,l.jsx)(n.code,{children:"/usr/local/mysql"}),"\uff0c\u5982\u679c\u5b89\u88c5\u76ee\u5f55\u4e0d\u5728 ",(0,l.jsx)(n.code,{children:"/usr/local/"})," \u4e0b\uff0c\u9700\u8981\u4fee\u6539\u8fd9\u4e24\u4e2a\u6587\u4ef6\u4e2d\u7684\u8def\u5f84\uff0c\u5373\u628a ",(0,l.jsx)(n.code,{children:"/usr/local"})," \u66ff\u6362\u4e3amysql\u5b89\u88c5\u76ee\u5f55\uff0c\u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539"]})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"sed -i 's#/usr/local#\u4f60\u7684mysql\u5b89\u88c5\u76ee\u5f55#g' /etc/init.d/mysql /\u4f60\u7684mysql\u5b89\u88c5\u76ee\u5f55/mysql/bin/mysqld_safe\n"})})]}),"\n",(0,l.jsx)(n.h4,{id:"271-\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305",children:"2.7.1 \u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5305"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://downloads.mysql.com/archives/community/",children:"mysql\u5b98\u65b9\u4e0b\u8f7d\u5730\u5740"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["mysql5.7.30 md5\u503c  ",(0,l.jsx)(n.code,{children:"611be3b18a30498b705db773293ad341"})]})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.30-linux-glibc2.12-x86_64.tar.gz\n"})}),"\n",(0,l.jsx)(n.h4,{id:"272-\u89e3\u538b\u7f29mysql\u4e8c\u8fdb\u5236\u5305\u5230usrlocal",children:"2.7.2 \u89e3\u538b\u7f29mysql\u4e8c\u8fdb\u5236\u5305\u5230/usr/local"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"tar xf mysql-5.7.30-linux-glibc2.12-x86_64.tar.gz -C /usr/local\n"})}),"\n",(0,l.jsx)(n.h4,{id:"273-\u4fee\u6539\u540d\u79f0\u505a\u8f6f\u8fde\u63a5",children:"2.7.3 \u4fee\u6539\u540d\u79f0\u3001\u505a\u8f6f\u8fde\u63a5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"mv /usr/local/mysql-5.7.30-linux-glibc2.12-x86_64 /usr/local/mysql-5.7.30 && \nln -s /usr/local/mysql-5.7.30 /usr/local/mysql\n"})}),"\n",(0,l.jsx)(n.h4,{id:"274-\u521b\u5efamysql\u7528\u6237",children:"2.7.4 \u521b\u5efamysql\u7528\u6237"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"useradd -M -s /bin/nologin mysql \n"})}),"\n",(0,l.jsx)(n.h4,{id:"275-\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6myql-5730\u4e8c\u8fdb\u5236\u5305\u9ed8\u8ba4\u6ca1\u6709mysql\u914d\u7f6e\u6587\u4ef6",children:"2.7.5 \u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0cmyql-5.7.30\u4e8c\u8fdb\u5236\u5305\u9ed8\u8ba4\u6ca1\u6709mysql\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u26a0\ufe0f\u5982\u679c\u6307\u5b9a\u4e86mysql\u7684socket\u6587\u4ef6\u4f4d\u7f6e\uff0c\u5219\u5fc5\u987b\u6dfb\u52a0",(0,l.jsx)(n.code,{children:"[client]"}),"\u6807\u7b7e\u5e76\u540c\u65f6\u6307\u5b9asocket\u6587\u4ef6\u4f4d\u7f6e\uff0c\u5426\u5219\u5ba2\u6237\u7aef\u4f1a\u9ed8\u8ba4\u4ece \xa0",(0,l.jsx)(n.code,{children:"/tmp"})," \u4e0b\u627esocket\u6587\u4ef6"]})})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u5907\u4efd/etc/my.cnf\nmv /etc/my.cnf /etc/my.cnf.old\n\n# \u4ee5\u4e0b\u914d\u7f6e\u4e3a\u6700\u7cbe\u7b80\u7248\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\ncat >> /etc/my.cnf <<'EOF'\n[mysqld]\nbasedir=/usr/local/mysql\ndatadir=/usr/local/mysql/data\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\nlog-error=/usr/local/mysql/data/error.log\n\n[client]\nsocket=/var/lib/mysql/mysql.sock\nEOF\n"})}),"\n",(0,l.jsx)(n.h4,{id:"276-\u521b\u5efasocker\u6587\u4ef6\u76ee\u5f55\u76ee\u5f55\u6587\u4ef6\u6388\u6743",children:"2.7.6 \u521b\u5efasocker\u6587\u4ef6\u76ee\u5f55\u3001\u76ee\u5f55\u6587\u4ef6\u6388\u6743"}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f\u5982\u679cmysql\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u4e86socket\u6587\u4ef6\u76ee\u5f55\uff0c\u5219\u8fd9\u4e2a\u76ee\u5f55\u7684\u6743\u9650\u5fc5\u987b\u662fmysql\uff0c\u5426\u5219mysql\u4f1a\u542f\u52a8\u5931\u8d25"})})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"mkdir -p /var/lib/mysql\nchown -R mysql.mysql /usr/local/mysql* /var/lib/mysql\nchown mysql.mysql /etc/my.cnf\n"})}),"\n",(0,l.jsx)(n.h4,{id:"277-\u62f7\u8d1d\u542f\u52a8\u811a\u672c",children:"2.7.7 \u62f7\u8d1d\u542f\u52a8\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld\n"})}),"\n",(0,l.jsx)(n.h4,{id:"278-\u521d\u59cb\u5316mysql",children:"2.7.8 \u521d\u59cb\u5316mysql"}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0fmysql-5.7.22\u521d\u59cb\u5316\u6ca1\u6709\u63d0\u793a\uff01\uff01\uff01"})})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"/usr/local/mysql/bin/mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53c2\u6570\u8bf4\u660e"})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u53c2\u6570"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u8bf4\u660e"})})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"--user"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u6307\u5b9amysql\u7528\u6237"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"--basedir"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u6307\u5b9amysql\u5b89\u88c5\u76ee\u5f55"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"--datadir"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u6307\u5b9amysql\u6570\u636e\u76ee\u5f55"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"--initialize-insecure"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"\u4e0d\u751f\u6210\u968f\u673a\u5bc6\u7801"})})]})]})]}),"\n",(0,l.jsx)(n.h4,{id:"279-\u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf",children:"2.7.9 \u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5bfc\u51famysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf\necho "export PATH=/usr/local/mysql/bin:$PATH" > /etc/profile.d/mysql.sh\n\n# \u4f7f\u914d\u7f6e\u751f\u6548\nsource /etc/profile\n'})}),"\n",(0,l.jsx)(n.h4,{id:"2710-\u914d\u7f6esystemd\u7ba1\u7406mysql",children:"2.7.10 \u914d\u7f6esystemd\u7ba1\u7406mysql"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"cat >> /etc/systemd/system/mysqld.service <<'EOF'\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf\nLimitNOFILE = 5000\nEOF\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2711-\u542f\u52a8mysql\u68c0\u67e5\u542f\u52a8",children:"2.7.11 \u542f\u52a8mysql\u3001\u68c0\u67e5\u542f\u52a8"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u91cd\u65b0\u52a0\u8f7dsystemd\u7cfb\u7edf\u670d\u52a1\nsystemctl daemon-reload\n\n# \u542f\u52a8mysql\u5e76\u52a0\u5165\u5f00\u673a\u81ea\u542f\nsystemctl start mysqld && systemctl enable mysqld\n\n# \u67e5\u770bmysql\u7aef\u53e3\n$ netstat -ntpl  | grep 3306\ntcp6       0      0 :::3306                 :::*                    LISTEN      31349/mysqld  \n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"wget https://archive.cloudera.com/cdh6/6.2.1-patch4069/redhat7/yum/ -P /etc/yum.repos.d/\n"})})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>i});var l=s(96540);const d={},r=l.createContext(d);function c(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);