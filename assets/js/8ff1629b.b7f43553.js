"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5419],{38074:(r,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var n=s(74848),t=s(28453);const o={},i="supervisor\u7ba1\u7406tomcat",c={id:"linux/linux\u670d\u52a1/supervisor/supervisor\u7ba1\u7406tomcat",title:"supervisor\u7ba1\u7406tomcat",description:"\u26a0\ufe0f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u662f\u4e0d\u5141\u8bb8\u4ee5root\u7528\u6237\u8fd0\u884ctomcat\u7684\uff0c\u6211\u4eec\u662f\u4ee5\u4e00\u4e2a\u6709root\u6743\u9650\u7684\u8fd0\u7ef4\u4e13\u7528\u7528\u6237\u6765\u8fd0\u884csupervisor\u548ctomcat\u7684",source:"@site/docs/linux/linux\u670d\u52a1/supervisor/supervisor\u7ba1\u7406tomcat.md",sourceDirName:"linux/linux\u670d\u52a1/supervisor",slug:"/linux/linux\u670d\u52a1/supervisor/supervisor\u7ba1\u7406tomcat",permalink:"/docs/linux/linux\u670d\u52a1/supervisor/supervisor\u7ba1\u7406tomcat",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"supervisor\u7ba1\u7406redis",permalink:"/docs/linux/linux\u670d\u52a1/supervisor/supervisor\u7ba1\u7406redis"},next:{title:"supervisor\u7ba1\u7406\u5927\u6570\u636e\u4efb\u52a1",permalink:"/docs/linux/linux\u670d\u52a1/supervisor/supervisor\u7ba1\u7406\u5927\u6570\u636e\u4efb\u52a1"}},l={},a=[];function u(r){const e={admonition:"admonition",code:"code",h1:"h1",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"supervisor\u7ba1\u7406tomcat",children:"supervisor\u7ba1\u7406tomcat"}),"\n",(0,n.jsx)(e.admonition,{type:"caution",children:(0,n.jsx)("h3",{style:{color:"red"},children:"\u26a0\ufe0f\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u662f\u4e0d\u5141\u8bb8\u4ee5root\u7528\u6237\u8fd0\u884ctomcat\u7684\uff0c\u6211\u4eec\u662f\u4ee5\u4e00\u4e2a\u6709root\u6743\u9650\u7684\u8fd0\u7ef4\u4e13\u7528\u7528\u6237\u6765\u8fd0\u884csupervisor\u548ctomcat\u7684"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.strong,{children:["supervisor\u914d\u7f6e\u6587\u4ef6 ",(0,n.jsx)(e.code,{children:"/etc/supervisor/supervisord.conf"})," \u4e2d\u5b9a\u4e49\u4e86include\uff0c\u56e0\u6b64\u5982\u679c\u60f3\u8981\u7ba1\u7406\u670d\u52a1\uff0c\u5c31\u9700\u8981\u7f16\u8f91 ",(0,n.jsx)(e.code,{children:"/etc/supervisor/config.d/*.ini"})," \u6587\u4ef6"]})}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:"[include] \nfiles = /etc/supervisor/config.d/*.ini\n"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.strong,{children:["\u7f16\u8f91tomcat\u670d\u52a1\u914d\u7f6e\u6587\u4ef6 ",(0,n.jsx)(e.code,{children:"/etc/supervisor/config.d/tomcat.ini"})]})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["tomcat\u5b89\u88c5\u76ee\u5f55 ",(0,n.jsx)(e.code,{children:"/usr/local/tomcat-8.5.56/"})]}),"\n",(0,n.jsxs)(e.li,{children:["jdk1.8\u5b89\u88c5\u76ee\u5f55 ",(0,n.jsx)(e.code,{children:"/usr/local/jdk1.8.0_251/"})]}),"\n"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:'cat > /etc/supervisor/config.d/tomcat.ini<<\'EOF\'\n[program:tomcat] \ncommand=/usr/local/tomcat-8.5.56/bin/startup.sh \nenvironment=JAVA_HOME="/usr/local/jdk1.8.0_251",JAVA_BIN="/usr/local/jdk1.8.0_251/bin"\nautostart = true \nautorestart=true \nredirect_stderr=true \nstdout_logfile=/var/log/supervisor/tomcat.log\nEOF\n'})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.strong,{children:["\u4fee\u6539tomcat\u542f\u52a8\u811a\u672c\u6587\u4ef6 ",(0,n.jsx)(e.code,{children:"startup.sh"})]})}),"\n",(0,n.jsxs)(e.p,{children:["\u672c\u6587\u793a\u4f8b\u662f ",(0,n.jsx)(e.code,{children:"/usr/local/tomcat-8.5.56/bin/startup.sh"})]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:'\u6700\u540e\u4e00\u884c\uff0c\u5c06start\u4fee\u6539\u4e3arun\n#exec "$PRGDIR"/"$EXECUTABLE" start "$@"\nexec "$PRGDIR"/"$EXECUTABLE" run "$@"\n\n\n# \u7528\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539\nsed -i.bak \'$s/start/run/\' startup.sh\n'})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"\u5c06tomcat\u52a0\u5165supervisor"})}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:"$ supervisorctl update tomcat\ntomcat: added process group\n"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"\u67e5\u770b\u72b6\u6001"})}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:"$ supervisorctl status tomcat\nnginx           RUNNING   pid 9464, uptime 0:00:03\n"})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"\u8be6\u7ec6\u914d\u7f6e"})}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:'[program:webServer] \ncommand=/data/webapp/webServer/bin/startup.sh \nenvironment=JAVA_HOME="/usr/local/jdk1.8.0/",JAVA_BIN="/usr/local/jdk1.8.0/bin"\nautostart = true \nautorestart=true \nredirect_stderr=true \nstdout_logfile=/data/logs/webServer/catalina.out \n'})})]})}function d(r={}){const{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(u,{...r})}):u(r)}},28453:(r,e,s)=>{s.d(e,{R:()=>i,x:()=>c});var n=s(96540);const t={},o=n.createContext(t);function i(r){const e=n.useContext(o);return n.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function c(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:i(r.components),n.createElement(o.Provider,{value:e},r.children)}}}]);