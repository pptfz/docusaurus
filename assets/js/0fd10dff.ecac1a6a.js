"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4204],{88729:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>d,toc:()=>i});var o=s(74848),r=s(28453);const c={},t="docker\u624b\u52a8\u6784\u5efa\u955c\u50cf",d={id:"\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u624b\u52a8\u6784\u5efa\u955c\u50cf",title:"docker\u624b\u52a8\u6784\u5efa\u955c\u50cf",description:"[toc]",source:"@site/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u624b\u52a8\u6784\u5efa\u955c\u50cf.md",sourceDirName:"\u4e91\u539f\u751f/\u5bb9\u5668/docker",slug:"/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u624b\u52a8\u6784\u5efa\u955c\u50cf",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u624b\u52a8\u6784\u5efa\u955c\u50cf",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"docker\u5de5\u5177",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5de5\u5177"},next:{title:"docker\u6570\u636e\u5377",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u6570\u636e\u5377"}},a={},i=[{value:"1.\u624b\u52a8\u521b\u5efadocker\u955c\u50cf\u6b65\u9aa4",id:"1\u624b\u52a8\u521b\u5efadocker\u955c\u50cf\u6b65\u9aa4",level:2},{value:"2.ssh\u670d\u52a1\u955c\u50cf\u5236\u4f5c\u793a\u4f8b",id:"2ssh\u670d\u52a1\u955c\u50cf\u5236\u4f5c\u793a\u4f8b",level:2},{value:"2.1 \u542f\u52a8\u4e00\u4e2a\u955c\u50cf",id:"21-\u542f\u52a8\u4e00\u4e2a\u955c\u50cf",level:3},{value:"2.2 \u955c\u50cf\u4e2d\u5b89\u88c5ssh\u670d\u52a1\u5e76\u542f\u52a8",id:"22-\u955c\u50cf\u4e2d\u5b89\u88c5ssh\u670d\u52a1\u5e76\u542f\u52a8",level:3},{value:"2.3 \u8bbe\u7f6e\u5bb9\u5668root\u5bc6\u7801",id:"23-\u8bbe\u7f6e\u5bb9\u5668root\u5bc6\u7801",level:3},{value:"2.4 \u7ec8\u7aef\u8bbf\u95ee\u521a\u521b\u5efa\u7684\u955c\u50cf 222\u7aef\u53e3",id:"24-\u7ec8\u7aef\u8bbf\u95ee\u521a\u521b\u5efa\u7684\u955c\u50cf-222\u7aef\u53e3",level:3},{value:"2.5 \u63d0\u4ea4\u955c\u50cf",id:"25-\u63d0\u4ea4\u955c\u50cf",level:3},{value:"2.6 \u6d4b\u8bd5\u955c\u50cf",id:"26-\u6d4b\u8bd5\u955c\u50cf",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"[toc]"}),"\n",(0,o.jsx)(n.h1,{id:"docker\u624b\u52a8\u6784\u5efa\u955c\u50cf",children:"docker\u624b\u52a8\u6784\u5efa\u955c\u50cf"}),"\n",(0,o.jsx)(n.h2,{id:"1\u624b\u52a8\u521b\u5efadocker\u955c\u50cf\u6b65\u9aa4",children:"1.\u624b\u52a8\u521b\u5efadocker\u955c\u50cf\u6b65\u9aa4"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"\u7b2c\u4e00\u6b65\u3001\u624b\u52a8\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\uff0c\u5728\u5bb9\u5668\u4e2d\u5b89\u88c5\u81ea\u5b9a\u4e49\u670d\u52a1"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"\u7b2c\u4e8c\u6b65\u3001docker commit \u628a\u5bb9\u5668\u63d0\u4ea4\u4e3a\u955c\u50cf"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"\u7b2c\u4e09\u6b65\u3001\u6d4b\u8bd5\u955c\u50cf\u529f\u80fd"})}),"\n",(0,o.jsx)(n.h2,{id:"2ssh\u670d\u52a1\u955c\u50cf\u5236\u4f5c\u793a\u4f8b",children:"2.ssh\u670d\u52a1\u955c\u50cf\u5236\u4f5c\u793a\u4f8b"}),"\n",(0,o.jsx)(n.h3,{id:"21-\u542f\u52a8\u4e00\u4e2a\u955c\u50cf",children:"2.1 \u542f\u52a8\u4e00\u4e2a\u955c\u50cf"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"1.\u542f\u52a8\u4e00\u4e2acentos6.9\n[root@docker1 ~]# docker run -it -p 222:22 centos:6.9 /bin/bash\n[root@ab815c87fb9c /]# \n\n2.\u4fee\u6539\u955c\u50cfyum\u6e90\n[root@ab815c87fb9c /]# curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo\n\n[root@ab815c87fb9c /]# curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo\n\n[root@ab815c87fb9c /]# yum clean all && yum makecache\n"})}),"\n",(0,o.jsx)(n.h3,{id:"22-\u955c\u50cf\u4e2d\u5b89\u88c5ssh\u670d\u52a1\u5e76\u542f\u52a8",children:"2.2 \u955c\u50cf\u4e2d\u5b89\u88c5ssh\u670d\u52a1\u5e76\u542f\u52a8"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"1.\u5b89\u88c5ssh\u670d\u52a1\n[root@ab815c87fb9c /]# yum -y install openssh-server\n\n2.\u542f\u52a8ssh  \u7b2c\u4e00\u6b21\u542f\u52a8\u670d\u52a1\uff0c\u76ee\u7684\u662f\u751f\u6210\u5bc6\u94a5\u5bf9\n[root@ab815c87fb9c ~]# service sshd start\nGenerating SSH2 RSA host key:                              [  OK  ]\nGenerating SSH1 RSA host key:                              [  OK  ]\nGenerating SSH2 DSA host key:                              [  OK  ]\nStarting sshd:                                             [  OK  ]\n\n3.\u9a8c\u8bc1\u670d\u52a1\u542f\u52a8\u72b6\u51b5\n[root@ab815c87fb9c ~]# service sshd status\nopenssh-daemon (pid  163) is running...\n\n[root@ab815c87fb9c ~]# netstat -ntpl\nActive Internet connections (only servers)\nProto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   \ntcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      163/sshd            \ntcp        0      0 :::22                       :::*                        LISTEN      163/sshd    \n"})}),"\n",(0,o.jsx)(n.h3,{id:"23-\u8bbe\u7f6e\u5bb9\u5668root\u5bc6\u7801",children:"2.3 \u8bbe\u7f6e\u5bb9\u5668root\u5bc6\u7801"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"[root@ab815c87fb9c /]# echo 1|passwd --stdin root\nChanging password for user root.\npasswd: all authentication tokens updated successfully.\n"})}),"\n",(0,o.jsx)(n.h3,{id:"24-\u7ec8\u7aef\u8bbf\u95ee\u521a\u521b\u5efa\u7684\u955c\u50cf-222\u7aef\u53e3",children:"2.4 \u7ec8\u7aef\u8bbf\u95ee\u521a\u521b\u5efa\u7684\u955c\u50cf 222\u7aef\u53e3"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2014.32.02.png",alt:"iShot2020-10-15 14.32.02"})}),"\n",(0,o.jsx)(n.h3,{id:"25-\u63d0\u4ea4\u955c\u50cf",children:"2.5 \u63d0\u4ea4\u955c\u50cf"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'1.\u4e34\u65f6\u9000\u51fa\u955c\u50cf\nctrl+p  \u7136\u540e  ctrl+q\n\n2.\u67e5\u770b\u5bb9\u5668\u4fe1\u606f\n[root@docker1 ~]# docker ps -al\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                      NAMES\nab815c87fb9c        centos:6.9          "/bin/bash"              24 minutes ago      Up 24 minutes       0.0.0.0:222->22/tcp        priceless_yonath\n\n3.\u63d0\u4ea4\u955c\u50cf  commit\u540e\u53ef\u4ee5\u52a0\u5bb9\u5668\u540d\u79f0\u6216\u5bb9\u5668ID\n[root@docker1 ~]# docker commit ab815c87fb9c centos6.9_ssh:v1.1\nsha256:0fcaf66caf5a6bd48c18e0172827aa04a2bf9fcb5a8f849b20f58a116deac5b7\n\n4.\u67e5\u770b\u955c\u50cf\n[root@docker1 ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED              SIZE\ncentos6.9_ssh       v1.1                0fcaf66caf5a        About a minute ago   504MB\n'})}),"\n",(0,o.jsx)(n.h3,{id:"26-\u6d4b\u8bd5\u955c\u50cf",children:"2.6 \u6d4b\u8bd5\u955c\u50cf"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:(0,o.jsx)("span",{style:{color:"red"},children:"\u6ce8\u610f\uff1a\u542f\u52a8\u7684\u5bb9\u5668\u63d0\u4f9b\u670d\u52a1\u7684\u540c\u65f6\u5fc5\u987b\u592f\u4f4f"})})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'1.\u542f\u52a8\u5bb9\u5668\uff0c\u4f7f\u7528\u521a\u624d\u63d0\u4ea4\u7684\u7684\u955c\u50cf,\u8fd9\u91cc\u4f7f\u7528 sshd -D \u4f7f\u5bb9\u5668\u80fd\u592f\u4f4f\n[root@docker1 ~]# docker run -d -p 223:22 centos6.9_ssh:v1.1 /usr/sbin/sshd -D\nead64de773abd3c1d08647575d096789a5a28d64960f225f7a42ec9cf01211ee\n\n2.\u67e5\u770b\u5bb9\u5668\n[root@docker1 ~]# docker ps -al\nCONTAINER ID        IMAGE                COMMAND               CREATED             STATUS              PORTS                 NAMES\nead64de773ab        centos6.9_ssh:v1.1   "/usr/sbin/sshd -D"   51 seconds ago      Up 50 seconds       0.0.0.0:223->22/tcp   stupefied_liskov\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var o=s(96540);const r={},c=o.createContext(r);function t(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);