"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2699],{66426:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>a});var t=r(74848),s=r(28453);const i={},d=void 0,o={id:"python/python\u8fdb\u9636/django/django \u89c6\u56fe\u51fd\u6570",title:"django \u89c6\u56fe\u51fd\u6570",description:"[toc]",source:"@site/docs/python/python\u8fdb\u9636/django/3.django \u89c6\u56fe\u51fd\u6570.md",sourceDirName:"python/python\u8fdb\u9636/django",slug:"/python/python\u8fdb\u9636/django/django \u89c6\u56fe\u51fd\u6570",permalink:"/docs/python/python\u8fdb\u9636/django/django \u89c6\u56fe\u51fd\u6570",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"django urls\u8def\u7531",permalink:"/docs/python/python\u8fdb\u9636/django/django urls\u8def\u7531"},next:{title:"django \u6a21\u7248\u6e32\u67d3",permalink:"/docs/python/python\u8fdb\u9636/django/django \u6a21\u7248\u6e32\u67d3"}},l={},a=[{value:"3.\u89c6\u56fe\u51fd\u6570",id:"3\u89c6\u56fe\u51fd\u6570",level:2},{value:"3.1 request\u5bf9\u8c61",id:"31-request\u5bf9\u8c61",level:3},{value:"3.2 \u89c6\u56fe\u51fd\u6570\u4f7f\u7528\u5c0f\u793a\u4f8b",id:"32-\u89c6\u56fe\u51fd\u6570\u4f7f\u7528\u5c0f\u793a\u4f8b",level:3},{value:"\u9519\u8bef\u7684\u793a\u4f8b",id:"\u9519\u8bef\u7684\u793a\u4f8b",level:3},{value:"<strong>3.3  \u54cd\u5e94\u65b9\u6cd5</strong>",id:"33--\u54cd\u5e94\u65b9\u6cd5",level:3},{value:"3.3.1render\t\u8fd4\u56dehtml\u9875\u9762",id:"331render\u8fd4\u56dehtml\u9875\u9762",level:4},{value:"3.3.2 HttpResponse\t\u8fd4\u56de\u5b57\u7b26\u4e32",id:"332-httpresponse\u8fd4\u56de\u5b57\u7b26\u4e32",level:4},{value:"3.3.3 redirect\t\u91cd\u5b9a\u5411",id:"333-redirect\u91cd\u5b9a\u5411",level:4},{value:"<strong>FBV\u5199\u6cd5</strong>",id:"fbv\u5199\u6cd5",level:5},{value:"<strong>CBV\u5199\u6cd5</strong>",id:"cbv\u5199\u6cd5",level:5},{value:"3.4 CBV\u548cFBV",id:"34-cbv\u548cfbv",level:3},{value:"3.4.1\u542b\u4e49",id:"341\u542b\u4e49",level:4},{value:"3.4.2 CBV",id:"342-cbv",level:4},{value:"3.4.3 FBV",id:"343-fbv",level:4},{value:"3.4.4 CBV\u548cFBV\u7684\u88c5\u9970\u5668",id:"344-cbv\u548cfbv\u7684\u88c5\u9970\u5668",level:4}];function h(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"[toc]"}),"\n",(0,t.jsx)(n.h2,{id:"3\u89c6\u56fe\u51fd\u6570",children:"3.\u89c6\u56fe\u51fd\u6570"}),"\n",(0,t.jsx)(n.h3,{id:"31-request\u5bf9\u8c61",children:"3.1 request\u5bf9\u8c61"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"request.path  \t#request.path\u5f53\u524d\u8bf7\u6c42\u8def\u5f84\nrequest.method \t#\u5f53\u524d\u8bf7\u6c42\u65b9\u6cd5(get,post...)\nrequest.GET \t\t#\u83b7\u53d6\u6240\u6709get\u8bf7\u6c42\u643a\u5e26\u8fc7\u6765\u7684\u6570\u636e\nrequest.POST \t\t#\u83b7\u53d6\u6240\u6709post\u8bf7\u6c42\u643a\u5e26\u8fc7\u6765\u7684\u6570\u636e\nrequest.body \t\t#\u83b7\u53d6\u6240\u6709post\u8bf7\u6c42\u643a\u5e26\u8fc7\u6765\u7684\u6570\u636e\u7684\u539f\u59cb\u683c\u5f0f\n"})}),"\n",(0,t.jsx)(n.h3,{id:"32-\u89c6\u56fe\u51fd\u6570\u4f7f\u7528\u5c0f\u793a\u4f8b",children:"3.2 \u89c6\u56fe\u51fd\u6570\u4f7f\u7528\u5c0f\u793a\u4f8b"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"urls\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"urlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    #\u7f16\u5199\u4e00\u4e2alogin\u767b\u9646\u89c6\u56fe\u6587\u4ef6\n    url(r'^login/', views.login),\n\n]\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\ndef login(request):\n    if request.method == 'GET':\n        return render(request,'login.html')\n    else:\n        uname = request.POST.get('username')\n        pwd = request.POST.get('password')\n\n        if uname == 'admin' and pwd == 'admin':\n            return HttpResponse('\u767b\u9646\u6210\u529f\uff01')\n        else:\n            return HttpResponse('\u767b\u9646\u5931\u8d25!!!')\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"html\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n</head>\n<body>\n<form action="" method="post">\n{#<form action="">#}\n    \u7528\u6237\u540d\uff1a<input type="text" name="username">\n    \u5bc6\u7801\uff1a<input type="password" name="password">\n    <input type="submit" value="\u767b\u9646">\n</form>\n\n</body>\n</html>\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4e3a\u4e86\u9a8c\u8bc1post\u8bf7\u6c42\uff0c\u6ce8\u91casettings\u6587\u4ef6\u4e2d\u7684\u4e00\u884c"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"Django\u9879\u76ee\u4e0b\u540c\u540d\u76ee\u5f55\u4e2d\u7684settings\u6587\u4ef6\uff0c48\u884c\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    # 'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u8bbf\u95ee"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/login1.gif",alt:"login1"})}),"\n",(0,t.jsx)(n.h3,{id:"\u9519\u8bef\u7684\u793a\u4f8b",children:"\u9519\u8bef\u7684\u793a\u4f8b"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"urls"}),"\u6587\u4ef6"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def login(request):\n    if request.method == 'POST':\n        return render(request,'login.html')\n    else:\n        uname = request.GET.get('username')\n        pwd = request.GET.get('password')\n\n        if uname == 'admin' and pwd == 'admin':\n            return HttpResponse('\u767b\u9646\u6210\u529f\uff01')\n        else:\n            return HttpResponse('\u767b\u9646\u5931\u8d25!!!')\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"html\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n</head>\n<body>\n{#<\u8fd9\u91cc\u6307\u5b9a\u63d0\u4ea4\u8bf7\u6c42\u65b9\u6cd5\u4e3apost>#}  \n<form action="" method="post">\n    \u7528\u6237\u540d\uff1a<input type="text" name="username">\n    \u5bc6\u7801\uff1a<input type="password" name="password">\n    <input type="submit" value="\u767b\u9646">\n</form>\n\n</body>\n</html>\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4e3a\u4e86\u9a8c\u8bc1post\u8bf7\u6c42\uff0c\u6ce8\u91casettings\u6587\u4ef6\u4e2d\u7684\u4e00\u884c"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"Django\u9879\u76ee\u4e0b\u540c\u540d\u76ee\u5f55\u4e2d\u7684settings\u6587\u4ef6\uff0c48\u884c\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    # 'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u6309\u7167\u4e4b\u524d\u7684\u7406\u89e3\u5e94\u8be5\u662f\u4f1a\u8fd4\u56de\u767b\u9646\u754c\u9762\uff0c\u56e0\u4e3a\u6211login.html\u6587\u4ef6\u4e2dform\u8868\u5355\u5199\u7684\u8bf7\u6c42\u65b9\u6cd5\u662fpost\uff0c\u800cviews\u89c6\u56fe\u6587\u4ef6\u4e2d\u7684\u903b\u8f91\u5224\u65ad\u662f\u5982\u679c\u8bf7\u6c42\u662fpost\u5219\u8fd4\u56de\u767b\u9646\u754c\u9762\uff0c\u4f46\u662f\u5b9e\u9645\u60c5\u51b5\u5e76\u4e0d\u662f\u8fd9\u6837"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.23.03.png",alt:"iShot2020-10-16 14.23.03"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4e3a\u4ec0\u4e48\u4f1a\u76f4\u63a5\u8fd4\u56de\u767b\u9646\u5931\u8d25\u5462\uff1f"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u539f\u56e0\uff1a\u5f53\u6d4f\u89c8\u5668\u6253\u5f00\u9875\u9762\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u7684\u65b9\u6cd5\u5c31\u662fGET\uff0c\u5f53\u70b9\u51fb\u767b\u9646\u90a3\u4e00\u523b\u624d\u4f1a\u6839\u636eform\u8868\u5355\u4e2d\u7684method\u6307\u5b9a\u7684\u8bf7\u6c42\u7c7b\u578b\u800c\u8fdb\u884c\u8f6c\u53d8\uff0c\u4f46\u662f\u73b0\u5728\u76f4\u63a5\u5c31\u662fGET\u65b9\u6cd5\uff0c\u56e0\u6b64\u5728login\u51fd\u6570\u7684\u5224\u65ad\u4e2d\u5c31\u76f4\u63a5\u8df3\u5230\u4e86\u7b2c\u4e00\u4e2aelse\u540e\u9762\uff0c\u4f46\u662f\u6b64\u65f6\u6839\u672c\u5c31\u6ca1\u6709\u7528\u6237\u767b\u9646\u754c\u9762\u51fa\u73b0\uff0c\u6240\u4ee5\u5c31\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u6240\u4ee5\u4f1a\u76f4\u63a5\u63d0\u793a\u767b\u9646\u5931\u8d25\uff01\uff01\uff01"})}),"\n",(0,t.jsx)(n.h3,{id:"33--\u54cd\u5e94\u65b9\u6cd5",children:(0,t.jsx)(n.strong,{children:"3.3  \u54cd\u5e94\u65b9\u6cd5"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"render\u8fd4\u56dehtml\u9875\u9762"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"HttpResponse\u8fd4\u56de\u5b57\u7b26\u4e32"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"redirect"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"331render\u8fd4\u56dehtml\u9875\u9762",children:"3.3.1render\t\u8fd4\u56dehtml\u9875\u9762"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"views\u6587\u4ef6\u4e2d\u7684\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#\u9700\u8981\u5bfc\u5165HttpResponse\nfrom django.shortcuts import render,HttpResponse\n\n# Create your views here.\n\ndef index(request):\n    return render(request,'index.html')\n"})}),"\n",(0,t.jsx)(n.h4,{id:"332-httpresponse\u8fd4\u56de\u5b57\u7b26\u4e32",children:"3.3.2 HttpResponse\t\u8fd4\u56de\u5b57\u7b26\u4e32"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"views\u6587\u4ef6\u4e2d\u7684\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#\u9700\u8981\u5bfc\u5165HttpResponse\nfrom django.shortcuts import render,HttpResponse\n\n# Create your views here.\n\n#HttpResponse\u65b9\u6cd5\u4e2d\u76f4\u63a5\u5199\u5b57\u7b26\u4e32\ndef index(request):\n    # return render(request,'index.html')\n    return HttpResponse('HttpResponse\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32')\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.23.24.png",alt:"iShot2020-10-16 14.23.24"})}),"\n",(0,t.jsx)(n.h4,{id:"333-redirect\u91cd\u5b9a\u5411",children:"3.3.3 redirect\t\u91cd\u5b9a\u5411"}),"\n",(0,t.jsx)(n.h5,{id:"fbv\u5199\u6cd5",children:(0,t.jsx)(n.strong,{children:"FBV\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"urls\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"urlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^home/', views.home),\n    url(r'^login/', views.login),\n]\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#redirect\u65b9\u6cd5\u9700\u8981\u5bfc\u5165redirect\nfrom django.shortcuts import render,HttpResponse,redirect\n# Create your views here.\n\ndef home(request):\n\n    return HttpResponse('\u767b\u9646\u6210\u529f')\n\n\ndef login(request):\n    if request.method == 'GET':\n        return render(request,'login.html')\n    else:\n        uname = request.POST.get('uname')\n        pwd = request.POST.get('pwd')\n\n        if uname == 'admin' and pwd == 'admin':\n            # return HttpResponse('\u767b\u9646\u6210\u529f')\n            return redirect('/home/')\n        else:\n            # return HttpResponse('\u767b\u9646\u5931\u8d25')\n            return redirect('/login/')\n\nredict\u662f\u91cd\u5b9a\u5411\uff0c\u4e4b\u524d\u6211\u4eec\u8bbf\u95ee\u7684\u65f6\u5019\u5982\u679c\u767b\u9646\u5931\u8d25\u5c31\u76f4\u63a5\u63d0\u793a\u767b\u9646\u5931\u8d25\n\u73b0\u5728\u4f7f\u7528\u4e86redict\u91cd\u5b9a\u5411\n\t\u5982\u679c\u767b\u9646\u6210\u529f\u5c31\u91cd\u5b9a\u5411\u5230\u53e6\u4e00\u4e2a\u8def\u5f84\u4e0b\uff0c\u8fd9\u91cc\u662f/home\uff0c\u4e5f\u5c31\u662f\u767b\u9646\u6210\u529f\u9875\u9762\n  \u5982\u679c\u767b\u9646\u5931\u8d25\u5c31\u8fd8\u662f\u91cd\u5b9a\u5411\u5230\u8bbf\u95ee\u8def\u5f84\u4e0b\uff0c\u8fd9\u91cc\u662f/login\uff0c\u4e5f\u5c31\u662f\u767b\u9646\u754c\u9762        \n"})}),"\n",(0,t.jsx)(n.h5,{id:"cbv\u5199\u6cd5",children:(0,t.jsx)(n.strong,{children:"CBV\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"urls\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"urlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    # url(r'^login/', views.login),\n    url(r'^login/', views.LoginView.as_view()),\n]\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#redirect\u65b9\u6cd5\u9700\u8981\u5bfc\u5165redirect\nfrom django.shortcuts import render,HttpResponse,redirect\nfrom django.views import View   #CBV\u5199\u6cd5\u4e2d\u9700\u8981\u5bfc\u5165View\n# Create your views here.\n\ndef home(request):\n\n    return HttpResponse('\u767b\u9646\u6210\u529f')\n\nclass LoginView(View):\n    def get(self,request):\n        return render(request, 'login.html')\n\n    def post(self,request):\n        uname = request.POST.get('username')\n        pwd = request.POST.get('password')\n\n        if uname == 'admin' and pwd == 'admin':\n            # return HttpResponse('\u767b\u9646\u6210\u529f')\n            return redirect('/home/')\n        else:\n            # return HttpResponse('\u767b\u9646\u5931\u8d25')\n            return redirect('/login/')\n          \n          \nredict\u662f\u91cd\u5b9a\u5411\uff0c\u4e4b\u524d\u6211\u4eec\u8bbf\u95ee\u7684\u65f6\u5019\u5982\u679c\u767b\u9646\u5931\u8d25\u5c31\u76f4\u63a5\u63d0\u793a\u767b\u9646\u5931\u8d25\n\u73b0\u5728\u4f7f\u7528\u4e86redict\u91cd\u5b9a\u5411\n\t\u5982\u679c\u767b\u9646\u6210\u529f\u5c31\u91cd\u5b9a\u5411\u5230\u53e6\u4e00\u4e2a\u8def\u5f84\u4e0b\uff0c\u8fd9\u91cc\u662f/home\uff0c\u4e5f\u5c31\u662f\u767b\u9646\u6210\u529f\u9875\u9762\n  \u5982\u679c\u767b\u9646\u5931\u8d25\u5c31\u8fd8\u662f\u91cd\u5b9a\u5411\u5230\u8bbf\u95ee\u8def\u5f84\u4e0b\uff0c\u8fd9\u91cc\u662f/login\uff0c\u4e5f\u5c31\u662f\u767b\u9646\u754c\u9762           \n"})}),"\n",(0,t.jsx)(n.h3,{id:"34-cbv\u548cfbv",children:"3.4 CBV\u548cFBV"}),"\n",(0,t.jsx)(n.h4,{id:"341\u542b\u4e49",children:"3.4.1\u542b\u4e49"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.strong,{children:["FBV",":function"," based view :\u57fa\u4e8e\u51fd\u6570\u7684\u89c6\u56fe\u903b\u8f91"]})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.strong,{children:["CBV",":class"," based view :\u57fa\u4e8e\u7c7b\u7684\u89c6\u56fe\u903b\u8f91"]})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"342-cbv",children:"3.4.2 CBV"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"CBV\u4e2durl\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:" # url(r'^login/', views.login),\n url(r'^login/', views.LoginView.as_view()),\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"CBV\u4e2dviews\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse,redirect\nfrom django.views import View   #CBV\u5199\u6cd5\u4e2d\u9700\u8981\u5bfc\u5165View\n# Create your views here.\n\nclass LoginView(View):\n    def get(self,request):\n        return render(request, 'login.html')\n\n    def post(self,request):\n        uname = request.POST.get('username')\n        pwd = request.POST.get('password')\n\n        if uname == 'admin' and pwd == 'admin':\n            # return HttpResponse('\u767b\u9646\u6210\u529f')\n            return redirect('/home/')\n        else:\n            # return HttpResponse('\u767b\u9646\u5931\u8d25')\n            return redirect('/login/')\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"CBV\u4e2d\u6e90\u7801\u91cd\u70b9"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"    def dispatch(self, request, *args, **kwargs):  #\u6839\u636e\u8bf7\u6c42\u65b9\u6cd5\u53bb\u5206\u53d1\u5bf9\u5e94\u7684\u7c7b\u53d1\u653e\u6765\u6267\u884c\n        # Try to dispatch to the right method; if a method doesn't exist,\n        # defer to the error handler. Also defer to the error handler if the\n        # request method isn't on the approved list.\n        if request.method.lower() in self.http_method_names:  \n            handler = getattr(self, request.method.lower(), self.http_method_not_allowed)  #\u53cd\u5c04!!!!\n        else:\n            handler = self.http_method_not_allowed\n        return handler(request, *args, **kwargs)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"CBV\u4e2d\u91cd\u5199dispatch\u65b9\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class LoginView(View):\n    def dispatch(self, request, *args, **kwargs):\n        print(111)\n        # print(request.META)  #http\u6240\u6709\u76f8\u5173\u8bf7\u6c42\u5934\u4fe1\u606f\n        ret = super().dispatch(request, *args, **kwargs) #render(request, 'login.html')\n        print(222)\n        return ret\n    def get(self,request):\n        print('this is get method!!!')\n        return render(request, 'login.html')\n    def post(self,request):\n        uname = request.POST.get('username')\n        pwd = request.POST.get('password')\n        if uname == 'admin' and pwd == 'admin':\n            return redirect('/home/')\n        else:\n            return redirect('/login/')\n"})}),"\n",(0,t.jsx)(n.h4,{id:"343-fbv",children:"3.4.3 FBV"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"FBV\u4e2durl\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"url(r'^login/', views.login),\n#url(r'^login/', views.LoginView.as_view()),\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"FBV\u4e2dviews\u5199\u6cd5"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse,redirect\n# Create your views here.\n\ndef login(request):\n    if request.method == 'GET':\n        return render(request,'login.html')\n    else:\n        uname = request.POST.get('uname')\n        pwd = request.POST.get('pwd')\n\n        if uname == 'admin' and pwd == 'admin':\n            # return HttpResponse('\u767b\u9646\u6210\u529f')\n            return redirect('/home/')\n        else:\n            # return HttpResponse('\u767b\u9646\u5931\u8d25')\n            return redirect('/login/')\n"})}),"\n",(0,t.jsx)(n.h4,{id:"344-cbv\u548cfbv\u7684\u88c5\u9970\u5668",children:"3.4.4 CBV\u548cFBV\u7684\u88c5\u9970\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def func(f):\n    def foo(request):\n        print(111)\n        ret = f(request)\n        print(222)\n        return ret\n    return foo\n\n\n#FBV \u6a21\u5f0f\u4e0b,\u548c\u666e\u901a\u51fd\u6570\u52a0\u88c5\u9970\u5668\u662f\u4e00\u6837\u7684\u5199\u6cd5\n    @func   \n    def home(request):\n        print('home')\n        return HttpResponse('\u4f60\u61c2\u4ec0\u4e48\u662f\u88c5\u9970\u5668\u5417\uff1f')\n    \n    \nCBV\u52a0\u88c5\u9970\u7684\u4e09\u4e2a\u59ff\u52bf:\n    # @method_decorator(func,name='get') \u4f4d\u7f6e3\n    class LoginView(View):\n        # @method_decorator(func) #\u4f4d\u7f6e2\n        def dispatch(self, request, *args, **kwargs):\n            print('aaaa')\n            ret = super().dispatch(request, *args, **kwargs) #render(request, 'login.html')\n            print('bbbb')\n            return ret\n        @method_decorator(func)  #\u4f4d\u7f6e1\n        def get(self,request):\n            print('this is get method!!!')\n            return render(request, 'login.html')\n\n        def post(self,request):\n            uname = request.POST.get('username')\n            pwd = request.POST.get('password')\n            if uname == 'admin' and pwd == 'admin':\n                return redirect('/home/')\n            else:\n                return redirect('/login/')\n"})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>o});var t=r(96540);const s={},i=t.createContext(s);function d(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);