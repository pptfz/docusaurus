"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[837],{91120:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>t,metadata:()=>m,toc:()=>i});var l=e(74848),a=e(28453);const t={},r="mysql\u591a\u5b9e\u4f8b-5.7.23",m={id:"\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636/mysql\u591a\u5b9e\u4f8b-5.7.23",title:"mysql\u591a\u5b9e\u4f8b-5.7.23",description:"[toc]",source:"@site/docs/\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636/mysql\u591a\u5b9e\u4f8b-5.7.23.md",sourceDirName:"\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636",slug:"/\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636/mysql\u591a\u5b9e\u4f8b-5.7.23",permalink:"/docs/\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636/mysql\u591a\u5b9e\u4f8b-5.7.23",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"mysql\u591a\u5b9e\u4f8b-5.6.40",permalink:"/docs/\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636/mysql\u591a\u5b9e\u4f8b-5.6.40"},next:{title:"mysql\u666e\u901a\u4e3b\u4ece\u590d\u5236",permalink:"/docs/\u6570\u636e\u5e93/mysql/mysql\u8fdb\u9636/mysql\u666e\u901a\u4e3b\u4ece\u590d\u5236"}},d={},i=[{value:"1.mysql\u591a\u5b9e\u4f8b\u4ecb\u7ecd",id:"1mysql\u591a\u5b9e\u4f8b\u4ecb\u7ecd",level:2},{value:"1.1 \u4ec0\u4e48\u662fMySQL\u591a\u5b9e\u4f8b",id:"11-\u4ec0\u4e48\u662fmysql\u591a\u5b9e\u4f8b",level:3},{value:"1.2 MySQL\u591a\u5b9e\u4f8b\u7684\u7279\u70b9\u6709\u4ee5\u4e0b\u51e0\u70b9",id:"12-mysql\u591a\u5b9e\u4f8b\u7684\u7279\u70b9\u6709\u4ee5\u4e0b\u51e0\u70b9",level:3},{value:"1.3 \u90e8\u7f72mysql\u591a\u5b9e\u4f8b\u7684\u4e24\u79cd\u65b9\u5f0f",id:"13-\u90e8\u7f72mysql\u591a\u5b9e\u4f8b\u7684\u4e24\u79cd\u65b9\u5f0f",level:3},{value:"1.4 \u540c\u4e00\u5f00\u53d1\u73af\u5883\u4e0b\u5b89\u88c5\u4e24\u4e2a\u6570\u636e\u5e93\uff0c\u5fc5\u987b\u5904\u7406\u4ee5\u4e0b\u95ee\u9898",id:"14-\u540c\u4e00\u5f00\u53d1\u73af\u5883\u4e0b\u5b89\u88c5\u4e24\u4e2a\u6570\u636e\u5e93\u5fc5\u987b\u5904\u7406\u4ee5\u4e0b\u95ee\u9898",level:3},{value:"2.mysql\u591a\u5b9e\u4f8b\u5b89\u88c5\u8def\u5f84\u8bf4\u660e",id:"2mysql\u591a\u5b9e\u4f8b\u5b89\u88c5\u8def\u5f84\u8bf4\u660e",level:2},{value:"3.\u5b89\u88c5\u90e8\u7f72\u8fc7\u7a0b",id:"3\u5b89\u88c5\u90e8\u7f72\u8fc7\u7a0b",level:2},{value:"3.1 \u5b89\u88c5\u4f9d\u8d56\u5305",id:"31-\u5b89\u88c5\u4f9d\u8d56\u5305",level:3},{value:"3.2 \u521b\u5efamysql\u7528\u6237\u548c\u7ec4",id:"32-\u521b\u5efamysql\u7528\u6237\u548c\u7ec4",level:3},{value:"3.3 \u4e0b\u8f7dmysql-5.7.23\u4e8c\u8fdb\u5236\u5305",id:"33-\u4e0b\u8f7dmysql-5723\u4e8c\u8fdb\u5236\u5305",level:3},{value:"3.4 \u89e3\u538b\u7f29\u5e76\u4fee\u6539\u76ee\u5f55\u540d\u79f0",id:"34-\u89e3\u538b\u7f29\u5e76\u4fee\u6539\u76ee\u5f55\u540d\u79f0",level:3},{value:"3.5 \u4fee\u6539\u76ee\u5f55\u6240\u6709\u8005\u4e3amysql",id:"35-\u4fee\u6539\u76ee\u5f55\u6240\u6709\u8005\u4e3amysql",level:3},{value:"3.6 \u521b\u5efa3\u4e2amysql\u5b89\u88c5\u76ee\u5f55",id:"36-\u521b\u5efa3\u4e2amysql\u5b89\u88c5\u76ee\u5f55",level:3},{value:"3.7 \u5c06mysql\u5305\u5206\u522b\u62f7\u8d1d\u52303\u4e2a\u5b89\u88c5\u76ee\u5f55",id:"37-\u5c06mysql\u5305\u5206\u522b\u62f7\u8d1d\u52303\u4e2a\u5b89\u88c5\u76ee\u5f55",level:3},{value:"3.8 \u505a\u8f6f\u8fde\u63a5",id:"38-\u505a\u8f6f\u8fde\u63a5",level:3},{value:"3.9 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",id:"39-\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",level:3},{value:"3.10 \u62f7\u8d1d\u542f\u52a8\u811a\u672c",id:"310-\u62f7\u8d1d\u542f\u52a8\u811a\u672c",level:3},{value:"3.11 \u521d\u59cb\u5316mysql",id:"311-\u521d\u59cb\u5316mysql",level:3},{value:"3.12 \u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf",id:"312-\u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf",level:3},{value:"3.13 \u914d\u7f6esystemd\u7ba1\u7406mysql",id:"313-\u914d\u7f6esystemd\u7ba1\u7406mysql",level:3},{value:"3.14 \u542f\u52a8mysql\u3001\u68c0\u67e5\u542f\u52a8",id:"314-\u542f\u52a8mysql\u68c0\u67e5\u542f\u52a8",level:3},{value:"3.15 \u8fdb\u5165mysql\uff0c\u8bbe\u7f6e\u5bc6\u7801",id:"315-\u8fdb\u5165mysql\u8bbe\u7f6e\u5bc6\u7801",level:3},{value:"3.16 \u8bbe\u7f6e\u5feb\u6377\u767b\u9646",id:"316-\u8bbe\u7f6e\u5feb\u6377\u767b\u9646",level:3},{value:"\u6269\u5c55\uff1a\u57fa\u4e8e\u4ee5\u4e0a\u591a\u5b9e\u4f8b\u5b9e\u73b0mysql\u4e3b\u4ece\u590d\u5236",id:"\u6269\u5c55\u57fa\u4e8e\u4ee5\u4e0a\u591a\u5b9e\u4f8b\u5b9e\u73b0mysql\u4e3b\u4ece\u590d\u5236",level:2},{value:"1.\u7f16\u8f91\u4e3b\u5e933306\uff08master\uff09\u914d\u7f6e\u6587\u4ef6/etc/my-3306.cnf",id:"1\u7f16\u8f91\u4e3b\u5e933306master\u914d\u7f6e\u6587\u4ef6etcmy-3306cnf",level:3},{value:"2.\u521b\u5efa\u4e13\u7528\u590d\u5236\u7528\u6237",id:"2\u521b\u5efa\u4e13\u7528\u590d\u5236\u7528\u6237",level:3},{value:"3.\u67e5\u770bmaster\u72b6\u6001",id:"3\u67e5\u770bmaster\u72b6\u6001",level:3},{value:"4.\u7f16\u8f91\u4ece\u5e93\u914d\u7f6e\u6587\u4ef6",id:"4\u7f16\u8f91\u4ece\u5e93\u914d\u7f6e\u6587\u4ef6",level:3},{value:"5.\u8bbe\u7f6eslave\u4ecemaster\u62c9\u53d6binlog\u53ca\u62c9\u53d6\u7684\u4f4d\u7f6e",id:"5\u8bbe\u7f6eslave\u4ecemaster\u62c9\u53d6binlog\u53ca\u62c9\u53d6\u7684\u4f4d\u7f6e",level:3},{value:"6.\u9a8c\u8bc1\uff0c\u57283306\u4e2d\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u770b3307\u548c3308\u662f\u5426\u4f1a\u540c\u6b65",id:"6\u9a8c\u8bc1\u57283306\u4e2d\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u770b3307\u548c3308\u662f\u5426\u4f1a\u540c\u6b65",level:3}];function y(s){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...s.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"[toc]"}),"\n",(0,l.jsx)(n.h1,{id:"mysql\u591a\u5b9e\u4f8b-5723",children:"mysql\u591a\u5b9e\u4f8b-5.7.23"}),"\n",(0,l.jsx)(n.h2,{id:"1mysql\u591a\u5b9e\u4f8b\u4ecb\u7ecd",children:"1.mysql\u591a\u5b9e\u4f8b\u4ecb\u7ecd"}),"\n",(0,l.jsx)(n.h3,{id:"11-\u4ec0\u4e48\u662fmysql\u591a\u5b9e\u4f8b",children:"1.1 \u4ec0\u4e48\u662fMySQL\u591a\u5b9e\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"MySQL\u591a\u5b9e\u4f8b\u5c31\u662f\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5f00\u542f\u591a\u4e2a\u4e0d\u540c\u7684\u670d\u52a1\u7aef\u53e3\uff08\u5982\uff1a3306,3307\uff09\uff0c\u8fd0\u884c\u591a\u4e2aMySQL\u670d\u52a1\u8fdb\u7a0b\uff0c\u901a\u8fc7\u4e0d\u540c\u7684socket\u76d1\u542c\u4e0d\u540c\u7684\u670d\u52a1\u7aef\u53e3\u6765\u63d0\u4f9b\u5404\u81ea\u7684\u670d\u52a1"})}),"\n",(0,l.jsx)(n.h3,{id:"12-mysql\u591a\u5b9e\u4f8b\u7684\u7279\u70b9\u6709\u4ee5\u4e0b\u51e0\u70b9",children:"1.2 MySQL\u591a\u5b9e\u4f8b\u7684\u7279\u70b9\u6709\u4ee5\u4e0b\u51e0\u70b9"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1\uff1a\u6709\u6548\u5229\u7528\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u5f53\u5355\u4e2a\u670d\u52a1\u5668\u8d44\u6e90\u6709\u5269\u4f59\u65f6\uff0c\u53ef\u4ee5\u5145\u5206\u5229\u7528\u5269\u4f59\u7684\u8d44\u6e90\u63d0\u4f9b\u66f4\u591a\u7684\u670d\u52a1"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2\uff1a\u8282\u7ea6\u670d\u52a1\u5668\u8d44\u6e90"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3\uff1a\u8d44\u6e90\u4e92\u76f8\u62a2\u5360\u95ee\u9898\uff0c\u5f53\u67d0\u4e2a\u670d\u52a1\u5b9e\u4f8b\u670d\u52a1\u5e76\u53d1\u5f88\u9ad8\u65f6\u6216\u8005\u5f00\u542f\u6162\u67e5\u8be2\u65f6\uff0c\u4f1a\u6d88\u8017\u66f4\u591a\u7684\u5185\u5b58\u3001CPU\u3001\u78c1\u76d8IO\u8d44\u6e90\uff0c\u5bfc\u81f4\u670d\u52a1\u5668\u4e0a\u7684\u5176\u4ed6\u5b9e\u4f8b\u63d0\u4f9b\u670d\u52a1\u7684\u8d28\u91cf\u4e0b\u964d"})}),"\n",(0,l.jsx)(n.h3,{id:"13-\u90e8\u7f72mysql\u591a\u5b9e\u4f8b\u7684\u4e24\u79cd\u65b9\u5f0f",children:"1.3 \u90e8\u7f72mysql\u591a\u5b9e\u4f8b\u7684\u4e24\u79cd\u65b9\u5f0f"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u7b2c\u4e00\u79cd\u662f\u4f7f\u7528\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\u4e0d\u540c\u7684\u8fdb\u7a0b\u6765\u5b9e\u73b0\u591a\u5b9e\u4f8b\uff0c\u8fd9\u79cd\u65b9\u5f0f\u7684\u4f18\u52bf\u903b\u8f91\u7b80\u5355\uff0c\u914d\u7f6e\u7b80\u5355\uff0c\u7f3a\u70b9\u662f\u7ba1\u7406\u8d77\u6765\u4e0d\u592a\u65b9\u4fbf"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u7b2c\u4e8c\u79cd\u662f\u901a\u8fc7\u5b98\u65b9\u81ea\u5e26\u7684mysqld_multi\u4f7f\u7528\u5355\u72ec\u7684\u914d\u7f6e\u6587\u4ef6\u6765\u5b9e\u73b0\u591a\u5b9e\u4f8b\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u5236\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u914d\u7f6e\u4e0d\u592a\u65b9\u9762\uff0c\u4f18\u70b9\u662f\u7ba1\u7406\u8d77\u6765\u5f88\u65b9\u4fbf\uff0c\u96c6\u4e2d\u7ba1\u7406"})}),"\n",(0,l.jsx)(n.h3,{id:"14-\u540c\u4e00\u5f00\u53d1\u73af\u5883\u4e0b\u5b89\u88c5\u4e24\u4e2a\u6570\u636e\u5e93\u5fc5\u987b\u5904\u7406\u4ee5\u4e0b\u95ee\u9898",children:"1.4 \u540c\u4e00\u5f00\u53d1\u73af\u5883\u4e0b\u5b89\u88c5\u4e24\u4e2a\u6570\u636e\u5e93\uff0c\u5fc5\u987b\u5904\u7406\u4ee5\u4e0b\u95ee\u9898"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u914d\u7f6e\u6587\u4ef6\u5b89\u88c5\u8def\u5f84\u4e0d\u80fd\u76f8\u540c"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u6570\u636e\u5e93\u76ee\u5f55\u4e0d\u80fd\u76f8\u540c"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u542f\u52a8\u811a\u672c\u4e0d\u80fd\u540c\u540d"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u7aef\u53e3\u4e0d\u80fd\u76f8\u540c"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"socket\u6587\u4ef6\u7684\u751f\u6210\u8def\u5f84\u4e0d\u80fd\u76f8\u540c"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"2mysql\u591a\u5b9e\u4f8b\u5b89\u88c5\u8def\u5f84\u8bf4\u660e",children:"2.mysql\u591a\u5b9e\u4f8b\u5b89\u88c5\u8def\u5f84\u8bf4\u660e"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"mysql\u5b89\u88c5\u8def\u5f84"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\uff1a/data/mysql3306"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\uff1a/data/mysql3307"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u7b2c\u4e09\u4e2a\u5b9e\u4f8b\uff1a/data/mysql3308"})}),"\n",(0,l.jsx)(n.h2,{id:"3\u5b89\u88c5\u90e8\u7f72\u8fc7\u7a0b",children:"3.\u5b89\u88c5\u90e8\u7f72\u8fc7\u7a0b"}),"\n",(0,l.jsx)(n.h3,{id:"31-\u5b89\u88c5\u4f9d\u8d56\u5305",children:"3.1 \u5b89\u88c5\u4f9d\u8d56\u5305"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"yum -y install gcc gcc-c++ autoconf bison-devel ncurses-devel libaio-devel\n"})}),"\n",(0,l.jsx)(n.h3,{id:"32-\u521b\u5efamysql\u7528\u6237\u548c\u7ec4",children:"3.2 \u521b\u5efamysql\u7528\u6237\u548c\u7ec4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"groupadd mysql && useradd -g mysql -s /sbin/nologin mysql\n"})}),"\n",(0,l.jsx)(n.h3,{id:"33-\u4e0b\u8f7dmysql-5723\u4e8c\u8fdb\u5236\u5305",children:"3.3 \u4e0b\u8f7dmysql-5.7.23\u4e8c\u8fdb\u5236\u5305"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"wget https://downloads.mysql.com/archives/get/file/mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz\n"})}),"\n",(0,l.jsx)(n.h3,{id:"34-\u89e3\u538b\u7f29\u5e76\u4fee\u6539\u76ee\u5f55\u540d\u79f0",children:"3.4 \u89e3\u538b\u7f29\u5e76\u4fee\u6539\u76ee\u5f55\u540d\u79f0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"tar xf mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz && \\\nmv mysql-5.7.23-linux-glibc2.12-x86_64/ mysql-5.7.23\n"})}),"\n",(0,l.jsx)(n.h3,{id:"35-\u4fee\u6539\u76ee\u5f55\u6240\u6709\u8005\u4e3amysql",children:"3.5 \u4fee\u6539\u76ee\u5f55\u6240\u6709\u8005\u4e3amysql"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"chown -R mysql.mysql mysql-5.7.23\n"})}),"\n",(0,l.jsx)(n.h3,{id:"36-\u521b\u5efa3\u4e2amysql\u5b89\u88c5\u76ee\u5f55",children:"3.6 \u521b\u5efa3\u4e2amysql\u5b89\u88c5\u76ee\u5f55"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"mkdir -p /data/mysql330{6..8}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"37-\u5c06mysql\u5305\u5206\u522b\u62f7\u8d1d\u52303\u4e2a\u5b89\u88c5\u76ee\u5f55",children:"3.7 \u5c06mysql\u5305\u5206\u522b\u62f7\u8d1d\u52303\u4e2a\u5b89\u88c5\u76ee\u5f55"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"for i in {6..8};do cp -rp mysql-5.7.23  /data/mysql330$i ;done\n"})}),"\n",(0,l.jsx)(n.h3,{id:"38-\u505a\u8f6f\u8fde\u63a5",children:"3.8 \u505a\u8f6f\u8fde\u63a5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"for i in {6..8};do ln -s /data/mysql330$i/mysql-5.7.23 /data/mysql330$i/mysql;done\n"})}),"\n",(0,l.jsx)(n.h3,{id:"39-\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",children:"3.9 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"basedir\u3001datadir\u3001log-error\u3001port\u3001socket\u6587\u4ef6\u4f4d\u7f6e\u4e0d\u540c\uff0c\u5982\u679c\u8981\u505a\u4e3b\u4ece\uff0cserverid\u8981\u4e0d\u540c"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u5907\u4efd\u539f\u6709/etc/my.cnf\nmv /etc/my.cnf /etc/my.cnf.old\n\n//\u7f16\u8f91\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\ncat >/etc/my-3306.cnf<<EOF\n[mysqld]\nuser=mysql \nbasedir=/data/mysql3306/mysql\ndatadir=/data/mysql3306/mysql/data\nlog-error=/data/mysql3306/mysql/data/error.log\nport=3306\nsocket=/data/mysql3306/mysql/mysql.sock\nserver_id=3306\nEOF\n\n//\u7f16\u8f91\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\ncat >/etc/my-3307.cnf<<EOF\n[mysqld]\nuser=mysql \nbasedir=/data/mysql3307/mysql\ndatadir=/data/mysql3307/mysql/data\nlog-error=/data/mysql3307/mysql/data/error.log\nport=3307\nsocket=/data/mysql3307/mysql/mysql.sock\nserver_id=3307\nEOF\n\n\n//\u7f16\u8f91\u7b2c\u4e09\u4e2a\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6\ncat >/etc/my-3308.cnf<<EOF\n[mysqld]\nuser=mysql \nbasedir=/data/mysql3308/mysql\ndatadir=/data/mysql3308/mysql/data\nlog-error=/data/mysql3308/mysql/data/error.log\nport=3308\nsocket=/data/mysql3308/mysql/mysql.sock\nserver_id=3308\nEOF\n"})}),"\n",(0,l.jsx)(n.h3,{id:"310-\u62f7\u8d1d\u542f\u52a8\u811a\u672c",children:"3.10 \u62f7\u8d1d\u542f\u52a8\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u5206\u522b\u62f7\u8d1d3\u4e2a\u5b9e\u4f8b\u542f\u52a8\u811a\u672c\nfor i in {6..8};do cp mysql-5.7.23/support-files/mysql.server /etc/init.d/mysqld330$i ;done\n\n//\u4fee\u6539\u6587\u4ef6\nsed -i.bak 's#/usr/local#/data/mysql3306#g' /etc/init.d/mysqld3306 /data/mysql3306/mysql/bin/mysqld_safe\n\nsed -i.bak 's#/usr/local#/data/mysql3307#g' /etc/init.d/mysqld3307 /data/mysql3307/mysql/bin/mysqld_safe\n\nsed -i.bak 's#/usr/local#/data/mysql3308#g' /etc/init.d/mysqld3308 /data/mysql3308/mysql/bin/mysqld_safe\n"})}),"\n",(0,l.jsx)(n.h3,{id:"311-\u521d\u59cb\u5316mysql",children:"3.11 \u521d\u59cb\u5316mysql"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u521d\u59cb\u5316\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\n/data/mysql3306/bin/mysqld --initialize-insecure --user=mysql --basedir=/data/mysql3306 --datadir=/data/mysql3306/data\n\n//\u521d\u59cb\u5316\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\n/data/mysql3306/bin/mysqld --initialize-insecure --user=mysql --basedir=/data/mysql3306 --datadir=/data/mysql3306/data\n\n//\u521d\u59cb\u5316\u7b2c\u4e09\u4e2a\u5b9e\u4f8b\n/data/mysql3306/bin/mysqld --initialize-insecure --user=mysql --basedir=/data/mysql3306 --datadir=/data/mysql3306/data\n"})}),"\n",(0,l.jsx)(n.h3,{id:"312-\u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf",children:"3.12 \u6dfb\u52a0mysql\u547d\u4ee4\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'//\u8fd9\u91cc\u53ea\u9700\u8981\u5bfc\u51fa\u4e00\u4e2a\u5373\u53ef\necho "export PATH=/data/mysql3306/mysql/bin:$PATH" > /etc/profile.d/mysql.sh\nsource /etc/profile\n'})}),"\n",(0,l.jsx)(n.h3,{id:"313-\u914d\u7f6esystemd\u7ba1\u7406mysql",children:"3.13 \u914d\u7f6esystemd\u7ba1\u7406mysql"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u914d\u7f6e\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\ncat >/etc/systemd/system/mysqld3306.service<<EOF\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/data/mysql3306/mysql/bin/mysqld --defaults-file=/etc/my-3306.cnf\nLimitNOFILE = 5000\nEOF\n\n\n\n//\u914d\u7f6e\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\ncat >/etc/systemd/system/mysqld3307.service<<EOF\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/data/mysql3307/mysql/bin/mysqld --defaults-file=/etc/my-3307.cnf\nLimitNOFILE = 5000\nEOF\n\n\n//\u914d\u7f6e\u7b2c\u4e09\u4e2a\u5b9e\u4f8b\ncat >/etc/systemd/system/mysqld3308.service<<EOF\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/data/mysql3308/mysql/bin/mysqld --defaults-file=/etc/my-3308.cnf\nLimitNOFILE = 5000e\nEOF\n"})}),"\n",(0,l.jsx)(n.h3,{id:"314-\u542f\u52a8mysql\u68c0\u67e5\u542f\u52a8",children:"3.14 \u542f\u52a8mysql\u3001\u68c0\u67e5\u542f\u52a8"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u542f\u52a8mysql\nsystemctl start mysqld3306 ; systemctl enable mysqld3306\nsystemctl start mysqld3307 ; systemctl enable mysqld3307\nsystemctl start mysqld3308 ; systemctl enable mysqld3308\n\n//\u68c0\u67e5\u542f\u52a8\nnetstat -ntpl|grep 330*\ntcp6       0      0 :::3306                 :::*                    LISTEN      16413/mysqld        \ntcp6       0      0 :::3307                 :::*                    LISTEN      16422/mysqld        \ntcp6       0      0 :::3308                 :::*                    LISTEN      16463/mysqld \n"})}),"\n",(0,l.jsx)(n.h3,{id:"315-\u8fdb\u5165mysql\u8bbe\u7f6e\u5bc6\u7801",children:"3.15 \u8fdb\u5165mysql\uff0c\u8bbe\u7f6e\u5bc6\u7801"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\u5bc6\u7801\nmysql -S /data/mysql3306/mysql/mysql.sock\nmysql> set password=password('3306');\nmysql> flush privileges;\n\n//\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\u5bc6\u7801\nmysql -S /data/mysql3307/mysql/mysql.sock\nmysql> set password=password('3307');\nmysql> flush privileges;\n\n//\u8bbe\u7f6e\u7b2c\u4e09\u4e2a\u5b9e\u4f8b\u5bc6\u7801\nmysql -S /data/mysql3308/mysql/mysql.sock\nmysql> set password=password('3308');\nmysql> flush privileges;\n"})}),"\n",(0,l.jsx)(n.h3,{id:"316-\u8bbe\u7f6e\u5feb\u6377\u767b\u9646",children:"3.16 \u8bbe\u7f6e\u5feb\u6377\u767b\u9646"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u539f\u6709\u767b\u9646\u65b9\u5f0f\uff0c\u9700\u8981\u6307\u5b9amysql\u7528\u6237\u540d\u5bc6\u7801\u548c\u5957\u63a5\u5b57\u6587\u4ef6\nmysql -uroot -p3306 -S /data/mysql3306/mysql/mysql.sock\n\n\u8bbe\u7f6e\u5feb\u6377\u767b\u9646\n//\u8bbe\u7f6e\u7b2c\u4e00\u4e2a\u5b9e\u4f8b\ncat >/usr/bin/mysql3306<<EOF\nmysql -uroot -p3306 -S /data/mysql3306/mysql/mysql.sock\nEOF\n\n//\u8bbe\u7f6e\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\ncat >/usr/bin/mysql3307<<EOF\nmysql -uroot -p3307 -S /data/mysql3307/mysql/mysql.sock\nEOF\n\n//\u8bbe\u7f6e\u7b2c\u4e09\u4e2a\u5b9e\u4f8b\ncat >/usr/bin/mysql3308<<EOF\nmysql -uroot -p3308 -S /data/mysql3308/mysql/mysql.sock\nEOF\n\n\n//\u8d4b\u4e88\u6267\u884c\u6743\u9650\nchmod +x /usr/bin/mysql330*\n\n//\u5feb\u6377\u767b\u9646\n\u8f93\u5165mysql3306\u5373\u53ef\u767b\u9646\n"})}),"\n",(0,l.jsx)("h3",{style:{color:"red"},children:"\u5230\u6b64\uff0cmysql\u591a\u5b9e\u4f8b\u914d\u7f6e\u5b8c\u6210\uff01\uff01\uff01"}),"\n",(0,l.jsx)(n.h2,{id:"\u6269\u5c55\u57fa\u4e8e\u4ee5\u4e0a\u591a\u5b9e\u4f8b\u5b9e\u73b0mysql\u4e3b\u4ece\u590d\u5236",children:"\u6269\u5c55\uff1a\u57fa\u4e8e\u4ee5\u4e0a\u591a\u5b9e\u4f8b\u5b9e\u73b0mysql\u4e3b\u4ece\u590d\u5236"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3306\u4e3a\u4e3b"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3307\u30013308\u4e3a\u4ece"})}),"\n",(0,l.jsx)(n.h3,{id:"1\u7f16\u8f91\u4e3b\u5e933306master\u914d\u7f6e\u6587\u4ef6etcmy-3306cnf",children:"1.\u7f16\u8f91\u4e3b\u5e933306\uff08master\uff09\u914d\u7f6e\u6587\u4ef6/etc/my-3306.cnf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"vim /etc/my-3306.cnf\t\t#[mysqld]\u4e0b\u65b9\u589e\u52a0\u4ee5\u4e0b3\u884c\nserver_id=3306\nlog_bin=binlog                                          \nlog_bin_index=binlog.index\n\n//\u91cd\u542fmysql\nsystemctl restart mysqld3306\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2\u521b\u5efa\u4e13\u7528\u590d\u5236\u7528\u6237",children:"2.\u521b\u5efa\u4e13\u7528\u590d\u5236\u7528\u6237"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"mysql3306\nmysql> grant replication slave on *.* to 'backup'@'10.0.0.%' identified by '3306';\nQuery OK, 0 rows affected (0.01 sec)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3\u67e5\u770bmaster\u72b6\u6001",children:"3.\u67e5\u770bmaster\u72b6\u6001"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"mysql> show master status;\n+---------------+----------+--------------+------------------+-------------------+\n| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+---------------+----------+--------------+------------------+-------------------+\n| binlog.000001 |      327 |              |                  |                   |\n+---------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4\u7f16\u8f91\u4ece\u5e93\u914d\u7f6e\u6587\u4ef6",children:"4.\u7f16\u8f91\u4ece\u5e93\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u7f16\u8f913307\u914d\u7f6e\u6587\u4ef6\n[root@mysql ~]# vim /etc/my-3307.cnf\t\t\t#[mysqld]\u4e0b\u65b9\u589e\u52a0\u4ee5\u4e0b3\u884c\nserver_id=3307\nrelay_log=/data/mysql3307/mysql/relay_log\t\t\t\nrelay_log_index=/data/mysql3307/mysql/relay_log.index\n\n//\u7f16\u8f913308\u914d\u7f6e\u6587\u4ef6\n[root@mysql ~]# vim /etc/my-3308.cnf\t\t\t#[mysqld]\u4e0b\u65b9\u589e\u52a0\u4ee5\u4e0b3\u884c\nserver_id=3308\nrelay_log=/data/mysql3308/mysql/relay_log\nrelay_log_index=/data/mysql3308/mysql/relay_log.index\n\n//\u91cd\u542fmysql\n[root@mysql ~]# systemctl restart mysqld3307 && systemctl restart mysqld3308\n"})}),"\n",(0,l.jsx)(n.h3,{id:"5\u8bbe\u7f6eslave\u4ecemaster\u62c9\u53d6binlog\u53ca\u62c9\u53d6\u7684\u4f4d\u7f6e",children:"5.\u8bbe\u7f6eslave\u4ecemaster\u62c9\u53d6binlog\u53ca\u62c9\u53d6\u7684\u4f4d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//3307\nmysql> change master to master_host='10.0.0.55',master_port=3306,master_user='backup',master_password='123',master_log_file='binlog.000001',master_log_pos=327;\nQuery OK, 0 rows affected, 2 warnings (0.06 sec)\n\n//\u542f\u52a8slave\nmysql> start slave;\nQuery OK, 0 rows affected (0.01 sec)\n\n//\u67e5\u770bslave\u72b6\u6001\nmysql> show slave status\\G\t\t\t#IO\u7ebf\u7a0b\u548cSQL\u7ebf\u7a0b\u90fd\u5fc5\u987b\u4e3aYES\nSlave_IO_Running: Yes\nSlave_SQL_Running: Yes\n\n------------------------------------------------------------------------------  \n\n//3308\nmysql> change master to master_host='10.0.0.55',master_port=3306,master_user='backup',master_password='123',master_log_file='binlog.000001',master_log_pos=327;\nQuery OK, 0 rows affected, 2 warnings (0.02 sec)\n\n//\u542f\u52a8slave\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\n//\u67e5\u770bslave\u72b6\u6001\nmysql> show slave status\\G\t\t\t#IO\u7ebf\u7a0b\u548cSQL\u7ebf\u7a0b\u90fd\u5fc5\u987b\u4e3aYES\nSlave_IO_Running: Yes\nSlave_SQL_Running: Yes\n"})}),"\n",(0,l.jsx)(n.h3,{id:"6\u9a8c\u8bc1\u57283306\u4e2d\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u770b3307\u548c3308\u662f\u5426\u4f1a\u540c\u6b65",children:"6.\u9a8c\u8bc1\uff0c\u57283306\u4e2d\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u770b3307\u548c3308\u662f\u5426\u4f1a\u540c\u6b65"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//3306\u4e2d\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\nmysql> create database bxb;\nQuery OK, 1 row affected (0.00 sec)\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| DB3306             |\n| bxb                |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n6 rows in set (0.00 sec)\n\n//3307\u4e2d\u67e5\u770b\u6570\u636e\u5e93\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| DB3307             |\n| bxb                |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n6 rows in set (0.00 sec)\n\n//3308\u4e2d\u67e5\u770b\u6570\u636e\u5e93\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| DB3308             |\n| bxb                |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n6 rows in set (0.01 sec)\n"})}),"\n",(0,l.jsx)("h3",{style:{color:"red"},children:"\u5230\u6b64\uff0cmysql\u57fa\u4e8e\u591a\u5b9e\u4f8b\u5b9e\u73b0\u4e3b\u4ece\u590d\u5236\u5b8c\u6210\uff01\uff01\uff01"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u9519\u8bef"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u57283308\uff08\u7b2c\u4e8c\u4e2a\u5b9e\u4f8b\uff09\u4e0a\u542f\u52a8slave\u62a5\u9519"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"//\u542f\u52a8slave\u62a5\u9519\uff0c\u4ece\u5b58\u50a8\u5e93\u521d\u59cb\u5316\u4e2d\u7ee7\u65e5\u5fd7\u4fe1\u606f\u7ed3\u6784\u5931\u8d25\nmysql> start slave;\nERROR 1872 (HY000): Slave failed to initialize relay log info structure from the repository\n\n\u89e3\u51b3\u65b9\u6cd5\uff1a\u5148\u91cd\u7f6eslave,\u7136\u540e\u505c\u6b62slvae\u518d\u91cd\u65b0change master\nmysql> reset slave all;\nQuery OK, 0 rows affected (0.02 sec)\nmysql> stop slave;\n"})})]})}function c(s={}){const{wrapper:n}={...(0,a.R)(),...s.components};return n?(0,l.jsx)(n,{...s,children:(0,l.jsx)(y,{...s})}):y(s)}},28453:(s,n,e)=>{e.d(n,{R:()=>r,x:()=>m});var l=e(96540);const a={},t=l.createContext(a);function r(s){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof s?s(n):{...n,...s}}),[n,s])}function m(s){let n;return n=s.disableParentContext?"function"==typeof s.components?s.components(a):s.components||a:r(s.components),l.createElement(t.Provider,{value:n},s.children)}}}]);