"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9145],{55346:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var l=s(74848),o=s(28453);const r={},i="mysql\u65e5\u5fd7",t={id:"\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840/mysql\u65e5\u5fd7",title:"mysql\u65e5\u5fd7",description:"[toc]",source:"@site/docs/\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840/mysql\u65e5\u5fd7.md",sourceDirName:"\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840",slug:"/\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840/mysql\u65e5\u5fd7",permalink:"/docs/\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840/mysql\u65e5\u5fd7",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"mysql\u6570\u636e\u7c7b\u578b\u548cSQL\u8bed\u53e5\u5206\u7c7b",permalink:"/docs/\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840/mysql\u6570\u636e\u7c7b\u578b\u548cSQL\u8bed\u53e5\u5206\u7c7b"},next:{title:"mysql\u7269\u7406\u5907\u4efd xtrabackup",permalink:"/docs/\u6570\u636e\u5e93/mysql/mysql\u57fa\u7840/mysql\u7269\u7406\u5907\u4efd xtrabackup"}},a={},d=[{value:"1.\u9519\u8bef\u65e5\u5fd7",id:"1\u9519\u8bef\u65e5\u5fd7",level:2},{value:"1.1 yum\u5b89\u88c5\u9ed8\u8ba4\u8def\u5f84",id:"11-yum\u5b89\u88c5\u9ed8\u8ba4\u8def\u5f84",level:3},{value:"1.2 \u4e8c\u8fdb\u5236\u5b89\u88c5\u3001\u7f16\u8bd1\u5b89\u88c5\u8def\u5f84",id:"12-\u4e8c\u8fdb\u5236\u5b89\u88c5\u7f16\u8bd1\u5b89\u88c5\u8def\u5f84",level:3},{value:"2.\u4e8c\u8fdb\u5236\u65e5\u5fd7",id:"2\u4e8c\u8fdb\u5236\u65e5\u5fd7",level:2},{value:"2.1 \u542b\u4e49",id:"21-\u542b\u4e49",level:3},{value:"2.2 \u4f5c\u7528",id:"22-\u4f5c\u7528",level:3},{value:"2.3 \u4e8c\u8fdb\u5236\u65e5\u5fd7\u6a21\u5f0f",id:"23-\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6a21\u5f0f",level:3},{value:"2.4 \u5f00\u542f\u65b9\u5f0f",id:"24-\u5f00\u542f\u65b9\u5f0f",level:3},{value:"2.5 \u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u64cd\u4f5c",id:"25-\u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u64cd\u4f5c",level:3},{value:"2.6 \u4e8b\u4ef6",id:"26-\u4e8b\u4ef6",level:3},{value:"2.6.1 \u4e8b\u4ef6\u542b\u4e49",id:"261-\u4e8b\u4ef6\u542b\u4e49",level:4},{value:"2.6.2 \u4e8b\u4ef6\u7279\u6027",id:"262-\u4e8b\u4ef6\u7279\u6027",level:4},{value:"2.6.3 \u5229\u7528\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6062\u590d\u6570\u636e\u793a\u4f8b",id:"263-\u5229\u7528\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6062\u590d\u6570\u636e\u793a\u4f8b",level:4},{value:"3.\u901a\u7528\u67e5\u8be2\u65e5\u5fd7",id:"3\u901a\u7528\u67e5\u8be2\u65e5\u5fd7",level:2},{value:"4.\u6162\u67e5\u8be2\u65e5\u5fd7",id:"4\u6162\u67e5\u8be2\u65e5\u5fd7",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:"[toc]"}),"\n",(0,l.jsx)(e.h1,{id:"mysql\u65e5\u5fd7",children:"mysql\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.h2,{id:"1\u9519\u8bef\u65e5\u5fd7",children:"1.\u9519\u8bef\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.h3,{id:"11-yum\u5b89\u88c5\u9ed8\u8ba4\u8def\u5f84",children:"1.1 yum\u5b89\u88c5\u9ed8\u8ba4\u8def\u5f84"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"/var/log/mysqld.log"})})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'mysql> show variables like "%log_error%";\n+---------------+---------------------+\n| Variable_name | Value               |\n+---------------+---------------------+\n| log_error     | /var/log/mysqld.log |\n+---------------+---------------------+\n1 row in set (0.01 sec)\n'})}),"\n",(0,l.jsx)(e.h3,{id:"12-\u4e8c\u8fdb\u5236\u5b89\u88c5\u7f16\u8bd1\u5b89\u88c5\u8def\u5f84",children:"1.2 \u4e8c\u8fdb\u5236\u5b89\u88c5\u3001\u7f16\u8bd1\u5b89\u88c5\u8def\u5f84"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"$MYSQL_HOME/data/\u4e3b\u673a\u540d.err"})})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"//\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\n[root@db01 ~]# vim /etc/my.cnf\n[mysqld]\nlog_error=/usr/local/mysql/data/error.log\n\n//\u67e5\u770b\u65b9\u5f0f\nmysql> show variables like 'log_error';\n+---------------+---------------------------------+\n| Variable_name | Value                           |\n+---------------+---------------------------------+\n| log_error     | /usr/local/mysql/data/error.log |\n+---------------+---------------------------------+\n1 row in set (0.00 sec)\n"})}),"\n",(0,l.jsx)(e.h2,{id:"2\u4e8c\u8fdb\u5236\u65e5\u5fd7",children:"2.\u4e8c\u8fdb\u5236\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.h3,{id:"21-\u542b\u4e49",children:"2.1 \u542b\u4e49"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"binlog\u65e5\u5fd7\uff0c\u8bb0\u5f55\u5bf9mysql\u7684\u6240\u6709\u66f4\u65b0\u7684\u64cd\u4f5c\uff0c\u63d2\u5165\u7684\u64cd\u4f5c(\u589e\u5220\u6539\u64cd\u4f5c)"})}),"\n",(0,l.jsx)(e.h3,{id:"22-\u4f5c\u7528",children:"2.2 \u4f5c\u7528"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u6062\u590d\u6570\u636e\uff0cMySQL AB\u590d\u5236\uff0c\u8bb0\u5f55\u6240\u6709\u5bf9\u6570\u636e\u5e93\u53d1\u751f\u4fee\u6539\u7684\u64cd\u4f5c"})}),"\n",(0,l.jsx)(e.h3,{id:"23-\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6a21\u5f0f",children:"2.3 \u4e8c\u8fdb\u5236\u65e5\u5fd7\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-14%2014.04.42.png",alt:"iShot2020-10-14 14.04.42"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"statement\uff1a\u8bed\u53e5\u6a21\u5f0f\uff0c\u4e0a\u56fe\u4e2d\u5c06update\u8bed\u53e5\u8fdb\u884c\u8bb0\u5f55\uff08\u9ed8\u8ba4\u6a21\u5f0f\uff09"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4f18\u70b9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u7b80\u5355\u660e\u4e86\uff0c\u5bb9\u6613\u88ab\u770b\u61c2\uff0c\u5c31\u662fsql\u8bed\u53e5\uff0c\u8bb0\u5f55\u65f6\u4e0d\u9700\u8981\u592a\u591a\u7684\u78c1\u76d8\u7a7a\u95f4"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7f3a\u70b9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u8bb0\u5f55\u4e0d\u591f\u4e25\u8c28"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"row\uff1a\u884c\u6a21\u5f0f\uff0c\u5373\u6570\u636e\u884c\u7684\u53d8\u5316\u8fc7\u7a0b\uff0c\u4e0a\u56fe\u4e2dAge=19\u4fee\u6539\u6210Age=20\u7684\u8fc7\u7a0b\u4e8b\u4ef6\u3002 mixed\uff1a\u4ee5\u4e0a\u4e24\u8005\u7684\u6df7\u5408\u6a21\u5f0f\u3002 \u4f01\u4e1a\u63a8\u8350\u4f7f\u7528row\u6a21\u5f0f"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4f18\u70b9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u8bb0\u5f55\u66f4\u52a0\u4e25\u8c28"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7f3a\u70b9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u6709\u53ef\u80fd\u4f1a\u9700\u8981\u66f4\u591a\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e0d\u592a\u5bb9\u6613\u88ab\u8bfb\u61c2"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"24-\u5f00\u542f\u65b9\u5f0f",children:"2.4 \u5f00\u542f\u65b9\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"//\u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7\n[root@db01 data]# vim /etc/my.cnf\n[mysqld]\nlog-bin=mysql-bin\nbinlog_format=row\n\n\n//\u6ce8\u610f:\u5728mysql5.7\u4e2d\u5f00\u542fbinlog\u5fc5\u987b\u8981\u52a0\u4e0aserver-id\u3002\n[root@db01 data]# vim /etc/my.cnf\n[mysqld]\nlog-bin=mysql-bin\nbinlog_format=row\nserver_id=1\n"})}),"\n",(0,l.jsx)(e.h3,{id:"25-\u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u64cd\u4f5c",children:"2.5 \u4e8c\u8fdb\u5236\u65e5\u5fd7\u7684\u64cd\u4f5c"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"//\u7269\u7406\u67e5\u770b\n[root@db01 data]# ll /usr/local/mysql/data/\n-rw-rw---- 1 mysql mysql      285 Mar  6  2017 mysql-bin.000001\n\n//\u547d\u4ee4\u884c\u67e5\u770b\nmysql> show binary logs;\n+------------------+-----------+\n| Log_name         | File_size |\n+------------------+-----------+\n| mysql-bin.000001 |       120 |\n+------------------+-----------+\n1 row in set (0.00 sec)\n\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000001 |      120 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n\n//\u67e5\u770bbinlog\u4e8b\u4ef6\nmysql> show binlog events in 'mysql-bin.000001';\n+------------------+-----+-------------+-----------+-------------+---------------------------------------+\n| Log_name         | Pos | Event_type  | Server_id | End_log_pos | Info                                  |\n+------------------+-----+-------------+-----------+-------------+---------------------------------------+\n| mysql-bin.000001 |   4 | Format_desc |         1 |         120 | Server ver: 5.6.40-log, Binlog ver: 4 |\n+------------------+-----+-------------+-----------+-------------+---------------------------------------+\n1 row in set (0.01 sec)\n"})}),"\n",(0,l.jsx)(e.h3,{id:"26-\u4e8b\u4ef6",children:"2.6 \u4e8b\u4ef6"}),"\n",(0,l.jsx)(e.h4,{id:"261-\u4e8b\u4ef6\u542b\u4e49",children:"2.6.1 \u4e8b\u4ef6\u542b\u4e49"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1.\u5728binlog\u4e2d\u6700\u5c0f\u7684\u8bb0\u5f55\u5355\u5143\u4e3aevent"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2.\u4e00\u4e2a\u4e8b\u52a1\u4f1a\u88ab\u62c6\u5206\u6210\u591a\u4e2a\u4e8b\u4ef6\uff08event\uff09"})}),"\n",(0,l.jsx)(e.h4,{id:"262-\u4e8b\u4ef6\u7279\u6027",children:"2.6.2 \u4e8b\u4ef6\u7279\u6027"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1.\u6bcf\u4e2aevent\u90fd\u6709\u4e00\u4e2a\u5f00\u59cb\u4f4d\u7f6e\uff08start position\uff09\u548c\u7ed3\u675f\u4f4d\u7f6e\uff08stop position\uff09"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2.\u6240\u8c13\u7684\u4f4d\u7f6e\u5c31\u662fevent\u5bf9\u6574\u4e2a\u4e8c\u8fdb\u5236\u7684\u6587\u4ef6\u7684\u76f8\u5bf9\u4f4d\u7f6e"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3.\u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e2d\uff0c\u524d120\u4e2aposition\u662f\u6587\u4ef6\u683c\u5f0f\u4fe1\u606f\u9884\u7559\u7a7a\u95f4"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4.MySQL\u7b2c\u4e00\u4e2a\u8bb0\u5f55\u7684\u4e8b\u4ef6\uff0c\u90fd\u662f\u4ece120\u5f00\u59cb\u7684"})}),"\n",(0,l.jsx)(e.h4,{id:"263-\u5229\u7528\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6062\u590d\u6570\u636e\u793a\u4f8b",children:"2.6.3 \u5229\u7528\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6062\u590d\u6570\u636e\u793a\u4f8b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:"1.\u4fee\u6539mysql\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e3arow\u6a21\u5f0f\n[root@db01 data]# vim /etc/my.cnf\n[mysqld]\nlog-bin=mysql-bin\nbinlog_format=row\n\n2.\u67e5\u770b\u4e8c\u8fdb\u5236\u65e5\u5fd7\u683c\u5f0f\nmysql> show variables like 'binlog_format';\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| binlog_format | ROW   |\n+---------------+-------+\n1 row in set (0.01 sec)\n\n3.\u67e5\u770bbinlog\u4fe1\u606f\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000001 |      120 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.05 sec)\n\n4.\u5148\u5237\u65b0\uff0c\u7136\u540e\u518d\u67e5\u770bbinlog\u4fe1\u606f\uff0c\u6b64\u65f6\u4f4d\u7f6e\u4e3a120\nmysql> flush logs;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000002 |      120 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n\n5.\u521b\u5efa\u4e00\u4e2abinlog\u5e93\nmysql> create database binlog;\nQuery OK, 1 row affected (0.01 sec)\n\n6.\u521b\u5efa\u4e00\u4e2a\u8868binlog_table\nmysql> use binlog;\nDatabase changed\nmysql> create table binlog_table(id int);\nQuery OK, 0 rows affected (0.03 sec)\n\n7.\u521b\u5efa\u5e93\u548c\u8868\u540e\u67e5\u770bbinlog\u4fe1\u606f\uff0c\u6b64\u65f6binlog\u4f4d\u7f6e\u4e3a331\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000003 |      331 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n\n8.\u5411\u8868\u4e2d\u63d2\u5165\u4e00\u6761\u6570\u636e\u5e76\u67e5\u770bbinlog\u4fe1\u606f\uff0c\u6b64\u65f6binlog\u4f4d\u7f6e\u4e3a533\nmysql> insert into binlog_table values(1);\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000003 |      533 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n\n9.\u5411\u8868\u4e2d\u63d2\u51652\u6761\u6570\u636e\u5e76\u67e5\u770bbinlog\u4fe1\u606f\uff0c\u6b64\u65f6binlog\u4f4d\u7f6e\u4e3a937\nmysql> insert into binlog_table values(2);\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> insert into binlog_table values(3);\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000002 |      937 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n\n10.\u5220\u9664\u4e00\u6761\u6570\u636e\u3001\u7136\u540e\u5220\u9664\u8868\u3001\u5e93\nmysql> select * from binlog_table;\n+------+\n| id   |\n+------+\n|    1 |\n|    2 |\n|    3 |\n+------+\n3 rows in set (0.00 sec)\n\nmysql> delete from binlog_table where id=1;\nQuery OK, 1 row affected (0.02 sec)\n\nmysql> drop table binlog_table;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> drop database binlog;\nQuery OK, 0 rows affected (0.01 sec)\n\n11.\u5f00\u59cb\u67e5\u627e\u8981\u622a\u53d6\u7684\u6bb5\uff0c\u8fd9\u91cc\u8981\u6062\u590d\u5220\u9664\u7684\u6570\u636e\u5e93\nmysqlbinlog --base64-output=decode-rows -vvv /usr/local/mysql/data/mysql-bin.000002\n[root@db02 data]# mysqlbinlog --base64-output=decode-rows -vvv /usr/local/mysql/data/mysql-bin.000002\n\n12.\u5f00\u59cb\u6062\u590d\uff0c\u6062\u590d\u524d\u4e00\u5b9a\u8981\u4e34\u65f6\u5173\u95ed\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff0c\u5426\u5219\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4f1a\u591a\u8bb0\u5f55\n#\u4e34\u65f6\u5173\u95ed\u4e8c\u8fdb\u5236\u65e5\u5fd7\nmysql> set sql_log_bin=0;\nQuery OK, 0 rows affected (0.01 sec)\n\n#\u622a\u53d6\u5e76\u5199\u5165\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\n[root@db02 data]# mysqlbinlog --start-position=120 --stop-position=1011 /usr/local/mysql/data/mysql-bin.000002 >/tmp/binlog.sql\n\n#\u5f00\u59cb\u6062\u590d\n[root@db02 data]# mysql -uroot -p </tmp/binlog.sql\n\n13.\u9a8c\u8bc1\u7ed3\u679c\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| binlog             |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n5 rows in set (0.00 sec)\nmysql> use binlog;\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql> show tables;\n+------------------+\n| Tables_in_binlog |\n+------------------+\n| binlog_table     |\n+------------------+\n1 row in set (0.00 sec)\n\nmysql> select * from binlog_table;\n+------+\n| id   |\n+------+\n|    1 |\n|    2 |\n|    3 |\n+------+\n3 rows in set (0.00 sec)\n"})}),"\n",(0,l.jsx)(e.h2,{id:"3\u901a\u7528\u67e5\u8be2\u65e5\u5fd7",children:"3.\u901a\u7528\u67e5\u8be2\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"/var/run/mysqld/mysqld.log"})})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'#\u5bf9MySQL\u6240\u6709\u589e\u5220\u6539\u67e5\u90fd\u4f1a\u8bb0\u5f55\uff0c\u9ed8\u8ba4\u5173\u95ed\nmysql> show variables like "%general%";\t\t\n+------------------+----------------------------+\n| Variable_name    | Value                      |\n+------------------+----------------------------+\n| general_log      | OFF                        |\n| general_log_file | /var/run/mysqld/mysqld.log |\n+------------------+----------------------------+\n2 rows in set (0.00 sec)\n\n\n#\u5f00\u542f\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\u540e\u624d\u4f1a\u6709\u6587\u4ef6/var/run/mysqld/mysqld.log \nmysql> set global general_log=on;\t\t\nQuery OK, 0 rows affected (0.00 sec)\t\n'})}),"\n",(0,l.jsx)(e.h2,{id:"4\u6162\u67e5\u8be2\u65e5\u5fd7",children:"4.\u6162\u67e5\u8be2\u65e5\u5fd7"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"/var/run/mysqld/mysqld-slow.log"})})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'#\u8bb0\u5f55\u67e5\u8be2\u65f6\u95f4\u957f\u7684\u8bed\u53e5\uff0c\u7528\u6765\u4f18\u5316\uff0c\u9ed8\u8ba410s\u4e3a\u6162\u67e5\u8be2\nmysql> show variables like "%slow%";\n+---------------------+---------------------------------+\n| Variable_name       | Value                           |\n+---------------------+---------------------------------+\n| log_slow_queries    | OFF                             |\n| slow_launch_time    | 2                               |\n| slow_query_log      | OFF                             |\n| slow_query_log_file | /var/run/mysqld/mysqld-slow.log |\n+---------------------+---------------------------------+\n4 rows in set (0.00 sec)\n\t\n#\u8bbe\u7f6e\u6162\u67e5\u8be2\u65e5\u5fd7\u5b58\u653e\u8def\u5f84\t\nmysql>set global slow_query_log_file=\u8def\u5f84\t\n\t\n#\u5f00\u542f\u6162\u67e5\u8be2\t\nmysql> set global slow_query_log=on;\t\t\nQuery OK, 0 rows affected (0.00 sec)\n\n#\u8bbe\u7f6e\u6162\u67e5\u8be2\u8d85\u65f6\u65f6\u95f4\nmysql> set long_query_time=2;\t\t\t\t\nQuery OK, 0 rows affected (0.00 sec)\n\t\n#\u6a21\u62df\u6162\u67e5\u8be2\u65f6\u95f4\u4e3a5s\t\nmysql> select sleep(5);\t\t\t\t\t\t\n+----------+\n| sleep(5) |\n+----------+\n|        0 |\n+----------+\n1 row in set (5.00 sec)\n\t\n#\u6b64\u65f6\u67e5\u770bMySQL\u6162\u67e5\u8be2\u65e5\u5fd7\u5c31\u53ef\u4ee5\u770b\u5230\u8d85\u65f6\u7684\u8bed\u53e5\t\n[root@mysql ~]# less /var/run/mysqld/mysqld-slow.log\t\t\t\n/usr/libexec/mysqld, Version: 5.1.73 (Source distribution). started with:\nTcp port: 3306  Unix socket: /var/lib/mysql/mysql.sock\nTime                 Id Command    Argument\n# Time: 171123  9:58:55\n# User@Host: root[root] @ mysql []\n# Query_time: 5.001586  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0\nuse DB1;\nSET timestamp=1511402335;\nselect sleep(5);\n'})})]})}function m(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>t});var l=s(96540);const o={},r=l.createContext(o);function i(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);