"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5415],{86546:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>p,contentTitle:()=>a,default:()=>x,frontMatter:()=>r,metadata:()=>c,toc:()=>o});var s=i(74848),t=i(28453);const r={},a="zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66",c={id:"linux/monitor/zabbix/zabbix3.4/zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66",title:"zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66",description:"[toc]",source:"@site/docs/linux/monitor/zabbix/zabbix3.4/10.zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66.md",sourceDirName:"linux/monitor/zabbix/zabbix3.4",slug:"/linux/monitor/zabbix/zabbix3.4/zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66",permalink:"/docs/linux/monitor/zabbix/zabbix3.4/zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"zabbix3.4\u8bbe\u7f6e\u90ae\u4ef6\u544a\u8b66\u5347\u7ea7",permalink:"/docs/linux/monitor/zabbix/zabbix3.4/zabbix3.4\u8bbe\u7f6e\u90ae\u4ef6\u544a\u8b66\u5347\u7ea7"},next:{title:"zabbix3.4\u4f7f\u7528\u9489\u9489\u544a\u8b66",permalink:"/docs/linux/monitor/zabbix/zabbix3.4/zabbix3.4\u4f7f\u7528\u9489\u9489\u544a\u8b66"}},p={},o=[{value:"\u7b2c\u4e00\u6b65\u3001\u6ce8\u518c\u4f01\u4e1a\u5fae\u4fe1\uff0c\u4e2a\u4eba\u5c31\u53ef\u4ee5\u6ce8\u518c\uff0c\u7136\u540e\u6309\u7167\u63d0\u793a\u586b\u5199\u76f8\u5173\u4fe1\u606f",id:"\u7b2c\u4e00\u6b65\u6ce8\u518c\u4f01\u4e1a\u5fae\u4fe1\u4e2a\u4eba\u5c31\u53ef\u4ee5\u6ce8\u518c\u7136\u540e\u6309\u7167\u63d0\u793a\u586b\u5199\u76f8\u5173\u4fe1\u606f",level:2},{value:"\u7b2c\u4e8c\u6b65\u3001\u767b\u9646\u4f01\u4e1a\u5fae\u4fe1",id:"\u7b2c\u4e8c\u6b65\u767b\u9646\u4f01\u4e1a\u5fae\u4fe1",level:2},{value:"\u7b2c\u4e09\u6b65 \u3001zabbix-server\u7aef\u914d\u7f6epython\u811a\u672c",id:"\u7b2c\u4e09\u6b65-zabbix-server\u7aef\u914d\u7f6epython\u811a\u672c",level:2},{value:"3.1 \u73af\u5883\u51c6\u5907",id:"31-\u73af\u5883\u51c6\u5907",level:3},{value:"3.2 \u7f16\u5199\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66\u811a\u672c",id:"32-\u7f16\u5199\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66\u811a\u672c",level:3},{value:"3.2.1 \u4f7f\u7528\u7ba1\u7406\u5458id",id:"321-\u4f7f\u7528\u7ba1\u7406\u5458id",level:4},{value:"3.2.2 \u4f01\u4e1a\u5fae\u4fe1\u673a\u5668\u4eba\u544a\u8b66",id:"322-\u4f01\u4e1a\u5fae\u4fe1\u673a\u5668\u4eba\u544a\u8b66",level:4},{value:"\u7b2c\u56db\u6b65\u3001zabbix-server\u7aef\u914d\u7f6e",id:"\u7b2c\u56db\u6b65zabbix-server\u7aef\u914d\u7f6e",level:2},{value:"4.1 \u7ba1\u7406--&gt;\u62a5\u8b66\u5a92\u4ecb\u7c7b\u578b--&gt;\u521b\u5efa\u5a92\u4f53\u7c7b\u578b",id:"41-\u7ba1\u7406--\u62a5\u8b66\u5a92\u4ecb\u7c7b\u578b--\u521b\u5efa\u5a92\u4f53\u7c7b\u578b",level:3},{value:"4.2 \u586b\u5199\u76f8\u5173\u4fe1\u606f",id:"42-\u586b\u5199\u76f8\u5173\u4fe1\u606f",level:3},{value:"4.3 \u8bbe\u7f6e\u6536\u4ef6\u4eba",id:"43-\u8bbe\u7f6e\u6536\u4ef6\u4eba",level:3},{value:"\u7b2c\u4e94\u6b65\u3001\u4fee\u6539\u544a\u8b66\u76f8\u5173\u4fe1\u606f",id:"\u7b2c\u4e94\u6b65\u4fee\u6539\u544a\u8b66\u76f8\u5173\u4fe1\u606f",level:2},{value:"5.1 \u4fee\u6539\u544a\u8b66\u64cd\u4f5c",id:"51-\u4fee\u6539\u544a\u8b66\u64cd\u4f5c",level:3},{value:"5.2 \u4fee\u6539\u6062\u590d\u64cd\u4f5c",id:"52-\u4fee\u6539\u6062\u590d\u64cd\u4f5c",level:3},{value:"5.3 \u4fee\u6539\u786e\u8ba4\u4fe1\u606f",id:"53-\u4fee\u6539\u786e\u8ba4\u4fe1\u606f",level:3},{value:"\u7b2c\u516d\u6b65\u3001\u9a8c\u8bc1",id:"\u7b2c\u516d\u6b65\u9a8c\u8bc1",level:2}];function l(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"[toc]"}),"\n",(0,s.jsx)(e.h1,{id:"zabbix34\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66",children:"zabbix3.4\u4f7f\u7528\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66"}),"\n",(0,s.jsx)(e.h2,{id:"\u7b2c\u4e00\u6b65\u6ce8\u518c\u4f01\u4e1a\u5fae\u4fe1\u4e2a\u4eba\u5c31\u53ef\u4ee5\u6ce8\u518c\u7136\u540e\u6309\u7167\u63d0\u793a\u586b\u5199\u76f8\u5173\u4fe1\u606f",children:"\u7b2c\u4e00\u6b65\u3001\u6ce8\u518c\u4f01\u4e1a\u5fae\u4fe1\uff0c\u4e2a\u4eba\u5c31\u53ef\u4ee5\u6ce8\u518c\uff0c\u7136\u540e\u6309\u7167\u63d0\u793a\u586b\u5199\u76f8\u5173\u4fe1\u606f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://work.weixin.qq.com/wework_admin/register_wx?from=myhome_baidu",children:"\u4f01\u4e1a\u5fae\u4fe1\u6ce8\u518c\u5730\u5740"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2022-08-31_18.10.07.png",alt:"iShot_2022-08-31_18.10.07"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b2c\u4e8c\u6b65\u767b\u9646\u4f01\u4e1a\u5fae\u4fe1",children:"\u7b2c\u4e8c\u6b65\u3001\u767b\u9646\u4f01\u4e1a\u5fae\u4fe1"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4f01\u4e1a\u5fae\u4fe1\u9996\u754c\u9762"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.45.10.png",alt:"iShot2020-10-16 09.45.10"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5e94\u7528\u4e0e\u5c0f\u7a0b\u5e8f--\x3e\u521b\u5efa\u5e94\u7528\uff0c\u6839\u636e\u63d0\u793a\u586b\u5199\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u91cc\u5df2\u7ecf\u521b\u5efa\u597d\u4e86\u4e00\u4e2azabbix\u76d1\u63a7"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.45.40.png",alt:"iShot2020-10-16 09.45.40"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u70b9\u51fb\u521b\u5efa\u7684\u5e94\u7528\uff0c\u540e\u7eedpython\u811a\u672c\u4f1a\u7528\u5230Agentld\u548cSecret"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.46.04.png",alt:"iShot2020-10-16 09.46.04"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u70b9\u51fb\u6211\u7684\u4f01\u4e1a\uff0c\u540e\u7eedpython\u811a\u672c\u4f1a\u7528\u5230\u4f01\u4e1aID"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.46.23.png",alt:"iShot2020-10-16 09.46.23"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b2c\u4e09\u6b65-zabbix-server\u7aef\u914d\u7f6epython\u811a\u672c",children:"\u7b2c\u4e09\u6b65 \u3001zabbix-server\u7aef\u914d\u7f6epython\u811a\u672c"}),"\n",(0,s.jsx)(e.h3,{id:"31-\u73af\u5883\u51c6\u5907",children:"3.1 \u73af\u5883\u51c6\u5907"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"#\u5b89\u88c5\u4f9d\u8d56\u5305\n[root@zabbix-server ~]# yum -y install python-pip \n[root@zabbix-server ~]# pip install requests\n[root@zabbix-server ~]# cd /usr/lib/zabbix/alertscripts\n[root@zabbix-server alertscripts]# ls\nweixin.py\n\n#\u7ed9\u811a\u672c\u8d4b\u4e88\u6267\u884c\u6743\u9650\n[root@zabbix-server alertscripts]# chmod +x weixin.py\n\n#\u4e00\u5b9a\u8981\u4fee\u6539/tmp/weixin.log\u8fd9\u4e2a\u6587\u4ef6\u7684\u6743\u9650\u4e3azabbix\uff0c\u56e0\u4e3azabbix\u7a0b\u5e8f\u5728\u6267\u884cweixin.py\u7684\u65f6\u5019\u662f\u4ee5zabbix\u7528\u6237\u6267\u884c\u7684\uff0c\u800c\u8fd9\u4e2a\u6587\u4ef6\u9ed8\u8ba4\u662froot\uff0c\u4e0d\u4fee\u6539\u6743\u9650\u4f1a\u62a5\u9519\n[root@zabbix-server alertscripts]# chown zabbix.zabbix /tmp/weixin.log   \n"})}),"\n",(0,s.jsx)(e.h3,{id:"32-\u7f16\u5199\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66\u811a\u672c",children:"3.2 \u7f16\u5199\u4f01\u4e1a\u5fae\u4fe1\u544a\u8b66\u811a\u672c"}),"\n",(0,s.jsx)(e.h4,{id:"321-\u4f7f\u7528\u7ba1\u7406\u5458id",children:"3.2.1 \u4f7f\u7528\u7ba1\u7406\u5458id"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"[root@zabbix-server alertscripts]# pwd\n/usr/lib/zabbix/alertscripts\n[root@zabbix-server alertscripts]# cat >weixin.py <<'EOF'\n#!/usr/bin/env python\n#-*- coding: utf-8 -*-\n#author: bxb\n#date: 2018\n#comment: zabbix\u63a5\u5165\u5fae\u4fe1\u62a5\u8b66\u811a\u672c\n\nimport requests\nimport sys\nimport os\nimport json\nimport logging\n\nlogging.basicConfig(level = logging.DEBUG, format = '%(asctime)s, %(filename)s, %(levelname)s, %(message)s',\n                datefmt = '%a, %d %b %Y %H:%M:%S',\n                filename = os.path.join('/tmp','weixin.log'),\n                filemode = 'a')\n\n#corpid\u548cappsecret\u5728\u521b\u5efa\u7684\u5e94\u7528\u4e2d\u67e5\u770b\n#agentid\u5728\u6211\u7684\u4f01\u4e1a\u4e2d\u67e5\u770b\ncorpid='xxxxxx'\nappsecret='xxxxxxx'\nagentid=xxxxxx\n#\u83b7\u53d6accesstoken\ntoken_url='https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=' + corpid + '&corpsecret=' + appsecret\nreq=requests.get(token_url)\naccesstoken=req.json()['access_token']\n\n#\u53d1\u9001\u6d88\u606f\nmsgsend_url='https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=' + accesstoken\n\ntouser=sys.argv[1]\nsubject=sys.argv[2]\n#toparty='3|4|5|6'\nmessage=sys.argv[2] + \"\\n\\n\" +sys.argv[3]\n\nparams={\n        \"touser\": touser,\n#       \"toparty\": toparty,\n        \"msgtype\": \"text\",\n        \"agentid\": agentid,\n        \"text\": {\n                \"content\": message\n        },\n        \"safe\":0\n}\n\nreq=requests.post(msgsend_url, data=json.dumps(params))\n\nlogging.info('sendto:' + touser + ';;subject:' + subject + ';;message:' + message)  \nEOF\n\n\n#\u9a8c\u8bc1\u811a\u672c\u662f\u5426\u80fd\u6b63\u786e\u53d1\u9001\u4fe1\u606f,BaiXueBing\u4e3a\u4f01\u4e1a\u5fae\u4fe1\u8d26\u53f7\uff0c\u5728\u901a\u8baf\u5f55--\x3e\u6210\u5458\u4fe1\u606f\u4e2d\u67e5\u770b\n[root@zabbix-server alertscripts]# ./weixin.py \u4f01\u4e1a\u5fae\u4fe1\u53f7 test test\t \n"})}),"\n",(0,s.jsx)(e.h4,{id:"322-\u4f01\u4e1a\u5fae\u4fe1\u673a\u5668\u4eba\u544a\u8b66",children:"3.2.2 \u4f01\u4e1a\u5fae\u4fe1\u673a\u5668\u4eba\u544a\u8b66"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8f91\u811a\u672c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'cat > /usr/lib/zabbix/alertscripts/enterprise_wechat.py <<EOF\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\nimport requests\nimport json\nimport sys\nimport os\n\nheaders = {\'Content-Type\': \'application/json;charset=utf-8\'}\napi_url = "xxx" # \u4f01\u4e1a\u5fae\u4fe1\u673a\u5668\u4eba\u5730\u5740\ndef msg(text):\n    json_text= {\n     "msgtype": "text",\n        "text": {\n            "content": text\n        },\n    }\n    print requests.post(api_url,json.dumps(json_text),headers=headers).content\n\nif __name__ == \'__main__\':\n    text = sys.argv[1]\n    msg(text)\nEOF\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u6d4b\u8bd5\uff0c\u673a\u5668\u4eba\u80fd\u6536\u5230\u544a\u8b66\u5373\u53ef"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"python enterprise_wechat.py \u544a\u8b66\u6d4b\u8bd5\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4f01\u4e1a\u5fae\u4fe1\u6536\u5230\u4fe1\u606f\u5373\u4e3a\u6b63\u786e"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.46.44.png",alt:"iShot2020-10-16 09.46.44"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b2c\u56db\u6b65zabbix-server\u7aef\u914d\u7f6e",children:"\u7b2c\u56db\u6b65\u3001zabbix-server\u7aef\u914d\u7f6e"}),"\n",(0,s.jsx)(e.h3,{id:"41-\u7ba1\u7406--\u62a5\u8b66\u5a92\u4ecb\u7c7b\u578b--\u521b\u5efa\u5a92\u4f53\u7c7b\u578b",children:"4.1 \u7ba1\u7406--\x3e\u62a5\u8b66\u5a92\u4ecb\u7c7b\u578b--\x3e\u521b\u5efa\u5a92\u4f53\u7c7b\u578b"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.47.06.png",alt:"iShot2020-10-16 09.47.06"})}),"\n",(0,s.jsx)(e.h3,{id:"42-\u586b\u5199\u76f8\u5173\u4fe1\u606f",children:"4.2 \u586b\u5199\u76f8\u5173\u4fe1\u606f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u811a\u672c\u540d\u79f0\u4e3a\u81ea\u5df1\u5b9a\u4e49\u7684weixin.py\uff0c\u8def\u5f84\u4e3a\u5728zabbix-server\u7aef/etc/zabbix/zabbix_server.conf\u4e2d\u5b9a\u4e49"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"AlertScriptsPath=/usr/lib/zabbix/alertscripts"})}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5728\u4e0b\u56fe\u4e2d\u811a\u672c\u53c2\u6570\u7684\u5730\u65b9\u5199\u5165\u4ee5\u4e0b3\u4e2a\u53c2\u6570\uff0c\u6ce8\u610f\u811a\u672c\u53c2\u6570\u4e00\u5b9a\u8981\u586b\u5199\u6b63\u786e"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"{ALERT.SENDTO}\n\n{ALERT.SUBJECT}\n\n{ALERT.MESSAGE}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.47.28.png",alt:"iShot2020-10-16 09.47.28"})}),"\n",(0,s.jsx)(e.h3,{id:"43-\u8bbe\u7f6e\u6536\u4ef6\u4eba",children:"4.3 \u8bbe\u7f6e\u6536\u4ef6\u4eba"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u53f3\u4e0a\u89d2\u5c0f\u4eba\u5934--\x3e\u62a5\u8b66\u5a92\u4ecb--\x3e\u6dfb\u52a0"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.47.54.png",alt:"iShot2020-10-16 09.47.54"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.48.11.png",alt:"iShot2020-10-16 09.48.11"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b2c\u4e94\u6b65\u4fee\u6539\u544a\u8b66\u76f8\u5173\u4fe1\u606f",children:"\u7b2c\u4e94\u6b65\u3001\u4fee\u6539\u544a\u8b66\u76f8\u5173\u4fe1\u606f"}),"\n",(0,s.jsx)(e.h3,{id:"51-\u4fee\u6539\u544a\u8b66\u64cd\u4f5c",children:"5.1 \u4fee\u6539\u544a\u8b66\u64cd\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4fee\u6539\u64cd\u4f5c\u6807\u9898\u5982\u4e0b"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"\u670d\u52a1\u5668:{HOST.NAME}\u53d1\u751f: {TRIGGER.NAME} \u6545\u969c!\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4fee\u6539\u6d88\u606f\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"\u670d\u52a1\u5668:{HOST.NAME}\u53d1\u751f: {TRIGGER.NAME} \u6545\u969c!\n{\n\u544a\u8b66\u4e3b\u673a:{HOST.NAME}\n\u544a\u8b66\u5730\u5740:{HOST.IP}\n\u76d1\u63a7\u9879\u76ee:{ITEM.NAME}\n\u76d1\u63a7\u53d6\u503c:{ITEM.LASTVALUE}\n\u544a\u8b66\u7b49\u7ea7:{TRIGGER.SEVERITY}\n\u5f53\u524d\u72b6\u6001:{TRIGGER.STATUS}\n\u544a\u8b66\u4fe1\u606f:{TRIGGER.NAME}\n\u544a\u8b66\u65f6\u95f4:{EVENT.DATE} {EVENT.TIME}\n\u4e8b\u4ef6ID:{EVENT.ID}\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.48.35.png",alt:"iShot2020-10-16 09.48.35"})}),"\n",(0,s.jsx)(e.h3,{id:"52-\u4fee\u6539\u6062\u590d\u64cd\u4f5c",children:"5.2 \u4fee\u6539\u6062\u590d\u64cd\u4f5c"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4fee\u6539\u6062\u590d\u6807\u9898\u5982\u4e0b"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"\u670d\u52a1\u5668:{HOST.NAME}: {TRIGGER.NAME} \u5df2\u6062\u590d!\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4fee\u6539\u6062\u590d\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"\u670d\u52a1\u5668:{HOST.NAME}: {TRIGGER.NAME} \u5df2\u6062\u590d!\n{\n\u544a\u8b66\u4e3b\u673a:{HOST.NAME}\n\u544a\u8b66\u5730\u5740:{HOST.IP}\n\u76d1\u63a7\u9879\u76ee:{ITEM.NAME}\n\u76d1\u63a7\u53d6\u503c:{ITEM.LASTVALUE}\n\u544a\u8b66\u7b49\u7ea7:{TRIGGER.SEVERITY}\n\u5f53\u524d\u72b6\u6001:{TRIGGER.STATUS}\n\u544a\u8b66\u4fe1\u606f:{TRIGGER.NAME}\n\u544a\u8b66\u65f6\u95f4:{EVENT.DATE} {EVENT.TIME}\n\u6062\u590d\u65f6\u95f4:{EVENT.RECOVERY.DATE} {EVENT.RECOVERY.TIME}\n\u6301\u7eed\u65f6\u95f4:{EVENT.AGE}\n\u4e8b\u4ef6ID:{EVENT.ID}\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.49.03.png",alt:"iShot2020-10-16 09.49.03"})}),"\n",(0,s.jsx)(e.h3,{id:"53-\u4fee\u6539\u786e\u8ba4\u4fe1\u606f",children:"5.3 \u4fee\u6539\u786e\u8ba4\u4fe1\u606f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4fee\u6539\u786e\u8ba4\u6807\u9898\u5982\u4e0b"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"\u670d\u52a1\u5668:{HOST.NAME}: \u62a5\u8b66\u786e\u8ba4\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4fee\u6539\u786e\u8ba4\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'\u670d\u52a1\u5668:{HOST.NAME}: \u62a5\u8b66\u786e\u8ba4\n{\n\u786e\u8ba4\u4eba:{USER.FULLNAME} \n\u65f6\u95f4:{ACK.DATE} {ACK.TIME} \n\u786e\u8ba4\u4fe1\u606f\u5982\u4e0b:\n"{ACK.MESSAGE}"\n\u95ee\u9898\u670d\u52a1\u5668IP:{HOSTNAME1}\n\u95ee\u9898ID:{EVENT.ID}\n\u5f53\u524d\u7684\u95ee\u9898\u662f: {TRIGGER.NAME}\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.51.39.png",alt:"iShot2020-10-16 09.51.39"})}),"\n",(0,s.jsx)(e.h2,{id:"\u7b2c\u516d\u6b65\u9a8c\u8bc1",children:"\u7b2c\u516d\u6b65\u3001\u9a8c\u8bc1"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4f01\u4e1a\u5fae\u4fe1\u4e2d\u521b\u5efa\u7684zabbix\u76d1\u63a7\u5e94\u7528\u80fd\u6536\u5230\u4fe1\u606f\u5373\u4e3a\u6b63\u786e"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"pc\u7aef\u4f01\u4e1a\u5fae\u4fe1"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.52.44.png",alt:"iShot2020-10-16 09.52.44"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u624b\u673a\u7aef\u4f01\u4e1a\u5fae\u4fe1"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2009.55.34.png",alt:"iShot2020-10-16 09.55.34"})})]})}function x(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>c});var s=i(96540);const t={},r=s.createContext(t);function a(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);