"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7648],{50923:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>r,default:()=>j,frontMatter:()=>l,metadata:()=>d,toc:()=>h});var s=i(74848),c=i(28453);const l={},r="gitea jenkins webhook",d={id:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook/gitee+jenkins\u5b9e\u73b0webhook",title:"gitea jenkins webhook",description:"\u672c\u6587\u53c2\u8003\u4e8e\u7801\u4e91\u5b98\u65b9\u6559\u7a0b",source:"@site/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook/gitee+jenkins\u5b9e\u73b0webhook.md",sourceDirName:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook",slug:"/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook/gitee+jenkins\u5b9e\u73b0webhook",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook/gitee+jenkins\u5b9e\u73b0webhook",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"gitea+jenkins\u5b9e\u73b0webhook",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook/gitea+jenkins\u5b9e\u73b0webhook"},next:{title:"gitlab webhook \u62a5\u9519",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u77e5\u8bc6\u70b9/webhook/gitlab webhook \u62a5\u9519"}},t={},h=[{value:"1.\u4f7f\u7528\u573a\u666f",id:"1\u4f7f\u7528\u573a\u666f",level:2},{value:"2.\u7b80\u4ecb",id:"2\u7b80\u4ecb",level:2},{value:"3.jenkins\u63d2\u4ef6\u5b89\u88c5",id:"3jenkins\u63d2\u4ef6\u5b89\u88c5",level:2},{value:"3.1 \u5728\u7ebf\u5b89\u88c5",id:"31-\u5728\u7ebf\u5b89\u88c5",level:3},{value:"3.2 \u624b\u52a8\u5b89\u88c5",id:"32-\u624b\u52a8\u5b89\u88c5",level:3},{value:"4.\u63d2\u4ef6\u914d\u7f6e",id:"4\u63d2\u4ef6\u914d\u7f6e",level:2},{value:"5.jenkins\u914d\u7f6e",id:"5jenkins\u914d\u7f6e",level:2},{value:"5.1 \u65b0\u5efa\u6784\u5efa\u4efb\u52a1",id:"51-\u65b0\u5efa\u6784\u5efa\u4efb\u52a1",level:3},{value:"5.2 \u4efb\u52a1\u5168\u5c40\u914d\u7f6e",id:"52-\u4efb\u52a1\u5168\u5c40\u914d\u7f6e",level:3},{value:"5.3 \u6e90\u7801\u7ba1\u7406\u914d\u7f6e",id:"53-\u6e90\u7801\u7ba1\u7406\u914d\u7f6e",level:3},{value:"5.3.1 \u521b\u5efa\u51ed\u636e",id:"531-\u521b\u5efa\u51ed\u636e",level:4},{value:"5.3.2 \u6e90\u7801\u7ba1\u7406\u76f8\u5173\u914d\u7f6e",id:"532-\u6e90\u7801\u7ba1\u7406\u76f8\u5173\u914d\u7f6e",level:4},{value:"5.4 \u89e6\u53d1\u5668\u914d\u7f6e",id:"54-\u89e6\u53d1\u5668\u914d\u7f6e",level:3},{value:"5.4.1 \u5728giee\u4e2d\u65b0\u5efawebhook",id:"541-\u5728giee\u4e2d\u65b0\u5efawebhook",level:4},{value:"5.4.2 \u914d\u7f6e\u89e6\u53d1\u5668\u6784\u5efa",id:"542-\u914d\u7f6e\u89e6\u53d1\u5668\u6784\u5efa",level:4},{value:"5.5 \u9a8c\u8bc1",id:"55-\u9a8c\u8bc1",level:3}];function o(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"gitea-jenkins-webhook",children:"gitea jenkins webhook"}),"\n",(0,s.jsxs)(n.p,{children:["\u672c\u6587\u53c2\u8003\u4e8e",(0,s.jsx)(n.a,{href:"https://gitea.pptfz.cn/help/articles/4193#article-header2",children:"\u7801\u4e91\u5b98\u65b9\u6559\u7a0b"})]}),"\n",(0,s.jsx)(n.h2,{id:"1\u4f7f\u7528\u573a\u666f",children:"1.\u4f7f\u7528\u573a\u666f"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u4e2a\u4eba\u535a\u5ba2\u4e3agitbook\uff0c\u8fdc\u7a0b\u4ee3\u7801\u4ed3\u5e93\u7528\u7684\u662fgitea\uff0c\u4e4b\u524d\u7684\u505a\u6cd5\u662f\u672c\u673a\u63a8\u9001\u4ee3\u7801\u5230gitea\uff0c\u7136\u540e\u624b\u52a8\u767b\u9646\u670d\u52a1\u5668\u8fdb\u884cgitbook\u6784\u5efa\uff0c\u73b0\u5728\u60f3\u505a\u6210\u81ea\u52a8\u5316\uff0c\u5373\u672c\u673a\u53ea\u9700\u8981\u63a8\u9001\u4ee3\u7801\u5230gitea\uff0c\u7136\u540e\u81ea\u52a8\u89e6\u53d1\u5728gitea\u4e2d\u914d\u7f6e\u7684jenkins webhook\u8fdb\u884cgitbook\u6784\u5efa"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"2\u7b80\u4ecb",children:"2.\u7b80\u4ecb"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Gitee Jenkins Plugin \u662fGitee\u57fa\u4e8e ",(0,s.jsx)(n.a,{href:"https://github.com/jenkinsci/gitlab-plugin",children:"GitLab Plugin"})," \u5f00\u53d1\u7684 Jenkins \u63d2\u4ef6\u3002\u7528\u4e8e\u914d\u7f6e Jenkins \u89e6\u53d1\u5668\uff0c\u63a5\u53d7Gitee\u5e73\u53f0\u53d1\u9001\u7684 WebHook \u89e6\u53d1 Jenkins \u8fdb\u884c\u81ea\u52a8\u5316\u6301\u7eed\u96c6\u6210\u6216\u6301\u7eed\u90e8\u7f72\uff0c\u5e76\u53ef\u5c06\u6784\u5efa\u72b6\u6001\u53cd\u9988\u56deGitee\u5e73\u53f0\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u76ee\u524d\u652f\u6301\u7684\u7279\u6027"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u63a8\u9001\u4ee3\u7801\u5230Gitee\u65f6\uff0c\u7531\u914d\u7f6e\u7684 WebHook \u89e6\u53d1 Jenkins \u4efb\u52a1\u6784\u5efa\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u8bc4\u8bba\u63d0\u4ea4\u8bb0\u5f55\u89e6\u53d1\u63d0\u4ea4\u8bb0\u5f55\u5bf9\u5e94\u7248\u672c Jenkins \u4efb\u52a1\u6784\u5efa"}),"\n",(0,s.jsx)(n.li,{children:"\u63d0\u4ea4 Pull Request \u5230Gitee\u9879\u76ee\u65f6\uff0c\u7531\u914d\u7f6e\u7684 WebHook \u89e6\u53d1 Jenkins \u4efb\u52a1\u6784\u5efa\uff0c\u652f\u6301PR\u52a8\u4f5c\uff1a\u65b0\u5efa\uff0c\u66f4\u65b0\uff0c\u63a5\u53d7\uff0c\u5173\u95ed\uff0c\u5ba1\u67e5\u901a\u8fc7\uff0c\u6d4b\u8bd5\u901a\u8fc7\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301 [ci-skip] \u6307\u4ee4\u8fc7\u6ee4 \u6216\u8005 [ci-build] \u6307\u4ee4\u89e6\u53d1\u6784\u5efa\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u8fc7\u6ee4\u5df2\u7ecf\u6784\u5efa\u7684 Commit \u7248\u672c\uff0c\u82e5\u662f\u5206\u652f Push\uff0c\u5219\u76f8\u540c\u5206\u652fPush\u624d\u8fc7\u6ee4\uff0c\u82e5\u662f PR\uff0c\u5219\u662f\u540c\u4e00\u4e2aPR\u624d\u8fc7\u6ee4\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u6309\u5206\u652f\u540d\u8fc7\u6ee4\u89e6\u53d1\u5668\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u6b63\u5219\u8868\u8fbe\u5f0f\u8fc7\u6ee4\u53ef\u89e6\u53d1\u7684\u5206\u652f\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u8bbe\u7f6e WebHook \u9a8c\u8bc1\u5bc6\u7801\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u6784\u5efa\u540e\u64cd\u4f5c\u53ef\u914d\u7f6e PR \u89e6\u53d1\u7684\u6784\u5efa\u7ed3\u679c\u8bc4\u8bba\u5230Gitee\u5bf9\u5e94\u7684PR\u4e2d\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u6784\u5efa\u540e\u64cd\u4f5c\u53ef\u914d\u7f6e PR \u89e6\u53d1\u7684\u6784\u5efa\u6210\u529f\u540e\u53ef\u81ea\u52a8\u5408\u5e76\u5bf9\u5e94PR\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5bf9\u4e8e PR \u76f8\u5173\u7684\u6240\u6709\u4e8b\u4ef6\uff0c\u82e5 PR \u4ee3\u7801\u51b2\u7a81\u4e0d\u53ef\u81ea\u52a8\u5408\u5e76\uff0c\u5219\u4e0d\u89e6\u53d1\u6784\u5efa\uff1b\u4e14\u82e5\u914d\u7f6e\u4e86\u8bc4\u8bba\u5230PR\u7684\u529f\u80fd\uff0c\u5219\u8bc4\u8bba\u5230 PR \u63d0\u793a\u51b2\u7a81\u3002"}),"\n",(0,s.jsx)(n.li,{children:"PR \u8bc4\u8bba\u53ef\u901a\u8fc7 WebHook \u89e6\u53d1\u6784\u5efa\uff08\u53ef\u7528\u4e8e PR \u89e6\u53d1\u6784\u5efa\u5931\u8d25\u662f\u4fbf\u4e8e\u4eceGitee\u5e73\u53f0\u8bc4\u8bba\u91cd\u65b0\u89e6\u53d1\u6784\u5efa\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u914d\u7f6e PR \u4e0d\u8981\u6c42\u5fc5\u987b\u6d4b\u8bd5\u65f6\u8fc7\u6ee4\u89e6\u53d1\u6784\u5efa\u3002\uff08\u53ef\u7528\u4e8e\u4e0d\u9700\u6d4b\u8bd5\u5219\u4e0d\u6784\u5efa\u90e8\u7f72\u6d4b\u8bd5\u73af\u5883\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u76f8\u540c PR \u89e6\u53d1\u6784\u5efa\u65f6\uff0c\u53d6\u6d88\u8fdb\u884c\u4e2d\u7684\u672a\u5b8c\u6210\u6784\u5efa\uff0c\u8fdb\u884c\u5f53\u524d\u6784\u5efa\uff08\u76f8\u540c PR \u6784\u5efa\u4e0d\u6392\u961f\uff0c\u591a\u4e2a\u4e0d\u540c PR \u6784\u5efa\u4ecd\u9700\u6392\u961f\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"3jenkins\u63d2\u4ef6\u5b89\u88c5",children:"3.jenkins\u63d2\u4ef6\u5b89\u88c5"}),"\n",(0,s.jsx)(n.h3,{id:"31-\u5728\u7ebf\u5b89\u88c5",children:"3.1 \u5728\u7ebf\u5b89\u88c5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u524d\u5f80 ",(0,s.jsx)(n.code,{children:"Manage Jenkins"})," -> ",(0,s.jsx)(n.code,{children:"Manage Plugins"})," -> ",(0,s.jsx)(n.code,{children:"Available"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u53f3\u4fa7 Filter \u8f93\u5165\uff1a ",(0,s.jsx)(n.code,{children:"Gitee"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u4e0b\u65b9\u53ef\u9009\u5217\u8868\u4e2d\u52fe\u9009 ",(0,s.jsx)(n.code,{children:"Gitee"}),"\uff08\u5982\u5217\u8868\u4e2d\u4e0d\u5b58\u5728 Gitee\uff0c\u5219\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Check now"})," \u66f4\u65b0\u63d2\u4ef6\u5217\u8868\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:["\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Download now and install after restart"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2014.35.59.png",alt:"iShot2021-06-15 14.35.59"})}),"\n",(0,s.jsx)(n.h3,{id:"32-\u624b\u52a8\u5b89\u88c5",children:"3.2 \u624b\u52a8\u5b89\u88c5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4ece ",(0,s.jsx)(n.a,{href:"https://gitea.pptfz.cn/oschina/Gitee-Jenkins-Plugin/releases",children:"release"})," \u5217\u8868\u4e2d\u8fdb\u5165\u6700\u65b0\u53d1\u884c\u7248\uff0c\u4e0b\u8f7d\u5bf9\u5e94\u7684 XXX.hpi \u6587\u4ef6"]}),"\n",(0,s.jsxs)(n.li,{children:["\u524d\u5f80 ",(0,s.jsx)(n.code,{children:"Manage Jenkins"})," -> ",(0,s.jsx)(n.code,{children:"Manage Plugins"})," -> ",(0,s.jsx)(n.code,{children:"Advanced"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Upload Plugin File"})," \u4e2d\u9009\u62e9\u521a\u624d\u4e0b\u8f7d\u7684 XXX.hpi \u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Upload"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u540e\u7eed\u9875\u9762\u4e2d\u52fe\u9009 ",(0,s.jsx)(n.code,{children:"Restart Jenkins when installation is complete and no jobs are running"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2014.43.39.png",alt:"iShot2021-06-15 14.43.39"})}),"\n",(0,s.jsx)(n.h2,{id:"4\u63d2\u4ef6\u914d\u7f6e",children:"4.\u63d2\u4ef6\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u7b2c\u4e00\u6b65\u3001\u524d\u5f80 ",(0,s.jsx)(n.code,{children:"Jenkins"})," -> ",(0,s.jsx)(n.code,{children:"Manage Jenkins"})," -> ",(0,s.jsx)(n.code,{children:"Configure System"})," -> ",(0,s.jsx)(n.code,{children:"Gitee Configuration"})," -> ",(0,s.jsx)(n.code,{children:"Gitee connections"})]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u7b2c\u4e8c\u6b65\u3001\u5728 ",(0,s.jsx)(n.code,{children:"Connection name"})," \u4e2d\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"Gitee"})," \u6216\u8005\u4f60\u60f3\u8981\u7684\u540d\u5b57\uff0c",(0,s.jsx)(n.code,{children:"Gitee host URL"})," \u4e2d\u8f93\u5165Gitee\u5b8c\u6574 URL\u5730\u5740\uff1a",(0,s.jsx)(n.code,{children:"https://gitea.pptfz.cn"})," \uff08Gitee\u79c1\u6709\u5316\u5ba2\u6237\u8f93\u5165\u90e8\u7f72\u7684\u57df\u540d\uff09"]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2014.58.53.png",alt:"iShot2021-06-15 14.58.53"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u7b2c\u4e09\u6b65\u3001\u914d\u7f6e\u4ee4\u724c\uff0c",(0,s.jsx)(n.code,{children:"Credentials"})," \u4e2d\u5982\u8fd8\u672a\u914d\u7f6e ",(0,s.jsx)(n.code,{children:"Gitee APIV5 \u79c1\u4eba\u4ee4\u724c"}),"\uff0c\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Add"})," - > ",(0,s.jsx)(n.code,{children:"Jenkins"})]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Domin"})," \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"Global credentials"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Kind"})," \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"Gitee API Token"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Scope"})," \u9009\u62e9\u4f60\u9700\u8981\u7684\u8303\u56f4"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Gitee APIV5 Token"})," \u8f93\u5165\u4f60\u7684Gitee\u79c1\u4eba\u4ee4\u724c\uff0c",(0,s.jsx)(n.a,{href:"https://gitea.pptfz.cn/profile/personal_access_tokens",children:"\u83b7\u53d6\u5730\u5740"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ID"})," \u3001",(0,s.jsx)(n.code,{children:"Description"})," \u4e2d\u8f93\u5165\u4f60\u60f3\u8981\u7684 ID \u548c\u63cf\u8ff0\u5373\u53ef"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2015.22.54.png",alt:"iShot2021-06-15 15.22.54"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u7b2c\u56db\u6b65\u3001",(0,s.jsx)(n.code,{children:"Credentials"})," \u9009\u62e9\u914d\u7f6e\u597d\u7684 ",(0,s.jsx)(n.code,{children:"Gitee APIV5 Token"}),"\uff0c\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Advanced"})," \uff0c\u53ef\u914d\u7f6e\u662f\u5426\u5ffd\u7565 SSL \u9519\u8bef\uff08\u89c6\u60a8\u7684Jenkins\u73af\u5883\u662f\u5426\u652f\u6301\uff09\uff0c\u5e76\u53ef\u8bbe\u7f6e\u94fe\u63a5\u6d4b\u8d85\u65f6\u65f6\u95f4\uff08\u89c6\u60a8\u7684\u7f51\u7edc\u73af\u5883\u800c\u5b9a\uff09\uff0c\u6700\u540e\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Test Connection"})," \u6d4b\u8bd5\u662f\u5426\u6210\u529f"]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2015.32.42.png",alt:"iShot2021-06-15 15.32.42"})}),"\n",(0,s.jsx)(n.h2,{id:"5jenkins\u914d\u7f6e",children:"5.jenkins\u914d\u7f6e"}),"\n",(0,s.jsx)(n.h3,{id:"51-\u65b0\u5efa\u6784\u5efa\u4efb\u52a1",children:"5.1 \u65b0\u5efa\u6784\u5efa\u4efb\u52a1"}),"\n",(0,s.jsxs)(n.p,{children:["\u524d\u5f80 ",(0,s.jsx)(n.code,{children:"Jenkins"})," -> ",(0,s.jsx)(n.code,{children:"New Item"})," , name \u8f93\u5165 ",(0,s.jsx)(n.code,{children:"gitbook"}),"\uff0c\u9009\u62e9 ",(0,s.jsx)(n.code,{children:"Freestyle project"})," \u4fdd\u5b58\u5373\u53ef\u521b\u5efa\u6784\u5efa\u9879\u76ee\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2015.42.48.png",alt:"iShot2021-06-15 15.42.48"})}),"\n",(0,s.jsx)(n.h3,{id:"52-\u4efb\u52a1\u5168\u5c40\u914d\u7f6e",children:"5.2 \u4efb\u52a1\u5168\u5c40\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u4efb\u52a1\u5168\u5c40\u914d\u7f6e\u4e2d\u9700\u8981\u9009\u62e9\u524d\u4e00\u6b65\u4e2d\u7684Gitee\u94fe\u63a5\u3002\u524d\u5f80\u67d0\u4e2a\u4efb\u52a1\uff08\u5982",(0,s.jsx)(n.code,{children:"gitbook"}),"\uff09\u7684 ",(0,s.jsx)(n.code,{children:"Configure"})," -> ",(0,s.jsx)(n.code,{children:"General"}),"\uff0c",(0,s.jsx)(n.code,{children:"Gitee connection"})," \u4e2d\u9009\u62e9\u524d\u9762\u6240\u914d\u7f6e\u7684Gitee\u94fe\u63a5"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2015.48.59.png",alt:"iShot2021-06-15 15.48.59"})}),"\n",(0,s.jsx)(n.h3,{id:"53-\u6e90\u7801\u7ba1\u7406\u914d\u7f6e",children:"5.3 \u6e90\u7801\u7ba1\u7406\u914d\u7f6e"}),"\n",(0,s.jsx)(n.h4,{id:"531-\u521b\u5efa\u51ed\u636e",children:"5.3.1 \u521b\u5efa\u51ed\u636e"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"Manage Jenkins"})," -> ",(0,s.jsx)(n.code,{children:"Manage Credentials"})," -> ",(0,s.jsx)(n.code,{children:"Credentials"})," -> \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"Jenkins"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2017.27.10.png",alt:"iShot2021-06-15 17.27.10"})}),"\n",(0,s.jsxs)(n.p,{children:["\u9009\u62e9  ",(0,s.jsx)(n.code,{children:"\u5168\u5c40\u51ed\u636e(unrestricted)"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2017.30.15.png",alt:"iShot2021-06-15 17.30.15"})}),"\n",(0,s.jsxs)(n.p,{children:["\u9009\u62e9 ",(0,s.jsx)(n.code,{children:"Add Credentials"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2017.32.44.png",alt:"iShot2021-06-15 17.32.44"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Kind"})," \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"SSH Username with private key"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Scope"})," \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"global"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"ID"})," \u3001 ",(0,s.jsx)(n.code,{children:"Description"})," \u3001",(0,s.jsx)(n.code,{children:"Username"})]}),"\n",(0,s.jsx)(n.li,{children:"\u586b\u5199 jenkins \u670d\u52a1\u5668\u7684\u79c1\u94a5"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2017.40.14.png",alt:"iShot2021-06-15 17.40.14"})}),"\n",(0,s.jsx)(n.h4,{id:"532-\u6e90\u7801\u7ba1\u7406\u76f8\u5173\u914d\u7f6e",children:"5.3.2 \u6e90\u7801\u7ba1\u7406\u76f8\u5173\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u524d\u5f80\u67d0\u4e2a\u4efb\u52a1\uff08\u5982 ",(0,s.jsx)(n.code,{children:"gitbook"})," \uff09\u7684 ",(0,s.jsx)(n.code,{children:"Configure"})," -> ",(0,s.jsx)(n.code,{children:"Source Code Management"})," \u9009\u9879\u5361"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u8f93\u5165\u4f60\u7684\u4ed3\u5e93\u5730\u5740\uff0c\u4f8b\u5982 ",(0,s.jsx)(n.code,{children:"git@your.gitea.server:gitea_group/gitea_project.git"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"Advanced"})," \u6309\u94ae\uff0c",(0,s.jsx)(n.code,{children:"Name"})," \u5b57\u6bb5\u4e2d\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"origin"}),"\uff0c ",(0,s.jsx)(n.code,{children:"Refspec"})," \u5b57\u6bb5\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"+refs/heads/*:refs/remotes/origin/* +refs/pull/*/MERGE:refs/pull/*/MERGE"}),"\n\uff0c",(0,s.jsx)(n.strong,{children:(0,s.jsxs)("span",{style:{color:"blue"},children:["\u6ce8\u610f\u65b0\u7248jenkins\u4e0d\u518d\u63a5\u53d7\u591a\u6761\u540c\u65f6\u5305\u542b ",(0,s.jsx)(n.code,{children:"*"})," \u901a\u914d\u7b26\u7684refs\u63cf\u8ff0\uff0c\u5982\u53ea\u5bf9push\u89e6\u53d1\u53ef\u5199\u524d\u534a\u90e8\u5206(",(0,s.jsx)(n.code,{children:"+refs/heads/*:refs/remotes/origin/*"}),")\uff0c\u5982\u53ea\u5bf9PR\u89e6\u53d1\u53ef\u53ea\u5199\u540e\u534a\u6bb5(",(0,s.jsx)(n.code,{children:"+refs/pull/*/MERGE:refs/pull/*/MERGE"}),")"]})}),"\uff0c",(0,s.jsx)(n.strong,{children:(0,s.jsxs)("span",{style:{color:"red"},children:["\u8fd9\u91cc\u573a\u666f\u53ea\u9488\u5bf9\u4e8epush\u89e6\u53d1\uff0c\u56e0\u6b64\u586b\u5199 ",(0,s.jsx)(n.code,{children:"+refs/heads/*:refs/remotes/origin/*"})]})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u51ed\u636e ",(0,s.jsx)(n.code,{children:"Credentials"})," \u4e2d\u8bf7\u8f93\u5165 git \u4ed3\u5e93 ",(0,s.jsx)(n.code,{children:"https"})," \u5730\u5740\u5bf9\u5e94\u7684 ",(0,s.jsx)(n.code,{children:"\u7528\u6237\u540d\u5bc6\u7801"})," \u51ed\u636e\uff0c\u6216\u8005 ",(0,s.jsx)(n.code,{children:"ssh"})," \u5bf9\u5e94\u7684 ",(0,s.jsx)(n.code,{children:"ssh key"})," \u51ed\u636e\uff0c",(0,s.jsx)(n.strong,{children:(0,s.jsxs)("span",{style:{color:"red"},children:["\u6ce8\u610f ",(0,s.jsx)(n.code,{children:"Gitee API Token"})," \u51ed\u636e\u4e0d\u53ef\u7528\u4e8e\u6e90\u7801\u7ba1\u7406\u7684\u51ed\u636e\uff0c\u53ea\u7528\u4e8e gitea \u63d2\u4ef6\u7684 API \u8c03\u7528\u51ed\u636e"]})}),"\uff0c",(0,s.jsx)(n.strong,{children:"\u8fd9\u91cc\u9009\u62e9\u8f93\u5165\u4e0a\u4e00\u6b65(1.5.3.1)\u4e2d\u521b\u5efa\u7684jenkins key\u51ed\u636e"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Branch Specifier"})," \u9009\u9879"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5bf9\u4e8e\u5355\u4ed3\u5e93\u5de5\u4f5c\u6d41\u8f93\u5165: ",(0,s.jsx)(n.code,{children:"origin/${giteaSourceBranch}"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u5bf9\u4e8e PR \u5de5\u4f5c\u6d41\u8f93\u5165: ",(0,s.jsx)(n.code,{children:"pull/${giteaPullRequestIid}/MERGE"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u8fd9\u91cc\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"origin/${giteaSourceBranch}"})]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2018.39.29.png",alt:"iShot2021-06-15 18.39.29"})}),"\n",(0,s.jsx)(n.h3,{id:"54-\u89e6\u53d1\u5668\u914d\u7f6e",children:"5.4 \u89e6\u53d1\u5668\u914d\u7f6e"}),"\n",(0,s.jsx)(n.h4,{id:"541-\u5728giee\u4e2d\u65b0\u5efawebhook",children:"5.4.1 \u5728giee\u4e2d\u65b0\u5efawebhook"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://gitea.pptfz.cn/help/categories/40",children:"gitea webhook\u5b98\u65b9\u6587\u6863"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728gitea\u9879\u76ee\u4e2d\u7684  ",(0,s.jsx)(n.code,{children:"\u7ba1\u7406"})," \u4e0b\u9009\u62e9  ",(0,s.jsx)(n.code,{children:"WebHooks"})," \uff0c\u65b0\u5efawebhook\uff0cURL\u5728jenkins\u9879\u76ee\u4e0b\u7684 ",(0,s.jsx)(n.code,{children:"Build Triggers"})," \u4e2d\u67e5\u770b"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2019.20.04.png",alt:"iShot2021-06-15 19.20.04"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["gitea\u4e2d\u7684webhook\u5bc6\u7801\u662f\u5728jenkins\u4e2d ",(0,s.jsx)(n.code,{children:"Build Triggers"}),"\xa0\u4e0b  ",(0,s.jsx)(n.code,{children:"Gitee WebHook \u5bc6\u7801"}),"\xa0\u5904\u751f\u6210\u7684"]})})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-16%2010.22.39.png",alt:"iShot2021-06-16 10.22.39"})}),"\n",(0,s.jsxs)(n.p,{children:["gitea webhook\u4e2d\u7684url\u586b\u5199jenkins\u4e2d ",(0,s.jsx)(n.code,{children:"Build Triggers"})," \u4e0b\u663e\u793a\u7684\u5730\u5740"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2019.12.37.png",alt:"iShot2021-06-15 19.12.37"})}),"\n",(0,s.jsx)(n.p,{children:"\u521b\u5efa\u5b8c\u6210\u540e\u7684webhook"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2019.21.07.png",alt:"iShot2021-06-15 19.21.07"})}),"\n",(0,s.jsxs)(n.p,{children:["\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"\u6d4b\u8bd5"})," \u9a8c\u8bc1"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-15%2019.23.07.png",alt:"iShot2021-06-15 19.23.07"})}),"\n",(0,s.jsx)(n.h4,{id:"542-\u914d\u7f6e\u89e6\u53d1\u5668\u6784\u5efa",children:"5.4.2 \u914d\u7f6e\u89e6\u53d1\u5668\u6784\u5efa"}),"\n",(0,s.jsxs)(n.p,{children:["\u524d\u5f80\u4efb\u52a1\u914d\u7f6e\u7684\u89e6\u53d1\u5668\u6784\u5efa\uff1a ",(0,s.jsx)(n.code,{children:"Configure"})," -> ",(0,s.jsx)(n.code,{children:"Build Triggers"})," \u9009\u9879\u5361"]}),"\n",(0,s.jsxs)(n.p,{children:["\u52fe\u9009 ",(0,s.jsx)(n.code,{children:"Gitee webhook \u89e6\u53d1\u6784\u5efa"})," \u4e00\u884c\uff0c\u89e6\u53d1\u6784\u5efa\u7b56\u7565\u9009\u62e9 ",(0,s.jsx)(n.code,{children:"\u63a8\u9001\u4ee3\u7801"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-16%2010.25.25.png",alt:"iShot2021-06-16 10.25.25"})}),"\n",(0,s.jsx)(n.h3,{id:"55-\u9a8c\u8bc1",children:"5.5 \u9a8c\u8bc1"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"Build"})," \u9009\u9879\u5904\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49webhook\u89e6\u53d1\u540e\u6267\u884c\u7684\u52a8\u4f5c\uff0c\u8fd9\u91cc\u4ee5\u6267\u884cshell\u547d\u4ee4\u4e3a\u4f8b"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-16%2011.35.56.png",alt:"iShot2021-06-16 11.35.56"})}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u673a\u624b\u52a8\u63d0\u4ea4\u4ee3\u7801\uff0cjenkins\u4e2d\u5c31\u4f1a\u81ea\u52a8\u89e6\u53d1\u6784\u5efa\u4e86\uff0c\u6784\u5efa\u5c31\u4f1a\u6267\u884c\u4e0a\u4e00\u6b65\u8bbe\u7f6e\u7684webhook\u89e6\u53d1\u540e\u6267\u884c\u7684\u52a8\u4f5c\u4e86"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-06-16%2011.33.50.png",alt:"iShot2021-06-16 11.33.50"})}),"\n",(0,s.jsxs)(n.p,{children:["\u67e5\u770b ",(0,s.jsx)(n.code,{children:"/tmp/test.test"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ cat test.test \ntest\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u770b\u5230 ",(0,s.jsx)(n.code,{children:"/tmp/test.test"})," \u6587\u4ef6\u4e2d\u5df2\u7ecf\u5199\u5165\u5185\u5bb9"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e4b\u524d\u5728 ",(0,s.jsx)(n.code,{children:"Build"})," \u4e2d\u4f7f\u7528\u7684\u662f ",(0,s.jsx)(n.code,{children:"Execute shell Commond"})," \uff0c\u81ea\u5b9a\u4e86\u4e00\u4e2a\u6d4b\u8bd5\u547d\u4ee4 ",(0,s.jsx)(n.code,{children:"echo test >> /tmp/test.test"}),"\uff0c\u90a3\u73b0\u5728\u60f3\u8ba9gitbook\u5b9e\u73b0\u81ea\u52a8\u6784\u5efa\uff0c\u5219\u53ea\u9700\u8981\u4fee\u6539\u547d\u4ee4\u5373\u53ef"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"cd /gitbook && git pull git@gitea.pptfz.cn:xxx/gitbook.git && gitbook build\n"})})]})}function j(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>d});var s=i(96540);const c={},l=s.createContext(c);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);