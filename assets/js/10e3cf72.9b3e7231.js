"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7324],{47197:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>t,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var c=n(74848),o=n(28453);const r={},t="\u4f7f\u7528config\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898",l={id:"\u4e91\u539f\u751f/k8s/k8s\u6545\u969c/\u4f7f\u7528config\u6587\u4ef6\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898",title:"\u4f7f\u7528config\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898",description:"\u4f7f\u7528 kubeadm \u5b89\u88c5\u5b8ck8s\u540e\uff0c\u4f1a\u5728 /etc/kubernetes/ \u4e0b\u751f\u6210\u914d\u7f6e\u6587\u4ef6 admin.conf \uff0c\u7136\u540e\u6211\u4eec\u4f1a\u628a\u8fd9\u4e2a\u6587\u4ef6\u62f7\u8d1d\u5230 $HOME/.kube \u4e0b\u5e76\u547d\u540d\u4e3a config\uff0c\u901a\u8fc7\u8fd9\u4e2a\u6587\u4ef6\u6211\u4eec\u53ef\u4ee5\u64cd\u4f5ck8s\u96c6\u7fa4",source:"@site/docs/\u4e91\u539f\u751f/k8s/k8s\u6545\u969c/\u4f7f\u7528config\u6587\u4ef6\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898.md",sourceDirName:"\u4e91\u539f\u751f/k8s/k8s\u6545\u969c",slug:"/\u4e91\u539f\u751f/k8s/k8s\u6545\u969c/\u4f7f\u7528config\u6587\u4ef6\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u6545\u969c/\u4f7f\u7528config\u6587\u4ef6\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"k8s\u5e38\u7528\u547d\u4ee4\u901f\u67e5",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u5e38\u7528\u547d\u4ee4\u901f\u67e5"},next:{title:"\u65e0\u6cd5\u5220\u9664replicasets",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u6545\u969c/\u65e0\u6cd5\u5220\u9664replicasets"}},i={},d=[];function u(e){const s={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h1,{id:"\u4f7f\u7528config\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898",children:"\u4f7f\u7528config\u8fde\u63a5k8s\u96c6\u7fa4\u9047\u5230\u7684\u95ee\u9898"}),"\n",(0,c.jsxs)(s.p,{children:["\u4f7f\u7528 ",(0,c.jsx)(s.a,{href:"https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/install-kubeadm/",children:"kubeadm"})," \u5b89\u88c5\u5b8ck8s\u540e\uff0c\u4f1a\u5728 ",(0,c.jsx)(s.code,{children:"/etc/kubernetes/"})," \u4e0b\u751f\u6210\u914d\u7f6e\u6587\u4ef6 ",(0,c.jsx)(s.code,{children:"admin.conf"})," \uff0c\u7136\u540e\u6211\u4eec\u4f1a\u628a\u8fd9\u4e2a\u6587\u4ef6\u62f7\u8d1d\u5230 ",(0,c.jsx)(s.code,{children:"$HOME/.kube"})," \u4e0b\u5e76\u547d\u540d\u4e3a ",(0,c.jsx)(s.code,{children:"config"}),"\uff0c\u901a\u8fc7\u8fd9\u4e2a\u6587\u4ef6\u6211\u4eec\u53ef\u4ee5\u64cd\u4f5ck8s\u96c6\u7fa4"]}),"\n",(0,c.jsxs)(s.p,{children:["\u5c06 ",(0,c.jsx)(s.code,{children:"config"})," \u6587\u4ef6\u653e\u5230 ",(0,c.jsx)(s.code,{children:"$HOME/.kube"})," \u540e\uff0c\u6267\u884c ",(0,c.jsx)(s.code,{children:"kubectl cluster-info"})," \u67e5\u770b\u96c6\u7fa4\u4fe1\u606f\u62a5\u9519\u5982\u4e0b\uff0c\u5176\u4e2d 192.168.31.1 \u662f\u6211\u672c\u5730\u7f51\u7edc\u7684\u8def\u7531\u5668ip\u6bb5"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-shell",children:"$ kubectl cluster-info     \n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\nUnable to connect to the server: dial tcp: lookup lb.kubesphere.local on 192.168.31.1:53: no such host\n"})}),"\n",(0,c.jsxs)(s.p,{children:["\u7136\u540e\u6839\u636e\u63d0\u793a\u6267\u884c\u547d\u4ee4 ",(0,c.jsx)(s.code,{children:"kubectl cluster-info dump"})," \uff0c\u62a5\u9519\u5982\u4e0b"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-shell",children:"$ kubectl cluster-info dump\nUnable to connect to the server: dial tcp: lookup lb.kubesphere.local on 192.168.31.1:53: no such host\n"})}),"\n",(0,c.jsxs)(s.p,{children:["\u7531\u4e8e ",(0,c.jsx)(s.code,{children:"config"})," \u6587\u4ef6\u662f\u4ece\u865a\u62df\u673a\u4e2d\u62f7\u8d1d\u4e0b\u6765\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u767b\u5f55\u5230 master \u8282\u70b9\u6267\u884c\u547d\u4ee4 ",(0,c.jsx)(s.code,{children:"kubectl cluster-info"})," \u67e5\u770b"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-shell",children:"$ kubectl cluster-info \nKubernetes control plane is running at https://lb.kubesphere.local:6443\ncoredns is running at https://lb.kubesphere.local:6443/api/v1/namespaces/kube-system/services/coredns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n"})}),"\n",(0,c.jsxs)(s.p,{children:["\u53ef\u4ee5\u770b\u5230 ",(0,c.jsx)(s.code,{children:"apiserver"})," \u5730\u5740\u4e3a ",(0,c.jsx)(s.code,{children:"lb.kubesphere.local:6443"})," \uff0c\u8fd9\u662f\u56e0\u4e3a\u662f\u4f7f\u7528 ",(0,c.jsx)(s.a,{href:"https://github.com/kubesphere/kubekey",children:"kubekey"})," \u5b89\u88c5\u7684k8s\uff0c\u7136\u540e ",(0,c.jsx)(s.code,{children:"kubekey"})," \u81ea\u52a8\u628a ",(0,c.jsx)(s.code,{children:"apiserver"})," \u5730\u5740\u8bbe\u7f6e\u6210\u4e86\u57df\u540d\uff0c\u800c\u5f53\u628a ",(0,c.jsx)(s.code,{children:"config"})," \u6587\u4ef6\u4e0b\u8f7d\u5230\u7535\u8111\u672c\u673a\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u672c\u673a\u7535\u8111\u662f\u65e0\u6cd5\u89e3\u6790 ",(0,c.jsx)(s.code,{children:"lb.kubesphere.local"})," \u8fd9\u4e2a\u57df\u540d\u7684\uff0c\u56e0\u6b64\u9700\u8981\u628a\u8fd9\u4e2a\u57df\u540d\u5728\u672c\u673a\u505a\u4e00\u4e0bhosts\u89e3\u6790\uff0c\u89e3\u6790\u6210\u865a\u62df\u673a\u4e2d ",(0,c.jsx)(s.code,{children:"apiserver"})," \u670d\u52a1\u5668\u7684ip\u5730\u5740\u5c31\u53ef\u4ee5\u4e86"]})]})}function a(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(u,{...e})}):u(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var c=n(96540);const o={},r=c.createContext(o);function t(e){const s=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),c.createElement(r.Provider,{value:s},e.children)}}}]);