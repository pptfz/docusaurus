"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2249],{56730:(r,e,s)=>{s.r(e),s.d(e,{assets:()=>h,contentTitle:()=>t,default:()=>a,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var n=s(74848),c=s(28453);const i={},t="harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65",d={id:"\u4e91\u539f\u751f/\u4e91\u539f\u751f\u5de5\u5177/harbor/harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65",title:"harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65",description:"harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65\u5b98\u65b9\u6587\u6863",source:"@site/docs/\u4e91\u539f\u751f/\u4e91\u539f\u751f\u5de5\u5177/harbor/harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65.md",sourceDirName:"\u4e91\u539f\u751f/\u4e91\u539f\u751f\u5de5\u5177/harbor",slug:"/\u4e91\u539f\u751f/\u4e91\u539f\u751f\u5de5\u5177/harbor/harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65",permalink:"/docs/\u4e91\u539f\u751f/\u4e91\u539f\u751f\u5de5\u5177/harbor/harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"harbor\u5b89\u88c5",permalink:"/docs/\u4e91\u539f\u751f/\u4e91\u539f\u751f\u5de5\u5177/harbor/harbor\u5b89\u88c5"},next:{title:"containerd \u9ad8\u7ea7\u547d\u4ee4\u884c\u5de5\u5177 nerdctl",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/containerd/containerd \u9ad8\u7ea7\u547d\u4ee4\u884c\u5de5\u5177 nerdctl"}},h={},l=[{value:"1.\u5b9e\u9a8c\u73af\u5883",id:"1\u5b9e\u9a8c\u73af\u5883",level:2},{value:"2.\u914d\u7f6e\u540c\u6b65",id:"2\u914d\u7f6e\u540c\u6b65",level:2},{value:"2.1 \u521b\u5efa\u76ee\u6807\u4ed3\u5e93",id:"21-\u521b\u5efa\u76ee\u6807\u4ed3\u5e93",level:3},{value:"2.2 \u521b\u5efa\u540c\u6b65\u89c4\u5219",id:"22-\u521b\u5efa\u540c\u6b65\u89c4\u5219",level:3},{value:"2.3 \u624b\u52a8\u8fd0\u884c\u540c\u6b65",id:"23-\u624b\u52a8\u8fd0\u884c\u540c\u6b65",level:3},{value:"2.4 \u914d\u7f6e\u81ea\u52a8\u540c\u6b65",id:"24-\u914d\u7f6e\u81ea\u52a8\u540c\u6b65",level:3}];function o(r){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65",children:"harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:"https://goharbor.io/docs/2.8.0/administration/configuring-replication/",children:"harbor\u914d\u7f6e\u955c\u50cf\u540c\u6b65\u5b98\u65b9\u6587\u6863"})}),"\n",(0,n.jsx)(e.h2,{id:"1\u5b9e\u9a8c\u73af\u5883",children:"1.\u5b9e\u9a8c\u73af\u5883"}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"\u57df\u540d"}),(0,n.jsx)(e.th,{children:"IP"}),(0,n.jsx)(e.th,{children:"\u89d2\u8272"}),(0,n.jsx)(e.th,{children:"harbor\u7248\u672c"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"harbor.ops.com"}),(0,n.jsx)(e.td,{children:"10.0.0.10"}),(0,n.jsx)(e.td,{children:"\u4e3b"}),(0,n.jsx)(e.td,{children:"2.8"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"harbor-bak.ops.com"}),(0,n.jsx)(e.td,{children:"10.0.0.11"}),(0,n.jsx)(e.td,{children:"\u5907"}),(0,n.jsx)(e.td,{children:"2.8"})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:"2\u914d\u7f6e\u540c\u6b65",children:"2.\u914d\u7f6e\u540c\u6b65"}),"\n",(0,n.jsx)(e.h3,{id:"21-\u521b\u5efa\u76ee\u6807\u4ed3\u5e93",children:"2.1 \u521b\u5efa\u76ee\u6807\u4ed3\u5e93"}),"\n",(0,n.jsxs)(e.p,{children:["\u5728 ",(0,n.jsx)(e.code,{children:"\u7cfb\u7edf\u7ba1\u7406"})," -> ",(0,n.jsx)(e.code,{children:"\u4ed3\u5e93\u7ba1\u7406"})," -> ",(0,n.jsx)(e.code,{children:"\u65b0\u5efa\u76ee\u6807"})," \u65b0\u5efa\u4e00\u4e2a\u76ee\u6807\u4ed3\u5e93"]}),"\n",(0,n.jsx)(e.p,{children:":::tip\u8bf4\u660e"}),"\n",(0,n.jsxs)(e.p,{children:["\u5982\u679c\u4f7f\u7528\u7684\u662f\u81ea\u7b7e\u8bc1\u4e66\uff0c\u5219\u9700\u8981\u53d6\u6d88\u52fe\u9009 ",(0,n.jsx)(e.code,{children:"\u9a8c\u8bc1\u8fdc\u7a0b\u8bc1\u4e66"})," \uff0c\u5426\u5219\u4f1a\u62a5\u8bc1\u4e66\u9519\u8bef"]}),"\n",(0,n.jsx)(e.p,{children:":::"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_15.18.18.png",alt:"iShot_2023-04-27_15.18.18"})}),"\n",(0,n.jsx)(e.p,{children:"\u521b\u5efa\u5b8c\u6210\u540e\u7684\u76ee\u6807\u4ed3\u5e93"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_11.06.47.png",alt:"iShot_2023-04-27_11.06.47"})}),"\n",(0,n.jsx)(e.h3,{id:"22-\u521b\u5efa\u540c\u6b65\u89c4\u5219",children:"2.2 \u521b\u5efa\u540c\u6b65\u89c4\u5219"}),"\n",(0,n.jsxs)(e.p,{children:["\u5728 ",(0,n.jsx)(e.code,{children:"\u7cfb\u7edf\u7ba1\u7406"})," -> ",(0,n.jsx)(e.code,{children:"\u590d\u5236\u7ba1\u7406"})," -> ",(0,n.jsx)(e.code,{children:"\u65b0\u5efa\u89c4\u5219"})," \u914d\u7f6e\u590d\u5236\u7684\u76f8\u5173\u89c4\u5219"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_11.19.16.png",alt:"iShot_2023-04-27_11.19.16"})}),"\n",(0,n.jsx)(e.p,{children:"\u521b\u5efa\u540e\u7684\u540c\u6b65\u89c4\u5219"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_14.14.22.png",alt:"iShot_2023-04-27_14.14.22"})}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"\u6e90\u8d44\u6e90\u8fc7\u6ee4\u5668"})," \u9009\u9879\u914d\u7f6e\u8bf4\u660e"]}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"\u9009\u9879"}),(0,n.jsx)(e.th,{children:"\u5b50\u9009\u9879"}),(0,n.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u540d\u79f0"}),(0,n.jsx)(e.td,{children:"\ud83c\ude1a\ufe0f"}),(0,n.jsxs)(e.td,{children:["\u8fc7\u6ee4\u8d44\u6e90\u7684\u540d\u5b57\uff0c\u4e0d\u586b\u6216\u8005\u586b\u5199 ",(0,n.jsx)(e.code,{children:"**"})," \u5339\u914d\u6240\u6709\u8d44\u6e90",(0,n.jsx)("br",{}),(0,n.jsx)(e.code,{children:"library/**"}),"\u53ea\u5339\u914d ",(0,n.jsx)(e.code,{children:"library"})," \u4e0b\u7684\u8d44\u6e90"]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"Tag"}),(0,n.jsx)(e.td,{children:"\u5339\u914d/\u6392\u9664"}),(0,n.jsxs)(e.td,{children:["\u8fc7\u6ee4\u8d44\u6e90\u7684tag/version\uff0c\u4e0d\u586b\u6216\u8005\u586b\u5199 ",(0,n.jsx)(e.code,{children:"**"})," \u5339\u914d\u6240\u6709",(0,n.jsx)("br",{}),(0,n.jsx)(e.code,{children:"1.0*"})," \u8868\u793a\u53ea\u5339\u914d\u4ee5 ",(0,n.jsx)(e.code,{children:"1.0"})," \u5f00\u5934\u7684tag/version"]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u6807\u7b7e"}),(0,n.jsx)(e.td,{children:"\u5339\u914d/\u6392\u9664"}),(0,n.jsx)(e.td,{children:"\u6839\u636e\u6807\u7b7e\u7b5b\u9009\u8d44\u6e90"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u8d44\u6e90"}),(0,n.jsx)(e.td,{children:"\u5168\u90e8/image/artifact"}),(0,n.jsx)(e.td,{children:"\u8fc7\u6ee4\u8d44\u6e90\u7684\u7c7b\u578b"})]})]})]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"\u76ee\u6807"})," \u9009\u9879\u914d\u7f6e\u8bf4\u660e"]}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"\u9009\u9879"}),(0,n.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u540d\u79f0\u7a7a\u95f4"}),(0,n.jsx)(e.td,{children:"\u6307\u5b9a\u76ee\u6807\u540d\u79f0\u7a7a\u95f4\u3002\u5982\u679c\u4e0d\u586b\uff0c\u8d44\u6e90\u4f1a\u88ab\u653e\u5230\u548c\u6e90\u76f8\u540c\u7684\u540d\u79f0\u7a7a\u95f4\u4e0b\u3002"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u4ed3\u5e93\u6241\u5e73\u5316"}),(0,n.jsxs)(e.td,{children:["\u6b64\u9879\u7528\u4ee5\u5728\u590d\u5236\u955c\u50cf\u65f6\u51cf\u5c11\u4ed3\u5e93\u7684\u5c42\u7ea7\u7ed3\u6784\u3002\u5047\u8bbe\u4ed3\u5e93\u7684\u5c42\u7ea7\u7ed3\u6784\u4e3a ",(0,n.jsx)(e.code,{children:"a/b/c/d/img"})," \u4e14\u76ee\u6807\u540d\u79f0\u7a7a\u95f4\u4e3a ",(0,n.jsx)(e.code,{children:"ns"}),"\uff0c\u5219\u6bcf\u4e00\u9879\u5bf9\u5e94\u7684\u7ed3\u679c\u5982\u4e0b\uff1a",(0,n.jsx)("br",{}),"\u66ff\u6362\u6240\u6709\u7ea7(v2.3\u4e4b\u524d\u7248\u672c\u6240\u4f7f\u7528\u7684\u884c\u4e3a\uff09: ",(0,n.jsx)(e.code,{children:"a/b/c/d/img"})," -> ",(0,n.jsx)(e.code,{children:"ns/img"})," ",(0,n.jsx)("br",{}),"\u65e0\u66ff\u6362\uff1a",(0,n.jsx)(e.code,{children:"a/b/c/d/img"})," -> ",(0,n.jsx)(e.code,{children:"ns/a/b/c/d/img"}),(0,n.jsx)("br",{}),"\u66ff\u63621\u7ea7(\u9ed8\u8ba4\u9879)\uff1a",(0,n.jsx)(e.code,{children:"a/b/c/d/img"})," -> ",(0,n.jsx)(e.code,{children:"ns/b/c/d/img"}),(0,n.jsx)("br",{}),"\u66ff\u63622\u7ea7\uff1a",(0,n.jsx)(e.code,{children:"a/b/c/d/img"})," -> ",(0,n.jsx)(e.code,{children:"ns/c/d/img"})," ",(0,n.jsx)("br",{}),"\u66ff\u63623\u7ea7\uff1a",(0,n.jsx)(e.code,{children:"a/b/c/d/img"}),"  -> ",(0,n.jsx)(e.code,{children:"ns/d/img"})]})]})]})]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"\u89e6\u53d1\u6a21\u5f0f"})," \u9009\u9879\u914d\u7f6e\u8bf4\u660e"]}),"\n",(0,n.jsx)(e.p,{children:":::tip\u8bf4\u660e"}),"\n",(0,n.jsxs)(e.p,{children:["\u9009\u62e9\u5b9a\u65f6\u7684\u683c\u5f0f\u5982\u4e0b\uff0c\u4e3a ",(0,n.jsx)(e.code,{children:"\u79d2 \u5206 \u65f6 \u65e5 \u6708 \u5468"})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_11.44.28.png",alt:"iShot_2023-04-27_11.44.28"})}),"\n",(0,n.jsx)(e.p,{children:":::"}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"\u9009\u9879"}),(0,n.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u624b\u52a8"}),(0,n.jsx)(e.td,{children:"\u624b\u52a8\u64cd\u4f5c\u540c\u6b65"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u5b9a\u65f6"}),(0,n.jsx)(e.td,{children:"\u5b9a\u65f6\u540c\u6b65\uff0c\u53ef\u4ee5\u4f7f\u7528cron\u914d\u7f6e"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:"\u4e8b\u4ef6\u9a71\u52a8"}),(0,n.jsx)(e.td,{children:"\u53ea\u6709\u4e00\u4e2a\u9009\u9879\uff0c\u5373\u5220\u9664\u672c\u5730\u8d44\u6e90\u65f6\u540c\u65f6\u4e5f\u5220\u9664\u8fdc\u7a0b\u7684\u8d44\u6e90"})]})]})]}),"\n",(0,n.jsx)(e.h3,{id:"23-\u624b\u52a8\u8fd0\u884c\u540c\u6b65",children:"2.3 \u624b\u52a8\u8fd0\u884c\u540c\u6b65"}),"\n",(0,n.jsxs)(e.p,{children:["\u5728 ",(0,n.jsx)(e.code,{children:"harbor.ops.com"})," \u4e2d\u624b\u52a8\u521b\u5efa\u4e00\u4e2a\u9879\u76ee ",(0,n.jsx)(e.code,{children:"devops"})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_14.20.01.png",alt:"iShot_2023-04-27_14.20.01"})}),"\n",(0,n.jsx)(e.p,{children:"\u7136\u540e\u4e0a\u4f202\u4e2a\u955c\u50cf"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:"# \u767b\u9646harbor\ndocker login harbor.ops.com\n\n# \u62c9\u53d6\u955c\u50cf\ndocker pull centos\ndocker pull busybox\n\n# \u7ed9\u955c\u50cf\u6253tag\ndocker tag busybox:latest harbor.ops.com/devops/busybox:latest\ndocker tag centos:latest harbor.ops.com/devops/centos:latest\n\n# \u63a8\u9001\u955c\u50cf\u5230harbor\ndocker push harbor.ops.com/devops/busybox:latest\ndocker push harbor.ops.com/devops/centos:latest\n"})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_14.30.18.png",alt:"iShot_2023-04-27_14.30.18"})}),"\n",(0,n.jsxs)(e.p,{children:["\u5728 ",(0,n.jsx)(e.code,{children:"\u590d\u5236\u7ba1\u7406"})," \u624b\u52a8\u70b9\u51fb ",(0,n.jsx)(e.code,{children:"\u590d\u5236"})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_14.31.53.png",alt:"iShot_2023-04-27_14.31.53"})}),"\n",(0,n.jsx)(e.p,{children:"\u786e\u8ba4\u590d\u5236"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_14.32.28.png",alt:"iShot_2023-04-27_14.32.28"})}),"\n",(0,n.jsx)(e.p,{children:"\u7a0d\u7b49\u4e00\u4f1a\u5237\u65b0\u8fdb\u5ea6\u5c31\u53ef\u4ee5\u770b\u5230\u8fd9\u6b21\u7684\u540c\u6b65\u4e86"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_14.35.05.png",alt:"iShot_2023-04-27_14.35.05"})}),"\n",(0,n.jsxs)(e.p,{children:["\u5728 ",(0,n.jsx)(e.code,{children:"harbor-bak.ops.com"})," \u4e2d\u67e5\u770b\uff0c\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u540c\u6b65\u8fc7\u6765\u4e86"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_15.10.16.png",alt:"iShot_2023-04-27_15.10.16"})}),"\n",(0,n.jsx)(e.h3,{id:"24-\u914d\u7f6e\u81ea\u52a8\u540c\u6b65",children:"2.4 \u914d\u7f6e\u81ea\u52a8\u540c\u6b65"}),"\n",(0,n.jsxs)(e.p,{children:["\u89e6\u53d1\u6a21\u5f0f\u9009\u62e9 ",(0,n.jsx)(e.code,{children:"\u81ea\u52a8"})," \uff0c\u7136\u540e\u5b9a\u4e49 ",(0,n.jsx)(e.code,{children:"0 */2 * * * *"})," \u8868\u793a\u6bcf\u96942\u5206\u949f\u6267\u884c\u4e00\u6b21\u540c\u6b65\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0charbor\u4e2d\u7684\u8ba1\u5212\u4efb\u52a1\u591a\u4e86\u4e00\u4e2a\u79d2\uff0c\u5373\u6700\u5f00\u5934\u76840\u8868\u793a\u79d2\u4e14\u65e0\u6cd5\u4fee\u6539"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_15.34.52.png",alt:"iShot_2023-04-27_15.34.52"})}),"\n",(0,n.jsxs)(e.p,{children:["\u5728 ",(0,n.jsx)(e.code,{children:"\u590d\u5236\u4efb\u52a1"})," \u4e2d\u5c31\u53ef\u4ee5\u770b\u5230\u6267\u884c\u7684\u540c\u6b65\u5386\u53f2\u8bb0\u5f55"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-04-27_15.30.36.png",alt:"iShot_2023-04-27_15.30.36"})})]})}function a(r={}){const{wrapper:e}={...(0,c.R)(),...r.components};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(o,{...r})}):o(r)}},28453:(r,e,s)=>{s.d(e,{R:()=>t,x:()=>d});var n=s(96540);const c={},i=n.createContext(c);function t(r){const e=n.useContext(i);return n.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function d(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(c):r.components||c:t(r.components),n.createElement(i.Provider,{value:e},r.children)}}}]);