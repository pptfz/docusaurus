"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[1965],{90480:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});var a=s(74848),i=s(28453);const l={},c="docusaurus\u914d\u7f6ealgolia\u641c\u7d22",r={id:"\u535a\u5ba2\u5de5\u5177/Docusaurus/docusaurus\u914d\u7f6ealgolia\u641c\u7d22",title:"docusaurus\u914d\u7f6ealgolia\u641c\u7d22",description:"\u8fd9\u4e2a\u6587\u7ae0\u5199\u7684\u5f88\u4e0d\u9519",source:"@site/docs/\u535a\u5ba2\u5de5\u5177/Docusaurus/docusaurus\u914d\u7f6ealgolia\u641c\u7d22.md",sourceDirName:"\u535a\u5ba2\u5de5\u5177/Docusaurus",slug:"/\u535a\u5ba2\u5de5\u5177/Docusaurus/docusaurus\u914d\u7f6ealgolia\u641c\u7d22",permalink:"/docs/\u535a\u5ba2\u5de5\u5177/Docusaurus/docusaurus\u914d\u7f6ealgolia\u641c\u7d22",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"docusaurus\u77e5\u8bc6\u70b9",permalink:"/docs/\u535a\u5ba2\u5de5\u5177/Docusaurus/docusaurus\u77e5\u8bc6\u70b9"},next:{title:"\u90e8\u7f72\u5230GitHub Pages",permalink:"/docs/\u535a\u5ba2\u5de5\u5177/Docusaurus/\u90e8\u7f72\u5230GitHub Pages"}},t={},o=[{value:"1.\u524d\u671f\u51c6\u5907",id:"1\u524d\u671f\u51c6\u5907",level:2},{value:"1.1 \u6ce8\u518calgolia\u8d26\u53f7",id:"11-\u6ce8\u518calgolia\u8d26\u53f7",level:3},{value:"1.2 \u521b\u5efa\u7d22\u5f15",id:"12-\u521b\u5efa\u7d22\u5f15",level:3},{value:"1.3 \u83b7\u53d6API Key",id:"13-\u83b7\u53d6api-key",level:3},{value:"2.\u5b89\u88c5\u63d2\u4ef6",id:"2\u5b89\u88c5\u63d2\u4ef6",level:2},{value:"2.1 \u5b89\u88c5 algolia docsearch \u63d2\u4ef6",id:"21-\u5b89\u88c5-algolia-docsearch-\u63d2\u4ef6",level:3},{value:"2.2 \u5b89\u88c5 sitemap \u63d2\u4ef6",id:"22-\u5b89\u88c5-sitemap-\u63d2\u4ef6",level:3},{value:"3.\u914d\u7f6e docusaurus",id:"3\u914d\u7f6e-docusaurus",level:2},{value:"3.1 \u914d\u7f6e algolia docsearch \u63d2\u4ef6",id:"31-\u914d\u7f6e-algolia-docsearch-\u63d2\u4ef6",level:3},{value:"3.2 \u914d\u7f6e sitemap \u63d2\u4ef6",id:"32-\u914d\u7f6e-sitemap-\u63d2\u4ef6",level:3},{value:"4.\u63a8\u9001\u6570\u636e",id:"4\u63a8\u9001\u6570\u636e",level:2},{value:"4.1 \u5b89\u88c5\u4f9d\u8d56\u73af\u5883",id:"41-\u5b89\u88c5\u4f9d\u8d56\u73af\u5883",level:3},{value:"4.2 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",id:"42-\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",level:3},{value:"4.3 \u8fd0\u884c\u722c\u866b",id:"43-\u8fd0\u884c\u722c\u866b",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"docusaurus\u914d\u7f6ealgolia\u641c\u7d22",children:"docusaurus\u914d\u7f6ealgolia\u641c\u7d22"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://blog.7wate.com/?p=75",children:"\u8fd9\u4e2a\u6587\u7ae0\u5199\u7684\u5f88\u4e0d\u9519"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.algolia.com/",children:"algolia\u5b98\u7f51"})}),"\n",(0,a.jsx)(n.h2,{id:"1\u524d\u671f\u51c6\u5907",children:"1.\u524d\u671f\u51c6\u5907"}),"\n",(0,a.jsx)(n.h3,{id:"11-\u6ce8\u518calgolia\u8d26\u53f7",children:"1.1 \u6ce8\u518calgolia\u8d26\u53f7"}),"\n",(0,a.jsxs)(n.p,{children:["\u81ea\u884c\u767b\u9646 ",(0,a.jsx)(n.a,{href:"https://www.algolia.com/",children:"algolia\u5b98\u7f51"})," \u6ce8\u518c\u8d26\u53f7"]}),"\n",(0,a.jsx)(n.h3,{id:"12-\u521b\u5efa\u7d22\u5f15",children:"1.2 \u521b\u5efa\u7d22\u5f15"}),"\n",(0,a.jsxs)(n.p,{children:["\u6ce8\u518c\u5b8c\u5e76\u4e14\u5b8c\u6210\u90ae\u4ef6\u9a8c\u8bc1\u540e\u4f1a\u9ed8\u8ba4\u521b\u5efa\u4e00\u4e2a ",(0,a.jsx)(n.code,{children:"My First Application"})," \u7a0b\u5e8f"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_11.17.21.png",alt:"iShot_2023-08-10_11.17.21"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u8fd9\u4e2a ",(0,a.jsx)(n.code,{children:"My First Application"})," \u7a0b\u5e8f\u4e0b\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_11.21.28.png",alt:"iShot_2023-08-10_11.21.28"})}),"\n",(0,a.jsxs)(n.p,{children:["\u8fd9\u91cc\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ",(0,a.jsx)(n.code,{children:"docusaurus"})," \u7684\u7d22\u5f15"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_11.23.23.png",alt:"iShot_2023-08-10_11.23.23"})}),"\n",(0,a.jsx)(n.h3,{id:"13-\u83b7\u53d6api-key",children:"1.3 \u83b7\u53d6API Key"}),"\n",(0,a.jsxs)(n.p,{children:["\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684 ",(0,a.jsx)(n.code,{children:"Settings"})," \uff0c\u5728\u53f3\u4e0a\u89d2\u7684 ",(0,a.jsx)(n.code,{children:"Team and Access"})," \u5904\u70b9\u51fb\u4e0b\u8fb9\u7684 ",(0,a.jsx)(n.code,{children:"API Keys"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_11.26.01.png",alt:"iShot_2023-08-10_11.26.01"})}),"\n",(0,a.jsxs)(n.p,{children:["\u9700\u8981\u83b7\u53d6 ",(0,a.jsx)(n.code,{children:"Application ID"})," \u3001",(0,a.jsx)(n.code,{children:"Search-Only API Key"})," \u548c ",(0,a.jsx)(n.code,{children:"Admin API Key"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_11.28.14.png",alt:"iShot_2023-08-10_11.28.14"})}),"\n",(0,a.jsx)(n.h2,{id:"2\u5b89\u88c5\u63d2\u4ef6",children:"2.\u5b89\u88c5\u63d2\u4ef6"}),"\n",(0,a.jsxs)(n.h3,{id:"21-\u5b89\u88c5-algolia-docsearch-\u63d2\u4ef6",children:["2.1 \u5b89\u88c5 ",(0,a.jsx)(n.a,{href:"https://docusaurus.io/zh-CN/docs/api/themes/@docusaurus/theme-search-algolia",children:"algolia docsearch"})," \u63d2\u4ef6"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install --save @docusaurus/theme-search-algolia\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"22-\u5b89\u88c5-sitemap-\u63d2\u4ef6",children:["2.2 \u5b89\u88c5 ",(0,a.jsx)(n.a,{href:"https://docusaurus.io/zh-CN/docs/api/plugins/@docusaurus/plugin-sitemap",children:"sitemap"})," \u63d2\u4ef6"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install --save @docusaurus/plugin-sitemap\n"})}),"\n",(0,a.jsx)(n.h2,{id:"3\u914d\u7f6e-docusaurus",children:"3.\u914d\u7f6e docusaurus"}),"\n",(0,a.jsxs)(n.h3,{id:"31-\u914d\u7f6e-algolia-docsearch-\u63d2\u4ef6",children:["3.1 \u914d\u7f6e ",(0,a.jsx)(n.a,{href:"https://docusaurus.io/zh-CN/docs/api/themes/@docusaurus/theme-search-algolia",children:"algolia docsearch"})," \u63d2\u4ef6"]}),"\n",(0,a.jsxs)(n.p,{children:["\u7f16\u8f91 ",(0,a.jsx)(n.code,{children:"docusaurus.config.js"})," \uff0c\u586b\u5199\u5982\u4e0b\u914d\u7f6e"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'themeConfig:\n    /** @type {import(\'@docusaurus/preset-classic\').ThemeConfig} */\n    ({\n      // Replace with your project\'s social card\n    ......\n    algolia: {\n        apiKey: "Search-Only API Key",\n        appId: "Application ID",\n        indexName: "\u7d22\u5f15\u540d\u79f0",\n    },\n  ......    \n  }),\n};      \n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5b8c\u6210\u914d\u7f6e\u540e\u5237\u65b0\u6d4f\u89c8\u5668\uff0c\u5c31\u4f1a\u770b\u5230\u5728\u6700\u53f3\u4e0a\u89d2\u4f1a\u51fa\u73b0\u4e00\u4e2a\u641c\u7d22\u6846"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_12.32.04.png",alt:"iShot_2023-08-10_12.32.04"})}),"\n",(0,a.jsx)(n.p,{children:"\u6253\u5f00\u540e\u6548\u679c\u5982\u4e0b"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_12.33.20.png",alt:"iShot_2023-08-10_12.33.20"})}),"\n",(0,a.jsxs)(n.h3,{id:"32-\u914d\u7f6e-sitemap-\u63d2\u4ef6",children:["3.2 \u914d\u7f6e ",(0,a.jsx)(n.a,{href:"https://docusaurus.io/zh-CN/docs/api/plugins/@docusaurus/plugin-sitemap",children:"sitemap"})," \u63d2\u4ef6"]}),"\n",(0,a.jsxs)(n.p,{children:["\u7f16\u8f91 ",(0,a.jsx)(n.code,{children:"docusaurus.config.js"})," \uff0c\u586b\u5199\u5982\u4e0b\u914d\u7f6e"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"presets: [\n    [\n    ...\n    sitemap: {\n      changefreq: 'weekly',\n      priority: 0.5,\n      ignorePatterns: ['/tags/**'],\n      filename: 'sitemap.xml',\n    },\n    ...\n   ],\n  ],\n"})}),"\n",(0,a.jsx)(n.h2,{id:"4\u63a8\u9001\u6570\u636e",children:"4.\u63a8\u9001\u6570\u636e"}),"\n",(0,a.jsx)(n.p,{children:"algolia\u5b98\u65b9\u63d0\u4f9b2\u79cd\u65b9\u5f0f"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u7531algolia\u5b98\u65b9\u722c\u53d6\u4f60\u7684\u7f51\u7ad9\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,a.jsx)(n.a,{href:"https://docsearch.algolia.com/docs/what-is-docsearch",children:"\u5b98\u65b9\u6587\u6863"})]}),"\n",(0,a.jsxs)(n.li,{children:["\u81ea\u884c\u8fd0\u884c\u722c\u866b\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,a.jsx)(n.a,{href:"https://docsearch.algolia.com/docs/legacy/run-your-own",children:"\u5b98\u65b9\u6587\u6863"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u81ea\u884c\u8fd0\u884c\u722c\u866b\u7a0b\u5e8f"}),"\n",(0,a.jsx)(n.h3,{id:"41-\u5b89\u88c5\u4f9d\u8d56\u73af\u5883",children:"4.1 \u5b89\u88c5\u4f9d\u8d56\u73af\u5883"}),"\n",(0,a.jsx)(n.p,{children:"\u5b89\u88c5docker"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'# \u963f\u91cc\u4e91yum\u6e90\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\nyum -y install docker-ce\n\nsystemctl start docker && systemctl enable docker  \n\n# \u914d\u7f6e\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f\u5730\u5740\ncat > /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://gqk8w9va.mirror.aliyuncs.com"]\n}\nEOF\n\n# \u914d\u7f6e\u5b8c\u6210\u540e\u91cd\u542fdocker\nsystemctl restart docker\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5b89\u88c5jq"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/stedolan/jq/wiki/Installation",children:"jq\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u547d\u4ee4\u884cjson\u5904\u7406\u5668"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"yum -y install jq\n"})}),"\n",(0,a.jsx)(n.h3,{id:"42-\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6",children:"4.2 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,a.jsxs)(n.p,{children:["\u7f16\u8f91 ",(0,a.jsx)(n.code,{children:".env"})," \u6587\u4ef6"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"APPLICATION_ID=Application ID\nAPI_KEY=Admin API Key\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u7f16\u8f91 ",(0,a.jsx)(n.code,{children:"config.json"})," \u6587\u4ef6"]}),"\n",(0,a.jsxs)(n.admonition,{title:"\u8bf4\u660e",type:"tip",children:[(0,a.jsxs)(n.p,{children:["\u9700\u8981\u5c06 ",(0,a.jsx)(n.code,{children:"start_urls"})," \u548c ",(0,a.jsx)(n.code,{children:"sitemap_urls"})," \u4e2d\u7684 ",(0,a.jsx)(n.code,{children:"xxx.com"})," \u66ff\u6362\u4e3a\u81ea\u5df1\u7684\u57df\u540d"]}),(0,a.jsxs)(n.p,{children:["\u9700\u8981\u5c06 ",(0,a.jsx)(n.code,{children:"index_name"})," \u4e2d\u7684 ",(0,a.jsx)(n.code,{children:"xxx"})," \u66ff\u6362\u4e3a\u81ea\u5df1\u7684\u7d22\u5f15\u540d\u79f0"]})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "index_name": "xxx",\n  "start_urls": [\n    "https://xxx.com/"\t\t\t\t\t\n  ],\n  "sitemap_urls": [\n    "https://xxx.com/sitemap.xml"\t\t\n  ],\n  "stop_urls": [\n    "/search",\n    "/v3me",\n    "/playground",\n    "/inspector"\n  ],\n  "sitemap_alternate_links": true,\n  "selectors": {\n    "lvl0": {\n      "selector": "(//ul[contains(@class,\'menu__list\')]//a[contains(@class, \'menu__link menu__link--sublist menu__link--active\')]/text() | //nav[contains(@class, \'navbar\')]//a[contains(@class, \'navbar__link--active\')]/text())[last()]",\n      "type": "xpath",\n      "global": true,\n      "default_value": "Documentation"\n    },\n    "lvl1": "header h1",\n    "lvl2": "article h2",\n    "lvl3": "article h3",\n    "lvl4": "article h4",\n    "lvl5": "article h5, article td:first-child",\n    "lvl6": "article h6",\n    "text": "article p, article li, article td:last-child"\n  },\n  "strip_chars": " .,;:#",\n  "custom_settings": {\n    "separatorsToIndex": "_",\n    "attributesForFaceting": [\n      "language",\n      "version",\n      "type",\n      "docusaurus_tag"\n    ],\n    "attributesToRetrieve": [\n      "hierarchy",\n      "content",\n      "anchor",\n      "url",\n      "url_without_anchor",\n      "type"\n    ]\n  },\n  "js_render": true,\n  "nb_hits": 856\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"43-\u8fd0\u884c\u722c\u866b",children:"4.3 \u8fd0\u884c\u722c\u866b"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'docker run \\\n  --rm \\\n  -it \\\n  --env-file=.env \\\n  -e "CONFIG=$(cat config.json | jq -r tostring)" \\\n  algolia/docsearch-scraper\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679c\u8fd4\u56de\u5982\u4e0b\uff0c\u8bf4\u660e\u5df2\u7ecf\u722c\u53d6\u5230\u8bb0\u5f55"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"> DocSearch: http://xxx.com/ 1 records)\n\nNb hits: 1\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5728algolia\u5b98\u7f51\u4e2d\u53ef\u4ee5\u770b\u5230\u722c\u53d6\u7684\u8bb0\u5f55"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2023-08-10_12.59.48.png",alt:"iShot_2023-08-10_12.59.48"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var a=s(96540);const i={},l=a.createContext(i);function c(e){const n=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);