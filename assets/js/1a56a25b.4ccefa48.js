"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5248],{33909:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var s=t(74848),o=t(28453);const r={},i=void 0,c={id:"linux/shell/\u5404\u79cd\u811a\u672c/\u4f18\u5316\u811a\u672c/\u7cfb\u7edf\u4f18\u5316\u811a\u672c",title:"\u7cfb\u7edf\u4f18\u5316\u811a\u672c",description:"centos7\u7cfb\u7edf\u4f18\u5316\u811a\u672c",source:"@site/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u4f18\u5316\u811a\u672c/\u7cfb\u7edf\u4f18\u5316\u811a\u672c.md",sourceDirName:"linux/shell/\u5404\u79cd\u811a\u672c/\u4f18\u5316\u811a\u672c",slug:"/linux/shell/\u5404\u79cd\u811a\u672c/\u4f18\u5316\u811a\u672c/\u7cfb\u7edf\u4f18\u5316\u811a\u672c",permalink:"/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u4f18\u5316\u811a\u672c/\u7cfb\u7edf\u4f18\u5316\u811a\u672c",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u767b\u5f55\u63d0\u793a\u811a\u672c",permalink:"/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u4f18\u5316\u811a\u672c/\u767b\u5f55\u63d0\u793a\u811a\u672c"},next:{title:"shell\u811a\u672c-\u4fc4\u7f57\u65af\u65b9\u5757",permalink:"/docs/linux/shell/\u5404\u79cd\u811a\u672c/\u5927\u795e\u6770\u4f5c/shell\u811a\u672c-\u4fc4\u7f57\u65af\u65b9\u5757"}},l={},a=[{value:"centos7\u7cfb\u7edf\u4f18\u5316\u811a\u672c",id:"centos7\u7cfb\u7edf\u4f18\u5316\u811a\u672c",level:2}];function p(e){const n={code:"code",h2:"h2",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"centos7\u7cfb\u7edf\u4f18\u5316\u811a\u672c",children:"centos7\u7cfb\u7edf\u4f18\u5316\u811a\u672c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"#!/usr/bin/env bash\n#\n\nset -e\n\n# \u4fee\u6539\u7cfb\u7edfyum\u6e90\u4e3aaliyun\u5e76\u6dfb\u52a0epel\u6e90\nmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak\n[ ! -e /etc/yum.repos.d/CentOS-Base.repo ] && curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo && sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo\n\n[ ! -e /etc/yum.repos.d/epel.repo ] && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\nyum makecache\nyum -y install ntpdate tar wget net-tools git vim tree lrzsz htop iftop iotop psmisc python36 python3-devel zlib zlib-devel gcc gcc-c++ conntrack-tools jq socat bash-completion telnet nload strace tcpdump lsof sysstat\n\n# \u5173\u95edswap\nsed -i 's/.*swap.*/#&/' /etc/fstab\n\n# \u5173\u95ed\u9632\u706b\u5899\u3001selinux\u3001NetworkManager\nsystemctl disable firewalld NetworkManager\nsed -i '7s/enforcing/disabled/' /etc/selinux/config\n\n# \u540c\u6b65\u65f6\u95f4\u8ba1\u5212\u4efb\u52a1\necho \"*/10 * * * * /usr/sbin/ntpdate ntp2.aliyun.com &>/dev/null\" >> /var/spool/cron/root\n\n# \u5386\u53f2\u547d\u4ee4\u663e\u793a\u65f6\u95f4\nsed -i '/HISTFILESIZE=2000/d' /etc/bashrc\nsed -i '/HISTSIZE=2000/d' /etc/bashrc\nsed -i '/HISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S \"/d' /etc/bashrc\nsed -i '/export HISTTIMEFORMAT/d' /etc/bashrc\ncat >> /etc/bashrc << EOF\nHISTFILESIZE=2000\nHISTSIZE=2000\nHISTTIMEFORMAT=\"%Y-%m-%d %H:%M:%S \"\nexport HISTTIMEFORMAT\nEOF\nsource /etc/bashrc\n\n# \u4fee\u6539\u7cfb\u7edf\u6700\u5927\u6587\u4ef6\u63cf\u8ff0\u7b26\nsed -i '/root soft nofile 65535/d' /etc/security/limits.conf\nsed -i '/root hard nofile 65535/d' /etc/security/limits.conf\nsed -i '/* soft nofile 65535/d' /etc/security/limits.conf\nsed -i '/* hard nofile 65535/d' /etc/security/limits.conf\ncat >>/etc/security/limits.conf<<'EOF'\nroot soft nofile 65535\nroot hard nofile 65535\n* soft nofile 65535\n* hard nofile 65535\nEOF\n\n# \u8bbe\u7f6epip\u56fd\u5185\u6e90\n[ -d ~/.pip ] || mkdir ~/.pip\ncat > ~/.pip/pip.conf << EOF\n[global]\nindex-url = https://mirrors.aliyun.com/pypi/simple/\n\n[install]\ntrusted-host=mirrors.aliyun.com\nEOF\n\n# \u5b89\u88c5 glances mycli \npip3 install --upgrade pip\npip3 install glances mycli==1.24.0\n\n# \u8bbe\u7f6e\u522b\u540d\ncat >> ~/.bashrc << EOF\nalias n='netstat -ntpl'\nalias u='netstat -nupl'\nalias a='netstat -natupl'\nEOF\n\n# \u91cd\u542f\u7cfb\u7edf\u4f7f\u90e8\u5206\u914d\u7f6e\u751f\u6548\nreboot\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var s=t(96540);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);