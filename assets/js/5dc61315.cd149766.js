"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7813],{95033:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var d=i(74848),t=i(28453);const l={},r="\u56fe\u89e3kubernetes Pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8",s={id:"\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/pod/\u56fe\u89e3kubernetes pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8",title:"\u56fe\u89e3kubernetes pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8",description:"[toc]",source:"@site/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/pod/\u56fe\u89e3kubernetes pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8.md",sourceDirName:"\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/pod",slug:"/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/pod/\u56fe\u89e3kubernetes pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/pod/\u56fe\u89e3kubernetes pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"yaml\u6587\u4ef6",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/pod/yaml\u6587\u4ef6"},next:{title:"OpenEBS",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u5b58\u50a8/OpenEBS"}},o={},c=[{value:"1. \u57fa\u7840\u7b51\u57fa",id:"1-\u57fa\u7840\u7b51\u57fa",level:2},{value:"1.1 \u5bb9\u5668\u7ba1\u7406\u7ebf\u7a0b\u6a21\u578b",id:"11-\u5bb9\u5668\u7ba1\u7406\u7ebf\u7a0b\u6a21\u578b",level:3},{value:"1.2 \u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u72b6\u6001\u6700\u7ec8\u4e00\u81f4\u6027",id:"12-\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u72b6\u6001\u6700\u7ec8\u4e00\u81f4\u6027",level:3},{value:"1.3 \u7ec4\u4ef6\u534f\u4f5c\u6d41\u7a0b",id:"13-\u7ec4\u4ef6\u534f\u4f5c\u6d41\u7a0b",level:3},{value:"2.Kubelet\u521b\u5efa\u5bb9\u5668\u6d41\u7a0b",id:"2kubelet\u521b\u5efa\u5bb9\u5668\u6d41\u7a0b",level:2},{value:"2.1 \u83b7\u53d6Pod\u8fdb\u884c\u51c6\u5165\u68c0\u67e5",id:"21-\u83b7\u53d6pod\u8fdb\u884c\u51c6\u5165\u68c0\u67e5",level:3},{value:"2.2 \u521b\u5efa\u4e8b\u4ef6\u7ba1\u9053\u4e0e\u5bb9\u5668\u7ba1\u7406\u4e3b\u7ebf\u7a0b",id:"22-\u521b\u5efa\u4e8b\u4ef6\u7ba1\u9053\u4e0e\u5bb9\u5668\u7ba1\u7406\u4e3b\u7ebf\u7a0b",level:3},{value:"2.3 \u540c\u6b65\u6700\u65b0\u72b6\u6001",id:"23-\u540c\u6b65\u6700\u65b0\u72b6\u6001",level:3},{value:"2.4 \u51c6\u5165\u63a7\u5236\u68c0\u67e5",id:"24-\u51c6\u5165\u63a7\u5236\u68c0\u67e5",level:3},{value:"2.5 \u66f4\u65b0\u5bb9\u5668\u72b6\u6001",id:"25-\u66f4\u65b0\u5bb9\u5668\u72b6\u6001",level:3},{value:"2.6 Cgroup\u914d\u7f6e",id:"26-cgroup\u914d\u7f6e",level:3},{value:"2.7 Pod\u57fa\u7840\u8fd0\u884c\u73af\u5883\u51c6\u5907",id:"27-pod\u57fa\u7840\u8fd0\u884c\u73af\u5883\u51c6\u5907",level:3},{value:"3.ContainerRuntime",id:"3containerruntime",level:2},{value:"3.1 \u8ba1\u7b97Pod\u5bb9\u5668\u53d8\u66f4",id:"31-\u8ba1\u7b97pod\u5bb9\u5668\u53d8\u66f4",level:3},{value:"3.2 \u521d\u59cb\u5316\u5931\u8d25\u5c1d\u8bd5\u7ec8\u6b62",id:"32-\u521d\u59cb\u5316\u5931\u8d25\u5c1d\u8bd5\u7ec8\u6b62",level:3},{value:"3.3 \u672a\u77e5\u72b6\u6001\u5bb9\u5668\u8865\u507f",id:"33-\u672a\u77e5\u72b6\u6001\u5bb9\u5668\u8865\u507f",level:3},{value:"3.4 \u521b\u5efa\u5bb9\u5668\u6c99\u7bb1",id:"34-\u521b\u5efa\u5bb9\u5668\u6c99\u7bb1",level:3},{value:"3.5 \u542f\u52a8Pod\u76f8\u5173\u5bb9\u5668",id:"35-\u542f\u52a8pod\u76f8\u5173\u5bb9\u5668",level:3},{value:"3.5.1 \u68c0\u67e5\u5bb9\u5668\u955c\u50cf\u662f\u5426\u62c9\u53d6",id:"351-\u68c0\u67e5\u5bb9\u5668\u955c\u50cf\u662f\u5426\u62c9\u53d6",level:4},{value:"3.5.2 \u521b\u5efa\u5bb9\u5668\u914d\u7f6e",id:"352-\u521b\u5efa\u5bb9\u5668\u914d\u7f6e",level:4},{value:"3.5.3 \u8c03\u7528runtimeService\u5b8c\u6210\u5bb9\u5668\u7684\u521b\u5efa",id:"353-\u8c03\u7528runtimeservice\u5b8c\u6210\u5bb9\u5668\u7684\u521b\u5efa",level:4},{value:"3.5.4 \u8c03\u7528runtimeService\u542f\u52a8\u5bb9\u5668",id:"354-\u8c03\u7528runtimeservice\u542f\u52a8\u5bb9\u5668",level:4},{value:"3.5.5 \u6267\u884c\u5bb9\u5668\u7684\u56de\u8c03\u94a9\u5b50",id:"355-\u6267\u884c\u5bb9\u5668\u7684\u56de\u8c03\u94a9\u5b50",level:4},{value:"4. \u8fd0\u884c\u6c99\u7bb1\u5bb9\u5668",id:"4-\u8fd0\u884c\u6c99\u7bb1\u5bb9\u5668",level:2},{value:"4.1 \u62c9\u53d6sandbox\u955c\u50cf",id:"41-\u62c9\u53d6sandbox\u955c\u50cf",level:3},{value:"4.2 \u521b\u5efa\u6c99\u7bb1\u5bb9\u5668",id:"42-\u521b\u5efa\u6c99\u7bb1\u5bb9\u5668",level:3},{value:"4.2.1 \u5e94\u7528SecurityContext",id:"421-\u5e94\u7528securitycontext",level:4},{value:"4.3 \u5176\u4f59\u57fa\u7840\u4fe1\u606f",id:"43-\u5176\u4f59\u57fa\u7840\u4fe1\u606f",level:3},{value:"4.4 \u521b\u5efa\u5bb9\u5668",id:"44-\u521b\u5efa\u5bb9\u5668",level:3},{value:"4.5 \u521b\u5efacheckpoint",id:"45-\u521b\u5efacheckpoint",level:3},{value:"4.6 \u542f\u52a8sandbox\u5bb9\u5668",id:"46-\u542f\u52a8sandbox\u5bb9\u5668",level:3},{value:"4.7 \u5bb9\u5668\u7f51\u7edc\u8bbe\u7f6e",id:"47-\u5bb9\u5668\u7f51\u7edc\u8bbe\u7f6e",level:3},{value:"5. Pod\u5bb9\u5668\u542f\u52a8\u603b\u7ed3",id:"5-pod\u5bb9\u5668\u542f\u52a8\u603b\u7ed3",level:2}];function a(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"[toc]"}),"\n",(0,d.jsx)(n.h1,{id:"\u56fe\u89e3kubernetes-pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8",children:"\u56fe\u89e3kubernetes Pod\u521b\u5efa\u6d41\u7a0b\u5927\u63ed\u79d8"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://www.kubernetes.org.cn/6766.html",children:"\u672c\u6587\u4e25\u91cd\u6284\u88ad\u81f3\u4e92\u8054\u7f51"})}),"\n",(0,d.jsx)(n.p,{children:"kubernetes\u4e2d\u7684\u5bb9\u5668\u521b\u5efa\u65e0\u7591\u662f\u4e2a\u590d\u6742\u7684\u8fc7\u7a0b\uff0c\u6d89\u53ca\u5185\u90e8\u5404\u79cd\u7ec4\u4ef6\u7684\u7edf\u4e00\u534f\u4f5c\uff0c\u8fd8\u6709\u5bf9\u63a5\u5916\u90e8\u7684CRI\u8fd0\u884c\u65f6\uff0c\u672c\u6587\u5c1d\u8bd5\u521d\u63a2\u4e00\u4e0b\u5bb9\u5668\u521b\u5efa\u6d41\u7a0b\u4e2d\u7684\u5404\u79cd\u7ec6\u8282\uff0c\u4e86\u89e3\u5176\u5404\u79cd\u7ec4\u4ef6\u534f\u4f5c\u6d41\u7a0b\uff0c\u4ece\u800c\u5728\u540e\u7eed\u51fa\u73b0\u95ee\u9898\u7684\u65f6\u5019\uff0c\u4e5f\u597d\u80fd\u5927\u6982\u6709\u70b9\u6392\u67e5\u65b9\u5411"}),"\n",(0,d.jsx)(n.h2,{id:"1-\u57fa\u7840\u7b51\u57fa",children:"1. \u57fa\u7840\u7b51\u57fa"}),"\n",(0,d.jsx)(n.h3,{id:"11-\u5bb9\u5668\u7ba1\u7406\u7ebf\u7a0b\u6a21\u578b",children:"1.1 \u5bb9\u5668\u7ba1\u7406\u7ebf\u7a0b\u6a21\u578b"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.26.35.png",alt:"iShot2020-10-15 16.26.35"})}),"\n",(0,d.jsx)(n.p,{children:"kubelet\u4e2d\u7684\u7ebf\u7a0b\u6a21\u578b\u5c5e\u4e8emaster/wroker\u6a21\u578b\uff0c\u901a\u8fc7\u5355master\u6765\u76d1\u542c\u5404\u79cd\u4e8b\u4ef6\u6e90\uff0c\u5e76\u4e3a\u6bcf\u4e2aPod\u521b\u5efa\u4e00\u4e2agoroutine\u6765\u8fdb\u884cPod\u4e1a\u52a1\u903b\u8f91\u7684\u5904\u7406\uff0cmaster\u548cwroker\u4e4b\u95f4\u901a\u8fc7\u4e00\u4e2a\u72b6\u6001\u7ba1\u9053\u6765\u8fdb\u884c\u901a\u4fe1"}),"\n",(0,d.jsx)(n.h3,{id:"12-\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u72b6\u6001\u6700\u7ec8\u4e00\u81f4\u6027",children:"1.2 \u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u72b6\u6001\u6700\u7ec8\u4e00\u81f4\u6027"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.26.59.png",alt:"iShot2020-10-15 16.26.59"})}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u901a\u8fc7yaml\u521b\u5efaPod\u4e4b\u540e\uff0ckubernetes\u4f1a\u6839\u636e\u5f53\u524d\u7684\u4e8b\u4ef6\u548c\u5f53\u524d\u7684Pod\u72b6\u6001\uff0c\u6765\u4e0d\u65ad\u8fdb\u884c\u8c03\u6574\uff0c\u4ece\u800c\u8fbe\u5230\u6700\u7ec8\u76ee\u6807\u72b6\u6001\u7684\u4e00\u81f4\u6027"}),"\n",(0,d.jsx)(n.h3,{id:"13-\u7ec4\u4ef6\u534f\u4f5c\u6d41\u7a0b",children:"1.3 \u7ec4\u4ef6\u534f\u4f5c\u6d41\u7a0b"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.27.31.png",alt:"iShot2020-10-15 16.27.31"})}),"\n",(0,d.jsx)(n.p,{children:"kubelet\u7684\u7ed3\u6784\u4f53\u58f0\u660e\u5c31\u9ad8\u8fbe300\u591a\u884c\u4ee3\u7801\uff0c\u53ef\u89c1\u5176\u590d\u6742\u7a0b\u5ea6\uff0c\u4f46\u662f\u6211\u4eec\u6309\u7167\u5bb9\u5668\u521b\u5efa\u8fd9\u4e2a\u6d41\u7a0b\uff0c\u6211\u4eec\u53bb\u89c2\u5bdf\u5176\u6838\u5fc3\u6d41\u7a0b\uff0c\u5176\u5b9e\u4e3b\u8981\u53ef\u4ee5\u6982\u62ec\u4e3a\u4e09\u90e8\u5206\uff1akubelet\u3001containerRuntime\u3001CRI\u5bb9\u5668\u8fd0\u884c\u65f6"}),"\n",(0,d.jsx)(n.h2,{id:"2kubelet\u521b\u5efa\u5bb9\u5668\u6d41\u7a0b",children:"2.Kubelet\u521b\u5efa\u5bb9\u5668\u6d41\u7a0b"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.27.50.png",alt:"iShot2020-10-15 16.27.50"})}),"\n",(0,d.jsx)(n.h3,{id:"21-\u83b7\u53d6pod\u8fdb\u884c\u51c6\u5165\u68c0\u67e5",children:"2.1 \u83b7\u53d6Pod\u8fdb\u884c\u51c6\u5165\u68c0\u67e5"}),"\n",(0,d.jsx)(n.p,{children:"kubelet\u7684\u4e8b\u4ef6\u6e90\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a\u9759\u6001Pod\u548cApiserver\uff0c\u6211\u4eec\u8fd9\u91cc\u53ea\u8003\u8651\u666e\u901a\u7684Pod\uff0c\u5219\u4f1a\u76f4\u63a5\u5c06Pod\u52a0\u5165\u5230PodManager\u6765\u8fdb\u884c\u7ba1\u7406\uff0c\u5e76\u4e14\u8fdb\u884c\u51c6\u5165\u68c0\u67e5"}),"\n",(0,d.jsx)(n.p,{children:"\u51c6\u5165\u68c0\u67e5\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u5173\u952e\u7684\u63a7\u5236\u5668\uff1a\u9a71\u9010\u7ba1\u7406\u4e0e\u9884\u9009\u68c0\u67e5\u9a71\u9010\u7ba1\u7406\u4e3b\u8981\u662f\u6839\u636e\u5f53\u524d\u7684\u8d44\u6e90\u538b\u529b\uff0c\u68c0\u6d4b\u5bf9\u5e94\u7684Pod\u662f\u5426\u5bb9\u5fcd\u5f53\u524d\u7684\u8d44\u6e90\u538b\u529b\uff1b\u9884\u9009\u68c0\u67e5\u5219\u662f\u6839\u636e\u5f53\u524d\u6d3b\u8dc3\u7684\u5bb9\u5668\u548c\u5f53\u524d\u8282\u70b9\u7684\u4fe1\u606f\u6765\u68c0\u67e5\u662f\u5426\u6ee1\u8db3\u5f53\u524dPod\u7684\u57fa\u7840\u8fd0\u884c\u73af\u5883\uff0c\u4f8b\u5982\u4eb2\u548c\u6027\u68c0\u67e5\uff0c\u540c\u65f6\u5982\u679c\u5f53\u524d\u7684Pod\u7684\u4f18\u5148\u7ea7\u7279\u522b\u9ad8\u6216\u8005\u662f\u9759\u6001Pod\uff0c\u5219\u4f1a\u5c1d\u8bd5\u4e3a\u5176\u8fdb\u884c\u8d44\u6e90\u62a2\u5360\uff0c\u4f1a\u6309\u7167QOS\u7b49\u7ea7\u9010\u7ea7\u6765\u8fdb\u884c\u62a2\u5360\u4ece\u800c\u6ee1\u8db3\u5176\u8fd0\u884c\u73af\u5883"}),"\n",(0,d.jsx)(n.h3,{id:"22-\u521b\u5efa\u4e8b\u4ef6\u7ba1\u9053\u4e0e\u5bb9\u5668\u7ba1\u7406\u4e3b\u7ebf\u7a0b",children:"2.2 \u521b\u5efa\u4e8b\u4ef6\u7ba1\u9053\u4e0e\u5bb9\u5668\u7ba1\u7406\u4e3b\u7ebf\u7a0b"}),"\n",(0,d.jsx)(n.p,{children:"kubelet\u63a5\u6536\u5230\u4e00\u4e2a\u65b0\u521b\u5efa\u7684Pod\u9996\u5148\u4f1a\u4e3a\u5176\u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u7ba1\u9053\uff0c\u5e76\u4e14\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\u7ba1\u7406\u7684\u4e3b\u7ebf\u7a0b\u6d88\u8d39\u7ba1\u9053\u91cc\u9762\u7684\u4e8b\u4ef6\uff0c\u5e76\u4e14\u4f1a\u57fa\u4e8e\u6700\u540e\u540c\u6b65\u65f6\u95f4\u6765\u7b49\u5f85\u5f53\u524dkubelet\u4e2d\u6700\u65b0\u53d1\u751f\u7684\u4e8b\u4ef6(\u4ece\u672c\u5730\u7684podCache\u4e2d\u83b7\u53d6)\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u65b0\u5efa\u7684Pod\uff0c\u5219\u4e3b\u8981\u662f\u901a\u8fc7PLEG\u4e2d\u66f4\u65b0\u65f6\u95f4\u64cd\u4f5c\uff0c\u5e7f\u64ad\u7684\u9ed8\u8ba4\u7a7a\u72b6\u6001\u6765\u4f5c\u4e3a\u6700\u65b0\u7684\u72b6\u6001"}),"\n",(0,d.jsx)(n.h3,{id:"23-\u540c\u6b65\u6700\u65b0\u72b6\u6001",children:"2.3 \u540c\u6b65\u6700\u65b0\u72b6\u6001"}),"\n",(0,d.jsx)(n.p,{children:"\u5f53\u4ece\u672c\u5730\u7684podCache\u4e2d\u83b7\u53d6\u5230\u6700\u65b0\u7684\u72b6\u6001\u4fe1\u606f\u548c\u4ece\u4e8b\u4ef6\u6e90\u83b7\u53d6\u7684Pod\u4fe1\u606f\u540e\uff0c\u4f1a\u7ed3\u5408\u5f53\u524d\u5f53\u524dstatusManager\u548cprobeManager\u91cc\u9762\u7684Pod\u91cc\u9762\u7684\u5bb9\u5668\u72b6\u6001\u6765\u66f4\u65b0\uff0c\u4ece\u800c\u83b7\u53d6\u5f53\u524d\u611f\u77e5\u5230\u7684\u6700\u65b0\u7684Pod\u72b6\u6001"}),"\n",(0,d.jsx)(n.h3,{id:"24-\u51c6\u5165\u63a7\u5236\u68c0\u67e5",children:"2.4 \u51c6\u5165\u63a7\u5236\u68c0\u67e5"}),"\n",(0,d.jsx)(n.p,{children:"\u4e4b\u524d\u7684\u51c6\u5165\u68c0\u67e5\u662fPod\u8fd0\u884c\u7684\u8d44\u6e90\u786c\u6027\u9650\u5236\u7684\u68c0\u67e5\uff0c\u800c\u8fd9\u91cc\u7684\u51c6\u5165\u68c0\u67e5\u5219\u662f\u8f6f\u72b6\u6001\u5373\u5bb9\u5668\u8fd0\u884c\u65f6\u548c\u7248\u672c\u7684\u4e00\u4e9b\u8f6f\u4ef6\u8fd0\u884c\u73af\u5883\u68c0\u67e5\uff0c\u5982\u679c\u8fd9\u91cc\u68c0\u67e5\u5931\u8d25\uff0c\u5219\u4f1a\u8bb2\u5bf9\u5e94\u7684\u5bb9\u5668\u72b6\u6001\u8bbe\u7f6e\u4e3aBlocked"}),"\n",(0,d.jsx)(n.h3,{id:"25-\u66f4\u65b0\u5bb9\u5668\u72b6\u6001",children:"2.5 \u66f4\u65b0\u5bb9\u5668\u72b6\u6001"}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u901a\u8fc7\u51c6\u5165\u68c0\u67e5\u4e4b\u540e\uff0c\u4f1a\u8c03\u7528statusManager\u6765\u8fdb\u884cPOd\u6700\u65b0\u72b6\u6001\u7684\u540c\u6b65\uff0c\u6b64\u5904\u53ef\u80fd\u4f1a\u540c\u6b65\u7ed9apiserver"}),"\n",(0,d.jsx)(n.h3,{id:"26-cgroup\u914d\u7f6e",children:"2.6 Cgroup\u914d\u7f6e"}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u66f4\u65b0\u5b8c\u6210\u72b6\u6001\u4e4b\u540e\u4f1a\u542f\u52a8\u4e00\u4e2aPodCOntainerManager\u4e3b\u8981\u4f5c\u7528\u5219\u662f\u4e3a\u5bf9\u5e94\u7684Pod\u6839\u636e\u5176QOS\u7b49\u7ea7\u6765\u8fdb\u884cCgroup\u914d\u7f6e\u7684\u66f4\u65b0"}),"\n",(0,d.jsx)(n.h3,{id:"27-pod\u57fa\u7840\u8fd0\u884c\u73af\u5883\u51c6\u5907",children:"2.7 Pod\u57fa\u7840\u8fd0\u884c\u73af\u5883\u51c6\u5907"}),"\n",(0,d.jsx)(n.p,{children:"\u63a5\u4e0b\u6765kubelet\u4f1a\u4e3aPod\u7684\u521b\u5efa\u51c6\u5907\u57fa\u7840\u7684\u73af\u5883\uff0c\u5305\u62ecPod\u6570\u636e\u76ee\u5f55\u7684\u521b\u5efa\u3001\u955c\u50cf\u79d8\u94a5\u7684\u83b7\u53d6\u3001\u7b49\u5f85volume\u6302\u8f7d\u5b8c\u6210\u7b49\u64cd\u4f5c\u521b\u5efaPod\u7684\u6570\u636e\u76ee\u5f55\u4e3b\u8981\u662f\u521b\u5efa Pod\u8fd0\u884c\u6240\u9700\u8981\u7684Pod\u3001\u63d2\u4ef6\u3001Volume\u76ee\u5f55\uff0c\u5e76\u4e14\u4f1a\u901a\u8fc7Pod\u914d\u7f6e\u7684\u955c\u50cf\u62c9\u53d6\u79d8\u94a5\u751f\u6210\u79d8\u94a5\u4fe1\u606f\uff0c\u5230\u6b64kubelet\u521b\u5efa\u5bb9\u5668\u7684\u5de5\u4f5c\u5c31\u5df2\u7ecf\u57fa\u672c\u5b8c\u6210"}),"\n",(0,d.jsx)(n.h2,{id:"3containerruntime",children:"3.ContainerRuntime"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.28.11.png",alt:"iShot2020-10-15 16.28.11"})}),"\n",(0,d.jsx)(n.p,{children:"\u524d\u9762\u6211\u4eec\u63d0\u5230\u8fc7\u9488\u5bf9Pod\u7684\u64cd\u4f5c\uff0c\u6700\u7ec8\u90fd\u662f\u57fa\u4e8e\u4e8b\u4ef6\u548c\u72b6\u6001\u7684\u540c\u6b65\u800c\u5b8c\u6210\uff0c\u5728containerRUntime\u5e76\u4e0d\u4f1a\u533a\u5206\u5bf9\u5e94\u7684\u4e8b\u4ef6\u662f\u521b\u5efa\u8fd8\u662f\u66f4\u65b0\u64cd\u4f5c\uff0c\u53ea\u662f\u6839\u636e\u5f53\u524d\u7684Pod\u7684\u4fe1\u606f\u4e0e\u76ee\u6807\u72b6\u6001\u6765\u8fdb\u884c\u5bf9\u6bd4\uff0c\u4ece\u800c\u6784\u5efa\u51fa\u5bf9\u5e94\u7684\u64cd\u4f5c\uff0c\u8fbe\u5230\u76ee\u6807\u72b6\u6001"}),"\n",(0,d.jsx)(n.h3,{id:"31-\u8ba1\u7b97pod\u5bb9\u5668\u53d8\u66f4",children:"3.1 \u8ba1\u7b97Pod\u5bb9\u5668\u53d8\u66f4"}),"\n",(0,d.jsx)(n.p,{children:"\u8ba1\u7b97\u5bb9\u5668\u53d8\u66f4\u4e3b\u8981\u5305\u62ec\uff1aPod\u7684sandbox\u662f\u5426\u53d8\u66f4\u3001\u77ed\u58f0\u660e\u5468\u671f\u5bb9\u5668\u3001\u521d\u59cb\u5316\u5bb9\u5668\u662f\u5426\u5b8c\u6210\u3001\u4e1a\u52a1\u5bb9\u5668\u662f\u5426\u5df2\u7ecf\u5b8c\u6210\uff0c\u76f8\u5e94\u7684\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u4e2a\u51e0\u4e2a\u5bf9\u5e94\u7684\u5bb9\u5668\u5217\u8868\uff1a\u9700\u8981\u88abkill\u6389\u7684\u5bb9\u5668\u5217\u8868\u3001\u9700\u8981\u542f\u52a8\u7684\u5bb9\u5668\u5217\u8868\uff0c\u6ce8\u610f\u5982\u679c\u6211\u4eec\u7684\u521d\u59cb\u5316\u5bb9\u5668\u672a\u5b8c\u6210\uff0c\u5219\u4e0d\u4f1a\u8fdb\u884c\u5c06\u8981\u8fd0\u884c\u7684\u4e1a\u52a1\u5bb9\u5668\u52a0\u5165\u5230\u9700\u8981\u542f\u52a8\u7684\u5bb9\u5668\u5217\u8868\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u5730\u65b9\u662f\u4e24\u4e2a\u9636\u6bb5"}),"\n",(0,d.jsx)(n.h3,{id:"32-\u521d\u59cb\u5316\u5931\u8d25\u5c1d\u8bd5\u7ec8\u6b62",children:"3.2 \u521d\u59cb\u5316\u5931\u8d25\u5c1d\u8bd5\u7ec8\u6b62"}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u679c\u4e4b\u524d\u68c0\u6d4b\u5230\u4e4b\u524d\u7684\u521d\u59cb\u5316\u5bb9\u5668\u5931\u8d25\uff0c\u5219\u4f1a\u68c0\u67e5\u5f53\u524dPod\u7684\u6240\u6709\u5bb9\u5668\u548csandbox\u5173\u8054\u7684\u5bb9\u5668\u5982\u679c\u6709\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff0c\u4f1a\u5168\u90e8\u8fdb\u884cKill\u64cd\u4f5c\uff0c\u5e76\u4e14\u7b49\u5f85\u64cd\u4f5c\u5b8c\u6210"}),"\n",(0,d.jsx)(n.h3,{id:"33-\u672a\u77e5\u72b6\u6001\u5bb9\u5668\u8865\u507f",children:"3.3 \u672a\u77e5\u72b6\u6001\u5bb9\u5668\u8865\u507f"}),"\n",(0,d.jsx)(n.p,{children:"\u5f53\u4e00\u4e9bPod\u7684\u5bb9\u5668\u5df2\u7ecf\u8fd0\u884c\uff0c\u4f46\u662f\u5176\u72b6\u6001\u4ecd\u7136\u662fUnknow\u7684\u65f6\u5019\uff0c\u5728\u8fd9\u4e2a\u5730\u65b9\u4f1a\u8fdb\u884c\u7edf\u4e00\u7684\u5904\u7406\uff0c\u5168\u90e8kill\u6389\uff0c\u4ece\u800c\u4e3a\u63a5\u4e0b\u6765\u7684\u91cd\u65b0\u542f\u52a8\u505a\u6e05\u7406\u64cd\u4f5c\uff0c\u6b64\u5904\u548c3.2\u53ea\u4f1a\u8fdb\u884c\u4e00\u4e2a\u5206\u652f\uff0c\u4f46\u6838\u5fc3\u7684\u76ee\u6807\u90fd\u662f\u6e05\u7406\u90a3\u4e9b\u8fd0\u884c\u5931\u8d25\u6216\u8005\u65e0\u6cd5\u83b7\u53d6\u72b6\u6001\u7684\u5bb9\u5668"}),"\n",(0,d.jsx)(n.h3,{id:"34-\u521b\u5efa\u5bb9\u5668\u6c99\u7bb1",children:"3.4 \u521b\u5efa\u5bb9\u5668\u6c99\u7bb1"}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u542f\u52a8Pod\u7684\u5bb9\u5668\u4e4b\u524d\uff0c\u9996\u5148\u4f1a\u4e3a\u5176\u521b\u5efa\u4e00\u4e2asandbox\u5bb9\u5668\uff0c\u5f53\u524dPod\u7684\u6240\u6709\u5bb9\u5668\u90fd\u548cPod\u5bf9\u5e94\u7684sandbox\u5171\u4eab\u540c\u4e00\u4e2anamespace\u4ece\u800c\u5171\u4eab\u4e00\u4e2anamespace\u91cc\u9762\u7684\u8d44\u6e90\uff0c\u521b\u5efaSandbox\u6bd4\u8f83\u590d\u6742\uff0c\u540e\u7eed\u4f1a\u7ee7\u7eed\u4ecb\u7ecd"}),"\n",(0,d.jsx)(n.h3,{id:"35-\u542f\u52a8pod\u76f8\u5173\u5bb9\u5668",children:"3.5 \u542f\u52a8Pod\u76f8\u5173\u5bb9\u5668"}),"\n",(0,d.jsx)(n.p,{children:"Pod\u7684\u5bb9\u5668\u76ee\u524d\u5206\u4e3a\u4e09\u5927\u7c7b\uff1a\u77ed\u751f\u547d\u5468\u671f\u5bb9\u5668\u3001\u521d\u59cb\u5316\u5bb9\u5668\u3001\u4e1a\u52a1\u5bb9\u5668\uff0c\u542f\u52a8\u987a\u5e8f\u4e5f\u662f\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u8fdb\u884c,\u5982\u679c\u5bf9\u4e8e\u7684\u5bb9\u5668\u521b\u5efa\u5931\u8d25\uff0c\u5219\u4f1a\u901a\u8fc7backoff\u673a\u5236\u6765\u5ef6\u7f13\u5bb9\u5668\u7684\u521b\u5efa\uff0c\u8fd9\u91cc\u6211\u4eec\u987a\u4fbf\u4ecb\u7ecd\u4e0bcontainerRuntime\u542f\u52a8\u5bb9\u5668\u7684\u6d41\u7a0b"}),"\n",(0,d.jsx)(n.h4,{id:"351-\u68c0\u67e5\u5bb9\u5668\u955c\u50cf\u662f\u5426\u62c9\u53d6",children:"3.5.1 \u68c0\u67e5\u5bb9\u5668\u955c\u50cf\u662f\u5426\u62c9\u53d6"}),"\n",(0,d.jsx)(n.p,{children:"\u955c\u50cf\u7684\u62c9\u53d6\u9996\u5148\u4f1a\u8fdb\u884c\u5bf9\u5e94\u5bb9\u5668\u955c\u50cf\u7684\u62fc\u63a5\uff0c\u7136\u540e\u5c06\u4e4b\u524d\u83b7\u53d6\u7684\u62c9\u53d6\u7684\u79d8\u94a5\u4fe1\u606f\u548c\u955c\u50cf\u4fe1\u606f\uff0c\u4e00\u8d77\u4ea4\u7ed9CRI\u8fd0\u884c\u65f6\u6765\u8fdb\u884c\u5e95\u5c42\u5bb9\u5668\u955c\u50cf\u7684\u62c9\u53d6\uff0c\u5f53\u7136\u8fd9\u91cc\u4e5f\u4f1a\u5404\u79cdbackoff\u673a\u5236\uff0c\u4ece\u800c\u907f\u514d\u9891\u7e41\u62c9\u53d6\u5931\u8d25\u5f71\u54cdkubelet\u7684\u6027\u80fd"}),"\n",(0,d.jsx)(n.h4,{id:"352-\u521b\u5efa\u5bb9\u5668\u914d\u7f6e",children:"3.5.2 \u521b\u5efa\u5bb9\u5668\u914d\u7f6e"}),"\n",(0,d.jsx)(n.p,{children:"\u521b\u5efa\u5bb9\u5668\u914d\u7f6e\u4e3b\u8981\u662f\u4e3a\u4e86\u5bb9\u5668\u7684\u8fd0\u884c\u521b\u5efa\u5bf9\u5e94\u7684\u914d\u7f6e\u6570\u636e\uff0c\u4e3b\u8981\u5305\u62ec\uff1aPod\u7684\u4e3b\u673a\u540d\u3001\u57df\u540d\u3001\u6302\u8f7d\u7684volume\u3001configMap\u3001secret\u3001\u73af\u5883\u53d8\u91cf\u3001\u6302\u8f7d\u7684\u8bbe\u5907\u4fe1\u606f\u3001\u8981\u6302\u8f7d\u7684\u76ee\u5f55\u4fe1\u606f\u3001\u7aef\u53e3\u6620\u5c04\u4fe1\u606f\u3001\u6839\u636e\u73af\u5883\u751f\u6210\u6267\u884c\u7684\u547d\u4ee4\u3001\u65e5\u5fd7\u76ee\u5f55\u7b49\u4fe1\u606f"}),"\n",(0,d.jsx)(n.h4,{id:"353-\u8c03\u7528runtimeservice\u5b8c\u6210\u5bb9\u5668\u7684\u521b\u5efa",children:"3.5.3 \u8c03\u7528runtimeService\u5b8c\u6210\u5bb9\u5668\u7684\u521b\u5efa"}),"\n",(0,d.jsx)(n.p,{children:"\u8c03\u7528runtimeService\u4f20\u9012\u5bb9\u5668\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u8c03\u7528CRI\uff0c\u5e76\u4e14\u6700\u7ec8\u8c03\u7528\u5bb9\u5668\u7684\u521b\u5efa\u63a5\u53e3\u5b8c\u6210\u5bb9\u5668\u7684\u72b6\u6001"}),"\n",(0,d.jsx)(n.h4,{id:"354-\u8c03\u7528runtimeservice\u542f\u52a8\u5bb9\u5668",children:"3.5.4 \u8c03\u7528runtimeService\u542f\u52a8\u5bb9\u5668"}),"\n",(0,d.jsx)(n.p,{children:"\u901a\u8fc7\u4e4b\u524d\u521b\u5efa\u5bb9\u5668\u8fd4\u56de\u7684\u5bb9\u5668ID\uff0c\u6765\u8fdb\u884c\u5bf9\u5e94\u7684\u5bb9\u5668\u7684\u542f\u52a8\uff0c\u5e76\u4e14\u4f1a\u4e3a\u5bb9\u5668\u521b\u5efa\u5bf9\u5e94\u7684\u65e5\u5fd7\u76ee\u5f55"}),"\n",(0,d.jsx)(n.h4,{id:"355-\u6267\u884c\u5bb9\u5668\u7684\u56de\u8c03\u94a9\u5b50",children:"3.5.5 \u6267\u884c\u5bb9\u5668\u7684\u56de\u8c03\u94a9\u5b50"}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u679c\u5bb9\u5668\u914d\u7f6e\u4e86PostStart\u94a9\u5b50\uff0c\u5219\u4f1a\u5728\u6b64\u5904\u8fdb\u884c\u5bf9\u5e94\u94a9\u5b50\u7684\u6267\u884c\uff0c\u5982\u679c\u94a9\u5b50\u7684\u7c7b\u578b\u662fExec\u7c7b\u5219\u4f1a\u8c03\u7528CNI\u7684EXec\u63a5\u53e3\u5b8c\u6210\u5728\u5bb9\u5668\u5185\u7684\u6267\u884c"}),"\n",(0,d.jsx)(n.h2,{id:"4-\u8fd0\u884c\u6c99\u7bb1\u5bb9\u5668",children:"4. \u8fd0\u884c\u6c99\u7bb1\u5bb9\u5668"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.28.56.png",alt:"iShot2020-10-15 16.28.56"})}),"\n",(0,d.jsx)(n.h3,{id:"41-\u62c9\u53d6sandbox\u955c\u50cf",children:"4.1 \u62c9\u53d6sandbox\u955c\u50cf"}),"\n",(0,d.jsx)(n.p,{children:"\u9996\u5148\u4f1a\u62c9\u53d6sandbox\u955c\u50cf"}),"\n",(0,d.jsx)(n.h3,{id:"42-\u521b\u5efa\u6c99\u7bb1\u5bb9\u5668",children:"4.2 \u521b\u5efa\u6c99\u7bb1\u5bb9\u5668"}),"\n",(0,d.jsx)(n.h4,{id:"421-\u5e94\u7528securitycontext",children:"4.2.1 \u5e94\u7528SecurityContext"}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u521b\u5efa\u5bb9\u5668\u4e4b\u524d\u4f1a\u5148\u6839\u636eSecurityContext\u91cc\u9762\u7684\u914d\u8d44\u4fe1\u606f\uff0c\u6765\u8fdb\u884c\u5bb9\u5668SecurityContext\u7684\u914d\u7f6e\uff0c\u4e3b\u8981\u5305\u62ec\u7279\u6743\u7b49\u7ea7\u3001\u53ea\u8bfb\u76ee\u5f55\u3001\u8fd0\u884c\u8d26\u6237\u7ec4\u7b49\u4fe1\u606f"}),"\n",(0,d.jsx)(n.h3,{id:"43-\u5176\u4f59\u57fa\u7840\u4fe1\u606f",children:"4.3 \u5176\u4f59\u57fa\u7840\u4fe1\u606f"}),"\n",(0,d.jsx)(n.p,{children:"\u9664\u4e86\u5e94\u7528SecurityContext\u8fd8\u4f1a\u8fdb\u884c\u65ad\u5f00\u3001OOMScoreAdj\u3001Cgroup\u9a71\u52a8\u7b49\u4fe1\u606f\u7684\u6620\u5c04"}),"\n",(0,d.jsx)(n.h3,{id:"44-\u521b\u5efa\u5bb9\u5668",children:"4.4 \u521b\u5efa\u5bb9\u5668"}),"\n",(0,d.jsx)(n.p,{children:"\u6839\u636e\u4e0a\u9762\u7684\u5404\u79cd\u914d\u7f6e\u4fe1\u606f\u6765\u8fdb\u884c\u5bb9\u5668\u7684\u521b\u5efa"}),"\n",(0,d.jsx)(n.h3,{id:"45-\u521b\u5efacheckpoint",children:"4.5 \u521b\u5efacheckpoint"}),"\n",(0,d.jsx)(n.p,{children:"checkpoint\u4e3b\u8981\u662f\u5c06\u5f53\u524dsandbox\u7684\u914d\u7f6e\u4fe1\u606f\u8fdb\u884c\u5e8f\u5217\u5316\uff0c\u5e76\u4e14\u5b58\u50a8\u5176\u5f53\u524d\u7684\u5feb\u7167\u4fe1\u606f"}),"\n",(0,d.jsx)(n.h3,{id:"46-\u542f\u52a8sandbox\u5bb9\u5668",children:"4.6 \u542f\u52a8sandbox\u5bb9\u5668"}),"\n",(0,d.jsx)(n.p,{children:"\u542f\u52a8sandbox\u5bb9\u5668\u5219\u4f1a\u76f4\u63a5\u8c03\u7528StartContainer\u540c\u65f6\u4f20\u5165\u4e4b\u524d\u521b\u5efa\u5bb9\u5668\u8fd4\u56de\u7684ID\u5b8c\u6210\u5bb9\u5668\u7684\u542f\u52a8\uff0c\u5e76\u4e14\u6b64\u65f6\u4f1a\u91cd\u5199\u8986\u76d6\u5bb9\u5668\u7684dns\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,d.jsx)(n.h3,{id:"47-\u5bb9\u5668\u7f51\u7edc\u8bbe\u7f6e",children:"4.7 \u5bb9\u5668\u7f51\u7edc\u8bbe\u7f6e"}),"\n",(0,d.jsx)(n.p,{children:"\u5bb9\u5668\u7684\u7f51\u7edc\u914d\u7f6e\u4e3b\u8981\u662f\u8c03\u7528CNI\u63d2\u4ef6\u6765\u5b8c\u6210\u5bb9\u5668\u7f51\u7edc\u7684\u914d\u7f6e\uff0c\u8fd9\u91cc\u5c31\u5148\u4e0d\u5c55\u5f00\u4e86"}),"\n",(0,d.jsx)(n.h2,{id:"5-pod\u5bb9\u5668\u542f\u52a8\u603b\u7ed3",children:"5. Pod\u5bb9\u5668\u542f\u52a8\u603b\u7ed3"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.29.20.png",alt:"iShot2020-10-15 16.29.20"})}),"\n",(0,d.jsx)(n.p,{children:"kubelet\u662f\u5bb9\u5668\u7ba1\u7406\u7684\u6838\u5fc3\u5927\u7ba1\u5bb6\uff0c\u5176\u8d1f\u8d23\u5404\u79cd\u51c6\u5165\u63a7\u5236\u3001\u72b6\u6001\u7ba1\u7406\u3001\u63a2\u6d4b\u7ba1\u7406\u3001volume\u7ba1\u7406\u3001QOS\u7ba1\u7406\u3001CSI\u5bf9\u63a5\u7684\u7edf\u4e00\u8c03\u5ea6\uff0c\u5e76\u4e14\u4e3aRuntime\u8fd0\u884c\u65f6\u51c6\u5907\u57fa\u7840\u7684\u6570\u636e\u548c\u5e76\u53cd\u9988Pod\u5f53\u524d\u7684\u6700\u65b0\u72b6\u6001"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2016.29.38.png",alt:"iShot2020-10-15 16.29.38"})}),"\n",(0,d.jsx)(n.p,{children:"Runtime\u5c42\u5219\u5c06kubelet\u7ec4\u88c5\u7684\u6570\u636e\uff0c\u6309\u7167CRI\u8fd0\u884c\u65f6\u7684\u76ee\u6807\u914d\u7f6e\u548ckubelet\u7ba1\u7406\u7684\u8d44\u6e90\u914d\u7f6e\u4fe1\u606f\u6765\u8fdb\u884c\u8d44\u6e90\u7684\u91cd\u7ec4\uff0c\u5e76\u4e14\u6839\u636ePod\u7684\u5bb9\u5668\u7684\u72b6\u6001\u6765\u51b3\u7b56\u5bb9\u5668\u7684\u542f\u505c\u3001\u521b\u5efa\u7b49\u64cd\u4f5c\uff0c\u5e76\u5b8c\u6210\u5bb9\u5668\u7684\u57fa\u7840\u914d\u7f6e\u73af\u5883\u7684\u6784\u5efa\uff0c\u5e76\u6700\u7ec8\u8c03\u7528CRI\u5b8c\u6210\u5bb9\u5668\u7684\u521b\u5efa\uff0c\u800cCRI\u8fd0\u884c\u65f6\uff0c\u5219\u4f1a\u8bb2\u4f20\u9012\u8fc7\u6765\u7684\u5404\u79cd\u6570\u636e\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u7ec4\u5408\uff0c\u5e76\u5e94\u7528\u5230\u4e3b\u673a\u548c\u5bf9\u5e94\u7684namespace\u8d44\u6e90\u9650\u5236\uff0c\u5e76\u6839\u636e\u81ea\u5df1\u7684\u5bb9\u5668\u670d\u52a1\u7ec4\u7ec7\u6570\u636e\uff0c\u8c03\u7528\u5bb9\u5668\u670d\u52a1\u5b8c\u6210\u5bb9\u5668\u7684\u6700\u7ec8\u521b\u5efa"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var d=i(96540);const t={},l=d.createContext(t);function r(e){const n=d.useContext(l);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),d.createElement(l.Provider,{value:n},e.children)}}}]);