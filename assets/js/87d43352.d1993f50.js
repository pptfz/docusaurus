"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9251],{97755:(e,c,n)=>{n.r(c),n.d(c,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>i});var r=n(74848),s=n(28453);const d={},o="CentOS7\u5b89\u88c5docker",l={id:"\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5b89\u88c5",title:"docker\u5b89\u88c5",description:"[toc]",source:"@site/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5b89\u88c5.md",sourceDirName:"\u4e91\u539f\u751f/\u5bb9\u5668/docker",slug:"/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5b89\u88c5",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5b89\u88c5",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"docker\u547d\u4ee4\u5927\u5168",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u547d\u4ee4\u5927\u5168"},next:{title:"docker\u5bb9\u5668\u64cd\u4f5c",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u64cd\u4f5c"}},t={},i=[{value:"1.\u5b89\u88c5docker\u6700\u65b0\u7248",id:"1\u5b89\u88c5docker\u6700\u65b0\u7248",level:2},{value:"1.1 \u4e0b\u8f7dyum\u6e90",id:"11-\u4e0b\u8f7dyum\u6e90",level:3},{value:"1.2 \u5b89\u88c5docker\u6700\u65b0\u7248",id:"12-\u5b89\u88c5docker\u6700\u65b0\u7248",level:3},{value:"1.3 \u542f\u52a8docker",id:"13-\u542f\u52a8docker",level:3},{value:"1.4 \u67e5\u770bdocker\u7248\u672c",id:"14-\u67e5\u770bdocker\u7248\u672c",level:3},{value:"1.5 \u914d\u7f6edocker\u955c\u50cf\u52a0\u901f",id:"15-\u914d\u7f6edocker\u955c\u50cf\u52a0\u901f",level:3},{value:"1.6 \u521b\u5efa\u5e76\u8fd0\u884c\u7b2c\u4e00\u4e2a\u5bb9\u5668",id:"16-\u521b\u5efa\u5e76\u8fd0\u884c\u7b2c\u4e00\u4e2a\u5bb9\u5668",level:3},{value:"2.\u5b89\u88c5docker\u6307\u5b9a\u7248\u672c",id:"2\u5b89\u88c5docker\u6307\u5b9a\u7248\u672c",level:2},{value:"2.1 \u4e0b\u8f7dyum\u6e90",id:"21-\u4e0b\u8f7dyum\u6e90",level:3},{value:"2.2 \u67e5\u770b\u53ef\u7528\u7248\u672c",id:"22-\u67e5\u770b\u53ef\u7528\u7248\u672c",level:3},{value:"2.3 \u5b89\u88c5docker\u6307\u5b9a\u7248\u672c",id:"23-\u5b89\u88c5docker\u6307\u5b9a\u7248\u672c",level:3},{value:"2.4 \u67e5\u770b\u7248\u672c",id:"24-\u67e5\u770b\u7248\u672c",level:3},{value:"2.5 \u914d\u7f6edocker\u955c\u50cf\u52a0\u901f",id:"25-\u914d\u7f6edocker\u955c\u50cf\u52a0\u901f",level:3},{value:"3.\u4e8c\u8fdb\u5236\u5b89\u88c5docker",id:"3\u4e8c\u8fdb\u5236\u5b89\u88c5docker",level:2},{value:"3.1 \u4e0b\u8f7ddocker\u4e8c\u8fdb\u5236\u5305",id:"31-\u4e0b\u8f7ddocker\u4e8c\u8fdb\u5236\u5305",level:3},{value:"3.2 \u89e3\u538b\u7f29\u5305",id:"32-\u89e3\u538b\u7f29\u5305",level:3},{value:"3.3 \u5bfc\u51fa\u73af\u5883\u53d8\u91cf",id:"33-\u5bfc\u51fa\u73af\u5883\u53d8\u91cf",level:3},{value:"3.4 \u4f7f\u7528systemd\u7ba1\u7406docker",id:"34-\u4f7f\u7528systemd\u7ba1\u7406docker",level:3},{value:"3.5 \u91cd\u65b0\u52a0\u8f7d\u670d\u52a1\u5e76\u542f\u52a8docker",id:"35-\u91cd\u65b0\u52a0\u8f7d\u670d\u52a1\u5e76\u542f\u52a8docker",level:3},{value:"3.6 \u9a8c\u8bc1docker\u7248\u672c",id:"36-\u9a8c\u8bc1docker\u7248\u672c",level:3}];function a(e){const c={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.p,{children:"[toc]"}),"\n",(0,r.jsx)(c.p,{children:"\u5feb\u901f\u5b89\u88c5"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:'# \u963f\u91cc\u4e91yum\u6e90\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\nyum -y install docker-ce\n\nsystemctl start docker && systemctl enable docker  \n\n# \u914d\u7f6e\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f\u5730\u5740\ncat > /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://gqk8w9va.mirror.aliyuncs.com"]\n}\nEOF\n\n# \u914d\u7f6e\u5b8c\u6210\u540e\u91cd\u542fdocker\nsystemctl restart docker\n'})}),"\n",(0,r.jsx)(c.h1,{id:"centos7\u5b89\u88c5docker",children:"CentOS7\u5b89\u88c5docker"}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.a,{href:"https://docs.docker.com/engine/install/centos/",children:"docker\u5b98\u65b9\u5b89\u88c5\u6587\u6863"})}),"\n",(0,r.jsx)(c.h2,{id:"1\u5b89\u88c5docker\u6700\u65b0\u7248",children:"1.\u5b89\u88c5docker\u6700\u65b0\u7248"}),"\n",(0,r.jsx)(c.h3,{id:"11-\u4e0b\u8f7dyum\u6e90",children:"1.1 \u4e0b\u8f7dyum\u6e90"}),"\n",(0,r.jsx)(c.p,{children:"\u963f\u91cc\u4e91\u6e90"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n"})}),"\n",(0,r.jsx)(c.p,{children:"\u5b98\u65b9\u6e90"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"})}),"\n",(0,r.jsx)(c.h3,{id:"12-\u5b89\u88c5docker\u6700\u65b0\u7248",children:"1.2 \u5b89\u88c5docker\u6700\u65b0\u7248"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-python",children:"yum -y install docker-ce\n"})}),"\n",(0,r.jsx)(c.h3,{id:"13-\u542f\u52a8docker",children:"1.3 \u542f\u52a8docker"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-python",children:"systemctl start docker && systemctl enable docker  \n"})}),"\n",(0,r.jsx)(c.h3,{id:"14-\u67e5\u770bdocker\u7248\u672c",children:"1.4 \u67e5\u770bdocker\u7248\u672c"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-python",children:"$ docker version\nClient:\n Version:           18.09.1\n API version:       1.39\n Go version:        go1.10.6\n Git commit:        4c52b90\n Built:             Wed Jan  9 19:35:01 2019\n OS/Arch:           linux/amd64\n Experimental:      false\n\nServer: Docker Engine - Community\n Engine:\n  Version:          18.09.1\n  API version:      1.39 (minimum version 1.12)\n  Go version:       go1.10.6\n  Git commit:       4c52b90\n  Built:            Wed Jan  9 19:06:30 2019\n  OS/Arch:          linux/amd64\n  Experimental:     false\n"})}),"\n",(0,r.jsx)(c.h3,{id:"15-\u914d\u7f6edocker\u955c\u50cf\u52a0\u901f",children:"1.5 \u914d\u7f6edocker\u955c\u50cf\u52a0\u901f"}),"\n",(0,r.jsx)(c.p,{children:"\u914d\u7f6e\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f\u5730\u5740"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:'cat > /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://gqk8w9va.mirror.aliyuncs.com"]\n}\nEOF\n'})}),"\n",(0,r.jsx)(c.p,{children:"\u914d\u7f6e\u5b8c\u6210\u540e\u91cd\u542fdocker"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"systemctl restart docker\n"})}),"\n",(0,r.jsx)(c.h3,{id:"16-\u521b\u5efa\u5e76\u8fd0\u884c\u7b2c\u4e00\u4e2a\u5bb9\u5668",children:"1.6 \u521b\u5efa\u5e76\u8fd0\u884c\u7b2c\u4e00\u4e2a\u5bb9\u5668"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"$ docker run -d -p 80:80 nginx\nUnable to find image 'nginx:latest' locally\nlatest: Pulling from library/nginx\n6ae821421a7d: Pull complete \nda4474e5966c: Pull complete \neb2aec2b9c9f: Pull complete \nDigest: sha256:dd2d0ac3fff2f007d99e033b64854be0941e19a2ad51f174d9240dda20d9f534\nStatus: Downloaded newer image for nginx:latest\n6cd3a11bda37336b8d6f0ba3e266e697945f72d520bbd0225a6e93818c8d581d\n"})}),"\n",(0,r.jsx)(c.h2,{id:"2\u5b89\u88c5docker\u6307\u5b9a\u7248\u672c",children:"2.\u5b89\u88c5docker\u6307\u5b9a\u7248\u672c"}),"\n",(0,r.jsx)(c.h3,{id:"21-\u4e0b\u8f7dyum\u6e90",children:"2.1 \u4e0b\u8f7dyum\u6e90"}),"\n",(0,r.jsx)(c.p,{children:"\u963f\u91cc\u4e91yum\u6e90"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n"})}),"\n",(0,r.jsx)(c.p,{children:"\u5b98\u65b9\u6e90"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"})}),"\n",(0,r.jsx)(c.h3,{id:"22-\u67e5\u770b\u53ef\u7528\u7248\u672c",children:"2.2 \u67e5\u770b\u53ef\u7528\u7248\u672c"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-python",children:"$ yum list docker-ce --showduplicates | sort -r\n\u5df2\u52a0\u8f7d\u63d2\u4ef6\uff1afastestmirror, langpacks\n\u53ef\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\n * webtatic: uk.repo.webtatic.com\n * updates: mirrors.aliyun.com\nLoading mirror speeds from cached hostfile\n * extras: mirrors.aliyun.com\ndocker-ce.x86_64            3:19.03.3-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:19.03.2-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:19.03.1-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:19.03.0-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.9-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.8-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.7-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.6-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.5-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.4-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.3-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.2-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.1-3.el7                     docker-ce-stable\ndocker-ce.x86_64            3:18.09.0-3.el7                     docker-ce-stable\ndocker-ce.x86_64            18.06.3.ce-3.el7                    docker-ce-stable\ndocker-ce.x86_64            18.06.2.ce-3.el7                    docker-ce-stable\ndocker-ce.x86_64            18.06.1.ce-3.el7                    docker-ce-stable\ndocker-ce.x86_64            18.06.0.ce-3.el7                    docker-ce-stable\ndocker-ce.x86_64            18.03.1.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            18.03.0.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.12.1.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.12.0.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.09.1.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.09.0.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.06.2.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.06.1.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.06.0.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.03.3.ce-1.el7                    docker-ce-stable\ndocker-ce.x86_64            17.03.2.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.03.1.ce-1.el7.centos             docker-ce-stable\ndocker-ce.x86_64            17.03.0.ce-1.el7.centos             docker-ce-stable\n"})}),"\n",(0,r.jsx)(c.h3,{id:"23-\u5b89\u88c5docker\u6307\u5b9a\u7248\u672c",children:"2.3 \u5b89\u88c5docker\u6307\u5b9a\u7248\u672c"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-python",children:"yum -y install docker-ce-18.03.1.ce docker-ce-cli-18.01.1.ce\n"})}),"\n",(0,r.jsx)(c.h3,{id:"24-\u67e5\u770b\u7248\u672c",children:"2.4 \u67e5\u770b\u7248\u672c"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-python",children:"$ docker -v\nDocker version 18.03.1-ce, build 9ee9f40\n"})}),"\n",(0,r.jsx)(c.h3,{id:"25-\u914d\u7f6edocker\u955c\u50cf\u52a0\u901f",children:"2.5 \u914d\u7f6edocker\u955c\u50cf\u52a0\u901f"}),"\n",(0,r.jsx)(c.p,{children:"\u914d\u7f6e\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f\u5730\u5740"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:'cat > /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://gqk8w9va.mirror.aliyuncs.com"]\n}\nEOF\n'})}),"\n",(0,r.jsx)(c.p,{children:"\u914d\u7f6e\u5b8c\u6210\u540e\u91cd\u542fdocker"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"systemctl restart docker\n"})}),"\n",(0,r.jsx)(c.h2,{id:"3\u4e8c\u8fdb\u5236\u5b89\u88c5docker",children:"3.\u4e8c\u8fdb\u5236\u5b89\u88c5docker"}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.strong,{children:"\u7cfb\u7edf\u73af\u5883"})}),"\n",(0,r.jsxs)(c.table,{children:[(0,r.jsx)(c.thead,{children:(0,r.jsxs)(c.tr,{children:[(0,r.jsx)(c.th,{children:"\u5185\u6838\u7248\u672c"}),(0,r.jsx)(c.th,{children:"\u5185\u5b58"}),(0,r.jsx)(c.th,{children:"docker\u7248\u672c"})]})}),(0,r.jsx)(c.tbody,{children:(0,r.jsxs)(c.tr,{children:[(0,r.jsx)(c.td,{children:"3.10.0-1062.el7.x86_64"}),(0,r.jsx)(c.td,{children:"1c2G"}),(0,r.jsx)(c.td,{children:"18.09.9"})]})})]}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.a,{href:"https://download.docker.com/linux/static/stable/x86_64/",children:"docker\u4e8c\u8fdb\u5236\u5305\u4e0b\u8f7d\u5730\u5740"})}),"\n",(0,r.jsx)(c.h3,{id:"31-\u4e0b\u8f7ddocker\u4e8c\u8fdb\u5236\u5305",children:"3.1 \u4e0b\u8f7ddocker\u4e8c\u8fdb\u5236\u5305"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"export DOCKER_VERSION=18.09.9\nwget https://download.docker.com/linux/static/stable/x86_64/docker-${DOCKER_VERSION}.tgz\n"})}),"\n",(0,r.jsx)(c.h3,{id:"32-\u89e3\u538b\u7f29\u5305",children:"3.2 \u89e3\u538b\u7f29\u5305"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"tar xf docker-DOCKER_VERSION.tgz -C /usr/local/\n"})}),"\n",(0,r.jsx)(c.h3,{id:"33-\u5bfc\u51fa\u73af\u5883\u53d8\u91cf",children:"3.3 \u5bfc\u51fa\u73af\u5883\u53d8\u91cf"}),"\n",(0,r.jsxs)(c.p,{children:["\u5982\u679c\u540e\u7eed\u60f3\u8981\u4f7f\u7528systemd\u7ba1\u7406docker\uff0c\u6700\u597d\u628adocker\u4e8c\u8fdb\u5236\u5305\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u62f7\u8d1d\u5230 ",(0,r.jsx)(c.code,{children:"/usr/bin"})," \uff0c\u5426\u5219\u4f1a\u7ba1\u7406\u5931\u8d25"]}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"cp /usr/local/docker/* /usr/bin\n"})}),"\n",(0,r.jsx)(c.h3,{id:"34-\u4f7f\u7528systemd\u7ba1\u7406docker",children:"3.4 \u4f7f\u7528systemd\u7ba1\u7406docker"}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.a,{href:"https://docs.docker.com/config/daemon/systemd/",children:"Control Docker with systemd \u5b98\u65b9\u6587\u6863\u5173\u4e8e\u4f7f\u7528systemd\u7ba1\u7406docker\u7684\u8bf4\u660e"})}),"\n",(0,r.jsxs)(c.p,{children:["\u5982\u679c\u4f60\u662f\u4f7f\u7528\u4e8c\u8fdb\u5236\u65b9\u5f0f\u5b89\u88c5\u7684 docker\uff0c\u90a3\u4e48\u4f60\u4e5f\u8bb8\u9700\u8981\u6574\u5408 docker \u5230 systemd \u4e2d\u53bb\u3002\u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\uff0c\u4f60\u9700\u8981\u5b89\u88c5\u4e24\u4e2a\u5355\u5143\u6587\u4ef6\uff08service \u548c socket\uff09\u5230 ",(0,r.jsx)(c.code,{children:"/etc/systemd/system"})," \u4e2d\u53bb"]}),"\n",(0,r.jsx)(c.p,{children:":::tip\u8bf4\u660e"}),"\n",(0,r.jsx)(c.p,{children:"Manually create the systemd unit files"}),"\n",(0,r.jsxs)(c.p,{children:["When installing the binary without a package, you may want to integrate Docker with systemd. For this, install the two unit files (",(0,r.jsx)(c.code,{children:"service"})," and ",(0,r.jsx)(c.code,{children:"socket"}),") from ",(0,r.jsx)(c.a,{href:"https://github.com/moby/moby/tree/master/contrib/init/systemd",children:"the github repository"})," to ",(0,r.jsx)(c.code,{children:"/etc/systemd/system"}),"."]}),"\n",(0,r.jsx)(c.p,{children:":::"}),"\n",(0,r.jsxs)(c.p,{children:["\u9700\u8981\u4e0b\u8f7d\u7684\u662f ",(0,r.jsx)(c.code,{children:"docker.service.rpm"})," \u548c ",(0,r.jsx)(c.code,{children:"docker.socket"})," \u8fd9\u4e24\u4e2a\u6587\u4ef6\uff0c\u9700\u8981\u628a ",(0,r.jsx)(c.code,{children:"docker.service.rpm"})," \u91cd\u547d\u540d\u4e3a ",(0,r.jsx)(c.code,{children:"docker.service"})," \uff0c\u7136\u540e\u518d\u79fb\u52a8\u5230 ",(0,r.jsx)(c.code,{children:"/etc/systemd/system"}),"\u4e0b"]}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"wget https://github.com/moby/moby/raw/branch/branch/master/contrib/init/systemd/docker.service.rpm\nwget https://github.com/moby/moby/raw/branch/branch/master/contrib/init/systemd/docker.socket  \n"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.strong,{children:"\u8fd9\u91cc\u6211\u4eec\u76f4\u63a5\u5411\u6587\u4ef6\u5199\u5165\u5185\u5bb9"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.strong,{children:"docker.service"})}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"cat > /etc/systemd/system/docker.service <<'EOF'\n[Unit]\nDescription=Docker Application Container Engine\nDocumentation=https://docs.docker.com\nAfter=network-online.target firewalld.service\nWants=network-online.target\n\n[Service]\nType=notify\n# the default is not to use systemd for cgroups because the delegate issues still\n# exists and systemd currently does not support the cgroup feature set required\n# for containers run by docker\nExecStart=/usr/bin/dockerd\nExecReload=/bin/kill -s HUP $MAINPID\n# Having non-zero Limit*s causes performance problems due to accounting overhead\n# in the kernel. We recommend using cgroups to do container-local accounting.\nLimitNOFILE=infinity\nLimitNPROC=infinity\nLimitCORE=infinity\n# Uncomment TasksMax if your systemd version supports it.\n# Only systemd 226 and above support this version.\n#TasksMax=infinity\nTimeoutStartSec=0\n# set delegate yes so that systemd does not reset the cgroups of docker containers\nDelegate=yes\n# kill only the docker process, not all processes in the cgroup\nKillMode=process\n# restart the docker process if it exits prematurely\nRestart=on-failure\nStartLimitBurst=3\nStartLimitInterval=60s\n\n[Install]\nWantedBy=multi-user.target\nEOF\n"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.strong,{children:"docker.socket"})}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"cat >/etc/systemd/system/docker.socket<<EOF\n[Unit]\nDescription=Docker Socket for the API\n\n[Socket]\n# If /var/run is not implemented as a symlink to /run, you may need to\n# specify ListenStream=/var/run/docker.sock instead.\nListenStream=/run/docker.sock\nSocketMode=0660\nSocketUser=root\nSocketGroup=docker\n\n[Install]\nWantedBy=sockets.target\nEOF\n"})}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.a,{href:"http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html",children:"linux \u4e2d /etc/systemd/system\u548c/usr/lib/systemd/system \u7684\u533a\u522b"})}),"\n",(0,r.jsxs)(c.p,{children:["\u6bcf\u4e00\u4e2a Unit\uff08\u670d\u52a1\u7b49\uff09 \u90fd\u6709\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u544a\u8bc9 Systemd \u600e\u4e48\u542f\u52a8\u8fd9\u4e2a Unit \u3002\nSystemd \u9ed8\u8ba4\u4ece\u76ee\u5f55",(0,r.jsx)(c.code,{children:"/etc/systemd/system/"}),"\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u3002\n\u4f46\u662f\uff0c\u91cc\u9762\u5b58\u653e\u7684\u5927\u90e8\u5206\u6587\u4ef6\u90fd\u662f\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u76ee\u5f55",(0,r.jsx)(c.code,{children:"/usr/lib/systemd/system/"}),"\uff0c\u771f\u6b63\u7684\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u5728\u90a3\u4e2a\u76ee\u5f55\u3002 ",(0,r.jsx)(c.code,{children:"systemctl enable "}),"\u547d\u4ee4\u7528\u4e8e\u5728\u4e0a\u9762\u4e24\u4e2a\u76ee\u5f55\u4e4b\u95f4\uff0c\u5efa\u7acb\u7b26\u53f7\u94fe\u63a5\u5173\u7cfb\u3002"]}),"\n",(0,r.jsx)(c.p,{children:":::tip\u8bf4\u660e"}),"\n",(0,r.jsxs)(c.p,{children:["\u6267\u884c ",(0,r.jsx)(c.code,{children:"sudo systemctl enable clamd@scan.service"})," \u7b49\u540c\u4e8e"]}),"\n",(0,r.jsx)(c.p,{children:(0,r.jsx)(c.code,{children:"sudo ln -s '/usr/lib/systemd/system/clamd@scan.service' '/etc/systemd/system/multi-user.target.wants/clamd@scan.service'"})}),"\n",(0,r.jsx)(c.p,{children:":::"}),"\n",(0,r.jsx)(c.h3,{id:"35-\u91cd\u65b0\u52a0\u8f7d\u670d\u52a1\u5e76\u542f\u52a8docker",children:"3.5 \u91cd\u65b0\u52a0\u8f7d\u670d\u52a1\u5e76\u542f\u52a8docker"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"systemctl daemon-reload\nsystemctl start docker && systemctl enable docker\n"})}),"\n",(0,r.jsx)(c.h3,{id:"36-\u9a8c\u8bc1docker\u7248\u672c",children:"3.6 \u9a8c\u8bc1docker\u7248\u672c"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"$ docker version\nClient: Docker Engine - Community\n Version:           18.09.9\n API version:       1.39\n Go version:        go1.11.13\n Git commit:        039a7df9ba\n Built:             Wed Sep  4 16:50:02 2019\n OS/Arch:           linux/amd64\n Experimental:      false\n\nServer: Docker Engine - Community\n Engine:\n  Version:          18.09.9\n  API version:      1.39 (minimum version 1.12)\n  Go version:       go1.11.13\n  Git commit:       039a7df9ba\n  Built:            Wed Sep  4 16:55:50 2019\n  OS/Arch:          linux/amd64\n  Experimental:     false\n"})}),"\n",(0,r.jsx)(c.p,{children:":::tip\u8bf4\u660e"}),"\n",(0,r.jsxs)(c.p,{children:["\u4e8c\u8fdb\u5236\u5b89\u88c5\u7684dcoker\u9ed8\u8ba4\u662f\u6ca1\u6709\u547d\u4ee4\u8865\u5168\u7684\uff0c\u9700\u8981\u4eceyum\u5b89\u88c5\u7684\u673a\u5668\u4e0a\u62f7\u8d1d\xa0",(0,r.jsx)(c.code,{children:"/usr/share/bash-completion/completions "})," \u4e0b\u540d\u4e3a ",(0,r.jsx)(c.code,{children:"docker"})," \u7684\u6587\u4ef6\u5e76\u4e14\u79fb\u52a8\u5230 ",(0,r.jsx)(c.code,{children:"/usr/share/bash-completion/completions"})]}),"\n",(0,r.jsx)(c.p,{children:":::"}),"\n",(0,r.jsx)(c.p,{children:"\u52a0\u8f7d\u6587\u4ef6\u751f\u6548"}),"\n",(0,r.jsx)(c.pre,{children:(0,r.jsx)(c.code,{className:"language-shell",children:"source /usr/share/bash-completion/completions/docker\n"})})]})}function h(e={}){const{wrapper:c}={...(0,s.R)(),...e.components};return c?(0,r.jsx)(c,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,c,n)=>{n.d(c,{R:()=>o,x:()=>l});var r=n(96540);const s={},d=r.createContext(s);function o(e){const c=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(c):{...c,...e}}),[c,e])}function l(e){let c;return c=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(d.Provider,{value:c},e.children)}}}]);