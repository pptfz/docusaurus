"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9150],{31853:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>o});var t=n(74848),c=n(28453);const i={},r="k8s\u5f3a\u5236\u5220\u9664namespace",a={id:"\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u6587\u7ae0/k8s\u5f3a\u5236\u5220\u9664namespace",title:"k8s\u5f3a\u5236\u5220\u9664namespace",description:"\u80cc\u666f\u8bf4\u660e",source:"@site/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u6587\u7ae0/k8s\u5f3a\u5236\u5220\u9664namespace.md",sourceDirName:"\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u6587\u7ae0",slug:"/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u6587\u7ae0/k8s\u5f3a\u5236\u5220\u9664namespace",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u6587\u7ae0/k8s\u5f3a\u5236\u5220\u9664namespace",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"StatefulSet",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u5de5\u4f5c\u8d1f\u8f7d/StatefulSet/StatefulSet\u7b80\u4ecb"},next:{title:"k8s\u5fc5\u4f1a\u77e5\u8bc6\u70b9\u68b3\u7406",permalink:"/docs/\u4e91\u539f\u751f/k8s/k8s\u77e5\u8bc6\u70b9/\u6587\u7ae0/k8s\u5fc5\u4f1a\u77e5\u8bc6\u70b9\u68b3\u7406"}},l={},o=[{value:"\u80cc\u666f\u8bf4\u660e",id:"\u80cc\u666f\u8bf4\u660e",level:2},{value:"1.\u542f\u52a8proxy",id:"1\u542f\u52a8proxy",level:2},{value:"2.\u5bfc\u51fajson\u683c\u5f0f\u5230\u6587\u4ef6",id:"2\u5bfc\u51fajson\u683c\u5f0f\u5230\u6587\u4ef6",level:2},{value:"3.\u7f16\u8f91 <code>tmp.josn</code>\uff0c\u5220\u9664 <code>finalizers</code> \u5b57\u6bb5\u7684\u503c",id:"3\u7f16\u8f91-tmpjosn\u5220\u9664-finalizers-\u5b57\u6bb5\u7684\u503c",level:2},{value:"4.\u5220\u9664\u547d\u540d\u7a7a\u95f4",id:"4\u5220\u9664\u547d\u540d\u7a7a\u95f4",level:2},{value:"5.\u9a8c\u8bc1",id:"5\u9a8c\u8bc1",level:2}];function p(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"k8s\u5f3a\u5236\u5220\u9664namespace",children:"k8s\u5f3a\u5236\u5220\u9664namespace"}),"\n",(0,t.jsx)(s.h2,{id:"\u80cc\u666f\u8bf4\u660e",children:"\u80cc\u666f\u8bf4\u660e"}),"\n",(0,t.jsxs)(s.p,{children:["k8s1.22.2\uff0c\u5b89\u88c5 ",(0,t.jsx)(s.a,{href:"https://github.com/kubesphere/kubesphere",children:"kubespheres"})," \u540e\uff0c\u901a\u8fc7\u5b98\u65b9\u63d0\u4f9b\u7684yaml\u6587\u4ef6\u5220\u9664\uff0c\u7ed3\u679c\u53d1\u73b0\u6709\u4e00\u90e8\u5206\u7684\u547d\u540d\u7a7a\u95f4\u65e0\u6cd5\u5220\u9664\uff0c\u4e00\u76f4\u5904\u4e8e ",(0,t.jsx)(s.code,{children:"Terminating"})," \u72b6\u6001\uff0c\u65e0\u6cd5\u901a\u8fc7"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2022-06-28_10.48.35.png",alt:"iShot_2022-06-28_10.48.35"})}),"\n",(0,t.jsx)(s.h2,{id:"1\u542f\u52a8proxy",children:"1.\u542f\u52a8proxy"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["\u4f7f\u7528 ",(0,t.jsx)(s.code,{children:"--port"})," \u53c2\u6570\u6307\u5b9a\u7aef\u53e3\uff0c\u9ed8\u8ba48001"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"kubectl proxy\n"})}),"\n",(0,t.jsx)(s.h2,{id:"2\u5bfc\u51fajson\u683c\u5f0f\u5230\u6587\u4ef6",children:"2.\u5bfc\u51fajson\u683c\u5f0f\u5230\u6587\u4ef6"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"export MYNS=xxx\nkubectl get namespace ${MYNS} -o json >tmp.json\n"})}),"\n",(0,t.jsxs)(s.h2,{id:"3\u7f16\u8f91-tmpjosn\u5220\u9664-finalizers-\u5b57\u6bb5\u7684\u503c",children:["3.\u7f16\u8f91 ",(0,t.jsx)(s.code,{children:"tmp.josn"}),"\uff0c\u5220\u9664 ",(0,t.jsx)(s.code,{children:"finalizers"})," \u5b57\u6bb5\u7684\u503c"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\u5220\u9664\u4ee5\u4e0b\u5185\u5bb9"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'"finalizers": [\n            "finalizers.kubesphere.io/namespaces"\n        ],\n'})}),"\n",(0,t.jsx)(s.h2,{id:"4\u5220\u9664\u547d\u540d\u7a7a\u95f4",children:"4.\u5220\u9664\u547d\u540d\u7a7a\u95f4"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:'curl -k -H "Content-Type: application/json" -X PUT --data-binary @tmp.json http://127.0.0.1:8001/api/v1/namespaces/${MYNS}/finalize\n'})}),"\n",(0,t.jsx)(s.h2,{id:"5\u9a8c\u8bc1",children:"5.\u9a8c\u8bc1"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot_2022-06-28_13.01.58.png",alt:"iShot_2022-06-28_13.01.58"})})]})}function d(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var t=n(96540);const c={},i=t.createContext(c);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);