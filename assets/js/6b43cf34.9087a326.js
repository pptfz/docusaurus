"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3866],{39705:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var t=r(74848),c=r(28453);const o={},s="docker\u5bb9\u5668\u7f51\u7edc",d={id:"\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u7f51\u7edc",title:"docker\u5bb9\u5668\u7f51\u7edc",description:"[toc]",source:"@site/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u7f51\u7edc.md",sourceDirName:"\u4e91\u539f\u751f/\u5bb9\u5668/docker",slug:"/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u7f51\u7edc",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u7f51\u7edc",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"docker\u5bb9\u5668\u64cd\u4f5c",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u64cd\u4f5c"},next:{title:"docker\u5bb9\u5668\u95f4\u4e92\u8054 --link",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/docker\u5bb9\u5668\u95f4\u4e92\u8054 --link"}},i={},l=[{value:"1.docker\u7f51\u7edc\u76f8\u5173\u4fe1\u606f",id:"1docker\u7f51\u7edc\u76f8\u5173\u4fe1\u606f",level:2},{value:"1.1 docker\u7f51\u5361\u3001\u7f51\u5173\u4fe1\u606f",id:"11-docker\u7f51\u5361\u7f51\u5173\u4fe1\u606f",level:3},{value:"1.2 \u542f\u52a8\u4e00\u4e2abusybox\u5bb9\u5668",id:"12-\u542f\u52a8\u4e00\u4e2abusybox\u5bb9\u5668",level:3},{value:"1.3 docker\u5bb9\u5668\u7528\u5230\u7684\u5185\u6838\u8f6c\u53d1\u548ciptables\u89c4\u5219",id:"13-docker\u5bb9\u5668\u7528\u5230\u7684\u5185\u6838\u8f6c\u53d1\u548ciptables\u89c4\u5219",level:3},{value:"2.docker\u7aef\u53e3\u6620\u5c04\uff08\u5141\u8bb8\u5916\u7f51\u8bbf\u95ee\u5bb9\u5668\uff09",id:"2docker\u7aef\u53e3\u6620\u5c04\u5141\u8bb8\u5916\u7f51\u8bbf\u95ee\u5bb9\u5668",level:2},{value:"2.1 \u65b9\u5f0f\u4e00\t-p   \u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3",id:"21-\u65b9\u5f0f\u4e00-p---\u5bbf\u4e3b\u673a\u7aef\u53e3\u5bb9\u5668\u7aef\u53e3",level:3},{value:"2.2 \u65b9\u5f0f\u4e8c\t-p   \u5bbf\u4e3b\u673aIP:\u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3",id:"22-\u65b9\u5f0f\u4e8c-p---\u5bbf\u4e3b\u673aip\u5bbf\u4e3b\u673a\u7aef\u53e3\u5bb9\u5668\u7aef\u53e3",level:3},{value:"2.3 \u65b9\u5f0f\u4e09\t-p   \u5bbf\u4e3b\u673aIP::\u5bb9\u5668\u7aef\u53e3(\u5bbf\u4e3b\u673a\u7aef\u53e3\u968f\u673a)\t\t\u5bbf\u4e3b\u673a\u7aef\u53e3\u4e0d\u5199\uff0c\u9ed8\u8ba4\u968f\u673a\u542f\u52a8\u4e00\u4e2a\u7aef\u53e3",id:"23-\u65b9\u5f0f\u4e09-p---\u5bbf\u4e3b\u673aip\u5bb9\u5668\u7aef\u53e3\u5bbf\u4e3b\u673a\u7aef\u53e3\u968f\u673a\u5bbf\u4e3b\u673a\u7aef\u53e3\u4e0d\u5199\u9ed8\u8ba4\u968f\u673a\u542f\u52a8\u4e00\u4e2a\u7aef\u53e3",level:3},{value:"2.4 \u65b9\u5f0f\u56db\t-p   \u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3",id:"24-\u65b9\u5f0f\u56db-p---\u5bbf\u4e3b\u673a\u7aef\u53e3\u5bb9\u5668\u7aef\u53e3",level:3},{value:"2.5 \u65b9\u5f0f\u4e94\t-p   81:80 -p 443:443  \u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a-p",id:"25-\u65b9\u5f0f\u4e94-p---8180--p-443443--\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a-p",level:3},{value:"3.docker\u7aef\u53e3\u968f\u673a\u6620\u5c04",id:"3docker\u7aef\u53e3\u968f\u673a\u6620\u5c04",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"[toc]"}),"\n",(0,t.jsx)(n.h1,{id:"docker\u5bb9\u5668\u7f51\u7edc",children:"docker\u5bb9\u5668\u7f51\u7edc"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"docker\u5bb9\u5668\u7f51\u7edc\u793a\u610f\u56fe"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2014.40.32.png",alt:"iShot2020-10-15 14.40.32"})}),"\n",(0,t.jsx)(n.h2,{id:"1docker\u7f51\u7edc\u76f8\u5173\u4fe1\u606f",children:"1.docker\u7f51\u7edc\u76f8\u5173\u4fe1\u606f"}),"\n",(0,t.jsx)(n.h3,{id:"11-docker\u7f51\u5361\u7f51\u5173\u4fe1\u606f",children:"1.1 docker\u7f51\u5361\u3001\u7f51\u5173\u4fe1\u606f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"//\u5bbf\u4e3b\u673a\u67e5\u770bdocker\u9ed8\u8ba4\u7f51\u5361\u4fe1\u606f\uff0c\u5b89\u88c5\u5b8cdocker\u5e76\u542f\u52a8\u540e\uff0c\u4f1a\u6709docker0\u7f51\u5361\uff0c\u9ed8\u8ba4IP\u5730\u5740172.17.0.1\n[root@docker1 ~]# ifconfig\ndocker0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255\n        inet6 fe80::42:61ff:fef9:e707  prefixlen 64  scopeid 0x20<link>\n        ether 02:42:61:f9:e7:07  txqueuelen 0  (Ethernet)\n        RX packets 50722  bytes 2466382 (2.3 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 82049  bytes 119024354 (113.5 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        \n//\u67e5\u770b\u5bb9\u5668\u7f51\u5173\uff0c\u7f51\u5173\u9ed8\u8ba4\u4e3a172.17.0.1\n[root@ddc401b2bba8 /]# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.17.0.1      0.0.0.0         UG    0      0        0 eth0\n172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 eth0\n"})}),"\n",(0,t.jsx)(n.h3,{id:"12-\u542f\u52a8\u4e00\u4e2abusybox\u5bb9\u5668",children:"1.2 \u542f\u52a8\u4e00\u4e2abusybox\u5bb9\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"1.\u5bbf\u4e3b\u673adocker1\u8fd0\u884cbusybox\u5bb9\u5668\n[root@docker1 ~]# docker run -it busybox\nUnable to find image 'busybox:latest' locally\nlatest: Pulling from library/busybox\n8e674ad76dce: Pull complete \nDigest: sha256:c94cf1b87ccb80f2e6414ef913c748b105060debda482058d2b8d0fce39f11b9\nStatus: Downloaded newer image for busybox:latest\n\n#\u67e5\u770b\u7f51\u5361\n/ # ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n32: eth0@if33: <BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN> mtu 1500 qdisc noqueue \n    link/ether 02:42:ac:11:00:03 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.3/16 brd 172.17.255.255 scope global eth0\n       valid_lft forever preferred_lft forever\n       \n#\u67e5\u770b\u7f51\u5173       \n/ # route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.17.0.1      0.0.0.0         UG    0      0        0 eth0\n172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 eth0\n/ # \n\n2.busybox\u5bb9\u5668ping\u5bbf\u4e3b\u673adocker2\n/ # ping 10.0.0.61\n\n\n3.\u5bbf\u4e3b\u673adocker2\u6293\u5305\u67e5\u770b\n\u53ef\u4ee5\u770b\u5230\uff0c\u6d9e\u6e90\u7684IP\u662f\u5bbf\u4e3b\u673adocker1\u7684eth0\u7f51\u5361\uff0c\u8bf4\u660e\u5bbf\u4e3b\u673a\u8fdb\u884c\u4e86nat\u5730\u5740\u8f6c\u6362\uff0c\u5c06dockerIP 172.17.0.2\u8f6c\u6362\u4e3a\u5bbf\u4e3b\u673aeth0IP\n[root@docker2 ~]# tcpdump -i eth0 icmp -nn\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n23:04:03.121544 IP 10.0.0.60 > 10.0.0.61: ICMP echo request, id 2816, seq 52, length 64\n23:04:03.121576 IP 10.0.0.61 > 10.0.0.60: ICMP echo reply, id 2816, seq 52, length 64\n"})}),"\n",(0,t.jsx)(n.h3,{id:"13-docker\u5bb9\u5668\u7528\u5230\u7684\u5185\u6838\u8f6c\u53d1\u548ciptables\u89c4\u5219",children:"1.3 docker\u5bb9\u5668\u7528\u5230\u7684\u5185\u6838\u8f6c\u53d1\u548ciptables\u89c4\u5219"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"1.\u5185\u6838\u8f6c\u53d1\n#\u5bbf\u4e3b\u673adocker1\u67e5\u770b\u5185\u6838\u8f6c\u53d1\uff0c\u5185\u6838\u8f6c\u53d1\u662fdocker\u5f00\u542f\u7684\n[root@docker1 ~]# sysctl -a|grep -w net.ipv4.ip_forward\nnet.ipv4.ip_forward = 1\n\n2.iptables\u89c4\u5219\n#\u5bbf\u4e3b\u673adocker1\u67e5\u770biptables\u89c4\u5219\n[root@docker1 ~]# iptables -t nat -L -n\nChain POSTROUTING (policy ACCEPT)\ntarget     prot opt source               destination         \nMASQUERADE  all  --  172.17.0.0/16        0.0.0.0/0 \n"})}),"\n",(0,t.jsx)(n.h2,{id:"2docker\u7aef\u53e3\u6620\u5c04\u5141\u8bb8\u5916\u7f51\u8bbf\u95ee\u5bb9\u5668",children:"2.docker\u7aef\u53e3\u6620\u5c04\uff08\u5141\u8bb8\u5916\u7f51\u8bbf\u95ee\u5bb9\u5668\uff09"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"docker\u6307\u5b9a\u7aef\u53e3\u6620\u5c04\uff0cdocker\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e00\u6761iptables\u89c4\u5219\u6765\u5b9e\u73b0\u7aef\u53e3\u6620\u5c04"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"-p   \u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"-p   \u5bbf\u4e3b\u673aIP:\u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"-p   \u5bbf\u4e3b\u673aIP::\u5bb9\u5668\u7aef\u53e3(\u968f\u673a\u7aef\u53e3)"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["-p   \u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3",":udp"]})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"-p   81:80 -p 443:443  \u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a-p"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"21-\u65b9\u5f0f\u4e00-p---\u5bbf\u4e3b\u673a\u7aef\u53e3\u5bb9\u5668\u7aef\u53e3",children:"2.1 \u65b9\u5f0f\u4e00\t-p   \u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1.\u542f\u52a8\u4e00\u4e2anginx\u5bb9\u5668\u5e76\u4f5c\u7aef\u53e3\u6620\u5c04"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"1.\u542f\u52a8\u4e00\u4e2anginx\u5bb9\u5668\uff0c\u5e76\u5c06\u5bbf\u4e3b\u673a8080\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u566880\u7aef\u53e3\n[root@docker1 ~]# docker run -d -p 8080:80 nginx:latest \nccef9a059f90886370577063f68bc4cab495f6497d394d16941f936b9fb8468a\n\n2.\u5bbf\u4e3b\u673a\u67e5\u770biptables\u89c4\u5219\uff0c\u53ef\u4ee5\u770b\u5230iptables\u5c06\u5bbf\u4e3b\u673a8080\u7aef\u53e3\u6620\u5c04\u5230\u4e86\u5bb9\u5668\u768480\u7aef\u53e3\n[root@docker1 ~]# iptables -t nat -L -n\nChain DOCKER (2 references)\ntarget     prot opt source               destination         \nRETURN     all  --  0.0.0.0/0            0.0.0.0/0           \nDNAT      tcp  -- 0.0.0.0/0           0.0.0.0/0      tcp dpt:8080 to:172.17.0.4:80\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2.\u5bbf\u4e3b\u673a80\u7aef\u53e3\u8bbf\u95ee"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2014.40.59.png",alt:"iShot2020-10-15 14.40.59"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3.\u5bbf\u4e3b\u673a8080\u7aef\u53e3\u8bbf\u95ee"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2014.41.25.png",alt:"iShot2020-10-15 14.41.25"})}),"\n",(0,t.jsx)(n.h3,{id:"22-\u65b9\u5f0f\u4e8c-p---\u5bbf\u4e3b\u673aip\u5bbf\u4e3b\u673a\u7aef\u53e3\u5bb9\u5668\u7aef\u53e3",children:"2.2 \u65b9\u5f0f\u4e8c\t-p   \u5bbf\u4e3b\u673aIP:\u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1.\u5bbf\u4e3b\u673aeth0\u7f51\u5361\u6dfb\u52a0\u4e00\u4e2a\u8f85\u52a9IP"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"1.\u6dfb\u52a0\u4e00\u4e2a\u8f85\u52a9IP\n[root@docker1 ~]# ifconfig eth0:1 10.0.0.66/24 up\n\n2.\u67e5\u770b\u7f51\u5361eth0\n[root@docker1 ~]# ifconfig |grep -A 2 eth0\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 10.0.0.60  netmask 255.255.255.0  broadcast 10.0.0.255\n        inet6 fe80::20c:29ff:fe65:ee41  prefixlen 64  scopeid 0x20<link>\n--\neth0:1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 10.0.0.66  netmask 255.255.255.0  broadcast 10.0.0.255\n        ether 00:0c:29:65:ee:41  txqueuelen 1000  (Ethernet)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2.\u542f\u52a8\u5bb9\u5668"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"//\u6dfb\u52a0\u8f85\u52a9IP\u540e\uff0c\u5bbf\u4e3b\u673a\u768480\u7aef\u53e3\u5c31\u53ef\u4ee5\u518d\u6b21\u4f7f\u7528\n[root@docker1 ~]# docker run -d -p 10.0.0.60:80:80 nginx:latest \n80257a4c036183df9106d38992bf2762007bc5bc1550bed408cf4232eb1ae160\n\n[root@docker1 ~]# docker run -d -p 10.0.0.66:80:80 nginx:latest \nccabd14eea387c05ce7af46c002c8f9621aa1907642551aff79f7ca7e4bd25aa\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3.\u67e5\u770b\u7aef\u53e3\u76d1\u542c"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"[root@docker1 ~]# netstat -ntpl\nActive Internet connections (only servers)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    \ntcp        0      0 10.0.0.66:80            0.0.0.0:*               LISTEN      18647/docker-proxy  \ntcp        0      0 10.0.0.60:80            0.0.0.0:*               LISTEN      2942/docker-proxy  \n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"4.\u67e5\u770biptables\u8f6c\u53d1\u89c4\u5219"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"//\u8bbf\u95ee\u5bbf\u4e3b\u673a80\u7aef\u53e3\uff0c\u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3\u7b2c\u4e00\u4e2a\u5bb9\u566880\u7aef\u53e3\uff1b\u8bbf\u95ee\u5bbf\u4e3b\u673a\u8f85\u52a9IP80\u7aef\u53e3\uff0c\u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3\u7b2c\u4e8c\u4e2a\u5bb9\u566880\u7aef\u53e3\n[root@docker1 ~]# iptables -t nat -L -n\nChain DOCKER (2 references)\ntarget     prot opt source               destination         \nRETURN     all  --  0.0.0.0/0            0.0.0.0/0           \nDNAT       tcp  --  0.0.0.0/0            10.0.0.60            tcp dpt:80 to:172.17.0.4:80\nDNAT       tcp  --  0.0.0.0/0            10.0.0.66            tcp dpt:80 to:172.17.0.5:80\n"})}),"\n",(0,t.jsx)(n.h3,{id:"23-\u65b9\u5f0f\u4e09-p---\u5bbf\u4e3b\u673aip\u5bb9\u5668\u7aef\u53e3\u5bbf\u4e3b\u673a\u7aef\u53e3\u968f\u673a\u5bbf\u4e3b\u673a\u7aef\u53e3\u4e0d\u5199\u9ed8\u8ba4\u968f\u673a\u542f\u52a8\u4e00\u4e2a\u7aef\u53e3",children:"2.3 \u65b9\u5f0f\u4e09\t-p   \u5bbf\u4e3b\u673aIP::\u5bb9\u5668\u7aef\u53e3(\u5bbf\u4e3b\u673a\u7aef\u53e3\u968f\u673a)\t\t\u5bbf\u4e3b\u673a\u7aef\u53e3\u4e0d\u5199\uff0c\u9ed8\u8ba4\u968f\u673a\u542f\u52a8\u4e00\u4e2a\u7aef\u53e3"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1.\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'1.\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\n[root@docker1 ~]# docker run -d -p 10.0.0.60::80 nginx:latest \nfbf5d8973f9094bf18c0e0b9ad63fa3b350e1bd2afc94083824e081c20fdb0c8\n\n2.\u67e5\u770b\u542f\u52a8\u7684\u5bb9\u5668\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u968f\u673a\u542f\u52a8\u4e86\u4e00\u4e2a32768\u7aef\u53e3\n[root@docker1 ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                     NAMES\nfbf5d8973f90        nginx:latest        "nginx -g \'daemon of\u2026"   11 seconds ago      Up 10 seconds       10.0.0.60:32768->80/tcp   elastic_ritchie\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2.\u6d4f\u89c8\u5668\u8bbf\u95ee32768\u7aef\u53e3"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-15%2014.41.49.png",alt:"iShot2020-10-15 14.41.49"})}),"\n",(0,t.jsxs)(n.h3,{id:"24-\u65b9\u5f0f\u56db-p---\u5bbf\u4e3b\u673a\u7aef\u53e3\u5bb9\u5668\u7aef\u53e3",children:["2.4 \u65b9\u5f0f\u56db\t-p   \u5bbf\u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3",":udp"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u6620\u5c04\u9ed8\u8ba4\u91c7\u7528tcp\u65b9\u5f0f\uff0c\u6b64\u65b9\u5f0f\u4e3a\u6307\u5b9audp\u65b9\u5f0f"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u4f8b\u5982\uff0c\u5bb9\u5668\u4e2d\u8fd0\u884c\u4e86dns\u670d\u52a1\uff0c\u9700\u8981\u6307\u5b9a\u4e3audp\u65b9\u5f0f"})}),"\n",(0,t.jsx)(n.h3,{id:"25-\u65b9\u5f0f\u4e94-p---8180--p-443443--\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a-p",children:"2.5 \u65b9\u5f0f\u4e94\t-p   81:80 -p 443:443  \u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a-p"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u5bb9\u5668\u4e2d\u8fd0\u884c\u4e86\u591a\u4e2a\u670d\u52a1\uff0c\u6b64\u65f6\u9700\u8981\u6620\u5c04\u591a\u4e2a\u7aef\u53e3"})}),"\n",(0,t.jsx)(n.h2,{id:"3docker\u7aef\u53e3\u968f\u673a\u6620\u5c04",children:"3.docker\u7aef\u53e3\u968f\u673a\u6620\u5c04"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"-P\t\t\t\u4e0e-p   \u5bbf\u4e3b\u673aIP::\u5bb9\u5668\u7aef\u53e3(\u5bbf\u4e3b\u673a\u7aef\u53e3\u968f\u673a)\u65b9\u5f0f\u76f8\u540c"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1.\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'1.\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\n[root@docker1 ~]# docker run -d -P nginx:latest \nc1ffac8baf576208bbf107a24fd83e832b4811ad270bf8006d636e92b6438c39\n\n2.\u67e5\u770b\u5bb9\u5668\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230\u5c06\u5bbf\u4e3b\u673a32769\u6620\u5c04\u5230docker80\u7aef\u53e3\n[root@docker1 ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                     NAMES\nc1ffac8baf57        nginx:latest        "nginx -g \'daemon of\u2026"   33 seconds ago      Up 32 seconds       0.0.0.0:32769->80/tcp     clever_lichterman\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)("span",{style:{color:"red"},children:"docker\u7aef\u53e3\u6620\u5c04\u6838\u5fc3"})})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)("span",{style:{color:"red"},children:"\u901a\u8fc7iptables\u5b9e\u73b0\u7aef\u53e3\u6620\u5c04\uff01\uff01\uff01"})})})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>d});var t=r(96540);const c={},o=t.createContext(c);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);