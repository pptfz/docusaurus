"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3759],{44937:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>k,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=s(74848),i=s(28453);const o={},t="docker\u5b89\u88c5jenkins",c={id:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u5b89\u88c5/docker\u5b89\u88c5jenkins",title:"docker\u5b89\u88c5jenkins",description:"docker jenkins \u4e2d\u56fd\u5b9a\u5236\u7248\u8bf4\u660e",source:"@site/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u5b89\u88c5/docker\u5b89\u88c5jenkins.md",sourceDirName:"linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u5b89\u88c5",slug:"/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u5b89\u88c5/docker\u5b89\u88c5jenkins",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u5b89\u88c5/docker\u5b89\u88c5jenkins",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"CentOS7.5\u5b89\u88c5jenkins-2.176",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u5b89\u88c5/CentOS7.5\u5b89\u88c5jenkins-2.176"},next:{title:"jenkins\u524d\u7aef\u9879\u76ee\u6253\u5305\u62a5\u9519\u95ee\u9898",permalink:"/docs/linux/\u81ea\u52a8\u5316\u8fd0\u7ef4\u5e73\u53f0/jenkins/jenkins\u6545\u969c/jenkins\u524d\u7aef\u9879\u76ee\u6253\u5305\u62a5\u9519\u95ee\u9898"}},a={},d=[];function l(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"docker\u5b89\u88c5jenkins",children:"docker\u5b89\u88c5jenkins"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"docker jenkins \u4e2d\u56fd\u5b9a\u5236\u7248\u8bf4\u660e"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.strong,{children:["jenkins\u5b89\u88c5\u63d2\u4ef6\u7684\u65f6\u5019\u7531\u4e8e\u6e90\u5728\u56fd\u5916\uff0c\u56e0\u6b64\u5b89\u88c5\u4f1a\u975e\u5e38\u6162\u751a\u81f3\u5931\u8d25\uff0c\u5f53\u7136\u4e5f\u6709\u56fd\u5185\u6e90\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u662f\u9700\u8981\u81ea\u884c\u4fee\u6539\u6587\u4ef6\uff0c",(0,r.jsx)(e.a,{href:"http://jenkins-zh.cn/",children:"jenkins\u4e2d\u6587\u793e\u533a"}),"\u63a8\u51fa\u4e86\u4e2d\u56fd\u5b9a\u5236\u7248\u7684jenkins docker\u955c\u50cf\uff0c\u53ea\u9700\u8981\u4e0b\u8f7d\u76f8\u5e94\u7684docker\u955c\u50cf\u5e76\u542f\u52a8\u5bb9\u5668\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4fee\u6539\u64cd\u4f5c\uff0c\u5e76\u4e14\u5b89\u88c5\u540ejenkins\u63d2\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u6709\u660e\u663e\u7684\u63d0\u5347"]})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://hub.docker.com/r/jenkinszh/jenkins-zh",children:"docker jenkins\u4e2d\u56fd\u5b9a\u5236\u7248 dockerhub\u5730\u5740"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://github.com/jenkins-zh/jenkins-formulas",children:"docker jenkins\u4e2d\u56fd\u5b9a\u5236\u7248 github\u5730\u5740"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://github.com/jenkinsci/localization-zh-cn-plugin",children:"jenkins\u4e2d\u6587\u793e\u533a\u7ef4\u62a4\u7684\u4e2d\u6587\u7b80\u4f53\u63d2\u4ef6"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"http://updates.jenkins-ci.org/download/plugins/",children:"jenkins\u63d2\u4ef6\u4e0b\u8f7d\u5730\u5740"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u76f4\u63a5\u4f7f\u7528jenkins\u4e2d\u56fd\u5b9a\u5236\u7248\u955c\u50cf\u542f\u52a8\u5bb9\u5668"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sh",children:"docker run \\\n  -u root \\\n  -d \\\n  -h jenkins \\\n  --name jenkins \\\n  -p 8081:8080 \\\n  -p 50000:50000 \\\n  -v /usr/local/jenkins:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  jenkinszh/jenkins-zh:2.239\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u767b\u9646jenkins\u540e\u4f1a\u63d0\u793ajenkins\u53cd\u5411\u4ee3\u7406\u914d\u7f6e\u9519\u8bef\uff0c\u53c2\u8003 ",(0,r.jsx)(e.a,{href:"https://www.jenkins.io/doc/book/system-administration/reverse-proxy-configuration-nginx/",children:"\u5b98\u65b9\u63d0\u4f9b\u7684nginx\u914d\u7f6e"})," \u5373\u53ef"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-nginx",children:'upstream jenkins {\n  keepalive 32; # keepalive connections\n  server 127.0.0.1:8081; # jenkins ip and port\n}\n\n# Required for Jenkins websocket agents\nmap $http_upgrade $connection_upgrade {\n  default upgrade;\n  \'\' close;\n}\n\nserver {\n  listen 80;\n  server_name jenkins.abc.com;\n  return 302 https://$server_name$request_uri;\n}\n\nserver {\n  listen 443 ssl;    \n\n  server_name jenkins.abc.com;  \n\n  # this is the jenkins web root directory\n  # (mentioned in the /etc/default/jenkins file)\n  root            /var/run/jenkins/war/;\n\n  access_log /var/log/jenkins/jenkins.abc.com.access.log;\n  error_log /var/log/jenkins/jenkins.abc.com.error.log;\n  ssl_certificate ssl_key/aldwx/1_abc.com_bundle.crt;\n  ssl_certificate_key ssl_key/aldwx/2_abc.com.key;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n\n  # pass through headers from Jenkins that Nginx considers invalid\n  ignore_invalid_headers off;\n\n  location ~ "^/static/[0-9a-fA-F]{8}\\/(.*)$" {\n    # rewrite all static files into requests to the root\n    # E.g /static/12345678/css/something.css will become /css/something.css\n    rewrite "^/static/[0-9a-fA-F]{8}\\/(.*)" /$1 last;\n  }\n\n  location /userContent {\n    # have nginx handle all the static requests to userContent folder\n    # note : This is the $JENKINS_HOME dir\n    root /var/lib/jenkins/;\n    if (!-f $request_filename){\n      # this file does not exist, might be a directory or a /**view** url\n      rewrite (.*) /$1 last;\n      break;\n    }\n    sendfile on;\n  }\n\n  location / {\n      sendfile off;\n      proxy_pass         http://jenkins;\n      proxy_redirect     default;\n      proxy_http_version 1.1;\n\n      # Required for Jenkins websocket agents\n      proxy_set_header   Connection        $connection_upgrade;\n      proxy_set_header   Upgrade           $http_upgrade;\n\n      proxy_set_header   Host              $host;\n      proxy_set_header   X-Real-IP         $remote_addr;\n      proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;\n      proxy_set_header   X-Forwarded-Proto $scheme;\n      proxy_max_temp_file_size 0;\n\n      #this is the maximum upload size\n      client_max_body_size       10m;\n      client_body_buffer_size    128k;\n\n      proxy_connect_timeout      90;\n      proxy_send_timeout         90;\n      proxy_read_timeout         90;\n      proxy_buffering            off;\n      proxy_request_buffering    off; # Required for HTTP CLI commands\n      proxy_set_header Connection ""; # Clear for keepalive\n  }\n}\n'})})]})}function k(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>c});var r=s(96540);const i={},o=r.createContext(i);function t(n){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),r.createElement(o.Provider,{value:e},n.children)}}}]);