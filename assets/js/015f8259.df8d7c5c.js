"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[3691],{93189:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var r=s(74848),t=s(28453);const o={},i=void 0,l={id:"python/python\u8fdb\u9636/django/django ORM",title:"django ORM",description:"[toc]",source:"@site/docs/python/python\u8fdb\u9636/django/5.django ORM.md",sourceDirName:"python/python\u8fdb\u9636/django",slug:"/python/python\u8fdb\u9636/django/django ORM",permalink:"/docs/python/python\u8fdb\u9636/django/django ORM",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"django \u6a21\u7248\u6e32\u67d3",permalink:"/docs/python/python\u8fdb\u9636/django/django \u6a21\u7248\u6e32\u67d3"},next:{title:"cookie\u548csession",permalink:"/docs/python/python\u8fdb\u9636/django/cookie\u548csession"}},d={},a=[{value:"5.ORM",id:"5orm",level:2},{value:"5.1 ORM\u7b80\u4ecb",id:"51-orm\u7b80\u4ecb",level:3},{value:"5.2 ORM\u64cd\u4f5c",id:"52-orm\u64cd\u4f5c",level:3},{value:"5.2.1 ORM\u8fde\u63a5mysql",id:"521-orm\u8fde\u63a5mysql",level:4},{value:"5.2.2  \u5355\u8868\u64cd\u4f5c",id:"522--\u5355\u8868\u64cd\u4f5c",level:4},{value:"5.2.2.1 \u589e",id:"5221-\u589e",level:5},{value:"5.2.2.2 \u5220",id:"5222-\u5220",level:5},{value:"5.2.2.3 \u6539",id:"5223-\u6539",level:5},{value:"5.2.2.4 \u67e5",id:"5224-\u67e5",level:5},{value:"\u67e5\u8be2\u975e\u5e38\u91cd\u8981\u768413\u79cd\u65b9\u6cd5",id:"\u67e5\u8be2\u975e\u5e38\u91cd\u8981\u768413\u79cd\u65b9\u6cd5",level:5},{value:"1 all()\t\u67e5\u8be2\u6240\u6709\u7ed3\u679c\uff0c\u7ed3\u679c\u662fqueryset\u7c7b\u578b",id:"1-all\u67e5\u8be2\u6240\u6709\u7ed3\u679c\u7ed3\u679c\u662fqueryset\u7c7b\u578b",level:6},{value:"2 get()\t\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\uff0c\u6ca1\u6709\u6216\u8005\u6570\u636e\u591a\u5c31\u62a5\u9519\uff0c\u4e0d\u662fqueryset\u7c7b\u578b\uff0c\u662f\u884c\u8bb0\u5f55\u5bf9\u8c61",id:"2-get\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\u6ca1\u6709\u6216\u8005\u6570\u636e\u591a\u5c31\u62a5\u9519\u4e0d\u662fqueryset\u7c7b\u578b\u662f\u884c\u8bb0\u5f55\u5bf9\u8c61",level:6},{value:"3 filter()\t\u67e5\u8be2\u6570\u636e\uff0c\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",id:"3-filter\u67e5\u8be2\u6570\u636e\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",level:6},{value:"4 exclude()\t\u6392\u9664\uff0c\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",id:"4-exclude\u6392\u9664\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",level:6},{value:"5 order_by()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f,\u9ed8\u8ba4\u662f\u6309\u7167id\u6765\u5347\u5e8f\u6392\u5217\u7684\uff0c\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",id:"5-order_byqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u9ed8\u8ba4\u662f\u6309\u7167id\u6765\u5347\u5e8f\u6392\u5217\u7684\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",level:6},{value:"6 reverse()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u5bf9\u67e5\u8be2\u7ed3\u679c\u53cd\u5411\u6392\u5e8f\uff0c\u8fd4\u56de\u503c\u8fd8\u662fqueryset\u7c7b\u578b",id:"6-reversequeryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u5bf9\u67e5\u8be2\u7ed3\u679c\u53cd\u5411\u6392\u5e8f\u8fd4\u56de\u503c\u8fd8\u662fqueryset\u7c7b\u578b",level:6},{value:"7 count()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u6570\u636e\u5e93\u4e2d\u5339\u914d\u67e5\u8be2(QuerySet)\u7684\u5bf9\u8c61\u6570\u91cf",id:"7-countqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u6570\u636e\u5e93\u4e2d\u5339\u914d\u67e5\u8be2queryset\u7684\u5bf9\u8c61\u6570\u91cf",level:6},{value:"8 first()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u5f97\u5230\u7684\u90fd\u662fmodel\u5bf9\u8c61\uff0c\u4e0d\u662fqueryset",id:"8-firstqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u7b2c\u4e00\u6761\u8bb0\u5f55\u5f97\u5230\u7684\u90fd\u662fmodel\u5bf9\u8c61\u4e0d\u662fqueryset",level:6},{value:"9 last()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u6700\u540e\u4e00\u6761\u8bb0\u5f55\uff0c\u5f97\u5230\u7684\u662fmodel\u5bf9\u8c61",id:"9-lastqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u6700\u540e\u4e00\u6761\u8bb0\u5f55\u5f97\u5230\u7684\u662fmodel\u5bf9\u8c61",level:6},{value:"10 exists()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u5982\u679cQuerySet\u5305\u542b\u6570\u636e\uff0c\u5c31\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse",id:"10-existsqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u5982\u679cqueryset\u5305\u542b\u6570\u636e\u5c31\u8fd4\u56detrue\u5426\u5219\u8fd4\u56defalse",level:6},{value:"11 values()\t\u7528\u7684\u6bd4\u8f83\u591a\uff0cqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u4e00ValueQuerySet\u2014\u2014\u4e00\u4e2a\u7279\u6b8a\u7684QuerySet\uff0c\u8fd0\u884c\u540e\u5f97\u5230\u7684\u5e76\u4e0d\u662f\u4e00\u7cfb\u5217model\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\uff0c\u800c\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5b57\u5178\u5e8f\u5217,\u53ea\u8981\u662f\u8fd4\u56de\u7684queryset\u7c7b\u578b\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u8fde\u7eed\u8c03\u7528queryset\u7c7b\u578b\u7684\u5176\u4ed6\u7684\u67e5\u627e\u65b9\u6cd5\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684\u3002",id:"11-values\u7528\u7684\u6bd4\u8f83\u591aqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u4e00valuequeryset\u4e00\u4e2a\u7279\u6b8a\u7684queryset\u8fd0\u884c\u540e\u5f97\u5230\u7684\u5e76\u4e0d\u662f\u4e00\u7cfb\u5217model\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\u800c\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5b57\u5178\u5e8f\u5217\u53ea\u8981\u662f\u8fd4\u56de\u7684queryset\u7c7b\u578b\u5c31\u53ef\u4ee5\u7ee7\u7eed\u8fde\u7eed\u8c03\u7528queryset\u7c7b\u578b\u7684\u5176\u4ed6\u7684\u67e5\u627e\u65b9\u6cd5\u5176\u4ed6\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684",level:6},{value:"12 values_list\t\u5b83\u4e0evalues()\u975e\u5e38\u76f8\u4f3c\uff0c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5143\u7ec4\u5e8f\u5217\uff0cvalues\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u5178\u5e8f\u5217",id:"12-values_list\u5b83\u4e0evalues\u975e\u5e38\u76f8\u4f3c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5143\u7ec4\u5e8f\u5217values\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u5178\u5e8f\u5217",level:6},{value:"13 distinct()\tvalues\u548cvalues_list\u5f97\u5230\u7684queryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u4ece\u8fd4\u56de\u7ed3\u679c\u4e2d\u5254\u9664\u91cd\u590d\u7eaa\u5f55",id:"13-distinctvalues\u548cvalues_list\u5f97\u5230\u7684queryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u4ece\u8fd4\u56de\u7ed3\u679c\u4e2d\u5254\u9664\u91cd\u590d\u7eaa\u5f55",level:6},{value:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u6a21\u7cca\u67e5\u8be2",id:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u6a21\u7cca\u67e5\u8be2",level:6},{value:"5.2.3 \u591a\u8868\u64cd\u4f5c",id:"523-\u591a\u8868\u64cd\u4f5c",level:4},{value:"\u8868\u5173\u7cfb\u53ca\u5b57\u6bb5\u8bbe\u8ba1",id:"\u8868\u5173\u7cfb\u53ca\u5b57\u6bb5\u8bbe\u8ba1",level:4},{value:"5.2.3.1 \u589e",id:"5231-\u589e",level:4},{value:"5.2.3.2 \u5220",id:"5232-\u5220",level:4},{value:"5.2.3.3 \u6539",id:"5233-\u6539",level:4},{value:"5.2.3.4 \u67e5",id:"5234-\u67e5",level:4},{value:"<strong>\u57fa\u4e8e\u5bf9\u8c61\u7684\u8de8\u8868\u67e5\u8be2</strong>",id:"\u57fa\u4e8e\u5bf9\u8c61\u7684\u8de8\u8868\u67e5\u8be2",level:3},{value:"<strong>\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u8de8\u8868\u67e5\u8be2\t\u5c31\u662fjoin\u8fde\u8868\u67e5\u8be2</strong>",id:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u8de8\u8868\u67e5\u8be2\u5c31\u662fjoin\u8fde\u8868\u67e5\u8be2",level:3},{value:"<strong>\u805a\u5408\u67e5\u8be2</strong>",id:"\u805a\u5408\u67e5\u8be2",level:4},{value:"<strong>\u5206\u7ec4\u67e5\u8be2</strong>",id:"\u5206\u7ec4\u67e5\u8be2",level:4},{value:"<strong>F\u548cQ\u67e5\u8be2</strong>",id:"f\u548cq\u67e5\u8be2",level:4},{value:"<strong>orm\u6267\u884c\u539f\u751fsql\u8bed\u53e5</strong>",id:"orm\u6267\u884c\u539f\u751fsql\u8bed\u53e5",level:4},{value:"<strong>django\u5916\u90e8\u811a\u672c\u8c03\u7528models\u6570\u636e\u5e93\u64cd\u4f5c</strong>",id:"django\u5916\u90e8\u811a\u672c\u8c03\u7528models\u6570\u636e\u5e93\u64cd\u4f5c",level:4},{value:"<strong>ORM\u4e8b\u52a1\u548c\u9501</strong>",id:"orm\u4e8b\u52a1\u548c\u9501",level:4}];function c(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"[toc]"}),"\n",(0,r.jsx)(n.h2,{id:"5orm",children:"5.ORM"}),"\n",(0,r.jsx)(n.h3,{id:"51-orm\u7b80\u4ecb",children:"5.1 ORM\u7b80\u4ecb"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"MVC\u6216\u8005MVC\u6846\u67b6\u4e2d\u5305\u62ec\u4e00\u4e2a\u91cd\u8981\u7684\u90e8\u5206\uff0c\u5c31\u662fORM\uff0c\u5b83\u5b9e\u73b0\u4e86\u6570\u636e\u6a21\u578b\u4e0e\u6570\u636e\u5e93\u7684\u89e3\u8026\uff0c\u5373\u6570\u636e\u6a21\u578b\u7684\u8bbe\u8ba1\u4e0d\u9700\u8981\u4f9d\u8d56\u4e8e\u7279\u5b9a\u7684\u6570\u636e\u5e93\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u8f7b\u677e\u66f4\u6362\u6570\u636e\u5e93\uff0c\u8fd9\u6781\u5927\u7684\u51cf\u8f7b\u4e86\u5f00\u53d1\u4eba\u5458\u7684\u5de5\u4f5c\u91cf\uff0c\u4e0d\u9700\u8981\u9762\u5bf9\u56e0\u6570\u636e\u5e93\u53d8\u66f4\u800c\u5bfc\u81f4\u7684\u65e0\u6548\u52b3\u52a8"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"ORM\u662f\u201c\u5bf9\u8c61-\u5173\u7cfb-\u6620\u5c04\u201d\u7684\u7b80\u79f0\u3002\uff08Object Relational Mapping\uff0c\u7b80\u79f0ORM\uff09"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ORM\u6267\u884c\u7684\u8fc7\u7a0b"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u7c7b\u5bf9\u8c61---\x3esql---\x3epymysql---\x3emysql\u670d\u52a1\u7aef---\x3e\u78c1\u76d8\uff0corm\u5176\u5b9e\u5c31\u662f\u5c06\u7c7b\u5bf9\u8c61\u7684\u8bed\u6cd5\u7ffb\u8bd1\u6210sql\u8bed\u53e5\u7684\u4e00\u4e2a\u5f15\u64ce"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"ORM\u4e0e\u539f\u751fSQL\u5bf9\u6bd4"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.44.35.png",alt:"iShot2020-10-16 14.44.35"})}),"\n",(0,r.jsx)(n.h3,{id:"52-orm\u64cd\u4f5c",children:"5.2 ORM\u64cd\u4f5c"}),"\n",(0,r.jsx)(n.h4,{id:"521-orm\u8fde\u63a5mysql",children:"5.2.1 ORM\u8fde\u63a5mysql"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd9\u91cc\u5148\u6765\u4e00\u4e2aorm\u8fde\u63a5mysql\u5e76\u521b\u5efa\u4e00\u5f20\u8868\u7684\u793a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7b2c\u4e00\u6b65\u3001\u4fee\u6539settings\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6emysql\u76f8\u5173\u4fe1\u606f"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#\u5148\u6ce8\u91ca\u9ed8\u8ba4\u9879\n# DATABASES = {\n#     'default': {\n#         'ENGINE': 'django.db.backends.sqlite3',\n#         'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n#     }\n# }\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': '\u6570\u636e\u5e93\u540d',\n        'HOST': '\u6570\u636e\u5e93IP',\n        'PORT': '\u6570\u636e\u5e93\u7aef\u53e3',\n        'USER': '\u7528\u6237',\n        'PASSWORD': '\u5bc6\u7801'\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["\u7b2c\u4e8c\u6b65\u3001\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u7684\u540c\u540d\u76ee\u5f55\u4e0b\u7684",(0,r.jsx)(n.code,{children:"__init__.py"}),"\u6587\u4ef6\u4e2d\u5199\u4e0a\u4ee5\u4e0b\u5185\u5bb9,\u6765\u6307\u5b9apymysql\u4f5c\u4e3a\u8fde\u63a5\u5ba2\u6237\u7aef"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import pymysql\npymysql.install_as_MySQLdb()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7b2c\u4e09\u6b65\u3001\u5728\u5e94\u7528\u7a0b\u5e8f\u76ee\u5f55\u4e0b\u9762\u7684models.py\u6587\u4ef6\u4e2d\u5199\u5bf9\u5e94\u7684\u7c7b\uff0c\u8fd9\u91cc\u4e3a\u521b\u5efa\u4e00\u5f20\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.db import models \n\n#\u8fd9\u91cc\u8868\u793a\u521b\u5efa\u4e00\u4e2auserinfo\u8868\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cdjango\u5728\u521b\u5efa\u8868\u7684\u65f6\u5019\u4f1a\u628a\u8868\u540d\u5c0f\u5199\u5e76\u91cd\u547d\u540d\u4e3a  \u5e94\u7528\u7a0b\u5e8f_userinfo\nclass UserInfo(models.Model):\n    id = models.AutoField(primary_key=True)\n    username = models.CharField(max_length=10)\n    password = models.CharField(max_length=32)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u7b2c\u56db\u6b65: \u6267\u884c\u6570\u636e\u5e93\u540c\u6b65\u6307\u4ee4\uff0c\u5728\u7ec8\u7aef\u4e2d\u6267\u884c\uff0c\u6267\u884c\u7684\u8def\u5f84\u662fdjango\u9879\u76ee\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#\u5728migrations\u6587\u4ef6\u5939\u4e0b\u9762\u751f\u6210\u8bb0\u5f55\u6587\u4ef6\npython3 manage.py makemigrations  \n\n#\u6267\u884c\u8bb0\u5f55\u6587\u4ef6\npython3 manage.py migrate         \n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u8868\u5df2\u7ecf\u521b\u5efa\u5b8c\u6210\u4e86\uff0c\u4f46\u662f\u53d1\u73b0\u591a\u4e86\u597d\u591a\u5176\u4ed6\u7684\u8868\uff0c\u90a3\u8fd9\u4e9b\u8868\u662f\u4ece\u54ea\u6765\u7684\u5462\uff0c\u8fd9\u4e9b\u662fdjango\u4ecesettings\u6587\u4ef6\u4e2d\u5faa\u73af\u8bfb\u53d6INSTALLED_APPS\u4e0b\u7684\u6240\u6709\u5b50\u9879\u800c\u9ed8\u8ba4\u521b\u5efa\u7684\u8868"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.47.57.png",alt:"iShot2020-10-16 14.47.57"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8868\u7ed3\u6784"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.48.20.png",alt:"iShot2020-10-16 14.48.20"})}),"\n",(0,r.jsx)(n.h4,{id:"522--\u5355\u8868\u64cd\u4f5c",children:"5.2.2  \u5355\u8868\u64cd\u4f5c"}),"\n",(0,r.jsx)(n.h5,{id:"5221-\u589e",children:"5.2.2.1 \u589e"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5e94\u7528\u7a0b\u5e8f\u7684models.py\u6587\u4ef6\u4e2d\u5df2\u7ecf\u5b9a\u4e49\u4e86\u521b\u5efa\u4e00\u5f20\u8868\u7684\u8bed\u53e5"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"urls\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from app01 import views\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^index/', views.index),\n]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n\n#\u65b9\u5f0f1\ndef index(request):\n    obj = models.UserInfo(\n        username='\u5c0f\u660e',\n        password='123'\n    )\n    obj.save()\n    return HttpResponse('ok')\n\n\n#\u65b9\u5f0f2\ndef index(request):\n    models.UserInfo.objects.create(\n        username='\u5c0f\u9896',\n        password='666'\n    )\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u63a5\u4e0b\u6765\u542f\u52a8django\u9879\u76ee\uff0c\u6d4f\u89c8\u5668\u8bbf\u95ee\u6211\u4eec\u6307\u5b9a\u7684127.0.0.1:8000/index"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6267\u884c\u4ee5\u4e0a\u4efb\u610f\u4e00\u79cd\u65b9\u5f0f\u90fd\u53ef\u4ee5\u63d2\u5165\u6570\u636e"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.48.48.png",alt:"iShot2020-10-16 14.48.48"})}),"\n",(0,r.jsx)(n.h5,{id:"5222-\u5220",children:"5.2.2.2 \u5220"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def index(request):\n  \t#\u5220\u9664UserInfo\u8868\u4e2did\u503c\u4e3a1\u7684\u503c\n    models.UserInfo.objects.filter(id=1).delete()\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u8bbf\u95ee127.0.0.1/index\u5373\u53ef\u6210\u529f\u6267\u884c\u8bed\u53e5"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.49.22.png",alt:"iShot2020-10-16 14.49.22"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u4ee5\u770b\u5230\uff0cid\u4e3a1\u7684\u5b57\u6bb5\u5df2\u7ecf\u88ab\u5220\u9664"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.49.40.png",alt:"iShot2020-10-16 14.49.40"})}),"\n",(0,r.jsx)(n.h5,{id:"5223-\u6539",children:"5.2.2.3 \u6539"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    # \u65b9\u5f0f1\n    models.UserInfo.objects.filter(id=2).update(\n        username='abc',\n        password='abc',\n    )\n\n    # \u65b9\u5f0f2\n    # obj = models.UserInfo.objects.filter(id=2)[0]\n    # obj.username = 'ggg'\n    # obj.password = 'ggg'\n    # obj.save()\n\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u8bbf\u95ee127.0.0.1/index"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u4ee5\u770b\u5230\u4fee\u6539\u5df2\u7ecf\u751f\u6548"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.50.44.png",alt:"iShot2020-10-16 14.50.44"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6279\u91cf\u521b\u5efa"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    list_obj = []\n    for i in range(6):\n        obj = models.UserInfo(\n            username='name%s' %i,\n            password='pwd%s' %i,\n        )\n        list_obj.append(obj)\n    print(list_obj)\n    models.UserInfo.objects.bulk_create(list_obj)\n\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"print(list_obj)\u8fd4\u56de\u7684\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[<UserInfo: UserInfo object>, <UserInfo: UserInfo object>, <UserInfo: UserInfo object>, <UserInfo: UserInfo object>, <UserInfo: UserInfo object>, <UserInfo: UserInfo object>]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u8bbf\u95ee127.0.0.1/index"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6279\u91cf\u63d2\u5165\u4e86\u6570\u636e"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.51.19.png",alt:"iShot2020-10-16 14.51.19"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"update_or_create \u6709\u5c31\u66f4\u65b0,\u6ca1\u6709\u5c31\u521b\u5efa"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    a,b = models.UserInfo.objects.update_or_create(\n        username='name0',\n        defaults={\n            'id': 20,\n            'password': 'abcdef',\n        }\n    )\n\n    print(a)  #\u5f53\u524d\u66f4\u65b0\u540e\u7684model\u5bf9\u8c61,\u6216\u8005\u662f\u4f60\u65b0\u589e\u7684\u8bb0\u5f55\u7684model\u5bf9\u8c61\n    print(b)  #\u65b0\u589e\u5c31\u662fTrue,\u67e5\u8be2\u5c31False\n\n    return HttpResponse('ok')\n  \n  \n#a\u8fd4\u56de\u7684\u7ed3\u679c\nUserInfo object\n\n#b\u8fd4\u56de\u7684\u7ed3\u679c\nTrue\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.51.47.png",alt:"iShot2020-10-16 14.51.47"})}),"\n",(0,r.jsx)(n.h5,{id:"5224-\u67e5",children:"5.2.2.4 \u67e5"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6700\u7b80\u5355\u7684\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    ret = models.UserInfo.objects.filter(id=1)\n    print(ret)  # <QuerySet [<UserInfo: UserInfo object>]> -- []\n    obj = ret[0]\n    print(obj.id, obj.username)\n\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8868app01_userinfo\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.52.34.png",alt:"iShot2020-10-16 14.52.34"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"print(ret)\u7ed3\u679c\u5982\u4e0b\n<QuerySet [<UserInfo: UserInfo object>]>\n\nprint(obj.id, obj.username)\u6267\u884c\u540e\u7ed3\u679c\u5982\u4e0b\n1 aaa\n"})}),"\n",(0,r.jsx)(n.h5,{id:"\u67e5\u8be2\u975e\u5e38\u91cd\u8981\u768413\u79cd\u65b9\u6cd5",children:"\u67e5\u8be2\u975e\u5e38\u91cd\u8981\u768413\u79cd\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.h6,{id:"1-all\u67e5\u8be2\u6240\u6709\u7ed3\u679c\u7ed3\u679c\u662fqueryset\u7c7b\u578b",children:"1 all()\t\u67e5\u8be2\u6240\u6709\u7ed3\u679c\uff0c\u7ed3\u679c\u662fqueryset\u7c7b\u578b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    ret = models.UserInfo.objects.all()\n    print(ret)\n\n    return HttpResponse('ok')\n  \n#print(ret)\u7ed3\u679c\u5982\u4e0b\n<QuerySet [<UserInfo: UserInfo object>, <UserInfo: UserInfo object>]>\n\n\u73b0\u5728\u6211\u4eec\u60f3\u770b\u5230\u7684\u662f\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\uff0c\u9700\u8981\u5728models\u6587\u4ef6\u4e2d\u6211\u4eec\u521b\u5efa\u7684UserInfo\u4e2d\u5199\u4e00\u4e2a\u7c7b\u7684\u5c5e\u6027\nclass UserInfo(models.Model):\n    id = models.AutoField(primary_key=True)\n    username = models.CharField(max_length=10)\n    password = models.CharField(max_length=32)\n\n    #\u5728models\u6587\u4ef6\u4e2d\u5199\u4e0a\u8fd9\u4e2a\u5c5e\u6027\u540e\u5c31\u80fd\u5728all()\u65b9\u6cd5\u4e2d\u8fd4\u56de\u6570\u636e\u800c\u4e0d\u662f\u5bf9\u620f\u90a3\u4e2a\n    def __str__(self):\n        return self.username\n      \n      \n#\u7ed3\u679c\u5982\u4e0b\n<QuerySet [<UserInfo: aaa>, <UserInfo: bbb>]>\n"})}),"\n",(0,r.jsx)(n.h6,{id:"2-get\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\u6ca1\u6709\u6216\u8005\u6570\u636e\u591a\u5c31\u62a5\u9519\u4e0d\u662fqueryset\u7c7b\u578b\u662f\u884c\u8bb0\u5f55\u5bf9\u8c61",children:"2 get()\t\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u6570\u636e\uff0c\u6ca1\u6709\u6216\u8005\u6570\u636e\u591a\u5c31\u62a5\u9519\uff0c\u4e0d\u662fqueryset\u7c7b\u578b\uff0c\u662f\u884c\u8bb0\u5f55\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f8b\u5982\uff0c\u67e5\u8be2\u4e00\u4e2a\u8868\u4e2d\u5bc6\u7801\u4e3aaaa\u7684\u6570\u636e\uff0c\u5982\u679c\u8fd9\u4e2a\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u7528\u6237\u7684\u5bc6\u7801\u662faaa\uff0c\u5219\u53ef\u4ee5\u67e5\u8be2\u6210\u529f\uff0c\u5982\u679c\u8fd9\u4e2a\u8868\u4e2d\u6709\u591a\u4e2a\u7528\u6237\u7684\u5bc6\u7801\u662faaa\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u62a5\u9519\u5e76\u4e14\u8fd9\u4e2a\u8868\u4e2d\u5982\u679c\u6ca1\u6709\u7528\u6237\u7684\u5bc6\u7801\u662faaa\u540c\u6837\u4f1a\u62a5\u9519"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    ret = models.UserInfo.objects.get(password='aaa')\n    print(ret)\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8868app01_userinfo\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.53.12.png",alt:"iShot2020-10-16 14.53.12"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u8bbf\u95ee127.0.0.1/index"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6b64\u65f6\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u53ef\u4ee5\u6210\u529f\u67e5\u8be2\u7684"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u73b0\u5728\u4fee\u6539\u8868\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.53.32.png",alt:"iShot2020-10-16 14.53.32"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u518d\u6b21\u6267\u884c\u4ee5\u4e0a\u4ee3\u7801\uff0c\u67e5\u8be2\u8868\u4e2d\u5bc6\u7801\u4e3aaaa\u7684\u6570\u636e\uff0c\u6b64\u65f6\u4f1a\u62a5\u9519"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.53.53.png",alt:"iShot2020-10-16 14.53.53"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4fee\u6539\u4ee3\u7801\u4e3a\u67e5\u8be2\u8868\u4e2d\u5bc6\u7801\u4e3abbb\u7684\u6570\u636e\uff0c\u540c\u6837\u4f1a\u62a5\u9519"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.54.25.png",alt:"iShot2020-10-16 14.54.25"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"get\u4e24\u4e2a\u62a5\u9519,\u4f46\u662fget\u8bf7\u6c42\u8fd4\u56de\u7684\u7ed3\u679c\u662fmodel\u5bf9\u8c61"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#1.UserInfo matching query does not exist. \u6ca1\u6709\u67e5\u5230\u7684\u62a5\u9519\n#2 get() returned more than one UserInfo -- it returned 11!  \u7ed3\u679c\u591a\u4e86,\u4e0d\u884c! \n"})}),"\n",(0,r.jsx)(n.h6,{id:"3-filter\u67e5\u8be2\u6570\u636e\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",children:"3 filter()\t\u67e5\u8be2\u6570\u636e\uff0c\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,HttpResponse\nfrom app01 import models\n# Create your views here.\n\ndef index(request):\n    ret = models.UserInfo.objects.filter(password='bbb')\n    print(ret)\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"filter\u67e5\u8be2\u8868\u4e2d\u5bc6\u7801\u4e3abbb\u7684\u6570\u636e\uff0c\u867d\u7136\u8868\u4e2d\u7ed3\u679c\u6ca1\u6709\uff0c\u4f46\u662f\u4e0d\u4f1a\u50cfget\u62a5\u9519"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"print(ret)\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet []>\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"filter\u67e5\u8be2\u8868\u4e2d\u5bc6\u7801\u4e3aaaa\u7684\u6570\u636e\uff0c\u8868\u4e2d\u5bc6\u7801\u4e3aaaa\u7684\u6570\u636e\u67092\u6761\uff0cfilter\u4e0d\u4f1a\u50cfget\u4e00\u6837\u62a5\u9519"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [<UserInfo: aaa>, <UserInfo: bbb>]>\n"})}),"\n",(0,r.jsx)(n.h6,{id:"4-exclude\u6392\u9664\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",children:"4 exclude()\t\u6392\u9664\uff0c\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u73b0\u6709app01_book\u8868\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.54.50.png",alt:"iShot2020-10-16 14.54.50"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u67e5\u8be2\u6240\u6709\u6570\u636e\uff0c\u6392\u9664bid\u4e3a4\u7684\u6570\u636e"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"urls\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.conf.urls import url,include\nfrom django.contrib import admin\nfrom app01 import views\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^index/', views.index),\n]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.shortcuts import render,reverse,redirect,HttpResponse\nfrom app01 import models\n\ndef index(request):\n    #\u67e5\u8be2bid\u4e0d\u4e3a4\u7684\u6570\u636e\uff0c\u8fd9\u91cc\u8fd8\u53ef\u4ee5\u5199\u591a\u4e2a\u6392\u9664\u6761\u4ef6\uff0c\u4ee5\u9017\u53f7\u5206\u9694\n    ret = models.Book.objects.exclude(bid=4)\n    print(ret)\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"models\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class Book(models.Model):\n    bid = models.AutoField(primary_key=True)\n    bname = models.CharField(max_length=20)\n    price = models.DecimalField(max_digits=6,decimal_places=2)\n    publish_date = models.DateField(auto_now_add=False)\n    publish = models.CharField(max_length=20)\n\n    def __str__(self):\n        return self.bname\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u8bbf\u95ee127.0.0.1/index\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff0cbid\u4e3a4\u7684\u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b\u6ca1\u6709\u8fd4\u56de"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [<Book: 1-Linux\u4ece\u5165\u95e8\u5230\u653e\u5f03>, <Book: 2-python\u4ece\u5165\u95e8\u5230\u653e\u5f03>, <Book: 3-mysql\u4e4b\u4ece\u5220\u5e93\u5230\u8dd1\u8def>, <Book: 5-\u653e\u5f00\u90a3\u4e2a\u5973\u5b69>, <Book: 6-\u6210\u4e3a\u5bcc\u7fc1\u7684\u79d8\u5bc6>]>\n"})}),"\n",(0,r.jsx)(n.h6,{id:"5-order_byqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f\u9ed8\u8ba4\u662f\u6309\u7167id\u6765\u5347\u5e8f\u6392\u5217\u7684\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b",children:"5 order_by()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u5bf9\u67e5\u8be2\u7ed3\u679c\u6392\u5e8f,\u9ed8\u8ba4\u662f\u6309\u7167id\u6765\u5347\u5e8f\u6392\u5217\u7684\uff0c\u8fd4\u56de\u503c\u662fqueryset\u7c7b\u578b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6309\u7167bid\u5012\u5e8f\u6392\u5e8f\uff0c\u5728bid\u524d\u52a0\u4e2a-\u53f7\u5373\u53ef"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"viwes\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def index(request):\n    ret = models.Book.objects.all().order_by('-bid')\n    print(ret)\n    return HttpResponse('ok')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6d4f\u89c8\u5668\u53cd\u95ee127.0.0.1/index\uff0c\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff0c\u7ed3\u679c\u662f\u5012\u5e8f"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [<Book: 6-\u6210\u4e3a\u5bcc\u7fc1\u7684\u79d8\u5bc6>, <Book: 5-\u653e\u5f00\u90a3\u4e2a\u5973\u5b69>, <Book: 4-\u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b>, <Book: 3-mysql\u4e4b\u4ece\u5220\u5e93\u5230\u8dd1\u8def>, <Book: 2-python\u4ece\u5165\u95e8\u5230\u653e\u5f03>, <Book: 1-Linux\u4ece\u5165\u95e8\u5230\u653e\u5f03>]>\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"order_by()\u4e2d\u52a0\u591a\u4e2a\u6761\u4ef6\u8bf4\u660e"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#\u8fd9\u6bb5\u4ee3\u7801\u7684\u610f\u601d\u662f\u6309\u7167id\u5012\u53d9\u6392\u5e8f\uff0c\u7136\u540e\u518d\u6309\u7167id\u76f8\u540c\u7684\u6570\u636e\u8fdb\u884c\u4ef7\u683c\u5347\u5e8f\u6392\u5e8f\nmodels.Test.objects.all().order_by('-id','money')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u73b0\u6709\u8868app01_test\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2014.59.44.png",alt:"iShot2020-10-16 14.59.44"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5148\u6309\u7167id\u8fdb\u884c\u5012\u53d9\u6392\u5e8f"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.all().order_by('-id')\nprint(ret.values())\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [{'id': 3, 'name': '3-\u54c8\u54c8', 'money': 8}, {'id': 3, 'name': '3-\u5927\u5f3a', 'money': 80}, {'id': 3, 'name': '3-\u5475\u5475', 'money': 800}, {'id': 2, 'name': '2-\u5c0f\u9896', 'money': 100}, {'id': 1, 'name': '1-\u5c0f\u660e', 'money': 10}]>\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u518d\u52a0\u4e00\u4e2a\u6761\u4ef6\u8fdb\u884c\u6392\u5e8f\uff0c\u5148\u6839\u636eid\u76f8\u540c\u7684\u8fdb\u884c\u5012\u5e8f\u6392\u5e8f\uff0c\u7136\u540e\u518d\u6839\u636emoney\u5347\u5e8f\u6392\u5e8f"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.order_by('-id','money')\nprint(ret.values())\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [{'id': 3, 'name': '3-\u5927\u5f3a', 'money': 80}, {'id': 3, 'name': '3-\u5475\u5475', 'money': 800}, {'id': 3, 'name': '3-\u54c8\u54c8', 'money': 8}, {'id': 2, 'name': '2-\u5c0f\u9896', 'money': 100}, {'id': 1, 'name': '1-\u5c0f\u660e', 'money': 10}]>\n"})}),"\n",(0,r.jsx)(n.h6,{id:"6-reversequeryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u5bf9\u67e5\u8be2\u7ed3\u679c\u53cd\u5411\u6392\u5e8f\u8fd4\u56de\u503c\u8fd8\u662fqueryset\u7c7b\u578b",children:"6 reverse()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u5bf9\u67e5\u8be2\u7ed3\u679c\u53cd\u5411\u6392\u5e8f\uff0c\u8fd4\u56de\u503c\u8fd8\u662fqueryset\u7c7b\u578b"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u26a0\ufe0f\u76f4\u63a5\u8fdb\u884creverse\u8fdb\u884c\u53cd\u5411\u6392\u5e8f\u662f\u4e0d\u751f\u6548\u7684\uff0c\u5fc5\u987b\u5148\u8fdb\u884c\u5206\u7ec4"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.all().reverse()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff0c\u4e0d\u5206\u7ec4\u8fdb\u884c\u53cd\u5411\u6392\u5e8f\u662f\u4e0d\u751f\u6548\u7684"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [{'id': 1, 'name': '1-\u5c0f\u660e', 'money': 10}, {'id': 2, 'name': '2-\u5c0f\u9896', 'money': 100}, {'id': 3, 'name': '3-\u5927\u5f3a', 'money': 80}, {'id': 3, 'name': '3-\u5475\u5475', 'money': 800}, {'id': 3, 'name': '3-\u54c8\u54c8', 'money': 8}]>\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5148\u8fdb\u884c\u5206\u7ec4\uff0c\u7136\u540e\u518d\u8fdb\u884c\u53cd\u5411\u6392\u5e8f\u624d\u80fd\u751f\u6548"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ret = models.Test.objects.all().order_by('id').reverse()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [{'id': 3, 'name': '3-\u5927\u5f3a', 'money': 80}, {'id': 3, 'name': '3-\u5475\u5475', 'money': 800}, {'id': 3, 'name': '3-\u54c8\u54c8', 'money': 8}, {'id': 2, 'name': '2-\u5c0f\u9896', 'money': 100}, {'id': 1, 'name': '1-\u5c0f\u660e', 'money': 10}]>\n"})}),"\n",(0,r.jsx)(n.h6,{id:"7-countqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u6570\u636e\u5e93\u4e2d\u5339\u914d\u67e5\u8be2queryset\u7684\u5bf9\u8c61\u6570\u91cf",children:"7 count()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u6570\u636e\u5e93\u4e2d\u5339\u914d\u67e5\u8be2(QuerySet)\u7684\u5bf9\u8c61\u6570\u91cf"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.all().count()\nprint(ret)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u4e3a5\uff0c\u56e0\u4e3aapp01_test\u8868\u4e2d\u67095\u6761\u8bb0\u5f55"})}),"\n",(0,r.jsx)(n.h6,{id:"8-firstqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u7b2c\u4e00\u6761\u8bb0\u5f55\u5f97\u5230\u7684\u90fd\u662fmodel\u5bf9\u8c61\u4e0d\u662fqueryset",children:"8 first()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u5f97\u5230\u7684\u90fd\u662fmodel\u5bf9\u8c61\uff0c\u4e0d\u662fqueryset"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.all().first()\nprint(ret)\n\n\n#models\u6587\u4ef6\u8868\u7684\u7c7b\u4e2d\u9700\u8981\u5199\u5982\u4e0b\u4ee3\u7801\nclass Test(models.Model):\n    id = models.IntegerField(primary_key=True)\n    name = models.CharField(max_length=10)\n    money = models.IntegerField()\n\n    def __str__(self):\n        return self.name\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u4e3a1-\u5c0f\u660e"})}),"\n",(0,r.jsx)(n.h6,{id:"9-lastqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u6700\u540e\u4e00\u6761\u8bb0\u5f55\u5f97\u5230\u7684\u662fmodel\u5bf9\u8c61",children:"9 last()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u6700\u540e\u4e00\u6761\u8bb0\u5f55\uff0c\u5f97\u5230\u7684\u662fmodel\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.all().last()\nprint(ret)\n\n\n#models\u6587\u4ef6\u8868\u7684\u7c7b\u4e2d\u9700\u8981\u5199\u5982\u4e0b\u4ee3\u7801\nclass Test(models.Model):\n    id = models.IntegerField(primary_key=True)\n    name = models.CharField(max_length=10)\n    money = models.IntegerField()\n\n    def __str__(self):\n        return self.name\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u67e5\u8be2\u65f6\u9047\u5230\u7684\u4e00\u4e2a\u95ee\u9898\uff0c\u4f7f\u7528last\u65b9\u6cd5\u67e5\u8be2\u4e00\u4e2a\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e\u7684\u8868\u65f6\uff0c\u53ea\u80fd\u8fd4\u56deid\u76f8\u540c\u7684\u8bb0\u5f55\u4e2d\u7684\u7b2c\u4e00\u4e2aid\u7684\u8bb0\u5f55"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f8b\u5982\uff0c\u4e00\u5f20\u8868\u4e2did\u5b57\u6bb5\u5982\u4e0b\uff1a1\u30012\u30013\u30013\u30013\uff0c\u67e5\u8be2\u7684\u8fd4\u56de\u7684\u7ed3\u679c\u662fid=3\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u53732\u540e\u8fb9\u7684\u7b2c\u4e00\u4e2a3"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.00.17.png",alt:"iShot2020-10-16 15.00.17"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6b64\u8868\u4e2d\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e\uff0c\u53ea\u80fd\u8fd4\u56de3-\u5927\u5f3a\uff0c\u800c\u7406\u8bba\u4e0a\u662f3-\u54c8\u54c8"})}),"\n",(0,r.jsx)(n.h6,{id:"10-existsqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u5982\u679cqueryset\u5305\u542b\u6570\u636e\u5c31\u8fd4\u56detrue\u5426\u5219\u8fd4\u56defalse",children:"10 exists()\tqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u5982\u679cQuerySet\u5305\u542b\u6570\u636e\uff0c\u5c31\u8fd4\u56deTrue\uff0c\u5426\u5219\u8fd4\u56deFalse"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7a7a\u7684queryset\u7c7b\u578b\u6570\u636e\u4e5f\u6709\u5e03\u5c14\u503cTrue\u548cFalse\uff0c\u4f46\u662f\u4e00\u822c\u4e0d\u7528\u5b83\u6765\u5224\u65ad\u6570\u636e\u5e93\u91cc\u9762\u662f\u4e0d\u662f\u6709\u6570\u636e\uff0c\u5982\u679c\u6709\u5927\u91cf\u7684\u6570\u636e\uff0c\u4f60\u7528\u5b83\u6765\u5224\u65ad\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u67e5\u8be2\u51fa\u6240\u6709\u7684\u6570\u636e\uff0c\u6548\u7387\u592a\u5dee\u4e86\uff0c\u7528count\u6216\u8005exits"}),"\n",(0,r.jsxs)(n.strong,{children:["\u4f8b\uff1aall_books = models.Book.objects.all().exists() #\u7ffb\u8bd1\u6210\u7684sql\u662fSELECT (1) AS ",(0,r.jsx)(n.code,{children:"a"})," FROM ",(0,r.jsx)(n.code,{children:"app01_book"})," LIMIT 1\uff0c\u5c31\u662f\u901a\u8fc7limit 1\uff0c\u53d6\u4e00\u6761\u6765\u770b\u770b\u662f\u4e0d\u662f\u6709\u6570\u636e"]})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"test\u8868\u4e2d\u6ca1\u6709id=5\u7684\u6570\u636e\uff0c\u56e0\u6b64\u4f1a\u8fd4\u56deFalse"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.filter(id=5).exists()\n"})}),"\n",(0,r.jsx)(n.h6,{id:"11-values\u7528\u7684\u6bd4\u8f83\u591aqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u8fd4\u56de\u4e00valuequeryset\u4e00\u4e2a\u7279\u6b8a\u7684queryset\u8fd0\u884c\u540e\u5f97\u5230\u7684\u5e76\u4e0d\u662f\u4e00\u7cfb\u5217model\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\u800c\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5b57\u5178\u5e8f\u5217\u53ea\u8981\u662f\u8fd4\u56de\u7684queryset\u7c7b\u578b\u5c31\u53ef\u4ee5\u7ee7\u7eed\u8fde\u7eed\u8c03\u7528queryset\u7c7b\u578b\u7684\u5176\u4ed6\u7684\u67e5\u627e\u65b9\u6cd5\u5176\u4ed6\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684",children:"11 values()\t\u7528\u7684\u6bd4\u8f83\u591a\uff0cqueryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u8fd4\u56de\u4e00ValueQuerySet\u2014\u2014\u4e00\u4e2a\u7279\u6b8a\u7684QuerySet\uff0c\u8fd0\u884c\u540e\u5f97\u5230\u7684\u5e76\u4e0d\u662f\u4e00\u7cfb\u5217model\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\uff0c\u800c\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u7684\u5b57\u5178\u5e8f\u5217,\u53ea\u8981\u662f\u8fd4\u56de\u7684queryset\u7c7b\u578b\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u8fde\u7eed\u8c03\u7528queryset\u7c7b\u578b\u7684\u5176\u4ed6\u7684\u67e5\u627e\u65b9\u6cd5\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e5f\u662f\u4e00\u6837\u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:" ret = models.UserInfo.objects.all().values('id','name')  queryset\u8c03\u7528          \n \nret = models.UserInfo.objects.values('id','name')   objects\u8c03\u7528--\u5bf9\u6240\u6709\u6570\u636e\u8fdb\u884c\u53d6\u503c\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [{'id': 1, 'name': '1-\u5c0f\u660e'}, {'id': 2, 'name': '2-\u5c0f\u9896'}, {'id': 3, 'name': '3-\u5927\u5f3a'}, {'id': 3, 'name': '3-\u5475\u5475'}, {'id': 3, 'name': '3-\u54c8\u54c8'}]>\n"})}),"\n",(0,r.jsx)(n.h6,{id:"12-values_list\u5b83\u4e0evalues\u975e\u5e38\u76f8\u4f3c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5143\u7ec4\u5e8f\u5217values\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u5178\u5e8f\u5217",children:"12 values_list\t\u5b83\u4e0evalues()\u975e\u5e38\u76f8\u4f3c\uff0c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5143\u7ec4\u5e8f\u5217\uff0cvalues\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5b57\u5178\u5e8f\u5217"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"ret = models.Test.objects.all().values_list('id','name')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"<QuerySet [(1, '1-\u5c0f\u660e'), (2, '2-\u5c0f\u9896'), (3, '3-\u5927\u5f3a'), (3, '3-\u5475\u5475'), (3, '3-\u54c8\u54c8')]>      \n"})}),"\n",(0,r.jsx)(n.h6,{id:"13-distinctvalues\u548cvalues_list\u5f97\u5230\u7684queryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\u4ece\u8fd4\u56de\u7ed3\u679c\u4e2d\u5254\u9664\u91cd\u590d\u7eaa\u5f55",children:"13 distinct()\tvalues\u548cvalues_list\u5f97\u5230\u7684queryset\u7c7b\u578b\u7684\u6570\u636e\u6765\u8c03\u7528\uff0c\u4ece\u8fd4\u56de\u7ed3\u679c\u4e2d\u5254\u9664\u91cd\u590d\u7eaa\u5f55"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4ee5\u4f8b5\u4e2dapp01_test\u8868\u4e3a\u4f8b"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:" ret = models.UserInfo.objects.all().values('id','name').distinct()               \n ret = models.UserInfo.objects.values('id','name').distinct() \n"})}),"\n",(0,r.jsx)(n.h6,{id:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u6a21\u7cca\u67e5\u8be2",children:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u6a21\u7cca\u67e5\u8be2"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8868app01_book\u5185\u5bb9\u5982\u4e0b"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.00.42.png",alt:"iShot2020-10-16 15.00.42"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'#price\u503c\u7b49\u4e8e\u8fd9\u4e09\u4e2a\u91cc\u9762\u7684\u4efb\u610f\u4e00\u4e2a\u7684\u5bf9\u8c61\nBook.objects.filter(price__in=[10,33,9999]) \n\n#\u5927\u4e8e\uff0c\u5927\u4e8e\u7b49\u4e8e\u662fprice__gte=100\uff0c\u522b\u5199price>100\uff0c\u8fd9\u79cd\u53c2\u6570\u4e0d\u652f\u6301\nBook.objects.filter(price__gt=100)\n\n#\u5c0f\u4e8e\uff0c\u5c0f\u4e8e\u7b49\u4e8e\u662fprice__lte=100\uff0c\u522b\u5199price<100\uff0c\u8fd9\u79cd\u53c2\u6570\u4e0d\u652f\u6301\nBook.objects.filter(price__lt=100)\n\n#sql\u7684between and\uff0c\u5927\u4e8e\u7b49\u4e8e100\uff0c\u5c0f\u4e8e\u7b49\u4e8e10000\nBook.objects.filter(price__range=[100,10000])  \n\n#bname\u503c\u4e2d\u5305\u542bpython\u7684\nBook.objects.filter(bname__contains="python")  \n\n#\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u5728\u524d\u8fb9\u52a0\u4e00\u4e2ai\u5c31\u662f\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u5176\u4f59\u7528\u6cd5\u76f8\u540c\nBook.objects.filter(bname__icontains="python") \n\n#\u4ee5\u4ec0\u4e48\u5f00\u5934\uff0cistartswith  \u4e0d\u533a\u5206\u5927\u5c0f\u5199\nBook.objects.filter(bname__startswith="py") \n\n#\u67e5\u8be2publish_date\u662f2020\u5e74\u7684\nBook.objects.filter(publish_date__year=2020)\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u8be2\u793a\u4f8b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"1 \u67e5\u8be2\u67d0\u67d0\u51fa\u7248\u793e\u51fa\u7248\u8fc7\u7684\u4ef7\u683c\u5927\u4e8e100\u7684\u4e66\u7c4d\n    ret = models.Book.objects.filter(price__gt=100,publish='\u8001\u738b\u51fa\u7248\u793e').values('bname')\n\n2 \u67e5\u8be22018\u5e7411\u6708\u51fa\u7248\u7684\u6240\u6709\u4ee5Li\u5f00\u5934\u7684\u4e66\u7c4d\u540d\u79f0\n  ret = models.Book.objects.filter(bname__startswith='Linux',publish_date__year=2018,publish_date__month=11).values('bname')\n\n3 \u67e5\u8be2\u4ef7\u683c\u4e3a88,100\u6216\u80059999\u7684\u6240\u6709\u4e66\u7c4d\u540d\u79f0\u53ca\u5176\u51fa\u7248\u793e\u540d\u79f0\n   ret = models.Book.objects.filter(price__in=[88,100,9999]).values('bname','publish')\n\n4 \u67e5\u8be2\u4ef7\u683c\u572880\u5230100\u4e4b\u95f4\u7684\u6240\u6709\u4e66\u7c4d\u540d\u79f0\u53ca\u5176\u4ef7\u683c\n ret = models.Book.objects.filter(price__range=[80,100]).values('bname','price')\n\n5 \u67e5\u8be2\u6240\u6709\u8001\u738b\u51fa\u7248\u793e\u51fa\u7248\u7684\u4e66\u7c4d\u7684\u4ef7\u683c\uff08\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u53bb\u91cd\uff09\n ret = models.Book.objects.filter(publish='\u8001\u738b\u51fa\u7248\u793e').values('price').order_by('-price').distinct()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"523-\u591a\u8868\u64cd\u4f5c",children:"5.2.3 \u591a\u8868\u64cd\u4f5c"}),"\n",(0,r.jsx)(n.h4,{id:"\u8868\u5173\u7cfb\u53ca\u5b57\u6bb5\u8bbe\u8ba1",children:"\u8868\u5173\u7cfb\u53ca\u5b57\u6bb5\u8bbe\u8ba1"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.05.53.png",alt:"iShot2020-10-16 15.05.53"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"urls\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from django.conf.urls import url\nfrom django.contrib import admin\nfrom app01 import views\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n    url(r'^query/', views.query),\n]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"settings\u6587\u4ef6\u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'orm01',\n        'HOST': '127.0.0.1',\n        'PORT': '3306',\n        'USER': 'root',\n        'PASSWORD': 'xxx'\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"models\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from django.db import models\n\n# Create your models here.\n\nclass Author(models.Model):\n    name=models.CharField(max_length=32)\n    age=models.IntegerField()\n    ad=models.OneToOneField(to="AuthorDetail",to_field="id",on_delete=models.CASCADE)\n    # to_field="id"  \u53ef\u4ee5\u4e0d\u5199,\u9ed8\u8ba4\u627e\u4e3b\u952e\n    # to="AuthorDetail",  to=\u53ef\u4ee5\u4e0d\u7528\u5199\n    # models.SET_NULL  \u7f6e\u7a7a\n    # on_delete=models.CASCADE  \u9ed8\u8ba4\u662f\u7ea7\u8054\u5220\u9664,\u60f3\u505a\u7ea7\u8054\u66f4\u65b0,\u76f4\u63a5\u53bb\u6570\u636e\u5e93\u4fee\u6539\u8868\u7ed3\u6784\n\nclass AuthorDetail(models.Model):\n    birthday=models.DateField()\n    telephone=models.CharField(max_length=16)\n    addr=models.CharField(max_length=64)\n\n\nclass Publish(models.Model):\n    name=models.CharField(max_length=32)\n    city=models.CharField(max_length=32)\n\nclass Book(models.Model):\n    title = models.CharField(max_length=32)\n    publishDate=models.DateField()\n    price=models.DecimalField(max_digits=5,decimal_places=2)\n    publishs=models.ForeignKey(to="Publish",to_field="id",on_delete=models.CASCADE)\n\n    #\u8fd9\u884c\u4ee3\u7801\u7684\u610f\u601d\u662f\u751f\u6210\u7b2c3\u5f20\u8868\u5173\u8054book\u8868\u548cauthor\u8868\n    authors=models.ManyToManyField(to=\'Author\',)\n\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'\u26a0\ufe0f\u5982\u679cAuthorDetail\u5199\u5728Author\u7684\u4e0a\u8fb9\uff0c\u5219ad=models.OneToOneField(to="AuthorDetail"\u4e2d\u7684AuthorDetail\u53ef\u4ee5\u4e0d\u52a0\u5f15\u53f7'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u26a0\ufe0fdjango1.x\u7248\u672con_delete=models.CASCADE\u53ef\u4ee5\u4e0d\u5199\uff0c\u9ed8\u8ba4\u662f\u7ea7\u8fde\u5220\u9664\uff0c\u5982\u679c\u60f3\u505a\u7ea7\u8fde\u66f4\u65b0\uff0c\u76f4\u63a5\u5230\u6570\u636e\u5e93\u4e2d\u64cd\u4f5c\uff0c\u4f46\u662fdjango2.x\u5fc5\u987b\u5199\u7ea7\u8fde\u5220\u9664"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u26a0\ufe0fOneToOneField\u662f\u4e00\u5bf9\u4e00     ForeignKey\u662f\u4e00\u5bf9\u591a  ManyToManyField\u662f\u591a\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["django\u9879\u76ee\u4e0b\u540c\u540d\u76ee\u5f55",(0,r.jsx)(n.code,{children:"__init__.py"}),"\u6587\u4ef6"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import pymysql\npymysql.install_as_MySQLdb()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u914d\u7f6e\u5b8c\u6210\u540e\u5f00\u59cb\u540c\u6b65\u6570\u636e\u5e93"})}),"\n",(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f",(0,r.jsx)(n.strong,{children:"makemigrations\u6267\u884c\u540e\u5fc5\u987b\u6267\u884cmigrate\uff0c\u5426\u5219\u4f1a\u51fa\u95ee\u9898"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u5728django\u9879\u76ee\u4e0b\n#\u5728migrations\u76ee\u5f55\u4e0b\u9762\u751f\u6210\u8bb0\u5f55\u6587\u4ef6\npython3 manage.py makemigrations  \n\n#\u6267\u884c\u8bb0\u5f55\u6587\u4ef6\npython3 manage.py migrate  \n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u4e8e\u53ea\u6267\u884cmakemigrations\u4e0d\u6267\u884cmigrate\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"1.\u5f53\u6267\u884cmakemigrations\u540e\uff0c\u4f1a\u5728django\u9879\u76ee\u4e0b\u7684makemigrations\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a0001_initial.py\uff0c\u8fd9\u4e2a\u6587\u4ef6\u8bb0\u5f55\u7684\u662fmodels\u6587\u4ef6\u4e2d\u7684\u64cd\u4f5c(\u521b\u5efa\u8868\u3001\u5220\u9664\u8868)\uff0c\u5f53\u6267\u884cmigrate\u540e\u4f1a\u6267\u884c\u6570\u636e\u5e93\u540c\u6b65\u64cd\u4f5c\uff0c\u540c\u65f6\u5728\u6570\u636e\u5e93\u4e2ddjango\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u5f20django_migrations\u8868\uff0c\u8fd9\u4e2a\u8868\u8bb0\u5f55\u7684\u662fmodels\u6587\u4ef6\u4e2d\u7684\u64cd\u4f5c\n\n2.\u5982\u679c\u53ea\u6267\u884c\u4e86makemigrations\u800c\u4e0d\u6267\u884cmigrate\uff0c\u5f53\u4fee\u6539\u4e86models\u6587\u4ef6\u518d\u6b21\u91cd\u590d\u6267\u884cmakemigrations\uff0cdjango\u4f1a\u4ece\u6570\u636e\u5e93\u4e2d\u7684django_migrations\u67e5\u770b0001_initial\u662f\u5426\u6267\u884c\u8fc7\uff0c\u800c\u6b64\u65f60001_initial\u5df2\u7ecf\u6267\u884c\u8fc7\u4e86\uff0c\u56e0\u6b64\u4f1a\u51fa\u73b0\u4fee\u6539\u4e86models\u6587\u4ef6\u6267\u884cmigrate\u63d0\u793a\u6ca1\u6709\u6539\u52a8\u7684\u95ee\u9898\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u540c\u6b65\u540e\u7684\u6570\u636e\u5e93\uff0c\u53ef\u4ee5\u770b\u5230app01_book_authors\u8fd9\u5f20\u8868\u662form\u81ea\u52a8\u5e2e\u6211\u4eec\u521b\u5efa\u7684"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.06.25.png",alt:"iShot2020-10-16 15.06.25"})}),"\n",(0,r.jsx)(n.h4,{id:"5231-\u589e",children:"5.2.3.1 \u589e"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"views\u6587\u4ef6"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u4e00\uff0c\u4f5c\u8005\u8868\u548c\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u7ed9\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868\u6dfb\u52a0\u4e00\u6761\u8bb0\u5f55\n models.AuthorDetail.objects.create(\n        birthday='2018-11-11',\n        telephone='18033336789',\n        addr='\u5317\u4eac'\n    )\n  \n\n//\u7ed9\u4f5c\u8005\u8868\u6dfb\u52a0\u4e00\u6761\u8bb0\u5f55\n models.Author.objects.create(\n        name='\u5c0f\u660e',\n        age=1,\n        \n   \t\t\t#\u65b9\u5f0f1\n        #\u5173\u8054\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868\u4e2did\u4e3a1\u7684\n        ad=models.AuthorDetail.objects.get(id=1)\n   \n   \t\t\t#\u65b9\u5f0f2(\u5e38\u7528)\n        ad_id = 1\n    )\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.07.58.png",alt:"iShot2020-10-16 15.07.58"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u591a\uff0c\u51fa\u7248\u793e\u548c\u4e66\u7c4d\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"models.Book.objects.create(\n        title='\u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b',\n        publishDate='2011-01-01',\n        price='99',\n  \n  \t\t\t#\u65b9\u5f0f1\n        publishs=models.Publish.objects.get(id=1)\n  \n  \t\t\t#\u65b9\u5f0f2\n  \t\t\tpublishs_id=2\n    )\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.08.27.png",alt:"iShot2020-10-16 15.08.27"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u591a\u5bf9\u591a\uff0c\u4e66\u7c4d\u8868\u548c\u4f5c\u8005\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u65b9\u5f0f\u4e00\nbook_obj = models.Book.objects.get(id=1)\nauthor1 =models.Author.objects.get(id=1)\nauthor2 =models.Author.objects.get(id=2)\n\n#\u5411\u5173\u8054\u4e66\u7c4d\u8868\u548c\u4f5c\u8005\u8868\u7684\u7b2c3\u5f20\u8868\u4e2d\u63d2\u5165\u4f5c\u80051\u548c\u4f5c\u80052\uff0c\u4e66\u7c4did\u4e3a1\u7684\u4e66\u7684\u4f5c\u8005\u67092\u4e2a\uff0c\u5206\u522b\u4e3a\u4f5c\u8005id\u4e3a1\u7684\u548c\u4f5c\u8005id\u4e3a2\u7684\n#\u65b9\u5f0f1\nbook_obj.authors.add(author1,author2)\n#\u65b9\u5f0f2\nbook_obj.authors.add(*[author1,author2])\n\n\n//\u65b9\u5f0f\u4e8c\nbook_obj = models.Book.objects.get(id=1)\n#\u65b9\u5f0f1\nbook_obj.authors.add(1,2)\n#\u65b9\u5f0f2\nbook.obj.authors.add(*[1,2])\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u67e5\u770b\u5173\u8054\u4f5c\u8005\u8868\u548c\u4e66\u7c4d\u8868\u7684\u7b2c3\u5f20\u8868app01_book_authors\uff0c\u4e66\u7c4did\u4e3a1\u7684\u4e66\u4f5c\u8005\u67092\u4e2a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.08.54.png",alt:"iShot2020-10-16 15.08.54"})}),"\n",(0,r.jsx)(n.h4,{id:"5232-\u5220",children:"5.2.3.2 \u5220"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u5220\u9664\u65b9\u5f0f\u4e00\u6837"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"models.Author.objects.get(id=1).delete()\n\n\u5220\u9664\u4e86\u4f5c\u8005\u8868\u4e2did\u4e3a1\u7684\u8bb0\u5f55\uff0c\u4f46\u662f\u4e0d\u4f1a\u5f71\u54cd\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868\u4e2d\u4f5c\u8005id\u4e3a1\u7684\u8bb0\u5f55\n\n\u4f5c\u8005\u8868\u7684id\u4f5c\u4e3a\u5916\u952e\u5173\u8054\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868\u4e2d\u7684\u4f5c\u8005id\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u6211\u62b1\u522b\u4eba\u7684\u5927\u817f\uff0c\u5220\u9664\u6211\u81ea\u5df1\u4e0d\u5f71\u54cd\u522b\u4eba\uff0c\u4f46\u662f\u522b\u4eba\u5982\u679c\u5220\u9664\u5927\u817f\u4f1a\u5f71\u54cd\u6211\n\n\u4f5c\u8005\u8868\u662f\u5173\u8054\u8005\uff0c\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868\u662f\u88ab\u5173\u8054\u8005\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u591a\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u65b9\u5f0f\u4e00\tremove\t\u79fb\u9664\n#\u627e\u5230\u4e66\u7c4did\u4e3a1\u7684\u4e66\nbook_obj = models.Book.objects.get(id=1)\n\n#\u5220\u9664\u4e66\u7c4did\u4e3a1\u7684\u4e66\u7684\u4f5c\u8005id\u4e3a2\u548c3\nbook_obj.authors.remove(2,3)\n\n\n//\u65b9\u5f0f\u4e8c\tclear\t\u5168\u90e8\u6e05\u7a7a\n#\u628a\u4e66\u7c4did\u4e3a1\u7684\u5bf9\u5e94\u7684\u4f5c\u8005\u5168\u90e8\u5220\u9664\nbook_obj = models.Book.objects.get(id=1)\nbook_obj.authors.clear()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"5233-\u6539",children:"5.2.3.3 \u6539"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u591a\u548c\u4e00\u5bf9\u4e00\u548c\u5355\u8868\u662f\u4e00\u6837\u7684"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#\u5c06\u4e66\u7c4d\u8868\u4e2did\u4e3a1\u7684\u6570\u636e\u6570\u540d\u4fee\u6539\u4e3apython\u4ece\u5165\u95e8\u5230\u653e\u5f03\u5e76\u4e14\u51fa\u7248\u793e\u4fee\u6539\u4e3a\u51fa\u7248\u793eid\u4e3a3\u7684\nbook_obj = models.Book.objects.filter(id=1).update(\n    title='python\u4ece\u5165\u95e8\u5230\u653e\u5f03',\n    \n    #\u65b9\u5f0f1\n    publishs=models.Publish.objects.get(id=3)\n  \n    #\u65b9\u5f0f2\n    publishs_id=3\n\uff09  \n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u591a\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//set\t\u5148\u6e05\u7a7a\u518d\u8ffd\u52a0\uff0cset\u4e2d\u5fc5\u987b\u5199\u5b57\u7b26\u4e32\uff0c\u5220\u9664\u591a\u4e2a\u5728\u5217\u8868\u4e2d\u586b\u5199\u591a\u4e2a\u6570\u503c\n#\u628a\u4e66\u7c4did\u4e3a1\u7684\u4f5c\u8005\u5168\u90e8\u6539\u4e3a2\nbook_obj = models.Book.objects.get(id=1)\nbook_obj.authors.set(['2',])\n"})}),"\n",(0,r.jsx)(n.h4,{id:"5234-\u67e5",children:"5.2.3.4 \u67e5"}),"\n",(0,r.jsx)(n.h3,{id:"\u57fa\u4e8e\u5bf9\u8c61\u7684\u8de8\u8868\u67e5\u8be2",children:(0,r.jsx)(n.strong,{children:"\u57fa\u4e8e\u5bf9\u8c61\u7684\u8de8\u8868\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u4e00"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f5c\u8005\u8868\u548c\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u6b63\u5411\u67e5\u8be2\n#\u67e5\u8be2\u4f5c\u8005\u5c0f\u660e\u7684\u4f4f\u5740\nauthor_obj = models.Author.objects.get(name='\u5c0f\u660e')\n# author_obj.ad\u76f4\u63a5\u62ff\u5230authordetail\u8868\u4e2d\u7684\u90a3\u4e2a\u8bb0\u5f55\u5bf9\nprint(author_obj.ad.addr)\n\n\n//\u53cd\u5411\u67e5\u8be2\n#\u67e5\u8be2\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868\u4e2d\u7535\u8bdd\u53f7\u4ee5170\u5f00\u5934\u7684\u4f5c\u8005\u540d\u5b57\nauthordetail_ojb = models.AuthorDetail.objects.filter(\n        telephone__startswith='170').first()\n\n\n\nprint(book_obj)  #\u4e0d\u52a0first\u6253\u5370\u7ed3\u679c   <QuerySet [<Book: Book object>]>\nprint(book_obj)  #\u52a0first\u6253\u5370\u7ed3\u679c    Book object\n\n\n#authordetail_ojb.author\u4e2d\u7684author\u662f\u7c7b\u540d\u5c0f\u5199\uff0c\u76f4\u63a5\u5b9a\u4f4d\u5230app01_author\u8fd9\u5f20\u8868\nprint(authordetail_ojb.author.name)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5173\u4e8e\u6b63\u5411\u67e5\u8be2\u548c\u53cd\u5411\u67e5\u8be2\u7684\u8bf4\u660e"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.09.27.png",alt:"iShot2020-10-16 15.09.27"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u51fa\u7248\u793e\u8868\u548c\u4e66\u7c4d\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u6b63\u5411\u67e5\u8be2\t\n#\u67e5\u8be2python\u4ece\u5165\u95e8\u5230\u653e\u5f03\u8fd9\u672c\u4e66\u7684\u51fa\u7248\u793e\nbook_obj = models.Book.objects.filter(title='python\u4ece\u5165\u95e8\u5230\u653e\u5f03').first()\nprint(book_obj.publishs.name)\n\n\n//\u53cd\u5411\u67e5\u8be2\npub_obj = models.Publish.objects.get(name='\u5357\u4eac\u51fa\u7248\u793e')\n\n#pub_obj.book_set.all()\u4e2dbook_set\u662f\u7ed3\u679c\u53ef\u80fd\u4e3a\u591a\u4e2a\uff0c\u6700\u540e\u7684all\u662f\u62ff\u5230\u7684\u4e66\u7c4d\u5bf9\u8c61\u6240\u6709\u4fe1\u606f\nbooks = pub_obj.book_set.all().values('title')\nprint(books)\n\n#\u67e5\u8be2\u5357\u4eac\u51fa\u7248\u793e\u4e2d\u6570\u540d\u5305\u542blinux\u7684\u4e66\nbooks = pub_obj.book_set.filter(title__contains='linux').values('title')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u591a\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e66\u7c4d\u8868\u548c\u4f5c\u8005\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u6b63\u5411\u67e5\u8be2\n#\u67e5\u8be2\u4e66\u7c4d\u8868\u4e2d\u4e66\u540d\u4e3alinux\u4ece\u5165\u95e8\u5230\u653e\u5f03\u7684\u4f5c\u8005\nbook_obj = models.Book.objects.filter(title='linux\u4ece\u5165\u95e8\u5230\u653e\u5f03').first()\nauthors = book_obj.authors.all().values('name')\nprint(authors)\n\n\n//\u53cd\u5411\u67e5\u8be2\t\u53cd\u5411\u67e5\u8be2\u4e2d\u7528\u5b57\u6bb5\u5b58\u5728\u7684\u8868\u7684\u5c0f\u5199\u7c7b\u540d\uff0c\u8fd9\u91cc\u4e3abook\n#\u67e5\u8be2\u4f5c\u8005\u5c0f\u660e\u5199\u7684\u4e66\nxiaoming_obj = models.Author.objects.get(name='\u5c0f\u660e')\nret = xiaoming_obj.book_set.all().values('title')\nprint(ret)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u67e5\u8be2\u4e66\u7c4d\u8868\u4e2d\u4e66\u540d\u4e3alinux\u4ece\u5165\u95e8\u5230\u653e\u5f03\u7684\u4f5c\u8005"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.09.49.png",alt:"iShot2020-10-16 15.09.49"})}),"\n",(0,r.jsx)(n.h3,{id:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u8de8\u8868\u67e5\u8be2\u5c31\u662fjoin\u8fde\u8868\u67e5\u8be2",children:(0,r.jsx)(n.strong,{children:"\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u8de8\u8868\u67e5\u8be2\t\u5c31\u662fjoin\u8fde\u8868\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u4e00"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f5c\u8005\u8868\u4e0e\u4f5c\u8005\u8be6\u7ec6\u4fe1\u606f\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u67e5\u8be2\u4f5c\u8005\u5c0f\u660e\u7684\u4f4f\u5740\n#\u57fa\u4e8e\u5bf9\u8c61\u7684\u8de8\u8868\u67e5\u8be2\u5199\u6cd5 \u6b63\u5411\u67e5\u8be2\nauthor_obj = models.Author.objects.get(name='\u5c0f\u660e')\n#author_obj.ad\u76f4\u63a5\u62ff\u5230authordetail\u8868\u4e2d\u7684\u90a3\u4e2a\u8bb0\u5f55\u5bf9\nprint(author_obj.ad.addr)\n\n#\u57fa\u4e8e\u53cc\u4e0b\u5212\u7ebf\u7684\u8de8\u8868\u67e5\u8be2\u5199\u6cd5\n#\u6b63\u5411\u67e5\u8be2\nret = models.Author.objects.filter(name='\u5c0f\u660e').values('ad__addr')\nprint(ret)\n\n#\u53cd\u5411\u67e5\u8be2\t\nret = models.AuthorDetail.objects.filter(author__name='\u5c0f\u660e').values('addr')\nprint(ret)\n\n\n\n\u6b63\u5411\u67e5\u8be2\u4e2d\t\u5173\u8054\u5b57\u6bb5__\u5b57\u6bb5 \u5c31\u83b7\u5f97\u4e86\u5173\u8054\u8868\u7684\u6570\u636e\n\u53cd\u5411\u67e5\u8be2\u4e2d \u8868\u540d__\u5b57\u6bb5\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e00\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e66\u7c4d\u8868\u548c\u51fa\u7248\u793e\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u67e5\u8be2\u4e1c\u4eac\u51fa\u7248\u793e\u51fa\u7248\u7684\u4e66\n#\u539f\u751fsql\u8bed\u53e5\nselect app01_book.title from app01_publish inner join app01_book on app01_publish.id = app01_book.publishs_id where app01_publish.name='\u4e1c\u4eac\u51fa\u7248\u793e';\n\n#\u6b63\u5411\u67e5\u8be2\nret = models.Book.objects.filter(publishs__name='\u4e1c\u4eac\u51fa\u7248\u793e').values('title')\n\n\n#\u53cd\u5411\u67e5\u8be2\nret = models.Publish.objects.filter(name='\u4e1c\u4eac\u51fa\u7248\u793e').values('book__title')\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u591a\u5bf9\u591a"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e66\u7c4d\u8868\u548c\u4f5c\u8005\u8868"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"\u5173\u8054\u5b57\u6bb5\u5728\u4e66\u7c4d\u8868\u4e2d\uff0c\u4ece\u4e66\u7c4d\u8868\u67e5\u8be2\u662f\u6b63\u5411\u67e5\u8be2\n\n#\u67e5\u8be2\u4e00\u4e0b\u5c0f\u660e\u5199\u4e86\u54ea\u4e9b\u4e66\n#\u6b63\u5411\u67e5\u8be2\t\u5173\u8054\u5b57\u6bb5\u5728book\u8868\u4e2d\uff0c\u73b0\u5728\u8981\u67e5\u8be2\u5c0f\u660e\u5199\u4e86\u54ea\u4e9b\u4e66\uff0c\u5f53\u524d\u662fbook\u8868\uff0c\u8868\u4e2d\u6ca1\u6709\u4f5c\u8005\u540d\u5b57\u7684\u5b57\u6bb5\uff0c\u56e0\u6b64\u9700\u8981\u5148\u8fde\u8868\u7136\u540e\u5728\u53d6\u503c\nret = models.Book.objects.filter(authors__name='\u5c0f\u660e').values('title')\nprint(ret)\n\n#\u53cd\u5411\u67e5\u8be2\t\u73b0\u5728\u8981\u67e5\u8be2\u5c0f\u660e\u5199\u4e86\u54ea\u4e9b\u4e66\uff0c\u5f53\u524d\u662fauthor\u8868\uff0c\u8868\u4e2d\u6709\u4f5c\u8005\u540d\u5b57\u7684\u5b57\u6bb5\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u5148\u8fde\u8868\uff0c\u5df2\u77e5\u5b57\u6bb5\u5728\u672c\u8868\u7684\u5c31\u53ef\u4ee5\u5148\u5199\u6761\u4ef6\u6700\u540e\u5728\u8fde\u8868\nret = models.Author.objects.filter(name='\u5c0f\u660e').values('book__title')\nprint(ret)\n\n\n\n\u5173\u8054\u7684\u65b9\u5f0f\uff0c\u6b63\u5411\u67e5\u8be2\u548c\u53cd\u5411\u67e5\u8be2\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u5173\u952e\u5728\u4e8e\u67e5\u8be2\u7684\u6761\u4ef6\n\u5173\u8054\u5b57\u6bb5__\u5b57\u6bb5 \u5c31\u83b7\u5f97\u4e86\u5173\u8054\u8868\u7684\u6570\u636e\n\u5c0f\u5199\u7c7b\u540d__\u5b57\u6bb5\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u805a\u5408\u67e5\u8be2",children:(0,r.jsx)(n.strong,{children:"\u805a\u5408\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"aggregate\u805a\u5408\u67e5\u8be2,\u7ed3\u679c\u662f\u666e\u901a\u5b57\u5178,queryset\u7684\u7ed3\u675f\u7b26"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#\u5bfc\u5165\u76f8\u5173\u6a21\u5757\nfrom django.db.models import Avg,Max,Min,Count,Sum\n\n//\u67e5\u8be2\u4e66\u7c4d\u8868\u4e2d\u4ef7\u683c\u6700\u9ad8\u7684\nobj = models.Book.objects.all().aggregate(a=Max('price'))\nprint(obj)\n\n\u7ed3\u679c\uff1a\n\t{'a': Decimal('125.00')}\n\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u5206\u7ec4\u67e5\u8be2",children:(0,r.jsx)(n.strong,{children:"\u5206\u7ec4\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u67e5\u8be2\u6bcf\u4e2a\u51fa\u7248\u793e\u51fa\u7248\u7684\u4e66\u7684\u6700\u9ad8\u4ef7\u683c\n#\u65b9\u5f0f\u4e00\nret = models.Book.objects.values('publishs_id').annotate(m=Max('price'))\nprint(ret)\n\n\u7ed3\u679c\uff1a\n\t<QuerySet [{'publishs_id': 2, 'm': Decimal('125.00')}, {'publishs_id': 3, 'm': Decimal('99.00')}]>\n\n\u65b9\u5f0f\u4e00\u5199\u6cd5\u8bf4\u660e\nvalues\u5199\u5728annotate\u524d\u9762,\u610f\u601d\u662f\u4ee5values\u62ec\u53f7\u5185\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u7ec4\u7684\u4f9d\u636e,annotate\u91cc\u9762\u662f\u4f60\u8981\u505a\u7684\u7edf\u8ba1\u7ed3\u679c,\u8fd9\u6837,\u8fd4\u56de\u7ed3\u679c\u4e3aqueryset\u7c7b\u578b\u6570\u636e,\u91cc\u9762\u662f\u5b57\u5178{'publishs_id':1,'m':100}\n  \n  \n\n#\u65b9\u5f0f\u4e8c\n#\u4ece\u51fa\u7248\u793e\u8868\u4e2d\u67e5\u8be2\uff0c\u9700\u8981\u8fde\u63a5book\u8868\uff0c\u56e0\u4e3abook\u8868\u4e2d\u624d\u6709\u4e66\u540d\u548c\u4ef7\u683c\uff0c\u8fd9\u4e48\u5199\u8868\u793a\u76f4\u63a5\u4ee5publish\u8fd9\u5f20\u8868\u7684id\u8fdb\u884c\u5206\u7ec4\nret = models.Publish.objects.annotate(m=Max('book__price')).values('m','name')\nprint(ret)\n\n\u7ed3\u679c\uff1a\n<QuerySet [{'name': '\u4e1c\u4eac\u51fa\u7248\u793e', 'm': Decimal('99.00')}, {'name': '\u5357\u4eac\u51fa\u7248\u793e', 'm': Decimal('125.00')}, {'name': '\u5317\u4eac\u51fa\u7248\u793e', 'm': None}]>\n\n\u65b9\u5f0f\u4e8c\u5199\u6cd5\u8bf4\u660e\nannotate\u76f4\u63a5\u5199\u5728\u4e86objects\u540e\u9762,\u610f\u601d\u662f\u6309\u7167\u524d\u9762\u8868\u7684\u6240\u6709\u7684\u6570\u636e(\u9ed8\u8ba4\u662fid\u503c)\u4f5c\u4e3a\u5206\u7ec4\u4f9d\u636e,\u7ed3\u679c\u8fd4\u56de\u7684\u662f\u524d\u9762\u8fd9\u4e2a\u8868\u7684\u6240\u6709models\u5bf9\u8c61(model\u5bf9\u8c61\u4e2d\u5305\u542b\u4e86\u6bcf\u4e2a\u5bf9\u8c61\u81ea\u5df1\u7684\u7edf\u8ba1\u7ed3\u679c),\u5728\u901a\u8fc7values\u6765\u53d6\u503c,\u53d6\u503c\u65f6\u53ef\u4ee5\u76f4\u63a5\u5199\u5b57\u6bb5\u548c\u7edf\u8ba1\u7ed3\u679c\u7684\u522b\u540d,\u4e5f\u662fqueryset\u7c7b\u578b,\u91cc\u9762\u662f\u5b57\u5178{'m':100,'name':'\u4e1c\u4eac\u51fa\u7248\u793e'}\n\n"})}),"\n",(0,r.jsx)(n.h4,{id:"f\u548cq\u67e5\u8be2",children:(0,r.jsx)(n.strong,{children:"F\u548cQ\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728book\u8868\u4e2d\u6dfb\u52a0\u8fde\u4e2a\u5b57\u6bb5\uff1a\u70b9\u8d5e(dianzan)\u548c\u8bc4\u8bba(pinglun)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'class Book(models.Model):\n    title = models.CharField(max_length=32)\n    publishDate=models.DateField()\n    dianzan = models.IntegerField(default=100)\n    pinglun = models.IntegerField(default=100)\n    price=models.DecimalField(max_digits=5,decimal_places=2)\n    publishs=models.ForeignKey(to="Publish",to_field="id",on_delete=models.CASCADE)\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"app01_book\u8868\u4e2d\u5185\u5bb9"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.10.19.png",alt:"iShot2020-10-16 15.10.19"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"F\u67e5\u8be2\tF\u67e5\u8be2\u7528\u4e8e\u4e00\u5f20\u8868\u4e2d\u7684\u4e24\u4e2a\u5b57\u6bb5\u6bd4\u8f83\u4e4b\u540e\u7684\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c\u96c6"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u67e5\u8be2book\u8868\u4e2d\u70b9\u8d5e\u6570\u5927\u4e8e\u8bc4\u8bba\u6570\u7684\u6240\u6709\u4e66\u7c4d\n#low\u7248\u5199\u6cd5\nlist1 = []\nbooks = models.Book.objects.all()\nfor i in books:\n    if i.dianzan > i.comment:\n    list1.append(i)\n\n#F\u67e5\u8be2\u5199\u6cd5\nret = models.Book.objects.filter(dianzan__gt=F('pinglun')).values('title')\nprint(ret)\n\n\u7ed3\u679c\uff1a\n<QuerySet [{'title': 'python\u4ece\u5165\u95e8\u5230\u653e\u5f03'}, {'title': 'linux\u4ece\u5165\u95e8\u5230\u653e\u5f03'}]>\n\n\n\n//F\u8fd8\u652f\u6301\u56db\u5219\u8fd0\u7b97\uff0c\u4f8b\u5982\u5c06book\u8868\u4e2d\u7684\u4ef7\u683c\u90fd\u4e0a\u8c0350\u5143models.Book.objects.all().update(\n    price=F('price')+50\n)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Q\u67e5\u8be2\tQ\u67e5\u8be2\u7528\u4e8e\u591a\u4e2a\u6761\u4ef6\u6709\u4e0e\u3001\u6216\u3001\u975e\u65f6\u7684\u7efc\u5408\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e0e\uff1a&\t\t\u6216\uff1a|\t\t\u975e\uff1a\uff5e"})}),"\n",(0,r.jsx)(n.h4,{id:"orm\u6267\u884c\u539f\u751fsql\u8bed\u53e5",children:(0,r.jsx)(n.strong,{children:"orm\u6267\u884c\u539f\u751fsql\u8bed\u53e5"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u65b9\u5f0f\u4e00\nret = models.Book.objects.raw/branch('select * from app01_book')\nfor i in ret:\n    print(i.title)\n\n\u7ed3\u679c\uff1a\n\u4f1a\u628a\u8868\u4e2d\u6240\u6709\u4e66\u540d\u6253\u5370\u51fa\u6765\n\n\n\n//\u65b9\u5f0f\u4e8c\tdjango\u81ea\u5e26\u7684\u8fde\u63a5\u901a\u9053(\u5728\u9879\u76ee\u4e0b\u540c\u540d\u76ee\u5f55__init__.py\u4e2d\u914d\u7f6e\u7684pymysql)\nfrom django.db import connection\nimport pymysql\ndef query(request):\n    conn = pymysql.connect()\n    cursor = connection.cursor()\n    cursor.execute('select * from app01_book;')\n    print(cursor.fetchall())\n\n\n\n//\u65b9\u5f0f\u4e09\ndef query(request):\n    conn = pymysql.connect(\n        host='127.0.0.1',\n        port=3306,\n        user='root',\n        password='PAPAlichencan!1',\n        database='orm02',\n        charset='utf8'\n\n    )\n    cursor = conn.cursor(pymysql.cursors.DictCursor)\n    cursor.execute('select * from app01_book;')\n    print(cursor.fetchall())\n    \n\u7ed3\u679c\uff1a\n[{'id': 1, 'title': 'python\u4ece\u5165\u95e8\u5230\u653e\u5f03', 'publishDate': datetime.date(2011, 1, 1), 'price': Decimal('99.00'), 'publishs_id': 3, 'dianzan': 600, 'pinglun': 150}, {'id': 2, 'title': 'linux\u4ece\u5165\u95e8\u5230\u653e\u5f03', 'publishDate': datetime.date(2019, 12, 12), 'price': Decimal('99.90'), 'publishs_id': 2, 'dianzan': 500, 'pinglun': 300}, {'id': 3, 'title': '\u9694\u58c1\u8001\u738b\u7684\u6545\u4e8b', 'publishDate': datetime.date(2019, 11, 7), 'price': Decimal('125.00'), 'publishs_id': 2, 'dianzan': 100, 'pinglun': 100}, {'id': 4, 'title': 'linux\u5b89\u5168\u6307\u5357', 'publishDate': datetime.date(2020, 11, 30), 'price': Decimal('66.00'), 'publishs_id': 2, 'dianzan': 300, 'pinglun': 2000}, {'id': 5, 'title': '\u5954\u8dd1\u7684linux\u5185\u6838', 'publishDate': datetime.date(2019, 11, 1), 'price': Decimal('77.00'), 'publishs_id': 2, 'dianzan': 50, 'pinglun': 100}]\n"})}),"\n",(0,r.jsx)(n.h4,{id:"django\u5916\u90e8\u811a\u672c\u8c03\u7528models\u6570\u636e\u5e93\u64cd\u4f5c",children:(0,r.jsx)(n.strong,{children:"django\u5916\u90e8\u811a\u672c\u8c03\u7528models\u6570\u636e\u5e93\u64cd\u4f5c"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528\u573a\u666f\uff1a\u6709\u7684\u65f6\u5019\u6211\u4eec\u4e0d\u60f3\u8fd0\u884cdjango\u9879\u76ee\u53ea\u60f3\u6267\u884c\u4e00\u4e9b\u89c6\u56fe\u4e2d\u7684\u903b\u8f91\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u7528\u5230\u4e86django\u5916\u90e8\u811a\u672c\u8c03\u7528models\u6570\u636e\u5e93\u64cd\u4f5c"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u64cd\u4f5c\u65b9\u6cd5\uff1a\u5728django\u9879\u76ee\u4e0b\u65b0\u5efa\u4e00\u4e2axx.py\u6587\u4ef6\uff0c\u5728xx.py\u6587\u4ef6\u4e2d\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u7136\u540e\u76f4\u63a5\u8fd0\u884c\u8fd9\u4e2axx.py\u6587\u4ef6\u5c31\u53ef\u4ee5\u5728\u4e0d\u542f\u52a8django\u9879\u76ee\u7684\u60c5\u51b5\u4e0b\u800c\u5355\u72ec\u6267\u884c\u6211\u4eec\u60f3\u6267\u884c\u7684\u6d4b\u8bd5\u903b\u8f91"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#\u5bfc\u5165os\u6a21\u5757\nimport os\n\nif __name__ == '__main__':\n    #\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u8981\u5199\u9879\u76ee\u540d.settings\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"orm02.settings\")\n    \n    #\u5bfc\u5165django\n    import django\n    django.setup()\n\n    #\u5bfc\u5165\u5e94\u7528\u7a0b\u5e8f\u7684models\n    from app01 import models\n    ret = models.Book.objects.all().values('title')\n    print(ret)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"orm\u4e8b\u52a1\u548c\u9501",children:(0,r.jsx)(n.strong,{children:"ORM\u4e8b\u52a1\u548c\u9501"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u9501"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"models.Book.objects.select_for_update().filter(id=1)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4e8b\u52a1"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"//\u65b9\u5f0f1 \u5168\u5c40\u914d\u7f6e\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'mxshop',\n        'HOST': '127.0.0.1',\n        'PORT': '3306',\n        'USER': 'root',\n        'PASSWORD': '123',\n        \"ATOMIC_REQUESTS\": True, #\u5168\u5c40\u5f00\u542f\u4e8b\u52a1\uff0c\u7ed1\u5b9a\u7684\u662fhttp\u8bf7\u6c42\u54cd\u5e94\u6574\u4e2a\u8fc7\u7a0b\u5f53\u4e2d\u7684sql\n    }\n}\n\n\u65b9\u5f0f1\u4e2d\uff0cdjango\u9879\u76ee\u4e2d\u6240\u6709\u7684\u89c6\u56fe\u903b\u8f91\u5168\u90e8\u52a0\u4e0a\u4e86\u4e8b\u7269\n\n\n//\u65b9\u5f0f2: \u89c6\u56fe\u51fd\u6570\u52a0\u88c5\u9970\u5668\nfrom django.db import transaction\n@transaction.atomic\ndef viewfunc(request):\n    # This code executes inside a transaction.\n    \u903b\u8f91\u8bed\u53e5\n \n\u65b9\u5f0f2\u4e2d\uff0c\u6211\u4eec\u53ea\u60f3\u7ed9\u67d0\u4e00\u4e2a\u89c6\u56fe\u51fd\u6570\u52a0\u4e8b\u7269\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u7528\u5230\u4e86\u4e0a\u8ff0\u7684\u65b9\u6cd5\n        \n        \n\u65b9\u5f0f3: \u4e0a\u4e0b\u6587\u52a0\u88c5\u9970\u5668  \nfrom django.db import transaction\ndef viewfunc(request):\n    # This code executes in autocommit mode (Django's default).\n    \u903b\u8f91\u8bed\u53e51\n\n    with transaction.atomic():   #\u4fdd\u5b58\u70b9\n        # This code executes inside a transaction.\n        \u903b\u8f91\u8bed\u53e52\n\n    \u903b\u8f91\u8bed\u53e53\n    \n    \n\u65b9\u5f0f3\u4e2d\uff0c\u6211\u4eec\u53ea\u60f3\u7ed9\u903b\u8f91\u8bed\u53e52\u6dfb\u52a0\u4e8b\u7269\uff0c\u800c\u5176\u4ed6\u8bed\u53e5\u4e0d\u9700\u8981\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u5728\u903b\u8f91\u8bed\u53e52\u7684\u4e0a\u8fb9\u5199\u5982\u4e0a\u8bed\u53e5\u5373\u53ef\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var r=s(96540);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);