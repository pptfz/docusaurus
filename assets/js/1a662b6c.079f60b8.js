"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[5912],{59702:(e,r,c)=>{c.r(r),c.d(r,{assets:()=>i,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>a});var d=c(74848),n=c(28453);const l={},s="\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",o={id:"\u4e91\u539f\u751f/\u5bb9\u5668/docker/\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",title:"\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",description:"[toc]",source:"@site/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e.md",sourceDirName:"\u4e91\u539f\u751f/\u5bb9\u5668/docker",slug:"/\u4e91\u539f\u751f/\u5bb9\u5668/docker/\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"registry\u79c1\u6709\u4ed3\u5e93",permalink:"/docs/\u4e91\u539f\u751f/\u5bb9\u5668/docker/registry\u79c1\u6709\u4ed3\u5e93"},next:{title:"prometheus\u5b89\u88c5",permalink:"/docs/\u4e91\u539f\u751f/\u76d1\u63a7/prometheus/prometheus\u5b89\u88c5"}},i={},a=[{value:"1.\u4fee\u6539\u80cc\u666f\u8bf4\u660e",id:"1\u4fee\u6539\u80cc\u666f\u8bf4\u660e",level:2},{value:"2.\u4fee\u6539\u6b65\u9aa4",id:"2\u4fee\u6539\u6b65\u9aa4",level:2},{value:"2.1  docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4e8e<code>/var/lib/docker</code>",id:"21--docker\u955c\u50cf\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4e8evarlibdocker",level:3},{value:"2.2 \u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e",id:"22-\u4fee\u6539docker\u955c\u50cf\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e",level:3},{value:"2.2.1 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 <code>/etc/docker/daemon.json</code>",id:"221-\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6-etcdockerdaemonjson",level:4},{value:"2.2.2 \u65b0\u5efa\u76ee\u5f55",id:"222-\u65b0\u5efa\u76ee\u5f55",level:4},{value:"2.2.3 \u67e5\u770b\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6",id:"223-\u67e5\u770b\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6",level:4},{value:"2.3 \u91cd\u542fdocker",id:"23-\u91cd\u542fdocker",level:3},{value:"2.4 \u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55",id:"24-\u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55",level:3},{value:"2.4.1 \u4fee\u6539\u5b8cdocker\u955c\u50cf\u3001\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e\u540e\uff0c\u539f\u5148\u7684\u955c\u50cf\u548c\u5bb9\u5668\u67e5\u770b\u4e0d\u5b58\u5728",id:"241-\u4fee\u6539\u5b8cdocker\u955c\u50cf\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e\u540e\u539f\u5148\u7684\u955c\u50cf\u548c\u5bb9\u5668\u67e5\u770b\u4e0d\u5b58\u5728",level:4},{value:"2.4.2 \u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55",id:"242-\u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55",level:4},{value:"2.4.3 \u91cd\u542fdocker",id:"243-\u91cd\u542fdocker",level:4},{value:"2.4.4 \u67e5\u770b\u4fee\u6539",id:"244-\u67e5\u770b\u4fee\u6539",level:4},{value:"2.4.5 \u67e5\u770b\u955c\u50cf\u548c\u5bb9\u5668\uff0c\u5df2\u6062\u590d",id:"245-\u67e5\u770b\u955c\u50cf\u548c\u5bb9\u5668\u5df2\u6062\u590d",level:4},{value:"2.4.6 \u6d4b\u8bd5\u955c\u50cf\u548c\u5bb9\u5668\u90fd\u65e0\u95ee\u9898\u540e\u53ef\u4ee5\u5220\u9664\u76ee\u5f55 <code>/var/lib/docker</code>",id:"246-\u6d4b\u8bd5\u955c\u50cf\u548c\u5bb9\u5668\u90fd\u65e0\u95ee\u9898\u540e\u53ef\u4ee5\u5220\u9664\u76ee\u5f55-varlibdocker",level:4}];function t(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.p,{children:"[toc]"}),"\n",(0,d.jsx)(r.h1,{id:"\u4fee\u6539docker\u955c\u50cf\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e",children:"\u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4f4d\u7f6e"}),"\n",(0,d.jsx)(r.h2,{id:"1\u4fee\u6539\u80cc\u666f\u8bf4\u660e",children:"1.\u4fee\u6539\u80cc\u666f\u8bf4\u660e"}),"\n",(0,d.jsx)(r.p,{children:(0,d.jsxs)(r.strong,{children:["\u56e0\u4e3aDocker\u9ed8\u8ba4\u662f\u5b58\u653e\u5728\u7cfb\u7edf\u76d8\u4e2d ",(0,d.jsx)(r.code,{children:"/var/lib/docker"})," \u7684\uff0c\u5f53\u7528\u7684\u65f6\u95f4\u6bd4\u8f83\u4e45\u540e\uff0c\u4ea7\u751f\u7684\u955c\u50cf\u53ca\u5bb9\u5668\u8d8a\u6765\u8d8a\u591a\u4e4b\u540e\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4f60\u7684\u7cfb\u7edf\u76d8\u6ee1\u4e86\uff0c\u8fd9\u65f6\u6211\u4eec\u9700\u8981\u5c06Docker\u7684\u955c\u50cf\u53ca\u5bb9\u5668\u6307\u5411\u53e6\u5916\u4e00\u4e2a\u8def\u5f84"]})}),"\n",(0,d.jsx)(r.h2,{id:"2\u4fee\u6539\u6b65\u9aa4",children:"2.\u4fee\u6539\u6b65\u9aa4"}),"\n",(0,d.jsxs)(r.h3,{id:"21--docker\u955c\u50cf\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4e8evarlibdocker",children:["2.1  docker\u955c\u50cf\u3001\u5bb9\u5668\u9ed8\u8ba4\u5b58\u653e\u4e8e",(0,d.jsx)(r.code,{children:"/var/lib/docker"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-python",children:"$ cd /var/lib/docker\n$ ls\nbuilder  buildkit  containers  image  network  overlay2  plugins  runtimes  swarm  tmp  trust  volumes\n"})}),"\n",(0,d.jsx)(r.h3,{id:"22-\u4fee\u6539docker\u955c\u50cf\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e",children:"2.2 \u4fee\u6539docker\u955c\u50cf\u3001\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e"}),"\n",(0,d.jsxs)(r.h4,{id:"221-\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6-etcdockerdaemonjson",children:["2.2.1 \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 ",(0,d.jsx)(r.code,{children:"/etc/docker/daemon.json"})]}),"\n",(0,d.jsx)(r.p,{children:"\u52a0\u5165\u4ee5\u4e0b\u4e00\u884c"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-json",children:'"graph": "/data/docker"\n'})}),"\n",(0,d.jsx)(r.h4,{id:"222-\u65b0\u5efa\u76ee\u5f55",children:"2.2.2 \u65b0\u5efa\u76ee\u5f55"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"mkdir -p /data/docker\n"})}),"\n",(0,d.jsx)(r.h4,{id:"223-\u67e5\u770b\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6",children:"2.2.3 \u67e5\u770b\u4fee\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:'$ cat /etc/docker/daemon.json\n{\n  "registry-mirrors": ["https://gqk8w9va.mirror.aliyuncs.com"],\n  "graph": "/data/docker"\n}\n'})}),"\n",(0,d.jsx)(r.h3,{id:"23-\u91cd\u542fdocker",children:"2.3 \u91cd\u542fdocker"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"systemctl restart docker\n"})}),"\n",(0,d.jsx)(r.h3,{id:"24-\u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55",children:"2.4 \u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55"}),"\n",(0,d.jsx)(r.h4,{id:"241-\u4fee\u6539\u5b8cdocker\u955c\u50cf\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e\u540e\u539f\u5148\u7684\u955c\u50cf\u548c\u5bb9\u5668\u67e5\u770b\u4e0d\u5b58\u5728",children:"2.4.1 \u4fee\u6539\u5b8cdocker\u955c\u50cf\u3001\u5bb9\u5668\u5b58\u653e\u4f4d\u7f6e\u540e\uff0c\u539f\u5148\u7684\u955c\u50cf\u548c\u5bb9\u5668\u67e5\u770b\u4e0d\u5b58\u5728"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n"})}),"\n",(0,d.jsx)(r.h4,{id:"242-\u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55",children:"2.4.2 \u62f7\u8d1d\u539f\u955c\u50cf\u548c\u5bb9\u5668\u5230\u65b0\u76ee\u5f55"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"\\cp -rp /var/lib/docker/* /data/docker/\n"})}),"\n",(0,d.jsx)(r.h4,{id:"243-\u91cd\u542fdocker",children:"2.4.3 \u91cd\u542fdocker"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"systemctl restart docker\n"})}),"\n",(0,d.jsx)(r.h4,{id:"244-\u67e5\u770b\u4fee\u6539",children:"2.4.4 \u67e5\u770b\u4fee\u6539"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"$ docker info|grep Docker\nDocker Root Dir: /data/docker\n"})}),"\n",(0,d.jsx)(r.h4,{id:"245-\u67e5\u770b\u955c\u50cf\u548c\u5bb9\u5668\u5df2\u6062\u590d",children:"2.4.5 \u67e5\u770b\u955c\u50cf\u548c\u5bb9\u5668\uff0c\u5df2\u6062\u590d"}),"\n",(0,d.jsx)(r.p,{children:"\u67e5\u770b\u955c\u50cf"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"$ docker images\nREPOSITORY           TAG                 IMAGE ID            CREATED             SIZE\njumpserver/jms_all   1.4.8               e9274ba449e8        3 months ago        1.31GB\n"})}),"\n",(0,d.jsx)(r.p,{children:"\u67e5\u770b\u5bb9\u5668"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:'docker ps -a\nCONTAINER ID        IMAGE                      COMMAND             CREATED             STATUS              PORTS                                        NAMES\n2789b0d4a200        jumpserver/jms_all:1.4.8   "entrypoint.sh"     About an hour ago   Up 49 seconds       0.0.0.0:80->80/tcp, 0.0.0.0:2222->2222/tcp   jms_all\n'})}),"\n",(0,d.jsxs)(r.h4,{id:"246-\u6d4b\u8bd5\u955c\u50cf\u548c\u5bb9\u5668\u90fd\u65e0\u95ee\u9898\u540e\u53ef\u4ee5\u5220\u9664\u76ee\u5f55-varlibdocker",children:["2.4.6 \u6d4b\u8bd5\u955c\u50cf\u548c\u5bb9\u5668\u90fd\u65e0\u95ee\u9898\u540e\u53ef\u4ee5\u5220\u9664\u76ee\u5f55 ",(0,d.jsx)(r.code,{children:"/var/lib/docker"})]}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-shell",children:"rm -rf /var/lib/docker\n"})})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},28453:(e,r,c)=>{c.d(r,{R:()=>s,x:()=>o});var d=c(96540);const n={},l=d.createContext(n);function s(e){const r=d.useContext(l);return d.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),d.createElement(l.Provider,{value:r},e.children)}}}]);