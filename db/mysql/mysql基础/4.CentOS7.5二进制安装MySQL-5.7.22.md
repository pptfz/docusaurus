# CentOS7.5二进制安装MySQL-5.7.22

**mysql-5.7.22二进制包下载地址	MD5值	9ef7a05695f8b4ea29f8d077c3b415e2**

https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz



**mysql-5.7.23二进制包下载地址	MD5值	d903d3dbf235b74059a4b3e216c71161**

https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz



**mysql-5.7.24二进制包下载地址	MD5值	9ef7a05695f8b4ea29f8d077c3b415e2**

https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz



⚠️⚠️⚠️

**二进制安装mysql的启动脚本和   安装目录/mysql/bin/mysqld_safe  这两个文件中都是默认/usr/local/mysql，如果安装目录不在/usr/local/下，需要修改这两个文件中的路径，即把/usr/local替换为mysql安装目录**

**sed -i 's#/usr/local#/application#g' /etc/init.d/mysql /application/mysql/bin/mysqld_safe**

---

# 1.下载MySQL-5.7.22二进制包

```python
[root@7-test1 ~]# wget https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz
```

# 2.解压缩mysql二进制包到/usr/local

```python
[root@7-test1 ~]# tar xf mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz -C /usr/local
```

# 3.修改名称、做软连接

```python
[root@7-test1 local]# mv /usr/local/mysql-5.7.22-linux-glibc2.12-x86_64 /usr/local/mysql-5.7.22 && \
ln -s /usr/local/mysql-5.7.22 /usr/local/mysql
```

# 4.创建mysql用户

```python
[root@7-test1 local]# groupadd mysql && useradd -g mysql -s /bin/false mysql
```

# 5.编辑主配置文件，myql-5.7.22二进制包默认没有mysql配置文件

```python
#备份/etc/my.cnf
[root@7-test1 local]# mv /etc/my.cnf /etc/my.cnf.old

#以下配置为最精简版，可根据实际情况进行相应设置
[root@7-test1~]# cat >> /etc/my.cnf <<EOF
[mysqld]
basedir=/usr/local/mysql
datadir=/usr/local/mysql/data
user=mysql
log-error=/usr/local/mysql/data/error.log
EOF
```

# 6.拷贝启动脚本

```python
[root@7-test1 ~]# cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
```

# 7.初始化mysql

```python
[root@7-test1 ~]# /usr/local/mysql/bin/mysqld --initialize-insecure --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data

--user 		                #指定mysql用户
--basedir 		            #指定mysql安装目录
--datadir		            #指定mysql数据目录
--initialize-insecure		#不生成随机密码

⚠️⚠️⚠️mysql-5.7.22初始化没有提示！！！
```

# 8.添加mysql命令环境变量

```python
#导出mysql命令环境变量
[root@7-test1 ~]# echo "export PATH=/usr/local/mysql/bin:$PATH" > /etc/profile.d/mysql.sh
[root@7-test1 ~]# cat /etc/profile.d/mysql.sh
export PATH=/usr/local/mysql/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin

#使配置生效
[root@7-test1 ~]# source /etc/profile
```

# 9.配置systemd管理mysql

```python
[root@7-test1 ~]# cat >> /etc/systemd/system/mysqld.service <<EOF
[Unit]
Description=MySQL Server
Documentation=man:mysqld(8)
Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html
After=network.target
After=syslog.target

[Install]
WantedBy=multi-user.target

[Service]
User=mysql
Group=mysql
ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf
LimitNOFILE = 5000
EOF


#重新加载systemd系统服务
[root@7-test1 ~]# systemctl daemon-reload
```

# 10.启动mysql、检查启动

```python
[root@7-test1 ~]# systemctl start mysqld &&  systemctl enable mysqld
[root@7-test1 ~]# netstat -ntpl  | grep 3306
tcp6       0      0 :::3306                 :::*                    LISTEN      31349/mysqld  
```

# 11.进入mysql并设置密码

```python
#进入mysql
[root@7-test1 ~]# mysql

#设置mysql密码
mysql> set password='123';
Query OK, 0 rows affected (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.01 sec)
```

**到此，mysql5.7.22二进制安装完成！！！**