# CentOS7.5二进制安装MySQL-5.6.40

**mysql-5.6.40二进制包下载地址	MD5值	10f61e60f8c42b6635e5c1f423bce8be**

https://cdn.mysql.com/archives/mysql-5.6/mysql-5.6.40-linux-glibc2.12-x86_64.tar.gz



**mysql-5.6.41二进制包下载地址	MD5值	 b0ac6851908b5c17b6a283d10709fcfd**

https://cdn.mysql.com/archives/mysql-5.6/mysql-5.6.41-linux-glibc2.12-x86_64.tar.gz	



**mysql-5.6.42二进制包下载地址	MD5值	fc8c6df660ba42b280c3b1d59bd8ee27**

https://cdn.mysql.com/archives/mysql-5.6/mysql-5.6.42-linux-glibc2.12-x86_64.tar.gz

---

# 1.下载MySQL-5.6.40二进制包

```python
[root@7-test1 ~]# wget https://cdn.mysql.com/archives/mysql-5.6/mysql-5.6.40-linux-glibc2.12-x86_64.tar.gz
```

# 2.解压缩mysql二进制包到/usr/local

```python
[root@7-test1 ~]# tar xf mysql-5.6.40-linux-glibc2.12-x86_64.tar.gz -C /usr/local
```

# 3.修改名称、做软连接

```python
[root@7-test1 ~]# cd /usr/local
[root@7-test1 local]# mv mysql-5.6.40-linux-glibc2.12-x86_64 mysql-5.6.40
[root@7-test1 local]# ln -s mysql-5.6.40 mysql
```



# 4.创建mysql用户

```python
#创建mysql用户
[root@7-test1 local]# useradd mysql -s /bin/false
```



# 5.拷贝主配置文件

```python
#备份/etc/my.cnf
[root@7-test1 local]# mv /etc/my.cnf /etc/my.cnf.old
[root@7-test1 local]# cd

#拷贝主配置文件
[root@7-test1 ~]# cp /usr/local/mysql/support-files/my-default.cnf /etc/my.cnf
```

# 6.拷贝启动脚本

```python
[root@7-test1 ~]# cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
```

# 7.初始化mysql

```python
[root@7-test1 ~]# cd /usr/local/mysql/scripts

#初始化前安装依赖包
[root@test1 scripts]# yum -y install autoconf

#初始化mysql
[root@7-test1 scripts]# ./mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data

--user 		#指定mysql用户
--basedir 		#指定mysql安装目录
--datadir		#指定mysql数据目录



⚠️
如果初始化报错
[root@7-test1 scripts]# ./mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data
FATAL ERROR: please install the following Perl modules before executing ./mysql_install_db:
Data::Dumper

原因：缺少autoconf依赖包

解决方法
[root@7-test1 scripts]# yum -y install autoconf
```

![clipboard](mysql安装.assets/clipboard.png)

# 8.添加mysql命令环境变量

```python
#导出mysql命令环境变量
[root@7-test1 scripts]# echo "export PATH=/usr/local/mysql/bin:$PATH" > /etc/profile.d/mysql.sh


[root@test1 scripts]# cat /etc/profile.d/mysql.sh
export PATH=/usr/local/mysql/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin

#使配置生效
[root@7-test1 scripts]# source /etc/profile
```

# 9.配置systemd管理mysql

```python
[root@7-test1 scripts]# cat > /etc/systemd/system/mysqld.service <<EOF
[Unit]
Description=MySQL Server
Documentation=man:mysqld(8)
Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html
After=network.target
After=syslog.target

[Install]
WantedBy=multi-user.target

[Service]
User=mysql
Group=mysql
ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf
LimitNOFILE = 5000
EOF
```

# 10.启动mysql、检查启动

```python
#启动mysql
[root@7-test1 scripts]# systemctl start mysqld && systemctl enable mysqld
[root@7-test1 scripts]# netstat -ntpl  | grep 3306
tcp6       0      0 :::3306                 :::*                    LISTEN      31349/mysqld  
```

# 11.进入mysql并设置密码

```python
#进入mysql
[root@7-test1 ~]# mysql

#设置mysql密码
mysql> set password='123';
Query OK, 0 rows affected (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.01 sec)
```

**到此，mysql5.6.40二进制安装完成！！！**

